(()=>{var pc={6281:(u,R,g)=>{"use strict";var _=g(7396),S=function(){function N(f){if(N.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=f,N.INSTANCE=this}return N.prototype.enable=function(f,o){_.IsInitialized&&(g(4309).wp(f&&o,this._client),g(5823).wp(f,this._client),g(454).wp(f,this._client))},N.prototype.isInitialized=function(){return this._isInitialized},N.prototype.dispose=function(){N.INSTANCE=null,this.enable(!1,!1)},N._methodNames=["debug","info","log","warn","error"],N}();u.exports=S},894:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(5282),S=g(7396),N=function(){function o(){}return o.getCurrentContext=function(){if(!o.enabled)return null;var l=o.session.get(o.CONTEXT_NAME);return l===void 0?null:l},o.generateContextObject=function(l,a,h,p,d,m){return a=a||l,this.enabled?{operation:{name:h,id:l,parentId:a,traceparent:d,tracestate:m},customProperties:new f(p)}:null},o.runWithContext=function(l,a){if(o.enabled)return o.session.bind(a,(h={},h[o.CONTEXT_NAME]=l,h))();return a();var h},o.wrapEmitter=function(l){o.enabled&&o.session.bindEmitter(l)},o.wrapCallback=function(l){return o.enabled?o.session.bind(l):l},o.enable=function(l){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}o.hasEverEnabled||(this.forceClsHooked=l,this.hasEverEnabled=!0,typeof this.cls=="undefined"&&(o.forceClsHooked===!0||o.forceClsHooked===void 0&&o.shouldUseClsHooked()?this.cls=g(9562):this.cls=g(3057)),o.session=this.cls.createNamespace("AI-CLS-Session"),S.registerContextPreservation(function(a){return o.session.bind(a)})),this.enabled=!0}},o.disable=function(){this.enabled=!1},o.reset=function(){o.hasEverEnabled&&(o.session=null,o.session=this.cls.createNamespace("AI-CLS-Session"))},o.isNodeVersionCompatible=function(){var l=process.versions.node.split(".");return parseInt(l[0])>3||parseInt(l[0])>2&&parseInt(l[1])>2},o.shouldUseClsHooked=function(){var l=process.versions.node.split(".");return parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=2},o.canUseClsHooked=function(){var l=process.versions.node.split("."),a=parseInt(l[0])>8||parseInt(l[0])>=8&&parseInt(l[1])>=0,h=parseInt(l[0])<8||parseInt(l[0])<=8&&parseInt(l[1])<2,p=parseInt(l[0])>4||parseInt(l[0])>=4&&parseInt(l[1])>=7;return!(a&&h)&&p},o.enabled=!1,o.hasEverEnabled=!1,o.forceClsHooked=void 0,o.CONTEXT_NAME="ApplicationInsights-Context",o}();R.CorrelationContextManager=N;var f=function(){function o(l){this.props=[],this.addHeaderData(l)}return o.prototype.addHeaderData=function(l){var a=l?l.split(", "):[];this.props=a.map(function(h){var p=h.split("=");return{key:p[0],value:p[1]}}).concat(this.props)},o.prototype.serializeToHeader=function(){return this.props.map(function(l){return l.key+"="+l.value}).join(", ")},o.prototype.getProperty=function(l){for(var a=0;a<this.props.length;++a){var h=this.props[a];if(h.key===l)return h.value}},o.prototype.setProperty=function(l,a){if(o.bannedCharacters.test(l)||o.bannedCharacters.test(a)){_.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+l+" and value: "+a);return}for(var h=0;h<this.props.length;++h){var p=this.props[h];if(p.key===l){p.value=a;return}}this.props.push({key:l,value:a})},o.bannedCharacters=/[,=]/,o}()},6639:u=>{"use strict";var R=function(){function g(_){if(g.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");g.INSTANCE=this,this._client=_;var S=process.versions.node.split(".");g._canUseUncaughtExceptionMonitor=parseInt(S[0])>13||parseInt(S[0])===13&&parseInt(S[1])>=7}return g.prototype.isInitialized=function(){return this._isInitialized},g.prototype.enable=function(_){var S=this;if(_){this._isInitialized=!0;var N=this;if(!this._exceptionListenerHandle){var f=function(o,l,a){a===void 0&&(a=new Error(g._FALLBACK_ERROR_MESSAGE)),S._client.trackException({exception:a}),S._client.flush({isAppCrashing:!0}),o&&l&&process.listeners(l).length===1&&(console.error(a),process.exit(1))};g._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=f.bind(this,!1),process.on(g.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=f.bind(this,!0,g.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=f.bind(this,!1),process.on(g.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(g.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(g._canUseUncaughtExceptionMonitor?process.removeListener(g.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(g.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(g.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},g.prototype.dispose=function(){g.INSTANCE=null,this.enable(!1),this._isInitialized=!1},g.INSTANCE=null,g.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",g.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",g.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",g._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",g._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",g._canUseUncaughtExceptionMonitor=!1,g}();u.exports=R},8723:(u,R,g)=>{"use strict";var _=g(8605),S=g(7211),N=g(5282),f=g(5740),o=g(9036),l=g(8339),a=g(894),h=g(9962),p=g(8090),d=g(7396),m=function(){function k(y){if(k.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");k.INSTANCE=this,this._client=y}return k.prototype.enable=function(y){this._isEnabled=y,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(g(7886).wp(y,this._client),g(4777).wp(y,this._client),g(5071).wp(y,this._client),g(1227).wp(y,this._client))},k.prototype.isInitialized=function(){return this._isInitialized},k.prototype._initialize=function(){var y=this;this._isInitialized=!0;var E=_.get,C=_.request,P=S.request,O=function(U,A){var $=!A[k.disableCollectionRequestOption]&&!U[k.alreadyAutoCollectedFlag];U[k.alreadyAutoCollectedFlag]=!0,U&&A&&$&&(a.CorrelationContextManager.wrapEmitter(U),k.trackRequest(y._client,{options:A,request:U}))};_.request=function(U){for(var A=[],$=1;$<arguments.length;$++)A[$-1]=arguments[$];var x=C.call.apply(C,[_,U].concat(A));return O(x,U),x},S.request=function(U){for(var A=[],$=1;$<arguments.length;$++)A[$-1]=arguments[$];var x=P.call.apply(P,[S,U].concat(A));return O(x,U),x},_.get=function(U){for(var A=[],$=1;$<arguments.length;$++)A[$-1]=arguments[$];var x=(G=_.request).call.apply(G,[_,U].concat(A));return x.end(),x;var G},S.get=function(U){for(var A=[],$=1;$<arguments.length;$++)A[$-1]=arguments[$];var x=(G=S.request).call.apply(G,[S,U].concat(A));return x.end(),x;var G}},k.trackRequest=function(y,E){if(!E.options||!E.request||!y){N.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!E.options,!E.request,!y);return}var C=new l(E.options,E.request),P=a.CorrelationContextManager.getCurrentContext(),O,U;if(P&&P.operation&&P.operation.traceparent&&p.isValidTraceId(P.operation.traceparent.traceId))P.operation.traceparent.updateSpanId(),O=P.operation.traceparent.getBackCompatRequestId();else if(h.w3cEnabled){var A=new p;U=A.toString(),O=A.getBackCompatRequestId()}else O=P&&P.operation&&P.operation.parentId+k.requestNumber+++".";if(f.canIncludeCorrelationHeader(y,C.getUrl())&&E.request.getHeader&&E.request.setHeader&&y.config&&y.config.correlationId){var $=E.request.getHeader(o.requestContextHeader);try{f.safeIncludeCorrelationHeader(y,E.request,$)}catch(q){N.warn("Request-Context header could not be set. Correlation of requests may be lost",q)}if(P&&P.operation)try{if(E.request.setHeader(o.requestIdHeader,O),E.request.setHeader(o.parentIdHeader,P.operation.id),E.request.setHeader(o.rootIdHeader,O),U||P.operation.traceparent)E.request.setHeader(o.traceparentHeader,U||P.operation.traceparent.toString());else if(h.w3cEnabled){var A=new p().toString();E.request.setHeader(o.traceparentHeader,A)}if(P.operation.tracestate){var x=P.operation.tracestate.toString();x&&E.request.setHeader(o.traceStateHeader,x)}var G=P.customProperties.serializeToHeader();G&&E.request.setHeader(o.correlationContextHeader,G)}catch(q){N.warn("Correlation headers could not be set. Correlation of requests may be lost.",q)}}E.request.on&&(E.request.on("response",function(q){C.onResponse(q);var L=C.getDependencyTelemetry(E,O);L.contextObjects=L.contextObjects||{},L.contextObjects["http.RequestOptions"]=E.options,L.contextObjects["http.ClientRequest"]=E.request,L.contextObjects["http.ClientResponse"]=q,y.trackDependency(L)}),E.request.on("error",function(q){C.onError(q);var L=C.getDependencyTelemetry(E,O);L.contextObjects=L.contextObjects||{},L.contextObjects["http.RequestOptions"]=E.options,L.contextObjects["http.ClientRequest"]=E.request,L.contextObjects.Error=q,y.trackDependency(L)}))},k.prototype.dispose=function(){k.INSTANCE=null,this.enable(!1),this._isInitialized=!1},k.disableCollectionRequestOption="disableAppInsightsAutoCollection",k.requestNumber=1,k.alreadyAutoCollectedFlag="_appInsightsAutoCollected",k}();u.exports=m},8339:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var k in m)m.hasOwnProperty(k)&&(d[k]=m[k])};return function(d,m){p(d,m);function k(){this.constructor=d}d.prototype=m===null?Object.create(m):(k.prototype=m.prototype,new k)}}(),S=g(8835),N=g(5290),f=g(5740),o=g(9036),l=g(3054),a=g(9962),h=function(p){_(d,p);function d(m,k){var y=p.call(this)||this;return k&&k.method&&m&&(y.method=k.method,y.url=d._getUrlFromRequestOptions(m,k),y.startTime=+new Date),y}return d.prototype.onError=function(m){this._setStatus(void 0,m)},d.prototype.onResponse=function(m){this._setStatus(m.statusCode,void 0),this.correlationId=f.getCorrelationContextTarget(m,o.requestContextTargetKey)},d.prototype.getDependencyTelemetry=function(m,k){var y=S.parse(this.url);y.search=void 0,y.hash=void 0;var E=this.method.toUpperCase()+" "+y.pathname,C=N.RemoteDependencyDataConstants.TYPE_HTTP,P=y.hostname;this.correlationId?(C=N.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==a.correlationIdPrefix&&(P=y.hostname+" | "+this.correlationId)):C=N.RemoteDependencyDataConstants.TYPE_HTTP,y.port&&(P+=":"+y.port);var O={id:k,name:E,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:C,target:P};if(m){for(var U in m)O[U]||(O[U]=m[U]);if(m.properties)for(var U in m.properties)O.properties[U]=m.properties[U]}return O},d._getUrlFromRequestOptions=function(m,k){if(typeof m=="string")m=S.parse(m);else{var y=m;m={},y&&Object.keys(y).forEach(function(P){m[P]=y[P]})}if(m.path){var E=S.parse(m.path);m.pathname=E.pathname,m.search=E.search}if(m.host&&m.port){var C=S.parse("http://"+m.host);!C.port&&m.port&&(m.hostname=m.host,delete m.host)}return m.protocol=m.protocol||k.agent&&k.agent.protocol||void 0,m.hostname=m.hostname||"localhost",S.format(m)},d}(l);u.exports=h},6694:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,y){k.__proto__=y}||function(k,y){for(var E in y)y.hasOwnProperty(E)&&(k[E]=y[E])};return function(k,y){m(k,y);function E(){this.constructor=k}k.prototype=y===null?Object.create(y):(E.prototype=y.prototype,new E)}}(),S=g(8835),N=g(5290),f=g(5740),o=g(9036),l=g(3054),a=g(9962),h=g(6333),p=g(8090),d=function(m){_(k,m);function k(y,E){var C=m.call(this)||this;return y&&(C.method=y.method,C.url=C._getAbsoluteUrl(y),C.startTime=+new Date,C.socketRemoteAddress=y.socket&&y.socket.remoteAddress,C.parseHeaders(y,E),y.connection&&(C.connectionRemoteAddress=y.connection.remoteAddress,C.legacySocketRemoteAddress=y.connection.socket&&y.connection.socket.remoteAddress)),C}return k.prototype.onError=function(y,E){this._setStatus(void 0,y),E&&(this.duration=E)},k.prototype.onResponse=function(y,E){this._setStatus(y.statusCode,void 0),E&&(this.duration=E)},k.prototype.getRequestTelemetry=function(y){var E={id:this.requestId,name:this.method+" "+S.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(y){for(var C in y)E[C]||(E[C]=y[C]);if(y.properties)for(var C in y.properties)E.properties[C]=y.properties[C]}return E},k.prototype.getRequestTags=function(y){var E={};for(var C in y)E[C]=y[C];return E[k.keys.locationIp]=y[k.keys.locationIp]||this._getIp(),E[k.keys.sessionId]=y[k.keys.sessionId]||this._getId("ai_session"),E[k.keys.userId]=y[k.keys.userId]||this._getId("ai_user"),E[k.keys.userAuthUserId]=y[k.keys.userAuthUserId]||this._getId("ai_authUser"),E[k.keys.operationName]=this.getOperationName(y),E[k.keys.operationParentId]=this.getOperationParentId(y),E[k.keys.operationId]=this.getOperationId(y),E},k.prototype.getOperationId=function(y){return y[k.keys.operationId]||this.operationId},k.prototype.getOperationParentId=function(y){return y[k.keys.operationParentId]||this.parentId||this.getOperationId(y)},k.prototype.getOperationName=function(y){return y[k.keys.operationName]||this.method+" "+S.parse(this.url).pathname},k.prototype.getRequestId=function(){return this.requestId},k.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},k.prototype.getTraceparent=function(){return this.traceparent},k.prototype.getTracestate=function(){return this.tracestate},k.prototype.getLegacyRootId=function(){return this.legacyRootId},k.prototype._getAbsoluteUrl=function(y){if(!y.headers)return y.url;var E=y.connection?y.connection.encrypted:null,C=S.parse(y.url),P=C.pathname,O=C.search,U=S.format({protocol:E?"https":"http",host:y.headers.host,pathname:P,search:O});return U},k.prototype._getIp=function(){var y=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,E=function(P){var O=y.exec(P);if(O)return O[0]},C=E(this.rawHeaders["x-forwarded-for"])||E(this.rawHeaders["x-client-ip"])||E(this.rawHeaders["x-real-ip"])||E(this.connectionRemoteAddress)||E(this.socketRemoteAddress)||E(this.legacySocketRemoteAddress);return!C&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(C="127.0.0.1"),C},k.prototype._getId=function(y){var E=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",C=k.parseId(f.getCookie(y,E));return C},k.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},k.prototype.parseHeaders=function(y,E){if(this.rawHeaders=y.headers||y.rawHeaders,this.userAgent=y.headers&&y.headers["user-agent"],this.sourceCorrelationId=f.getCorrelationContextTarget(y,o.requestContextSourceKey),y.headers){var C=y.headers[o.traceStateHeader],P=y.headers[o.traceparentHeader],O=y.headers[o.requestIdHeader],U=y.headers[o.parentIdHeader],A=y.headers[o.rootIdHeader];this.correlationContextHeader=y.headers[o.correlationContextHeader],a.w3cEnabled&&(P||C)?(this.traceparent=new p(P),this.tracestate=P&&C&&new h(C),this.setBackCompatFromThisTraceContext()):O?a.w3cEnabled?(this.traceparent=new p(null,O),this.setBackCompatFromThisTraceContext()):(this.parentId=O,this.requestId=a.generateRequestId(this.parentId),this.operationId=a.getRootId(this.requestId)):a.w3cEnabled?(this.traceparent=new p,this.traceparent.parentId=U,this.traceparent.legacyRootId=A||U,this.setBackCompatFromThisTraceContext()):(this.parentId=U,this.requestId=a.generateRequestId(A||this.parentId),this.correlationContextHeader=null,this.operationId=a.getRootId(this.requestId)),E&&(this.requestId=E,this.operationId=a.getRootId(this.requestId))}},k.parseId=function(y){var E=y.split("|");return E.length>0?E[0]:""},k.keys=new N.ContextTagKeys,k}(l);u.exports=d},731:(u,R,g)=>{"use strict";var _=g(8605),S=g(7211),N=g(5282),f=g(5740),o=g(9036),l=g(6694),a=g(894),h=g(4350),p=function(){function d(m){if(d.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");d.INSTANCE=this,this._client=m}return d.prototype.enable=function(m){this._isEnabled=m,(this._isAutoCorrelating||this._isEnabled||h.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},d.prototype.useAutoCorrelation=function(m,k){m&&!this._isAutoCorrelating?a.CorrelationContextManager.enable(k):!m&&this._isAutoCorrelating&&a.CorrelationContextManager.disable(),this._isAutoCorrelating=m},d.prototype.isInitialized=function(){return this._isInitialized},d.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},d.prototype._generateCorrelationContext=function(m){if(!!this._isAutoCorrelating)return a.CorrelationContextManager.generateContextObject(m.getOperationId(this._client.context.tags),m.getRequestId(),m.getOperationName(this._client.context.tags),m.getCorrelationContextHeader(),m.getTraceparent(),m.getTracestate())},d.prototype._initialize=function(){var m=this;this._isInitialized=!0;var k=function(P){if(!!P){if(typeof P!="function")throw new Error("onRequest handler must be a function");return function(O,U){a.CorrelationContextManager.wrapEmitter(O),a.CorrelationContextManager.wrapEmitter(U);var A=O&&!O[d.alreadyAutoCollectedFlag];if(O&&A){var $=new l(O),x=m._generateCorrelationContext($);a.CorrelationContextManager.runWithContext(x,function(){m._isEnabled&&(O[d.alreadyAutoCollectedFlag]=!0,d.trackRequest(m._client,{request:O,response:U},$)),typeof P=="function"&&P(O,U)})}else typeof P=="function"&&P(O,U)}}},y=function(P){var O=P.addListener.bind(P);P.addListener=function(U,A){switch(U){case"request":case"checkContinue":return O(U,k(A));default:return O(U,A)}},P.on=P.addListener},E=_.createServer;_.createServer=function(P){var O=E(k(P));return y(O),O};var C=S.createServer;S.createServer=function(P,O){var U=C(P,k(O));return y(U),U}},d.trackRequestSync=function(m,k){if(!k.request||!k.response||!m){N.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!k.request,!k.response,!m);return}d.addResponseCorrelationIdHeader(m,k.response);var y=a.CorrelationContextManager.getCurrentContext(),E=new l(k.request,y&&y.operation.parentId);y&&(y.operation.id=E.getOperationId(m.context.tags)||y.operation.id,y.operation.name=E.getOperationName(m.context.tags)||y.operation.name,y.operation.parentId=E.getRequestId()||y.operation.parentId,y.customProperties.addHeaderData(E.getCorrelationContextHeader())),d.endRequest(m,E,k,k.duration,k.error)},d.trackRequest=function(m,k,y){if(!k.request||!k.response||!m){N.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!k.request,!k.response,!m);return}var E=a.CorrelationContextManager.getCurrentContext(),C=y||new l(k.request,E&&E.operation.parentId);f.canIncludeCorrelationHeader(m,C.getUrl())&&d.addResponseCorrelationIdHeader(m,k.response),E&&!y&&(E.operation.id=C.getOperationId(m.context.tags)||E.operation.id,E.operation.name=C.getOperationName(m.context.tags)||E.operation.name,E.operation.parentId=C.getOperationParentId(m.context.tags)||E.operation.parentId,E.customProperties.addHeaderData(C.getCorrelationContextHeader())),k.response.once&&k.response.once("finish",function(){d.endRequest(m,C,k,null,null)}),k.request.on&&k.request.on("error",function(P){d.endRequest(m,C,k,null,P)})},d.addResponseCorrelationIdHeader=function(m,k){if(m.config&&m.config.correlationId&&k.getHeader&&k.setHeader&&!k.headersSent){var y=k.getHeader(o.requestContextHeader);f.safeIncludeCorrelationHeader(m,k,y)}},d.endRequest=function(m,k,y,E,C){C?k.onError(C,E):k.onResponse(y.response,E);var P=k.getRequestTelemetry(y);if(P.tagOverrides=k.getRequestTags(m.context.tags),y.tagOverrides)for(var O in y.tagOverrides)P.tagOverrides[O]=y.tagOverrides[O];var U=k.getLegacyRootId();U&&(P.properties.ai_legacyRootId=U),P.contextObjects=P.contextObjects||{},P.contextObjects["http.ServerRequest"]=y.request,P.contextObjects["http.ServerResponse"]=y.response,m.trackRequest(P)},d.prototype.dispose=function(){d.INSTANCE=null,this.enable(!1),this._isInitialized=!1,a.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},d.alreadyAutoCollectedFlag="_appInsightsAutoCollected",d}();u.exports=p},1629:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(l){for(var a,h=1,p=arguments.length;h<p;h++){a=arguments[h];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(l[d]=a[d])}return l};Object.defineProperty(R,"__esModule",{value:!0});var S=g(9253),N=g(4470),f=g(5282),o=function(){function l(a){this._disabledMetrics={},l.INSTANCE&&l.INSTANCE.dispose(),l.INSTANCE=this,this._client=a}return l.isNodeVersionCompatible=function(){var a=process.versions.node.split(".");return parseInt(a[0])>=6},l.prototype.enable=function(a,h,p){var d=this;if(h===void 0&&(h={}),p===void 0&&(p=6e4),!!l.isNodeVersionCompatible()){if(l._metricsAvailable==null&&a&&!this._isInitialized)try{var m=g(6591);l._emitter=new m,l._metricsAvailable=!0,f.info("Native metrics module successfully loaded!")}catch(k){l._metricsAvailable=!1;return}this._isEnabled=a,this._disabledMetrics=h,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&l._emitter?(l._emitter.enable(!0,p),this._handle=setInterval(function(){return d._trackNativeMetrics()},p),this._handle.unref()):l._emitter&&(l._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},l.prototype.dispose=function(){this.enable(!1)},l.parseEnabled=function(a){var h=process.env[S.ENV_nativeMetricsDisableAll],p=process.env[S.ENV_nativeMetricsDisablers];if(h)return{isEnabled:!1,disabledMetrics:{}};if(p){var d=p.split(","),m={};if(d.length>0)for(var k=0,y=d;k<y.length;k++){var E=y[k];m[E]=!0}return typeof a=="object"?{isEnabled:!0,disabledMetrics:_({},a,m)}:{isEnabled:a,disabledMetrics:m}}return typeof a=="boolean"?{isEnabled:a,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:a}},l.prototype._trackNativeMetrics=function(){var a=!0;typeof this._isEnabled!="object"&&(a=this._isEnabled),a&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},l.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var a=l._emitter.getGCData();for(var h in a){var p=a[h].metrics,d=h+" Garbage Collection Duration",m=Math.sqrt(p.sumSquares/p.count-Math.pow(p.total/p.count,2))||0;this._client.trackMetric({name:d,value:p.total,count:p.count,max:p.max,min:p.min,stdDev:m,tagOverrides:(k={},k[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+N.sdkVersion,k)})}var k}},l.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var a=l._emitter.getLoopData(),h=a.loopUsage;if(h.count!=0){var p="Event Loop CPU Time",d=Math.sqrt(h.sumSquares/h.count-Math.pow(h.total/h.count,2))||0;this._client.trackMetric({name:p,value:h.total,count:h.count,min:h.min,max:h.max,stdDev:d,tagOverrides:(m={},m[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+N.sdkVersion,m)});var m}}},l.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var a=process.memoryUsage(),h=a.heapUsed,p=a.heapTotal,d=a.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:h,count:1,tagOverrides:(m={},m[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+N.sdkVersion,m)}),this._client.trackMetric({name:"Memory Total (Heap)",value:p,count:1,tagOverrides:(k={},k[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+N.sdkVersion,k)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:d-p,count:1,tagOverrides:(y={},y[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+N.sdkVersion,y)});var m,k,y}},l}();R.AutoCollectNativePerformance=o},4350:(u,R,g)=>{"use strict";var _=g(2087),S=g(3580),N=function(){function f(o,l,a){l===void 0&&(l=6e4),a===void 0&&(a=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,f.INSTANCE||(f.INSTANCE=this),this._isInitialized=!1,this._client=o,this._collectionInterval=l,this._enableLiveMetricsCounters=a}return f.prototype.enable=function(o,l){var a=this;this._isEnabled=o,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),o?this._handle||(this._lastCpus=_.cpus(),this._lastRequests={totalRequestCount:f._totalRequestCount,totalFailedRequestCount:f._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:f._totalDependencyCount,totalFailedDependencyCount:f._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:f._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=l||this._collectionInterval,this._handle=setInterval(function(){return a.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},f.countRequest=function(o,l){var a;if(!!f.isEnabled()){if(typeof o=="string")a=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")a=o;else return;f._intervalRequestExecutionTime+=a,l===!1&&f._totalFailedRequestCount++,f._totalRequestCount++}},f.countException=function(){f._totalExceptionCount++},f.countDependency=function(o,l){var a;if(!!f.isEnabled()){if(typeof o=="string")a=+new Date("1970-01-01T"+o+"Z");else if(typeof o=="number")a=o;else return;f._intervalDependencyExecutionTime+=a,l===!1&&f._totalFailedDependencyCount++,f._totalDependencyCount++}},f.prototype.isInitialized=function(){return this._isInitialized},f.isEnabled=function(){return f.INSTANCE&&f.INSTANCE._isEnabled},f.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},f.prototype._trackCpu=function(){var o=_.cpus();if(o&&o.length&&this._lastCpus&&o.length===this._lastCpus.length){for(var l=0,a=0,h=0,p=0,d=0,m=0;!!o&&m<o.length;m++){var k=o[m],y=this._lastCpus[m],E="% cpu("+m+") ",C=k.model,P=k.speed,O=k.times,U=y.times,A=O.user-U.user||0;l+=A;var $=O.sys-U.sys||0;a+=$;var x=O.nice-U.nice||0;h+=x;var G=O.idle-U.idle||0;p+=G;var q=O.irq-U.irq||0;d+=q}var L=void 0;if(typeof process.cpuUsage=="function"){var M=process.cpuUsage(),B=process.hrtime(),K=M.user-this._lastAppCpuUsage.user+(M.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime!="undefined"&&this._lastHrtime.length===2){var Y=(B[0]-this._lastHrtime[0])*1e6+(B[1]-this._lastHrtime[1])/1e3||0;L=100*K/(Y*o.length)}this._lastAppCpuUsage=M,this._lastHrtime=B}var Q=l+a+h+p+d||1;this._client.trackMetric({name:S.PerformanceCounter.PROCESSOR_TIME,value:(Q-p)/Q*100}),this._client.trackMetric({name:S.PerformanceCounter.PROCESS_TIME,value:L||l/Q*100})}this._lastCpus=o},f.prototype._trackMemory=function(){var o=_.freemem(),l=process.memoryUsage().rss,a=_.totalmem()-o;this._client.trackMetric({name:S.PerformanceCounter.PRIVATE_BYTES,value:l}),this._client.trackMetric({name:S.PerformanceCounter.AVAILABLE_BYTES,value:o}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:S.QuickPulseCounter.COMMITTED_BYTES,value:a})},f.prototype._trackNetwork=function(){var o=this._lastRequests,l={totalRequestCount:f._totalRequestCount,totalFailedRequestCount:f._totalFailedRequestCount,time:+new Date},a=l.totalRequestCount-o.totalRequestCount||0,h=l.totalFailedRequestCount-o.totalFailedRequestCount||0,p=l.time-o.time,d=p/1e3,m=(f._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/a||0;if(this._lastIntervalRequestExecutionTime=f._intervalRequestExecutionTime,p>0){var k=a/d,y=h/d;this._client.trackMetric({name:S.PerformanceCounter.REQUEST_RATE,value:k}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:S.PerformanceCounter.REQUEST_DURATION,value:m}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:S.QuickPulseCounter.REQUEST_FAILURE_RATE,value:y})}this._lastRequests=l},f.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastDependencies,l={totalDependencyCount:f._totalDependencyCount,totalFailedDependencyCount:f._totalFailedDependencyCount,time:+new Date},a=l.totalDependencyCount-o.totalDependencyCount||0,h=l.totalFailedDependencyCount-o.totalFailedDependencyCount||0,p=l.time-o.time,d=p/1e3,m=(f._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/a||0;if(this._lastIntervalDependencyExecutionTime=f._intervalDependencyExecutionTime,p>0){var k=a/d,y=h/d;this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_RATE,value:k}),this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:y}),(!this._enableLiveMetricsCounters||a>0)&&this._client.trackMetric({name:S.QuickPulseCounter.DEPENDENCY_DURATION,value:m})}this._lastDependencies=l}},f.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var o=this._lastExceptions,l={totalExceptionCount:f._totalExceptionCount,time:+new Date},a=l.totalExceptionCount-o.totalExceptionCount||0,h=l.time-o.time,p=h/1e3;if(h>0){var d=a/p;this._client.trackMetric({name:S.QuickPulseCounter.EXCEPTION_RATE,value:d})}this._lastExceptions=l}},f.prototype.dispose=function(){f.INSTANCE=null,this.enable(!1),this._isInitialized=!1},f._totalRequestCount=0,f._totalFailedRequestCount=0,f._lastRequestExecutionTime=0,f._totalDependencyCount=0,f._totalFailedDependencyCount=0,f._lastDependencyExecutionTime=0,f._totalExceptionCount=0,f._intervalDependencyExecutionTime=0,f._intervalRequestExecutionTime=0,f}();u.exports=N},3054:u=>{"use strict";var R=function(){function g(){}return g.prototype.getUrl=function(){return this.url},g.prototype.RequestParser=function(){this.startTime=+new Date},g.prototype._setStatus=function(_,S){var N=+new Date;this.duration=N-this.startTime,this.statusCode=_;var f=this.properties||{};if(S){if(typeof S=="string")f.error=S;else if(S instanceof Error)f.error=S.message;else if(typeof S=="object")for(var o in S)f[o]=S[o]&&S[o].toString&&S[o].toString()}this.properties=f},g.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},g}();u.exports=R},5823:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(5290),N=g(4953),f=[],o={10:S.SeverityLevel.Verbose,20:S.SeverityLevel.Verbose,30:S.SeverityLevel.Information,40:S.SeverityLevel.Warning,50:S.SeverityLevel.Error,60:S.SeverityLevel.Critical},l=function(p){var d=p.data.result;f.forEach(function(m){var k=o[p.data.level];d instanceof Error?m.trackException({exception:d}):m.trackTrace({message:d,severity:k})})};function a(p,d){p?(f.length===0&&N.channel.subscribe("bunyan",l),f.push(d)):(f=f.filter(function(m){return m!=d}),f.length===0&&N.channel.unsubscribe("bunyan",l))}R.wp=a;function h(){N.channel.unsubscribe("bunyan",l),f=[]}_=h},4309:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(5290),N=g(4953),f=[],o=function(h){var p=h.data.message;f.forEach(function(d){p instanceof Error?d.trackException({exception:p}):(p.lastIndexOf(`
`)==p.length-1&&(p=p.substring(0,p.length-1)),d.trackTrace({message:p,severity:h.data.stderr?S.SeverityLevel.Warning:S.SeverityLevel.Information}))})};function l(h,p){h?(f.length===0&&N.channel.subscribe("console",o),f.push(p)):(f=f.filter(function(d){return d!=p}),f.length===0&&N.channel.unsubscribe("console",o))}R.wp=l;function a(){N.channel.unsubscribe("console",o),f=[]}_=a},7396:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(5282);R.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var S="DiagnosticChannel";if(R.IsInitialized){var N=g(4106),f=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",o=f.split(","),l={bunyan:N.bunyan,console:N.console,mongodb:N.mongodb,mongodbCore:N.mongodbCore,mysql:N.mysql,redis:N.redis,pg:N.pg,pgPool:N.pgPool,winston:N.winston};for(var a in l)o.indexOf(a)===-1&&(l[a].enable(),_.info(S,"Subscribed to "+a+" events"));o.length>0&&_.info(S,"Some modules will not be patched",o)}else _.info(S,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");function h(p){!R.IsInitialized||g(4953).channel.addContextPreservation(p)}R.registerContextPreservation=h},7886:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(4953),N=[];R.qP=function(o){o.data.event.commandName==="ismaster",N.forEach(function(l){var a=o.data.startedData&&o.data.startedData.databaseName||"Unknown database";l.trackDependency({target:a,data:o.data.event.commandName,name:o.data.event.commandName,duration:o.data.event.duration,success:o.data.succeeded,resultCode:o.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})})};function f(o,l){o?(N.length===0&&S.channel.subscribe("mongodb",R.qP),N.push(l)):(N=N.filter(function(a){return a!=l}),N.length===0&&S.channel.unsubscribe("mongodb",R.qP))}R.wp=f},4777:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(4953),N=[];R.qP=function(o){N.forEach(function(l){var a=o.data.query||{},h=a.sql||"Unknown query",p=!o.data.err,d=a._connection||{},m=d.config||{},k=m.socketPath?m.socketPath:(m.host||"localhost")+":"+m.port;l.trackDependency({target:k,data:h,name:h,duration:o.data.duration,success:p,resultCode:p?"0":"1",dependencyTypeName:"mysql"})})};function f(o,l){o?(N.length===0&&S.channel.subscribe("mysql",R.qP),N.push(l)):(N=N.filter(function(a){return a!=l}),N.length===0&&S.channel.unsubscribe("mysql",R.qP))}R.wp=f},1227:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(4953),N=[];R.qP=function(o){N.forEach(function(l){var a=o.data.query,h=a.preparable&&a.preparable.text||a.plan||a.text||"unknown query",p=!o.data.error,d=o.data.database.host+":"+o.data.database.port;l.trackDependency({target:d,data:h,name:h,duration:o.data.duration,success:p,resultCode:p?"0":"1",dependencyTypeName:"postgres"})})};function f(o,l){o?(N.length===0&&S.channel.subscribe("postgres",R.qP),N.push(l)):(N=N.filter(function(a){return a!=l}),N.length===0&&S.channel.unsubscribe("postgres",R.qP))}R.wp=f},5071:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(4953),N=[];R.qP=function(o){N.forEach(function(l){o.data.commandObj.command!=="info"&&l.trackDependency({target:o.data.address,name:o.data.commandObj.command,data:o.data.commandObj.command,duration:o.data.duration,success:!o.data.err,resultCode:o.data.err?"1":"0",dependencyTypeName:"redis"})})};function f(o,l){o?(N.length===0&&S.channel.subscribe("redis",R.qP),N.push(l)):(N=N.filter(function(a){return a!=l}),N.length===0&&S.channel.unsubscribe("redis",R.qP))}R.wp=f},454:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(5290),N=g(4953),f=[],o={syslog:function(p){var d={emerg:S.SeverityLevel.Critical,alert:S.SeverityLevel.Critical,crit:S.SeverityLevel.Critical,error:S.SeverityLevel.Error,warning:S.SeverityLevel.Warning,notice:S.SeverityLevel.Information,info:S.SeverityLevel.Information,debug:S.SeverityLevel.Verbose};return d[p]===void 0?S.SeverityLevel.Information:d[p]},npm:function(p){var d={error:S.SeverityLevel.Error,warn:S.SeverityLevel.Warning,info:S.SeverityLevel.Information,verbose:S.SeverityLevel.Verbose,debug:S.SeverityLevel.Verbose,silly:S.SeverityLevel.Verbose};return d[p]===void 0?S.SeverityLevel.Information:d[p]},unknown:function(p){return S.SeverityLevel.Information}},l=function(p){var d=p.data.message;f.forEach(function(m){if(d instanceof Error)m.trackException({exception:d,properties:p.data.meta});else{var k=o[p.data.levelKind](p.data.level);m.trackTrace({message:d,severity:k,properties:p.data.meta})}})};function a(p,d){p?(f.length===0&&N.channel.subscribe("winston",l),f.push(d)):(f=f.filter(function(m){return m!=d}),f.length===0&&N.channel.unsubscribe("winston",l))}R.wp=a;function h(){N.channel.unsubscribe("winston",l),f=[]}_=h},3580:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",R.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",R.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var g;(function(N){N.COMMITTED_BYTES="\\Memory\\Committed Bytes",N.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",N.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",N.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",N.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",N.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",N.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",N.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",N.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(g=R.QuickPulseCounter||(R.QuickPulseCounter={}));var _;(function(N){N.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",N.AVAILABLE_BYTES="\\Memory\\Available Bytes",N.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",N.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",N.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",N.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(_=R.PerformanceCounter||(R.PerformanceCounter={})),R.PerformanceToQuickPulseCounter=(S={},S[_.PROCESSOR_TIME]=g.PROCESSOR_TIME,S[_.REQUEST_RATE]=g.REQUEST_RATE,S[_.REQUEST_DURATION]=g.REQUEST_DURATION,S[g.COMMITTED_BYTES]=g.COMMITTED_BYTES,S[g.REQUEST_FAILURE_RATE]=g.REQUEST_FAILURE_RATE,S[g.DEPENDENCY_RATE]=g.DEPENDENCY_RATE,S[g.DEPENDENCY_FAILURE_RATE]=g.DEPENDENCY_FAILURE_RATE,S[g.DEPENDENCY_DURATION]=g.DEPENDENCY_DURATION,S[g.EXCEPTION_RATE]=g.EXCEPTION_RATE,S),R.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"},R.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"},R.TelemetryTypeStringToQuickPulseType={EventData:R.QuickPulseType.Event,ExceptionData:R.QuickPulseType.Exception,MessageData:R.QuickPulseType.Trace,MetricData:R.QuickPulseType.Metric,RequestData:R.QuickPulseType.Request,RemoteDependencyData:R.QuickPulseType.Dependency,AvailabilityData:R.QuickPulseType.Availability},R.TelemetryTypeStringToQuickPulseDocumentType={EventData:R.QuickPulseDocumentType.Event,ExceptionData:R.QuickPulseDocumentType.Exception,MessageData:R.QuickPulseDocumentType.Trace,MetricData:R.QuickPulseDocumentType.Metric,RequestData:R.QuickPulseDocumentType.Request,RemoteDependencyData:R.QuickPulseDocumentType.Dependency,AvailabilityData:R.QuickPulseDocumentType.Availability};var S},9382:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(9958),S=function(){function f(){}return f.TYPE_HTTP="Http",f.TYPE_AI="Http (tracked component)",f}();R.RemoteDependencyDataConstants=S;function N(f){return"properties"in f||f instanceof _.EventData||f instanceof _.ExceptionData||f instanceof _.MessageData||f instanceof _.MetricData||f instanceof _.PageViewData||f instanceof _.RemoteDependencyData||f instanceof _.RequestData}R.domainSupportsProperties=N},7220:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.properties={},l.measurements={},l}return o}(S);u.exports=N},4101:u=>{"use strict";var R=function(){function g(){}return g}();u.exports=R},9871:u=>{"use strict";var R=function(){function g(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return g}();u.exports=R},320:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(4101),N=function(f){_(o,f);function o(){return f.call(this)||this}return o}(S);u.exports=N},8602:(u,R,g)=>{"use strict";var _=g(495),S=function(){function N(){this.kind=_.Measurement}return N}();u.exports=S},495:u=>{"use strict";var R;(function(g){g[g.Measurement=0]="Measurement",g[g.Aggregation=1]="Aggregation"})(R||(R={})),u.exports=R},8934:u=>{"use strict";var R=function(){function g(){}return g}();u.exports=R},7300:u=>{"use strict";var R=function(){function g(){this.ver=1,this.sampleRate=100,this.tags={}}return g}();u.exports=R},4526:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.properties={},l.measurements={},l}return o}(S);u.exports=N},935:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.exceptions=[],l.properties={},l.measurements={},l}return o}(S);u.exports=N},8082:u=>{"use strict";var R=function(){function g(){this.hasFullStack=!0,this.parsedStack=[]}return g}();u.exports=R},901:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.properties={},l}return o}(S);u.exports=N},3092:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.metrics=[],l.properties={},l}return o}(S);u.exports=N},6279:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(4526),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.properties={},l.measurements={},l}return o}(S);u.exports=N},6290:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.success=!0,l.properties={},l.measurements={},l}return o}(S);u.exports=N},7339:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,l){o.__proto__=l}||function(o,l){for(var a in l)l.hasOwnProperty(a)&&(o[a]=l[a])};return function(o,l){f(o,l);function a(){this.constructor=o}o.prototype=l===null?Object.create(l):(a.prototype=l.prototype,new a)}}(),S=g(8934),N=function(f){_(o,f);function o(){var l=f.call(this)||this;return l.ver=2,l.properties={},l.measurements={},l}return o}(S);u.exports=N},9697:u=>{"use strict";var R;(function(g){g[g.Verbose=0]="Verbose",g[g.Information=1]="Information",g[g.Warning=2]="Warning",g[g.Error=3]="Error",g[g.Critical=4]="Critical"})(R||(R={})),u.exports=R},6376:u=>{"use strict";var R=function(){function g(){}return g}();u.exports=R},9958:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.AvailabilityData=g(7220),R.Base=g(4101),R.ContextTagKeys=g(9871),R.Data=g(320),R.DataPoint=g(8602),R.DataPointType=g(495),R.Domain=g(8934),R.Envelope=g(7300),R.EventData=g(4526),R.ExceptionData=g(935),R.ExceptionDetails=g(8082),R.MessageData=g(901),R.MetricData=g(3092),R.PageViewData=g(6279),R.RemoteDependencyData=g(6290),R.RequestData=g(7339),R.SeverityLevel=g(9697),R.StackFrame=g(6376)},5481:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});function g(N){switch(N){case S.Event:return"EventData";case S.Exception:return"ExceptionData";case S.Trace:return"MessageData";case S.Metric:return"MetricData";case S.Request:return"RequestData";case S.Dependency:return"RemoteDependencyData";case S.Availability:return"AvailabilityData"}}R.telemetryTypeToBaseType=g;function _(N){switch(N){case"EventData":return S.Event;case"ExceptionData":return S.Exception;case"MessageData":return S.Trace;case"MetricData":return S.Metric;case"RequestData":return S.Request;case"RemoteDependencyData":return S.Dependency;case"AvailabilityData":return S.Availability}}R.baseTypeToTelemetryType=_,R.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"};var S;(function(N){N[N.Event=0]="Event",N[N.Exception=1]="Exception",N[N.Trace=2]="Trace",N[N.Metric=3]="Metric",N[N.Request=4]="Request",N[N.Dependency=5]="Dependency",N[N.Availability=6]="Availability"})(S=R.TelemetryType||(R.TelemetryType={}))},2626:(u,R,g)=>{"use strict";function _(S){for(var N in S)R.hasOwnProperty(N)||(R[N]=S[N])}Object.defineProperty(R,"__esModule",{value:!0}),_(g(5481))},5290:(u,R,g)=>{"use strict";function _(S){for(var N in S)R.hasOwnProperty(N)||(R[N]=S[N])}Object.defineProperty(R,"__esModule",{value:!0}),_(g(9382)),_(g(9958)),_(g(2626))},3504:(u,R,g)=>{"use strict";var _=g(5282),S=function(){function N(f,o,l,a){this._buffer=[],this._lastSend=0,this._isDisabled=f,this._getBatchSize=o,this._getBatchIntervalMs=l,this._sender=a}return N.prototype.setUseDiskRetryCaching=function(f,o,l){this._sender.setDiskRetryMode(f,o,l)},N.prototype.send=function(f){var o=this;if(!this._isDisabled()){if(!f){_.warn("Cannot send null/undefined telemetry");return}var l=this._stringify(f);if(typeof l=="string"){if(this._buffer.push(l),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){o._timeoutHandle=null,o.triggerSend(!1)},this._getBatchIntervalMs()))}}},N.prototype.triggerSend=function(f,o){var l=this._buffer.length<1;if(!l){var a=this._buffer.join(`
`);f?(this._sender.saveOnCrash(a),typeof o=="function"&&o("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(a):new Buffer(a),o)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,l&&typeof o=="function"&&o("no data to send")},N.prototype._stringify=function(f){try{return JSON.stringify(f)}catch(o){_.warn("Failed to serialize payload",o,f)}},N}();u.exports=S},9253:(u,R,g)=>{"use strict";var _=g(9962),S=g(5158),N=g(3580),f=g(8835),o=function(){function l(a){var h=this;this.endpointBase=N.DEFAULT_BREEZE_ENDPOINT;var p=process.env[l.ENV_connectionString],d=S.parse(a),m=S.parse(p),k=!d.instrumentationkey&&Object.keys(d).length>0?null:a;this.instrumentationKey=d.instrumentationkey||k||m.instrumentationkey||l._getInstrumentationKey(),this.endpointUrl=(d.ingestionendpoint||m.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(y){return h.correlationId=y},this.proxyHttpUrl=process.env[l.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[l.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=d.ingestionendpoint||m.ingestionendpoint||process.env[l.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=d.liveendpoint||m.liveendpoint||process.env[l.ENV_quickPulseHost]||N.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=f.parse(this._quickPulseHost).host)}return Object.defineProperty(l.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(a){_.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=a,this.correlationId=_.correlationIdPrefix,_.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(a){this._quickPulseHost=a},enumerable:!0,configurable:!0}),l._getInstrumentationKey=function(){var a=process.env[l.ENV_iKey]||process.env[l.ENV_azurePrefix+l.ENV_iKey]||process.env[l.legacy_ENV_iKey]||process.env[l.ENV_azurePrefix+l.legacy_ENV_iKey];if(!a||a=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return a},l.ENV_azurePrefix="APPSETTING_",l.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",l.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",l.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",l.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",l.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",l.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",l.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",l.ENV_http_proxy="http_proxy",l.ENV_https_proxy="https_proxy",l}();u.exports=o},5158:(u,R,g)=>{"use strict";var _=g(3580),S=function(){function N(){}return N.parse=function(f){if(!f)return{};var o=f.split(N._FIELDS_SEPARATOR),l=o.reduce(function(h,p){var d=p.split(N._FIELD_KEY_VALUE_SEPARATOR);if(d.length===2){var m=d[0].toLowerCase(),k=d[1];h[m]=k}return h},{});if(Object.keys(l).length>0){if(l.endpointsuffix){var a=l.location?l.location+".":"";l.ingestionendpoint=l.ingestionendpoint||"https://"+a+"dc."+l.endpointsuffix,l.liveendpoint=l.liveendpoint||"https://"+a+"live."+l.endpointsuffix}l.ingestionendpoint=l.ingestionendpoint||_.DEFAULT_BREEZE_ENDPOINT,l.liveendpoint=l.liveendpoint||_.DEFAULT_LIVEMETRICS_ENDPOINT}return l},N._FIELDS_SEPARATOR=";",N._FIELD_KEY_VALUE_SEPARATOR="=",N}();u.exports=S},4470:(u,R,g)=>{"use strict";var _=g(2087),S=g(5747),N=g(5622),f=g(5290),o=g(5282),l=function(){function a(h){this.keys=new f.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return a.prototype._loadApplicationContext=function(h){if(h=h||N.resolve(__dirname,"../../../../package.json"),!a.appVersion[h]){a.appVersion[h]="unknown";try{var p=JSON.parse(S.readFileSync(h,"utf8"));p&&typeof p.version=="string"&&(a.appVersion[h]=p.version)}catch(d){o.info("unable to read app version: ",d)}}this.tags[this.keys.applicationVersion]=a.appVersion[h]},a.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=_&&_.hostname(),this.tags[this.keys.deviceOSVersion]=_&&_.type()+" "+_.release(),this.tags[this.keys.cloudRole]=a.DefaultRoleName,this.tags["ai.device.osArchitecture"]=_&&_.arch(),this.tags["ai.device.osPlatform"]=_&&_.platform()},a.prototype._loadInternalContext=function(){var h=N.resolve(__dirname,"../../package.json");if(!a.sdkVersion){a.sdkVersion="unknown";try{var p=JSON.parse(S.readFileSync(h,"utf8"));p&&typeof p.version=="string"&&(a.sdkVersion=p.version)}catch(d){o.info("unable to read app version: ",d)}}this.tags[this.keys.internalSdkVersion]="node:"+a.sdkVersion},a.DefaultRoleName="Web",a.appVersion={},a.sdkVersion=null,a}();u.exports=l},9962:(u,R,g)=>{"use strict";var _=g(5740),S=g(5282),N=function(){function f(){}return f.queryCorrelationId=function(o,l){var a=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId";if(f.completedLookups.hasOwnProperty(a)){l(f.completedLookups[a]);return}else if(f.pendingLookups[a]){f.pendingLookups[a].push(l);return}f.pendingLookups[a]=[l];var h=function(){if(!!f.pendingLookups[a]){var p={method:"GET",disableAppInsightsAutoCollection:!0};S.info(f.TAG,p);var d=_.makeRequest(o,a,p,function(m){if(m.statusCode===200){var k="";m.setEncoding("utf-8"),m.on("data",function(y){k+=y}),m.on("end",function(){S.info(f.TAG,k);var y=f.correlationIdPrefix+k;f.completedLookups[a]=y,f.pendingLookups[a]&&f.pendingLookups[a].forEach(function(E){return E(y)}),delete f.pendingLookups[a]})}else m.statusCode>=400&&m.statusCode<500?(f.completedLookups[a]=void 0,delete f.pendingLookups[a]):setTimeout(h,o.correlationIdRetryIntervalMs)});d&&(d.on("error",function(m){S.warn(f.TAG,m)}),d.end())}};setTimeout(h,0)},f.cancelCorrelationIdQuery=function(o,l){var a=o.profileQueryEndpoint+"/api/profiles/"+o.instrumentationKey+"/appId",h=f.pendingLookups[a];h&&(f.pendingLookups[a]=h.filter(function(p){return p!=l}),f.pendingLookups[a].length==0&&delete f.pendingLookups[a])},f.generateRequestId=function(o){if(o){o=o[0]=="|"?o:"|"+o,o[o.length-1]!=="."&&(o+=".");var l=(f.currentRootId++).toString(16);return f.appendSuffix(o,l,"_")}else return f.generateRootId()},f.getRootId=function(o){var l=o.indexOf(".");l<0&&(l=o.length);var a=o[0]==="|"?1:0;return o.substring(a,l)},f.generateRootId=function(){return"|"+_.w3cTraceId()+"."},f.appendSuffix=function(o,l,a){if(o.length+l.length<f.requestIdMaxLength)return o+l+a;var h=f.requestIdMaxLength-9;if(o.length>h)for(;h>1;--h){var p=o[h-1];if(p==="."||p==="_")break}if(h<=1)return f.generateRootId();for(l=_.randomu32().toString(16);l.length<8;)l="0"+l;return o.substring(0,h)+l+"#"},f.TAG="CorrelationIdManager",f.correlationIdPrefix="cid-v1:",f.w3cEnabled=!1,f.pendingLookups={},f.completedLookups={},f.requestIdMaxLength=1024,f.currentRootId=_.randomu32(),f}();u.exports=N},9813:(u,R,g)=>{"use strict";var _=g(5290),S=g(5740),N=g(894),f=function(){function l(){}return l.createEnvelope=function(a,h,p,d,m){var k=null;switch(h){case _.TelemetryType.Trace:k=l.createTraceData(a);break;case _.TelemetryType.Dependency:k=l.createDependencyData(a);break;case _.TelemetryType.Event:k=l.createEventData(a);break;case _.TelemetryType.Exception:k=l.createExceptionData(a);break;case _.TelemetryType.Request:k=l.createRequestData(a);break;case _.TelemetryType.Metric:k=l.createMetricData(a);break;case _.TelemetryType.Availability:k=l.createAvailabilityData(a);break}if(p&&_.domainSupportsProperties(k.baseData)){if(k&&k.baseData)if(!k.baseData.properties)k.baseData.properties=p;else for(var y in p)k.baseData.properties[y]||(k.baseData.properties[y]=p[y]);k.baseData.properties=S.validateStringMap(k.baseData.properties)}var E=m&&m.instrumentationKey||"",C=new _.Envelope;return C.data=k,C.iKey=E,C.name="Microsoft.ApplicationInsights."+E.replace(/-/g,"")+"."+k.baseType.substr(0,k.baseType.length-4),C.tags=this.getTags(d,a.tagOverrides),C.time=new Date().toISOString(),C.ver=1,C.sampleRate=m?m.samplingPercentage:100,h===_.TelemetryType.Metric&&(C.sampleRate=100),C},l.createTraceData=function(a){var h=new _.MessageData;h.message=a.message,h.properties=a.properties,isNaN(a.severity)?h.severityLevel=_.SeverityLevel.Information:h.severityLevel=a.severity;var p=new _.Data;return p.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Trace),p.baseData=h,p},l.createDependencyData=function(a){var h=new _.RemoteDependencyData;typeof a.name=="string"&&(h.name=a.name.length>1024?a.name.slice(0,1021)+"...":a.name),h.data=a.data,h.target=a.target,h.duration=S.msToTimeSpan(a.duration),h.success=a.success,h.type=a.dependencyTypeName,h.properties=a.properties,h.resultCode=a.resultCode?a.resultCode+"":"",a.id?h.id=a.id:h.id=S.w3cTraceId();var p=new _.Data;return p.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Dependency),p.baseData=h,p},l.createEventData=function(a){var h=new _.EventData;h.name=a.name,h.properties=a.properties,h.measurements=a.measurements;var p=new _.Data;return p.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Event),p.baseData=h,p},l.createExceptionData=function(a){var h=new _.ExceptionData;h.properties=a.properties,isNaN(a.severity)?h.severityLevel=_.SeverityLevel.Error:h.severityLevel=a.severity,h.measurements=a.measurements,h.exceptions=[];var p=a.exception.stack,d=new _.ExceptionDetails;d.message=a.exception.message,d.typeName=a.exception.name,d.parsedStack=this.parseStack(p),d.hasFullStack=S.isArray(d.parsedStack)&&d.parsedStack.length>0,h.exceptions.push(d);var m=new _.Data;return m.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Exception),m.baseData=h,m},l.createRequestData=function(a){var h=new _.RequestData;a.id?h.id=a.id:h.id=S.w3cTraceId(),h.name=a.name,h.url=a.url,h.source=a.source,h.duration=S.msToTimeSpan(a.duration),h.responseCode=a.resultCode?a.resultCode+"":"",h.success=a.success,h.properties=a.properties;var p=new _.Data;return p.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Request),p.baseData=h,p},l.createMetricData=function(a){var h=new _.MetricData;h.metrics=[];var p=new _.DataPoint;p.count=isNaN(a.count)?1:a.count,p.kind=_.DataPointType.Aggregation,p.max=isNaN(a.max)?a.value:a.max,p.min=isNaN(a.min)?a.value:a.min,p.name=a.name,p.stdDev=isNaN(a.stdDev)?0:a.stdDev,p.value=a.value,h.metrics.push(p),h.properties=a.properties;var d=new _.Data;return d.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Metric),d.baseData=h,d},l.createAvailabilityData=function(a){var h=new _.AvailabilityData;a.id?h.id=a.id:h.id=S.w3cTraceId(),h.name=a.name,h.duration=S.msToTimeSpan(a.duration),h.success=a.success,h.runLocation=a.runLocation,h.message=a.message,h.measurements=a.measurements,h.properties=a.properties;var p=new _.Data;return p.baseType=_.telemetryTypeToBaseType(_.TelemetryType.Availability),p.baseData=h,p},l.getTags=function(a,h){var p=N.CorrelationContextManager.getCurrentContext(),d={};if(a&&a.tags)for(var m in a.tags)d[m]=a.tags[m];if(h)for(var m in h)d[m]=h[m];return p&&(d[a.keys.operationId]=d[a.keys.operationId]||p.operation.id,d[a.keys.operationName]=d[a.keys.operationName]||p.operation.name,d[a.keys.operationParentId]=d[a.keys.operationParentId]||p.operation.parentId),d},l.parseStack=function(a){var h=void 0;if(typeof a=="string"){var p=a.split(`
`);h=[];for(var d=0,m=0,k=0;k<=p.length;k++){var y=p[k];if(o.regex.test(y)){var E=new o(p[k],d++);m+=E.sizeInBytes,h.push(E)}}var C=32*1024;if(m>C)for(var P=0,O=h.length-1,U=0,A=P,$=O;P<O;){var x=h[P].sizeInBytes,G=h[O].sizeInBytes;if(U+=x+G,U>C){var q=$-A+1;h.splice(A,q);break}A=P,$=O,P++,O--}}return h},l}(),o=function(){function l(a,h){this.sizeInBytes=0,this.level=h,this.method="<no_method>",this.assembly=S.trim(a);var p=a.match(l.regex);p&&p.length>=5&&(this.method=S.trim(p[2])||this.method,this.fileName=S.trim(p[4])||"<no_filename>",this.line=parseInt(p[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=l.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return l.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,l.baseSize=58,l}();u.exports=f},5282:u=>{"use strict";var R=function(){function g(){}return g.info=function(_){for(var S=[],N=1;N<arguments.length;N++)S[N-1]=arguments[N];g.enableDebug&&console.info(g.TAG+_,S)},g.warn=function(_){for(var S=[],N=1;N<arguments.length;N++)S[N-1]=arguments[N];g.disableWarnings||console.warn(g.TAG+_,S)},g.enableDebug=!1,g.disableWarnings=!1,g.disableErrors=!1,g.TAG="ApplicationInsights:",g}();u.exports=R},1259:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])};return function(h,p){a(h,p);function d(){this.constructor=h}h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),S=g(7625),N=g(731),f=g(8723),o=g(5282),l=function(a){_(h,a);function h(){return a!==null&&a.apply(this,arguments)||this}return h.prototype.trackNodeHttpRequestSync=function(p){p&&p.request&&p.response&&p.duration?N.trackRequestSync(this,p):o.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},h.prototype.trackNodeHttpRequest=function(p){(p.duration||p.error)&&o.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),p&&p.request&&p.response?N.trackRequest(this,p):o.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},h.prototype.trackNodeHttpDependency=function(p){p&&p.request?f.trackRequest(this,p):o.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},h}(S);u.exports=l},7148:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(p){for(var d,m=1,k=arguments.length;m<k;m++){d=arguments[m];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(p[y]=d[y])}return p},S=g(2087),N=g(5290),f=g(3580),o=g(5740),l=g(5282),a=o.w3cTraceId(),h=function(){function p(){}return p.createQuickPulseEnvelope=function(d,m,k,y){var E=S&&typeof S.hostname=="function"&&S.hostname()||"Unknown",C=y.tags&&y.keys&&y.keys.cloudRoleInstance&&y.tags[y.keys.cloudRoleInstance]||E,P={Documents:m.length>0?m:null,InstrumentationKey:k.instrumentationKey||"",Metrics:d.length>0?d:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:y.tags[y.keys.internalSdkVersion],StreamId:a,MachineName:E,Instance:C};return P},p.createQuickPulseMetric=function(d){var m;return m={Name:d.name,Value:d.value,Weight:d.count||1},m},p.telemetryEnvelopeToQuickPulseDocument=function(d){switch(d.data.baseType){case N.TelemetryTypeString.Event:return p.createQuickPulseEventDocument(d);case N.TelemetryTypeString.Exception:return p.createQuickPulseExceptionDocument(d);case N.TelemetryTypeString.Trace:return p.createQuickPulseTraceDocument(d);case N.TelemetryTypeString.Dependency:return p.createQuickPulseDependencyDocument(d);case N.TelemetryTypeString.Request:return p.createQuickPulseRequestDocument(d)}return null},p.createQuickPulseEventDocument=function(d){var m=p.createQuickPulseDocument(d),k=d.data.baseData.name,y=_({},m,{Name:k});return y},p.createQuickPulseTraceDocument=function(d){var m=p.createQuickPulseDocument(d),k=d.data.baseData.severityLevel||0,y=_({},m,{Message:d.data.baseData.message,SeverityLevel:N.SeverityLevel[k]});return y},p.createQuickPulseExceptionDocument=function(d){var m=p.createQuickPulseDocument(d),k=d.data.baseData.exceptions,y="",E="",C="";k&&k.length>0&&(k[0].parsedStack&&k[0].parsedStack.length>0?k[0].parsedStack.forEach(function(O){y+=O.assembly+`
`}):k[0].stack&&k[0].stack.length>0&&(y=k[0].stack),E=k[0].message,C=k[0].typeName);var P=_({},m,{Exception:y,ExceptionMessage:E,ExceptionType:C});return P},p.createQuickPulseRequestDocument=function(d){var m=p.createQuickPulseDocument(d),k=d.data.baseData,y=_({},m,{Name:k.name,Success:k.success,Duration:k.duration,ResponseCode:k.responseCode,OperationName:k.name});return y},p.createQuickPulseDependencyDocument=function(d){var m=p.createQuickPulseDocument(d),k=d.data.baseData,y=_({},m,{Name:k.name,Target:k.target,Success:k.success,Duration:k.duration,ResultCode:k.resultCode,CommandName:k.data,OperationName:m.OperationId,DependencyTypeName:k.type});return y},p.createQuickPulseDocument=function(d){var m,k,y,E;d.data.baseType?(k=f.TelemetryTypeStringToQuickPulseType[d.data.baseType],m=f.TelemetryTypeStringToQuickPulseDocumentType[d.data.baseType]):l.warn("Document type invalid; not sending live metric document",d.data.baseType),y=d.tags[p.keys.operationId],E=p.aggregateProperties(d);var C={DocumentType:m,__type:k,OperationId:y,Version:"1.0",Properties:E};return C},p.aggregateProperties=function(d){var m=[],k=d.data.baseData.measurements||{};for(var y in k)if(k.hasOwnProperty(y)){var E=k[y],C={key:y,value:E};m.push(C)}var P=d.data.baseData.properties||{};for(var y in P)if(P.hasOwnProperty(y)){var E=P[y],C={key:y,value:E};m.push(C)}return m},p.keys=new N.ContextTagKeys,p}();u.exports=h},9184:(u,R,g)=>{"use strict";var _=g(7211),S=g(8723),N=g(5282),f={method:"POST",time:"x-ms-qps-transmission-time",subscribed:"x-ms-qps-subscribed"},o=function(){function l(a){this._config=a,this._consecutiveErrors=0}return l.prototype.ping=function(a,h){this._submitData(a,h,"ping")},l.prototype.post=function(a,h){this._submitData([a],h,"post")},l.prototype._submitData=function(a,h,p){var d=this,m=JSON.stringify(a),k=(E={},E[S.disableCollectionRequestOption]=!0,E.host=this._config.quickPulseHost,E.method=f.method,E.path="/QuickPulseService.svc/"+p+"?ikey="+this._config.instrumentationKey,E.headers=(C={Expect:"100-continue"},C[f.time]=1e4*Date.now(),C["Content-Type"]="application/json",C["Content-Length"]=Buffer.byteLength(m),C),E),y=_.request(k,function(P){var O=P.headers[f.subscribed]==="true";d._consecutiveErrors=0,h(O,P)});y.on("error",function(P){d._consecutiveErrors++;var O="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";d._consecutiveErrors%l.MAX_QPS_FAILURES_BEFORE_WARN==0?(O="Live Metrics endpoint could not be reached "+d._consecutiveErrors+" consecutive times. Most recent error:",N.warn(l.TAG,O,P)):N.info(l.TAG,O,P),h()}),y.write(m),y.end();var E,C},l.TAG="QuickPulseSender",l.MAX_QPS_FAILURES_BEFORE_WARN=25,l}();u.exports=o},3668:(u,R,g)=>{"use strict";var _=g(5282),S=g(9253),N=g(7148),f=g(9184),o=g(3580),l=g(4470),a=function(){function h(p,d){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new S(p),this.context=d||new l,this._sender=new f(this.config),this._isEnabled=!1}return h.prototype.addCollector=function(p){this._collectors.push(p)},h.prototype.trackMetric=function(p){this._addMetric(p)},h.prototype.addDocument=function(p){var d=N.telemetryEnvelopeToQuickPulseDocument(p);d&&this._documents.push(d)},h.prototype.enable=function(p){p&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!p&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},h.prototype.enableCollectors=function(p){this._collectors.forEach(function(d){d.enable(p)})},h.prototype._addMetric=function(p){var d=p.value,m=p.count||1,k=o.PerformanceToQuickPulseCounter[p.name];k&&(this._metrics[k]?(this._metrics[k].Value=(this._metrics[k].Value*this._metrics[k].Weight+d*m)/(this._metrics[k].Weight+m),this._metrics[k].Weight+=m):(this._metrics[k]=N.createQuickPulseMetric(p),this._metrics[k].Name=k,this._metrics[k].Weight=1))},h.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},h.prototype._goQuickPulse=function(){var p=this,d=Object.keys(this._metrics).map(function(y){return p._metrics[y]}),m=N.createQuickPulseEnvelope(d,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(m):this._ping(m);var k=this._isCollectingData?h.POST_INTERVAL:h.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=h.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,k=h.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=h.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(k=h.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),k),this._handle.unref()},h.prototype._ping=function(p){this._sender.ping(p,this._quickPulseDone.bind(this))},h.prototype._post=function(p){this._sender.post(p,this._quickPulseDone.bind(this))},h.prototype._quickPulseDone=function(p,d){p!=null?(this._isCollectingData!==p&&(_.info("Live Metrics sending data",p),this.enableCollectors(p)),this._isCollectingData=p,d&&d.statusCode<300&&d.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},h.MAX_POST_WAIT_TIME=2e4,h.MAX_PING_WAIT_TIME=6e4,h.FALLBACK_INTERVAL=6e4,h.PING_INTERVAL=5e3,h.POST_INTERVAL=1e3,h}();u.exports=a},9036:u=>{"use strict";u.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},2588:(u,R,g)=>{"use strict";var _=g(5747),S=g(2087),N=g(5622),f=g(8761),o=g(3129),l=g(5282),a=g(8723),h=g(5740),p=function(){function d(m,k,y){if(this._config=m,this._onSuccess=k,this._onError=y,this._enableDiskRetryMode=!1,this._resendInterval=d.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=d.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!d.OS_PROVIDES_FILE_PROTECTION)if(d.USE_ICACLS){try{d.OS_PROVIDES_FILE_PROTECTION=_.existsSync(d.ICACLS_PATH)}catch(E){}d.OS_PROVIDES_FILE_PROTECTION||l.warn(d.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else d.OS_PROVIDES_FILE_PROTECTION=!0}return d.prototype.setDiskRetryMode=function(m,k,y){this._enableDiskRetryMode=d.OS_PROVIDES_FILE_PROTECTION&&m,typeof k=="number"&&k>=0&&(this._resendInterval=Math.floor(k)),typeof y=="number"&&y>=0&&(this._maxBytesOnDisk=Math.floor(y)),m&&!d.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,l.warn(d.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},d.prototype.send=function(m,k){var y=this,E=this._config.endpointUrl,C={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};f.gzip(m,function(P,O){var U=O;P?(l.warn(P),U=m,C.headers["Content-Length"]=m.length.toString()):(C.headers["Content-Encoding"]="gzip",C.headers["Content-Length"]=O.length),l.info(d.TAG,C),C[a.disableCollectionRequestOption]=!0;var A=function(x){x.setEncoding("utf-8");var G="";x.on("data",function(q){G+=q}),x.on("end",function(){y._numConsecutiveFailures=0,l.info(d.TAG,G),typeof y._onSuccess=="function"&&y._onSuccess(G),typeof k=="function"&&k(G),y._enableDiskRetryMode&&(x.statusCode===200?setTimeout(function(){return y._sendFirstFileOnDisk()},y._resendInterval).unref():(x.statusCode===408||x.statusCode===429||x.statusCode===439||x.statusCode===500||x.statusCode===503)&&y._storeToDisk(m))})},$=h.makeRequest(y._config,E,C,A);$.on("error",function(x){if(y._numConsecutiveFailures++,!y._enableDiskRetryMode||y._numConsecutiveFailures>0&&y._numConsecutiveFailures%d.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var G="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";y._enableDiskRetryMode&&(G="Ingestion endpoint could not be reached "+y._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),l.warn(d.TAG,G,x)}else{var G="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";l.info(d.TAG,G,x)}if(y._onErrorHelper(x),typeof k=="function"){var q="error sending telemetry";x&&typeof x.toString=="function"&&(q=x.toString()),k(q)}y._enableDiskRetryMode&&y._storeToDisk(m)}),$.write(U),$.end()})},d.prototype.saveOnCrash=function(m){this._enableDiskRetryMode&&this._storeToDiskSync(m)},d.prototype._runICACLS=function(m,k){var y=o.spawn(d.ICACLS_PATH,m,{windowsHide:!0});y.on("error",function(E){return k(E)}),y.on("close",function(E,C){return k(E===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+E+")"))})},d.prototype._runICACLSSync=function(m){if(o.spawnSync){var k=o.spawnSync(d.ICACLS_PATH,m,{windowsHide:!0});if(k.error)throw k.error;if(k.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+k.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},d.prototype._getACLIdentity=function(m){if(d.ACL_IDENTITY)return m(null,d.ACL_IDENTITY);var k=o.spawn(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),y="";k.stdout.on("data",function(E){return y+=E}),k.on("error",function(E){return m(E,null)}),k.on("close",function(E,C){return d.ACL_IDENTITY=y&&y.trim(),m(E===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+E+")"),d.ACL_IDENTITY)})},d.prototype._getACLIdentitySync=function(){if(d.ACL_IDENTITY)return d.ACL_IDENTITY;if(o.spawnSync){var m=o.spawnSync(d.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(m.error)throw m.error;if(m.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+m.status+")");return d.ACL_IDENTITY=m.stdout&&m.stdout.toString().trim(),d.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},d.prototype._getACLArguments=function(m,k){return[m,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",k+":(OI)(CI)F","/inheritance:r"]},d.prototype._applyACLRules=function(m,k){var y=this;if(!d.USE_ICACLS)return k(null);if(d.ACLED_DIRECTORIES[m]===void 0)d.ACLED_DIRECTORIES[m]=!1,this._getACLIdentity(function(E,C){if(E)return d.ACLED_DIRECTORIES[m]=!1,k(E);y._runICACLS(y._getACLArguments(m,C),function(P){return d.ACLED_DIRECTORIES[m]=!P,k(P)})});else return k(d.ACLED_DIRECTORIES[m]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},d.prototype._applyACLRulesSync=function(m){if(d.USE_ICACLS){if(d.ACLED_DIRECTORIES[m]===void 0){this._runICACLSSync(this._getACLArguments(m,this._getACLIdentitySync())),d.ACLED_DIRECTORIES[m]=!0;return}else if(!d.ACLED_DIRECTORIES[m])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},d.prototype._confirmDirExists=function(m,k){var y=this;_.lstat(m,function(E,C){E&&E.code==="ENOENT"?_.mkdir(m,function(P){P&&P.code!=="EEXIST"?k(P):y._applyACLRules(m,k)}):!E&&C.isDirectory()?y._applyACLRules(m,k):k(E||new Error("Path existed but was not a directory"))})},d.prototype._getShallowDirectorySize=function(m,k){_.readdir(m,function(y,E){if(y)return k(y,-1);var C=null,P=0,O=0;if(E.length===0){k(null,0);return}for(var U=0;U<E.length;U++)_.stat(N.join(m,E[U]),function(A,$){O++,A?C=A:$.isFile()&&(P+=$.size),O===E.length&&(C?k(C,-1):k(C,P))})})},d.prototype._getShallowDirectorySizeSync=function(m){for(var k=_.readdirSync(m),y=0,E=0;E<k.length;E++)y+=_.statSync(N.join(m,k[E])).size;return y},d.prototype._storeToDisk=function(m){var k=this,y=N.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);l.info(d.TAG,"Checking existance of data storage directory: "+y),this._confirmDirExists(y,function(E){if(E){l.warn(d.TAG,"Error while checking/creating directory: "+(E&&E.message)),k._onErrorHelper(E);return}k._getShallowDirectorySize(y,function(C,P){if(C||P<0){l.warn(d.TAG,"Error while checking directory size: "+(C&&C.message)),k._onErrorHelper(C);return}else if(P>k._maxBytesOnDisk){l.warn(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+P);return}var O=new Date().getTime()+".ai.json",U=N.join(y,O);l.info(d.TAG,"saving data to disk at: "+U),_.writeFile(U,m,{mode:384},function(A){return k._onErrorHelper(A)})})})},d.prototype._storeToDiskSync=function(m){var k=N.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);try{l.info(d.TAG,"Checking existance of data storage directory: "+k),_.existsSync(k)||_.mkdirSync(k),this._applyACLRulesSync(k);var y=this._getShallowDirectorySizeSync(k);if(y>this._maxBytesOnDisk){l.info(d.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+y);return}var E=new Date().getTime()+".ai.json",C=N.join(k,E);l.info(d.TAG,"saving data before crash to disk at: "+C),_.writeFileSync(C,m,{mode:384})}catch(P){l.warn(d.TAG,"Error while saving data to disk: "+(P&&P.message)),this._onErrorHelper(P)}},d.prototype._sendFirstFileOnDisk=function(){var m=this,k=N.join(S.tmpdir(),d.TEMPDIR_PREFIX+this._config.instrumentationKey);_.exists(k,function(y){y&&_.readdir(k,function(E,C){if(E)m._onErrorHelper(E);else if(C=C.filter(function(U){return N.basename(U).indexOf(".ai.json")>-1}),C.length>0){var P=C[0],O=N.join(k,P);_.readFile(O,function(U,A){U?m._onErrorHelper(U):_.unlink(O,function($){$?m._onErrorHelper($):m.send(A)})})}})})},d.prototype._onErrorHelper=function(m){typeof this._onError=="function"&&this._onError(m)},d.TAG="Sender",d.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",d.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",d.ACLED_DIRECTORIES={},d.ACL_IDENTITY=null,d.WAIT_BETWEEN_RESEND=60*1e3,d.MAX_BYTES_ON_DISK=50*1e3*1e3,d.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,d.TEMPDIR_PREFIX="appInsights-node",d.OS_PROVIDES_FILE_PROTECTION=!1,d.USE_ICACLS=S.type()==="Windows_NT",d}();u.exports=p},7625:(u,R,g)=>{"use strict";var _=g(8835),S=g(9253),N=g(4470),f=g(5290),o=g(3504),l=g(9428),a=g(894),h=g(2588),p=g(5740),d=g(5282),m=g(9813),k=function(){function y(E){this._telemetryProcessors=[];var C=new S(E);this.config=C,this.context=new N,this.commonProperties={};var P=new h(this.config);this.channel=new o(function(){return C.disableAppInsights},function(){return C.maxBatchSize},function(){return C.maxBatchIntervalMs},P)}return y.prototype.trackAvailability=function(E){this.track(E,f.TelemetryType.Availability)},y.prototype.trackTrace=function(E){this.track(E,f.TelemetryType.Trace)},y.prototype.trackMetric=function(E){this.track(E,f.TelemetryType.Metric)},y.prototype.trackException=function(E){E&&E.exception&&!p.isError(E.exception)&&(E.exception=new Error(E.exception.toString())),this.track(E,f.TelemetryType.Exception)},y.prototype.trackEvent=function(E){this.track(E,f.TelemetryType.Event)},y.prototype.trackRequest=function(E){this.track(E,f.TelemetryType.Request)},y.prototype.trackDependency=function(E){E&&!E.target&&E.data&&(E.target=_.parse(E.data).host),this.track(E,f.TelemetryType.Dependency)},y.prototype.flush=function(E){this.channel.triggerSend(E?!!E.isAppCrashing:!1,E?E.callback:void 0)},y.prototype.track=function(E,C){if(E&&f.telemetryTypeToBaseType(C)){var P=m.createEnvelope(E,C,this.commonProperties,this.context,this.config);E.time&&(P.time=E.time.toISOString());var O=this.runTelemetryProcessors(P,E.contextObjects);O=O&&l.samplingTelemetryProcessor(P,{correlationContext:a.CorrelationContextManager.getCurrentContext()}),l.performanceMetricsTelemetryProcessor(P,this.quickPulseClient),O&&this.channel.send(P)}else d.warn("track() requires telemetry object and telemetryType to be specified.")},y.prototype.addTelemetryProcessor=function(E){this._telemetryProcessors.push(E)},y.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},y.prototype.runTelemetryProcessors=function(E,C){var P=!0,O=this._telemetryProcessors.length;if(O===0)return P;C=C||{},C.correlationContext=a.CorrelationContextManager.getCurrentContext();for(var U=0;U<O;++U)try{var A=this._telemetryProcessors[U];if(A&&A.apply(null,[E,C])===!1){P=!1;break}}catch($){P=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",$,E)}return P},y}();u.exports=k},8090:(u,R,g)=>{"use strict";var _=g(5740),S=g(9962),N=function(){function f(o,l){if(this.traceFlag=f.DEFAULT_TRACE_FLAG,this.version=f.DEFAULT_VERSION,o&&typeof o=="string")if(o.split(",").length>1)this.traceId=_.w3cTraceId(),this.spanId=_.w3cTraceId().substr(0,16);else{var a=o.trim().split("-"),h=a.length;h>=4?(this.version=a[0],this.traceId=a[1],this.spanId=a[2],this.traceFlag=a[3]):(this.traceId=_.w3cTraceId(),this.spanId=_.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=f.DEFAULT_VERSION,this.traceId=_.w3cTraceId()),this.version==="00"&&h!==4&&(this.traceId=_.w3cTraceId(),this.spanId=_.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=f.DEFAULT_VERSION,this.traceId=_.w3cTraceId(),this.spanId=_.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=f.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=f.DEFAULT_TRACE_FLAG,this.traceId=_.w3cTraceId()),f.isValidTraceId(this.traceId)||(this.traceId=_.w3cTraceId()),f.isValidSpanId(this.spanId)||(this.spanId=_.w3cTraceId().substr(0,16),this.traceId=_.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(l){this.parentId=l.slice();var p=S.getRootId(l);f.isValidTraceId(p)||(this.legacyRootId=p,p=_.w3cTraceId()),l.indexOf("|")!==-1&&(l=l.substring(1+l.substring(0,l.length-1).lastIndexOf("."),l.length-1)),this.traceId=p,this.spanId=l}else this.traceId=_.w3cTraceId(),this.spanId=_.w3cTraceId().substr(0,16)}return f.isValidTraceId=function(o){return o.match(/^[0-9a-f]{32}$/)&&o!=="00000000000000000000000000000000"},f.isValidSpanId=function(o){return o.match(/^[0-9a-f]{16}$/)&&o!=="0000000000000000"},f.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},f.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},f.prototype.updateSpanId=function(){this.spanId=_.w3cTraceId().substr(0,16)},f.DEFAULT_TRACE_FLAG="01",f.DEFAULT_VERSION="00",f}();u.exports=N},6333:u=>{"use strict";var R=function(){function g(_){this.fieldmap=[],!!_&&(this.fieldmap=this.parseHeader(_))}return g.prototype.toString=function(){var _=this.fieldmap;return!_||_.length==0?null:_.join(", ")},g.validateKeyChars=function(_){var S=_.split("@");if(S.length==2){var N=S[0].trim(),f=S[1].trim(),o=Boolean(N.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),l=Boolean(f.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&l}else if(S.length==1)return Boolean(_.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},g.prototype.parseHeader=function(_){var S=[],N={},f=_.split(",");if(f.length>32)return null;for(var o=0,l=f;o<l.length;o++){var a=l[o],h=a.trim();if(h.length!==0){var p=h.split("=");if(p.length!==2||!g.validateKeyChars(p[0])||N[p[0]])return null;N[p[0]]=!0,S.push(h)}}return S},g.strict=!0,g}();u.exports=R},5740:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(p){for(var d,m=1,k=arguments.length;m<k;m++){d=arguments[m];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(p[y]=d[y])}return p},S=g(8605),N=g(7211),f=g(8835),o=g(7619),l=g(5282),a=g(9036),h=function(){function p(){}return p.getCookie=function(d,m){var k="";if(d&&d.length&&typeof m=="string")for(var y=d+"=",E=m.split(";"),C=0;C<E.length;C++){var m=E[C];if(m=p.trim(m),m&&m.indexOf(y)===0){k=m.substring(y.length,E[C].length);break}}return k},p.trim=function(d){return typeof d=="string"?d.replace(/^\s+|\s+$/g,""):""},p.int32ArrayToBase64=function(d){var m=function(P,O){return String.fromCharCode(P>>O&255)},k=function(P){return m(P,24)+m(P,16)+m(P,8)+m(P,0)},y=d.map(k).join(""),E=Buffer.from?Buffer.from(y,"binary"):new Buffer(y,"binary"),C=E.toString("base64");return C.substr(0,C.indexOf("="))},p.random32=function(){return 4294967296*Math.random()|0},p.randomu32=function(){return p.random32()+2147483648},p.w3cTraceId=function(){for(var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],m="",k,y=0;y<4;y++)k=p.random32(),m+=d[k&15]+d[k>>4&15]+d[k>>8&15]+d[k>>12&15]+d[k>>16&15]+d[k>>20&15]+d[k>>24&15]+d[k>>28&15];var E=d[8+Math.random()*4|0];return m.substr(0,8)+m.substr(9,4)+"4"+m.substr(13,3)+E+m.substr(16,3)+m.substr(19,12)},p.isValidW3CId=function(d){return d.length===32&&d!=="00000000000000000000000000000000"},p.isArray=function(d){return Object.prototype.toString.call(d)==="[object Array]"},p.isError=function(d){return d instanceof Error},p.isPrimitive=function(d){var m=typeof d;return m==="string"||m==="number"||m==="boolean"},p.isDate=function(d){return Object.prototype.toString.call(d)==="[object Date]"},p.msToTimeSpan=function(d){(isNaN(d)||d<0)&&(d=0);var m=(d/1e3%60).toFixed(7).replace(/0{0,4}$/,""),k=""+Math.floor(d/(1e3*60))%60,y=""+Math.floor(d/(1e3*60*60))%24,E=Math.floor(d/(1e3*60*60*24));m=m.indexOf(".")<2?"0"+m:m,k=k.length<2?"0"+k:k,y=y.length<2?"0"+y:y;var C=E>0?E+".":"";return C+y+":"+k+":"+m},p.extractError=function(d){var m=d;return{message:d.message,code:m.code||m.id||""}},p.extractObject=function(d){return d instanceof Error?p.extractError(d):typeof d.toJSON=="function"?d.toJSON():d},p.validateStringMap=function(d){if(typeof d!="object"){l.info("Invalid properties dropped from payload");return}var m={};for(var k in d){var y="",E=d[k],C=typeof E;if(p.isPrimitive(E))y=E.toString();else if(E===null||C==="undefined")y="";else if(C==="function"){l.info("key: "+k+" was function; will not serialize");continue}else{var P=p.isArray(E)?E:p.extractObject(E);try{p.isPrimitive(P)?y=P:y=JSON.stringify(P)}catch(O){y=E.constructor.name.toString()+" (Error: "+O.message+")",l.info("key: "+k+", could not be serialized")}}m[k]=y.substring(0,p.MAX_PROPERTY_LENGTH)}return m},p.canIncludeCorrelationHeader=function(d,m){var k=d&&d.config&&d.config.correlationHeaderExcludedDomains;if(!k||k.length==0||!m)return!0;for(var y=0;y<k.length;y++){var E=new RegExp(k[y].replace(/\./g,".").replace(/\*/g,".*"));if(E.test(f.parse(m).hostname))return!1}return!0},p.getCorrelationContextTarget=function(d,m){var k=d.headers&&d.headers[a.requestContextHeader];if(k)for(var y=k.split(","),E=0;E<y.length;++E){var C=y[E].split("=");if(C.length==2&&C[0]==m)return C[1]}},p.makeRequest=function(d,m,k,y){m&&m.indexOf("//")===0&&(m="https:"+m);var E=f.parse(m),C=_({},k,{host:E.hostname,port:E.port,path:E.pathname}),P=void 0;if(E.protocol==="https:"&&(P=d.proxyHttpsUrl||void 0),E.protocol==="http:"&&(P=d.proxyHttpUrl||void 0),P){P.indexOf("//")===0&&(P="http:"+P);var O=f.parse(P);O.protocol==="https:"?(l.info("Proxies that use HTTPS are not supported"),P=void 0):C=_({},C,{host:O.hostname,port:O.port||"80",path:m,headers:_({},C.headers,{Host:E.hostname})})}var U=E.protocol==="https:"&&!P;return U&&d.httpsAgent!==void 0?C.agent=d.httpsAgent:!U&&d.httpAgent!==void 0?C.agent=d.httpAgent:U&&(C.agent=p.tlsRestrictedAgent),U?N.request(C,y):S.request(C,y)},p.safeIncludeCorrelationHeader=function(d,m,k){var y;if(typeof k=="string")y=k;else if(k instanceof Array)y=k.join(",");else if(k&&typeof k.toString=="function")try{y=k.toString()}catch(E){l.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",E,k)}y?p.addCorrelationIdHeaderFromString(d,m,y):m.setHeader(a.requestContextHeader,a.requestContextSourceKey+"="+d.config.correlationId)},p.addCorrelationIdHeaderFromString=function(d,m,k){var y=k.split(","),E=a.requestContextSourceKey+"=",C=y.some(function(P){return P.substring(0,E.length)===E});C||m.setHeader(a.requestContextHeader,k+","+a.requestContextSourceKey+"="+d.config.correlationId)},p.MAX_PROPERTY_LENGTH=8192,p.tlsRestrictedAgent=new N.Agent({secureOptions:o.SSL_OP_NO_SSLv2|o.SSL_OP_NO_SSLv3|o.SSL_OP_NO_TLSv1|o.SSL_OP_NO_TLSv1_1}),p}();u.exports=h},4127:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4350),S=g(5290);function N(f,o){switch(o&&o.addDocument(f),f.data.baseType){case S.TelemetryTypeString.Exception:_.countException();break;case S.TelemetryTypeString.Request:var l=f.data.baseData;_.countRequest(l.duration,l.success);break;case S.TelemetryTypeString.Dependency:var a=f.data.baseData;_.countDependency(a.duration,a.success);break}return!0}R.performanceMetricsTelemetryProcessor=N},2037:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(5290);function S(f,o){var l=f.sampleRate,a=!1;return l==null||l>=100||f.data&&_.TelemetryType.Metric===_.baseTypeToTelemetryType(f.data.baseType)?!0:(o.correlationContext&&o.correlationContext.operation?a=N(o.correlationContext.operation.id)<l:a=Math.random()*100<l,a)}R.samplingTelemetryProcessor=S;function N(f){var o=-2147483648,l=2147483647,a=5381;if(!f)return 0;for(;f.length<8;)f=f+f;for(var h=0;h<f.length;h++)a=((a<<5)+a|0)+f.charCodeAt(h)|0;return a=a<=o?l:Math.abs(a),a/l*100}R.getSamplingHashCode=N},9428:(u,R,g)=>{"use strict";function _(S){for(var N in S)R.hasOwnProperty(N)||(R[N]=S[N])}Object.defineProperty(R,"__esModule",{value:!0}),_(g(2037)),_(g(4127))},9574:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(894),S=g(6281),N=g(6639),f=g(4350),o=g(8723),l=g(731),a=g(9962),h=g(5282),p=g(3668),d=g(1629);R.TelemetryClient=g(1259),R.Contracts=g(5290);var m;(function(ge){ge[ge.AI=0]="AI",ge[ge.AI_AND_W3C=1]="AI_AND_W3C"})(m=R.DistributedTracingModes||(R.DistributedTracingModes={}));var k=!0,y=!1,E=!0,C=!0,P=!0,O=!0,U=!0,A=!0,$,x=!1,G=!0,q,L=void 0,M=void 0,B,K,Y,Q,re,de,pe=!1,_e;function ne(ge){return R.defaultClient?h.info("The default client is already setup"):(R.defaultClient=new R.TelemetryClient(ge),B=new S(R.defaultClient),K=new N(R.defaultClient),Y=new f(R.defaultClient),re=new l(R.defaultClient),de=new o(R.defaultClient),Q||(Q=new d.AutoCollectNativePerformance(R.defaultClient))),R.defaultClient&&R.defaultClient.channel&&R.defaultClient.channel.setUseDiskRetryCaching(U,L,M),be}R.setup=ne;function oe(){return R.defaultClient?(pe=!0,B.enable(k,y),K.enable(E),Y.enable(C),Q.enable(G,q),re.useAutoCorrelation(A,$),re.enable(P),de.enable(O),R.liveMetricsClient&&x&&R.liveMetricsClient.enable(x)):h.warn("Start cannot be called before setup"),be}R.start=oe;function se(){return A?_.CorrelationContextManager.getCurrentContext():null}R.getCorrelationContext=se;function ye(ge){return _.CorrelationContextManager.wrapCallback(ge)}R.wrapWithCorrelationContext=ye;var be=function(){function ge(){}return ge.setDistributedTracingMode=function(we){return a.w3cEnabled=we===m.AI_AND_W3C,ge},ge.setAutoCollectConsole=function(we,Ee){return Ee===void 0&&(Ee=!1),k=we,y=Ee,pe&&B.enable(we,Ee),ge},ge.setAutoCollectExceptions=function(we){return E=we,pe&&K.enable(we),ge},ge.setAutoCollectPerformance=function(we,Ee){Ee===void 0&&(Ee=!0),C=we;var Ue=d.AutoCollectNativePerformance.parseEnabled(Ee);return G=Ue.isEnabled,q=Ue.disabledMetrics,pe&&(Y.enable(we),Q.enable(Ue.isEnabled,Ue.disabledMetrics)),ge},ge.setAutoCollectRequests=function(we){return P=we,pe&&re.enable(we),ge},ge.setAutoCollectDependencies=function(we){return O=we,pe&&de.enable(we),ge},ge.setAutoDependencyCorrelation=function(we,Ee){return A=we,$=Ee,pe&&re.useAutoCorrelation(we,Ee),ge},ge.setUseDiskRetryCaching=function(we,Ee,Ue){return U=we,L=Ee,M=Ue,R.defaultClient&&R.defaultClient.channel&&R.defaultClient.channel.setUseDiskRetryCaching(we,Ee,Ue),ge},ge.setInternalLogging=function(we,Ee){return we===void 0&&(we=!1),Ee===void 0&&(Ee=!0),h.enableDebug=we,h.disableWarnings=!Ee,ge},ge.setSendLiveMetrics=function(we){return we===void 0&&(we=!1),R.defaultClient?(!R.liveMetricsClient&&we?(R.liveMetricsClient=new p(R.defaultClient.config.instrumentationKey),_e=new f(R.liveMetricsClient,1e3,!0),R.liveMetricsClient.addCollector(_e),R.defaultClient.quickPulseClient=R.liveMetricsClient):R.liveMetricsClient&&R.liveMetricsClient.enable(we),x=we,ge):(h.warn("Live metrics client cannot be setup without the default client"),ge)},ge.start=oe,ge}();R.Configuration=be;function De(){R.defaultClient=null,pe=!1,B&&B.dispose(),K&&K.dispose(),Y&&Y.dispose(),Q&&Q.dispose(),re&&re.dispose(),de&&de.dispose(),R.liveMetricsClient&&(R.liveMetricsClient.enable(!1),x=!1,R.liveMetricsClient=void 0)}R.dispose=De},9822:(u,R,g)=>{"use strict";const _=process.binding("async_wrap"),S=_.Providers.TIMERWRAP,N={nextTick:g(3269),promise:g(9565),timers:g(7190)},f=new Set;function o(){this.enabled=!1,this.counter=0}function l(){const p=this.initFns=[],d=this.preFns=[],m=this.postFns=[],k=this.destroyFns=[];this.init=function(y,E,C,P){if(E===S){f.add(y);return}for(const O of p)O(y,this,E,C,P)},this.pre=function(y){if(!f.has(y))for(const E of d)E(y,this)},this.post=function(y,E){if(!f.has(y))for(const C of m)C(y,this,E)},this.destroy=function(y){if(f.has(y)){f.delete(y);return}for(const E of k)E(y)}}l.prototype.add=function(p){p.init&&this.initFns.push(p.init),p.pre&&this.preFns.push(p.pre),p.post&&this.postFns.push(p.post),p.destroy&&this.destroyFns.push(p.destroy)};function a(p,d){const m=p.indexOf(d);m!==-1&&p.splice(m,1)}l.prototype.remove=function(p){p.init&&a(this.initFns,p.init),p.pre&&a(this.preFns,p.pre),p.post&&a(this.postFns,p.post),p.destroy&&a(this.destroyFns,p.destroy)};function h(){this._state=new o,this._hooks=new l,this.version=g(1910).i8,this.providers=_.Providers;for(const p of Object.keys(N))N[p].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),_.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}u.exports=h,h.prototype.addHooks=function(p){this._hooks.add(p)},h.prototype.removeHooks=function(p){this._hooks.remove(p)},h.prototype.enable=function(){this._state.enabled=!0,_.enable()},h.prototype.disable=function(){this._state.enabled=!1,_.disable()}},3223:(u,R,g)=>{"use strict";const _=g(9822);if(global._asyncHook)if(global._asyncHook.version===g(1910).i8)u.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else g(2512).filter.attach(function(N,f){return f.filter(function(o){const l=o.getFileName();return!(l&&l.slice(0,__dirname.length)===__dirname)})}),u.exports=global._asyncHook=new _},1910:u=>{"use strict";u.exports={i8:"1.7.6"}},3269:u=>{"use strict";function R(){}u.exports=function(){const _=this._hooks,S=this._state,N=process.nextTick;process.nextTick=function(){if(!S.enabled)return N.apply(process,arguments);const f=new Array(arguments.length);for(let h=0;h<arguments.length;h++)f[h]=arguments[h];const o=f[0];if(typeof o!="function")throw new TypeError("callback is not a function");const l=new R,a=--S.counter;return _.init.call(l,a,0,null,null),f[0]=function(){_.pre.call(l,a);let h=!0;try{o.apply(this,arguments),h=!1}finally{h&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){_.post.call(l,a,!0),_.destroy.call(null,a)})}_.post.call(l,a,!1),_.destroy.call(null,a)},N.apply(process,f)}}},9565:u=>{"use strict";function R(){}u.exports=function(){const _=this._hooks,S=this._state,N=global.Promise,f=N.prototype.then;N.prototype.then=h;function o(p,d,m,k){return typeof p!="function"?k?l(m):a(m):function(){_.pre.call(d,m);try{return p.apply(this,arguments)}finally{_.post.call(d,m,!1),_.destroy.call(null,m)}}}function l(p){return function(m){return _.destroy.call(null,p),m}}function a(p){return function(m){throw _.destroy.call(null,p),m}}function h(p,d){if(!S.enabled)return f.call(this,p,d);const m=new R,k=--S.counter;return _.init.call(m,k,0,null,null),f.call(this,o(p,m,k,!0),o(d,m,k,!1))}}},7190:(u,R,g)=>{"use strict";const _=g(8213);function S(){}function N(){}function f(){}const o=new Map,l=new Map,a=new Map;let h=null,p=!1;u.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",S,o,!0),d(this._hooks,this._state,"setInterval","clearInterval",N,l,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",f,a,!0),global.setTimeout=_.setTimeout,global.setInterval=_.setInterval,global.setImmediate=_.setImmediate,global.clearTimeout=_.clearTimeout,global.clearInterval=_.clearInterval,global.clearImmediate=_.clearImmediate};function d(m,k,y,E,C,P,O){const U=_[y],A=_[E];_[y]=function(){if(!k.enabled)return U.apply(_,arguments);const $=new Array(arguments.length);for(let M=0;M<arguments.length;M++)$[M]=arguments[M];const x=$[0];if(typeof x!="function")throw new TypeError('"callback" argument must be a function');const G=new C,q=--k.counter;let L;return m.init.call(G,q,0,null,null),$[0]=function(){h=L,m.pre.call(G,q);let M=!0;try{x.apply(this,arguments),M=!1}finally{M&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){m.post.call(G,q,!0),P.delete(L),m.destroy.call(null,q)})}m.post.call(G,q,!1),h=null,(O||p)&&(p=!1,P.delete(L),m.destroy.call(null,q))},L=U.apply(_,$),P.set(L,q),L},_[E]=function($){if(h===$&&$!==null)p=!0;else if(P.has($)){const x=P.get($);P.delete($),m.destroy.call(null,x)}A.apply(_,arguments)}}},8286:u=>{"use strict";u.exports=(R,g)=>class extends R{constructor(S){var N,f;super(l);var o=this;try{S.apply(N,f)}catch(a){f[1](a)}return o;function l(a,h){N=this,f=[p,d];function p(m){return g(o,!1),a(m)}function d(m){return g(o,!1),h(m)}}}}},9090:(u,R,g)=>{var _=g(6372).wrap,S=1<<0,N=1<<1,f=1<<2,o=1<<3,l=[],a=0,h=!1,p=[],d,m;function k(G,q){var L=G.length,M=q.length,B=[];if(L===0&&M===0)return B;for(var K=0;K<L;K++)B[K]=G[K];if(M===0)return B;for(var Y=0;Y<M;Y++){var Q=!0;for(K=0;K<L;K++)if(G[K].uid===q[Y].uid){Q=!1;break}Q&&B.push(q[Y])}return B}if(process._fatalException){var y=!1,E;d=function(q){var L=l.length;if(y||L===0)return!1;var M=!1;y=!0;for(var B=0;B<L;++B){var K=l[B];if((K.flags&o)!=0){var Y=E&&E[K.uid];M=K.error(Y,q)||M}}return y=!1,p.length>0&&(l=p.pop()),E=void 0,M&&!h},m=function(q,L,M){var B=[];h=!0;for(var K=0;K<M;++K){var Y=L[K];if(B[Y.uid]=Y.data,(Y.flags&S)!=0){var Q=Y.create(Y.data);Q!==void 0&&(B[Y.uid]=Q)}}return h=!1,function(){E=B,p.push(l),l=k(L,l),h=!0;for(var re=0;re<M;++re)(L[re].flags&N)>0&&L[re].before(this,B[L[re].uid]);h=!1;var de=q.apply(this,arguments);for(h=!0,re=0;re<M;++re)(L[re].flags&f)>0&&L[re].after(this,B[L[re].uid]);return h=!1,l=p.pop(),E=void 0,de}},_(process,"_fatalException",function(G){return function(L){return d(L)||G(L)}})}else{var C=!1;d=function(q){if(C)throw q;for(var L=!1,M=l.length,B=0;B<M;++B){var K=l[B];(K.flags&o)!=0&&(L=K.error(null,q)||L)}if(!L&&h)throw q},m=function(q,L,M){var B=[];h=!0;for(var K=0;K<M;++K){var Y=L[K];if(B[Y.uid]=Y.data,(Y.flags&S)!=0){var Q=Y.create(Y.data);Q!==void 0&&(B[Y.uid]=Q)}}return h=!1,function(){var re=!1,de=!1;p.push(l),l=k(L,l),h=!0;for(var pe=0;pe<M;++pe)(L[pe].flags&N)>0&&L[pe].before(this,B[L[pe].uid]);h=!1;var _e;try{_e=q.apply(this,arguments)}catch(ne){re=!0;for(var pe=0;pe<M;++pe)if((l[pe].flags&o)!=0)try{de=l[pe].error(B[L[pe].uid],ne)||de}catch(se){throw C=!0,se}if(!de)throw process.removeListener("uncaughtException",d),process._originalNextTick(function(){process.addListener("uncaughtException",d)}),ne}finally{if(!re||de){for(h=!0,pe=0;pe<M;++pe)(L[pe].flags&f)>0&&L[pe].after(this,B[L[pe].uid]);h=!1}l=p.pop()}return _e}},process.addListener("uncaughtException",d)}function P(G,q,L){h=!0;for(var M=0;M<L;++M){var B=q[M];B.create&&B.create(B.data)}return h=!1,function(){p.push(l),l=k(q,l);var K=G.apply(this,arguments);return l=p.pop(),K}}function O(G){var q=l.length;if(q===0)return G;for(var L=l.slice(),M=0;M<q;++M)if(L[M].flags>0)return m(G,L,q);return P(G,L,q)}function U(G,q){typeof G.create=="function"&&(this.create=G.create,this.flags|=S),typeof G.before=="function"&&(this.before=G.before,this.flags|=N),typeof G.after=="function"&&(this.after=G.after,this.flags|=f),typeof G.error=="function"&&(this.error=G.error,this.flags|=o),this.uid=++a,this.data=q===void 0?null:q}U.prototype.create=void 0,U.prototype.before=void 0,U.prototype.after=void 0,U.prototype.error=void 0,U.prototype.data=void 0,U.prototype.uid=0,U.prototype.flags=0;function A(G,q){if(typeof G!="object"||!G)throw new TypeError("callbacks argument must be an object");return G instanceof U?G:new U(G,q)}function $(G,q){var L;G instanceof U?L=G:L=A(G,q);for(var M=!1,B=0;B<l.length;B++)if(L===l[B]){M=!0;break}return M||l.push(L),L}function x(G){for(var q=0;q<l.length;q++)if(G===l[q]){l.splice(q,1);break}}process.createAsyncListener=A,process.addAsyncListener=$,process.removeAsyncListener=x,u.exports=O},7645:(u,R,g)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var _=g(6372),S=g(2249),N=_.wrap,f=_.massWrap,o=g(9090),l=g(1669),a=S.gte(process.version,"6.0.0"),h=S.gte(process.version,"7.0.0"),p=S.gte(process.version,"8.0.0"),d=S.gte(process.version,"11.0.0"),m=g(1631);h&&!m._normalizeArgs?m._normalizeArgs=function(ne){if(ne.length===0)return[{},null];var oe=ne[0],se={};typeof oe=="object"&&oe!==null?se=oe:_e(oe)?se.path=oe:(se.port=oe,ne.length>1&&typeof ne[1]=="string"&&(se.host=ne[1]));var ye=ne[ne.length-1];return typeof ye!="function"?[se,null]:[se,ye]}:!h&&!m._normalizeConnectArgs&&(m._normalizeConnectArgs=function(ne){var oe={};function se(be){return(be=Number(be))>=0?be:!1}typeof ne[0]=="object"&&ne[0]!==null?oe=ne[0]:typeof ne[0]=="string"&&se(ne[0])===!1?oe.path=ne[0]:(oe.port=ne[0],typeof ne[1]=="string"&&(oe.host=ne[1]));var ye=ne[ne.length-1];return typeof ye=="function"?[oe,ye]:[oe]}),"_setUpListenHandle"in m.Server.prototype?N(m.Server.prototype,"_setUpListenHandle",k):N(m.Server.prototype,"_listen2",k);function k(ne){return function(){this.on("connection",function(oe){oe._handle&&(oe._handle.onread=o(oe._handle.onread))});try{return ne.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=o(this._handle.onconnection))}}}function y(ne){if(ne&&ne._handle){var oe=ne._handle;oe._originalOnread||(oe._originalOnread=oe.onread),oe.onread=o(oe._originalOnread)}}N(m.Socket.prototype,"connect",function(ne){return function(){var oe;p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?oe=arguments[0]:oe=h?m._normalizeArgs(arguments):m._normalizeConnectArgs(arguments),oe[1]&&(oe[1]=o(oe[1]));var se=ne.apply(this,oe);return y(this),se}});var E=g(8605);N(E.Agent.prototype,"addRequest",function(ne){return function(oe){var se=oe.onSocket;return oe.onSocket=o(function(ye){return y(ye),se.apply(this,arguments)}),ne.apply(this,arguments)}});var C=g(3129);function P(ne){Array.isArray(ne.stdio)&&ne.stdio.forEach(function(oe){oe&&oe._handle&&(oe._handle.onread=o(oe._handle.onread),N(oe._handle,"close",de))}),ne._handle&&(ne._handle.onexit=o(ne._handle.onexit))}C.ChildProcess?N(C.ChildProcess.prototype,"spawn",function(ne){return function(){var oe=ne.apply(this,arguments);return P(this),oe}}):f(C,["execFile","fork","spawn"],function(ne){return function(){var oe=ne.apply(this,arguments);return P(oe),oe}}),process._fatalException||(process._originalNextTick=process.nextTick);var O=[];process._nextDomainTick&&O.push("_nextDomainTick"),process._tickDomainCallback&&O.push("_tickDomainCallback"),f(process,O,re),N(process,"nextTick",de);var U=["setTimeout","setInterval"];global.setImmediate&&U.push("setImmediate");var A=g(8213),$=global.setTimeout===A.setTimeout;f(A,U,de),$&&f(global,U,de);var x=g(881);f(x,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],re),x.resolveNaptr&&N(x,"resolveNaptr",re);var G=g(5747);f(G,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],re),G.lchown&&N(G,"lchown",re),G.lchmod&&N(G,"lchmod",re),G.ftruncate&&N(G,"ftruncate",re);var q;try{q=g(8761)}catch(ne){}if(q&&q.Deflate&&q.Deflate.prototype){var L=Object.getPrototypeOf(q.Deflate.prototype);L._transform?N(L,"_transform",re):L.write&&L.flush&&L.end&&f(L,["write","flush","end"],re)}var M;try{M=g(6417)}catch(ne){}if(M){var B=["pbkdf2","randomBytes"];d||B.push("pseudoRandomBytes"),f(M,B,re)}var K=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";if(K){var Y=process.addAsyncListener({create:function(){K=!1}});global.Promise.resolve(!0).then(function(){K=!1}),process.removeAsyncListener(Y)}K&&Q();function Q(){var ne=global.Promise;function oe(ge){if(!(this instanceof oe))return ne(ge);if(typeof ge!="function")return new ne(ge);var we,Ee,Ue=new ne(Ze);Ue.__proto__=oe.prototype;try{ge.apply(we,Ee)}catch(Ge){Ee[1](Ge)}return Ue;function Ze(Ge,ze){we=this,Ee=[Te,Ne];function Te(Pe){return ye(Ue,!1),Ge(Pe)}function Ne(Pe){return ye(Ue,!1),ze(Pe)}}}if(l.inherits(oe,ne),N(ne.prototype,"then",De),ne.prototype.chain&&N(ne.prototype,"chain",De),a)global.Promise=g(8286)(ne,ye);else{var se=["all","race","reject","resolve","accept","defer"];se.forEach(function(ge){typeof ne[ge]=="function"&&(oe[ge]=ne[ge])}),global.Promise=oe}function ye(ge,we){(!ge.__asl_wrapper||we)&&(ge.__asl_wrapper=o(be))}function be(ge,we,Ee,Ue){var Ze;try{return Ze=we.call(ge,Ee),{returnVal:Ze,error:!1}}catch(Ge){return{errorVal:Ge,error:!0}}finally{Ze instanceof ne?Ue.__asl_wrapper=function(){var ze=Ze.__asl_wrapper||be;return ze.apply(this,arguments)}:ye(Ue,!0)}}function De(ge){return function(){var Ee=this,Ue=ge.apply(Ee,Array.prototype.map.call(arguments,Ze));return Ue.__asl_wrapper=function(ze,Te,Ne,Pe){return Ee.__asl_wrapper?(Ee.__asl_wrapper(ze,function(){},null,Ue),Ue.__asl_wrapper(ze,Te,Ne,Pe)):be(ze,Te,Ne,Pe)},Ue;function Ze(Ge){return typeof Ge!="function"?Ge:o(function(ze){var Te=(Ee.__asl_wrapper||be)(this,Ge,ze,Ue);if(Te.error)throw Te.errorVal;return Te.returnVal})}}}}function re(ne){var oe=function(){var se,ye=arguments.length-1;if(typeof arguments[ye]=="function"){se=Array(arguments.length);for(var be=0;be<arguments.length-1;be++)se[be]=arguments[be];se[ye]=o(arguments[ye])}return ne.apply(this,se||arguments)};switch(ne.length){case 1:return function(se){return arguments.length!==1?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se))};case 2:return function(se,ye){return arguments.length!==2?oe.apply(this,arguments):(typeof ye=="function"&&(ye=o(ye)),ne.call(this,se,ye))};case 3:return function(se,ye,be){return arguments.length!==3?oe.apply(this,arguments):(typeof be=="function"&&(be=o(be)),ne.call(this,se,ye,be))};case 4:return function(se,ye,be,De){return arguments.length!==4?oe.apply(this,arguments):(typeof De=="function"&&(De=o(De)),ne.call(this,se,ye,be,De))};case 5:return function(se,ye,be,De,ge){return arguments.length!==5?oe.apply(this,arguments):(typeof ge=="function"&&(ge=o(ge)),ne.call(this,se,ye,be,De,ge))};case 6:return function(se,ye,be,De,ge,we){return arguments.length!==6?oe.apply(this,arguments):(typeof we=="function"&&(we=o(we)),ne.call(this,se,ye,be,De,ge,we))};default:return oe}}function de(ne){var oe=function(){var se;if(typeof arguments[0]=="function"){se=Array(arguments.length),se[0]=o(arguments[0]);for(var ye=1;ye<arguments.length;ye++)se[ye]=arguments[ye]}return ne.apply(this,se||arguments)};switch(ne.length){case 1:return function(se){return arguments.length!==1?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se))};case 2:return function(se,ye){return arguments.length!==2?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se,ye))};case 3:return function(se,ye,be){return arguments.length!==3?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se,ye,be))};case 4:return function(se,ye,be,De){return arguments.length!==4?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se,ye,be,De))};case 5:return function(se,ye,be,De,ge){return arguments.length!==5?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se,ye,be,De,ge))};case 6:return function(se,ye,be,De,ge,we){return arguments.length!==6?oe.apply(this,arguments):(typeof se=="function"&&(se=o(se)),ne.call(this,se,ye,be,De,ge,we))};default:return oe}}function pe(ne){return(ne=Number(ne))>=0?ne:!1}function _e(ne){return typeof ne=="string"&&pe(ne)===!1}},2249:(u,R)=>{R=u.exports=ie;var g;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?g=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:g=function(){},R.SEMVER_SPEC_VERSION="2.0.0";var _=256,S=Number.MAX_SAFE_INTEGER||9007199254740991,N=16,f=R.re=[],o=R.src=[],l=0,a=l++;o[a]="0|[1-9]\\d*";var h=l++;o[h]="[0-9]+";var p=l++;o[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=l++;o[d]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var m=l++;o[m]="("+o[h]+")\\.("+o[h]+")\\.("+o[h]+")";var k=l++;o[k]="(?:"+o[a]+"|"+o[p]+")";var y=l++;o[y]="(?:"+o[h]+"|"+o[p]+")";var E=l++;o[E]="(?:-("+o[k]+"(?:\\."+o[k]+")*))";var C=l++;o[C]="(?:-?("+o[y]+"(?:\\."+o[y]+")*))";var P=l++;o[P]="[0-9A-Za-z-]+";var O=l++;o[O]="(?:\\+("+o[P]+"(?:\\."+o[P]+")*))";var U=l++,A="v?"+o[d]+o[E]+"?"+o[O]+"?";o[U]="^"+A+"$";var $="[v=\\s]*"+o[m]+o[C]+"?"+o[O]+"?",x=l++;o[x]="^"+$+"$";var G=l++;o[G]="((?:<|>)?=?)";var q=l++;o[q]=o[h]+"|x|X|\\*";var L=l++;o[L]=o[a]+"|x|X|\\*";var M=l++;o[M]="[v=\\s]*("+o[L]+")(?:\\.("+o[L]+")(?:\\.("+o[L]+")(?:"+o[E]+")?"+o[O]+"?)?)?";var B=l++;o[B]="[v=\\s]*("+o[q]+")(?:\\.("+o[q]+")(?:\\.("+o[q]+")(?:"+o[C]+")?"+o[O]+"?)?)?";var K=l++;o[K]="^"+o[G]+"\\s*"+o[M]+"$";var Y=l++;o[Y]="^"+o[G]+"\\s*"+o[B]+"$";var Q=l++;o[Q]="(?:^|[^\\d])(\\d{1,"+N+"})(?:\\.(\\d{1,"+N+"}))?(?:\\.(\\d{1,"+N+"}))?(?:$|[^\\d])";var re=l++;o[re]="(?:~>?)";var de=l++;o[de]="(\\s*)"+o[re]+"\\s+",f[de]=new RegExp(o[de],"g");var pe="$1~",_e=l++;o[_e]="^"+o[re]+o[M]+"$";var ne=l++;o[ne]="^"+o[re]+o[B]+"$";var oe=l++;o[oe]="(?:\\^)";var se=l++;o[se]="(\\s*)"+o[oe]+"\\s+",f[se]=new RegExp(o[se],"g");var ye="$1^",be=l++;o[be]="^"+o[oe]+o[M]+"$";var De=l++;o[De]="^"+o[oe]+o[B]+"$";var ge=l++;o[ge]="^"+o[G]+"\\s*("+$+")$|^$";var we=l++;o[we]="^"+o[G]+"\\s*("+A+")$|^$";var Ee=l++;o[Ee]="(\\s*)"+o[G]+"\\s*("+$+"|"+o[M]+")",f[Ee]=new RegExp(o[Ee],"g");var Ue="$1$2$3",Ze=l++;o[Ze]="^\\s*("+o[M]+")\\s+-\\s+("+o[M]+")\\s*$";var Ge=l++;o[Ge]="^\\s*("+o[B]+")\\s+-\\s+("+o[B]+")\\s*$";var ze=l++;o[ze]="(<|>)?=?\\s*\\*";for(var Te=0;Te<l;Te++)g(Te,o[Te]),f[Te]||(f[Te]=new RegExp(o[Te]));R.parse=Ne;function Ne(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie)return b;if(typeof b!="string"||b.length>_)return null;var F=I.loose?f[x]:f[U];if(!F.test(b))return null;try{return new ie(b,I)}catch(j){return null}}R.valid=Pe;function Pe(b,I){var F=Ne(b,I);return F?F.version:null}R.clean=et;function et(b,I){var F=Ne(b.trim().replace(/^[=v]+/,""),I);return F?F.version:null}R.SemVer=ie;function ie(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie){if(b.loose===I.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>_)throw new TypeError("version is longer than "+_+" characters");if(!(this instanceof ie))return new ie(b,I);g("SemVer",b,I),this.options=I,this.loose=!!I.loose;var F=b.trim().match(I.loose?f[x]:f[U]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>S||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(j){if(/^[0-9]+$/.test(j)){var z=+j;if(z>=0&&z<S)return z}return j}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ie.prototype.toString=function(){return this.version},ie.prototype.compare=function(b){return g("SemVer.compare",this.version,this.options,b),b instanceof ie||(b=new ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},ie.prototype.compareMain=function(b){return b instanceof ie||(b=new ie(b,this.options)),Le(this.major,b.major)||Le(this.minor,b.minor)||Le(this.patch,b.patch)},ie.prototype.comparePre=function(b){if(b instanceof ie||(b=new ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var I=0;do{var F=this.prerelease[I],j=b.prerelease[I];if(g("prerelease compare",I,F,j),F===void 0&&j===void 0)return 0;if(j===void 0)return 1;if(F===void 0)return-1;if(F===j)continue;return Le(F,j)}while(++I)},ie.prototype.inc=function(b,I){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",I);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",I);break;case"prepatch":this.prerelease.length=0,this.inc("patch",I),this.inc("pre",I);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",I),this.inc("pre",I);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}I&&(this.prerelease[0]===I?isNaN(this.prerelease[1])&&(this.prerelease=[I,0]):this.prerelease=[I,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},R.inc=Ut;function Ut(b,I,F,j){typeof F=="string"&&(j=F,F=void 0);try{return new ie(b,F).inc(I,j).version}catch(z){return null}}R.diff=$t;function $t(b,I){if(Dt(b,I))return null;var F=Ne(b),j=Ne(I),z="";if(F.prerelease.length||j.prerelease.length){z="pre";var X="prerelease"}for(var J in F)if((J==="major"||J==="minor"||J==="patch")&&F[J]!==j[J])return z+J;return X}R.compareIdentifiers=Le;var xt=/^[0-9]+$/;function Le(b,I){var F=xt.test(b),j=xt.test(I);return F&&j&&(b=+b,I=+I),b===I?0:F&&!j?-1:j&&!F?1:b<I?-1:1}R.rcompareIdentifiers=Mt;function Mt(b,I){return Le(I,b)}R.major=Wt;function Wt(b,I){return new ie(b,I).major}R.minor=dt;function dt(b,I){return new ie(b,I).minor}R.patch=Zr;function Zr(b,I){return new ie(b,I).patch}R.compare=$e;function $e(b,I,F){return new ie(b,F).compare(new ie(I,F))}R.compareLoose=Ar;function Ar(b,I){return $e(b,I,!0)}R.rcompare=fr;function fr(b,I,F){return $e(I,b,F)}R.sort=St;function St(b,I){return b.sort(function(F,j){return R.compare(F,j,I)})}R.rsort=Fr;function Fr(b,I){return b.sort(function(F,j){return R.rcompare(F,j,I)})}R.gt=it;function it(b,I,F){return $e(b,I,F)>0}R.lt=st;function st(b,I,F){return $e(b,I,F)<0}R.eq=Dt;function Dt(b,I,F){return $e(b,I,F)===0}R.neq=Tt;function Tt(b,I,F){return $e(b,I,F)!==0}R.gte=Ht;function Ht(b,I,F){return $e(b,I,F)>=0}R.lte=Gt;function Gt(b,I,F){return $e(b,I,F)<=0}R.cmp=tt;function tt(b,I,F,j){switch(I){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Dt(b,F,j);case"!=":return Tt(b,F,j);case">":return it(b,F,j);case">=":return Ht(b,F,j);case"<":return st(b,F,j);case"<=":return Gt(b,F,j);default:throw new TypeError("Invalid operator: "+I)}}R.Comparator=Ae;function Ae(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof Ae){if(b.loose===!!I.loose)return b;b=b.value}if(!(this instanceof Ae))return new Ae(b,I);g("comparator",b,I),this.options=I,this.loose=!!I.loose,this.parse(b),this.semver===ht?this.value="":this.value=this.operator+this.semver.version,g("comp",this)}var ht={};Ae.prototype.parse=function(b){var I=this.options.loose?f[ge]:f[we],F=b.match(I);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new ie(F[2],this.options.loose):this.semver=ht},Ae.prototype.toString=function(){return this.value},Ae.prototype.test=function(b){return g("Comparator.test",b,this.options.loose),this.semver===ht?!0:(typeof b=="string"&&(b=new ie(b,this.options)),tt(b,this.operator,this.semver,this.options))},Ae.prototype.intersects=function(b,I){if(!(b instanceof Ae))throw new TypeError("a Comparator is required");(!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1});var F;if(this.operator==="")return F=new ve(b.value,I),We(this.value,F,I);if(b.operator==="")return F=new ve(this.value,I),We(b.semver,F,I);var j=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),z=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),X=this.semver.version===b.semver.version,J=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),le=tt(this.semver,"<",b.semver,I)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),ue=tt(this.semver,">",b.semver,I)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return j||z||X&&J||le||ue},R.Range=ve;function ve(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ve)return b.loose===!!I.loose&&b.includePrerelease===!!I.includePrerelease?b:new ve(b.raw,I);if(b instanceof Ae)return new ve(b.value,I);if(!(this instanceof ve))return new ve(b,I);if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(b){var I=this.options.loose;b=b.trim();var F=I?f[Ge]:f[Ze];b=b.replace(F,rn),g("hyphen replace",b),b=b.replace(f[Ee],Ue),g("comparator trim",b,f[Ee]),b=b.replace(f[de],pe),b=b.replace(f[se],ye),b=b.split(/\s+/).join(" ");var j=I?f[ge]:f[we],z=b.split(" ").map(function(X){return Vt(X,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(z=z.filter(function(X){return!!X.match(j)})),z=z.map(function(X){return new Ae(X,this.options)},this),z},ve.prototype.intersects=function(b,I){if(!(b instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(j){return b.set.some(function(z){return z.every(function(X){return j.intersects(X,I)})})})})},R.toComparators=Or;function Or(b,I){return new ve(b,I).set.map(function(F){return F.map(function(j){return j.value}).join(" ").trim().split(" ")})}function Vt(b,I){return g("comp",b,I),b=Qe(b,I),g("caret",b),b=en(b,I),g("tildes",b),b=Ce(b,I),g("xrange",b),b=Mr(b,I),g("stars",b),b}function Se(b){return!b||b.toLowerCase()==="x"||b==="*"}function en(b,I){return b.trim().split(/\s+/).map(function(F){return tn(F,I)}).join(" ")}function tn(b,I){var F=I.loose?f[ne]:f[_e];return b.replace(F,function(j,z,X,J,le){g("tilde",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":le?(g("replaceTilde pr",le),ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0"):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0",g("tilde return",ue),ue})}function Qe(b,I){return b.trim().split(/\s+/).map(function(F){return ft(F,I)}).join(" ")}function ft(b,I){g("caret",b,I);var F=I.loose?f[De]:f[be];return b.replace(F,function(j,z,X,J,le){g("caret",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?z==="0"?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+".0 <"+(+z+1)+".0.0":le?(g("replaceCaret pr",le),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+"-"+le+" <"+(+z+1)+".0.0"):(g("no pr"),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+" <"+(+z+1)+".0.0"),g("caret return",ue),ue})}function Ce(b,I){return g("replaceXRanges",b,I),b.split(/\s+/).map(function(F){return xr(F,I)}).join(" ")}function xr(b,I){b=b.trim();var F=I.loose?f[Y]:f[K];return b.replace(F,function(j,z,X,J,le,ue){g("xRange",b,j,z,X,J,le,ue);var qe=Se(X),xe=qe||Se(J),Fe=xe||Se(le),Ie=Fe;return z==="="&&Ie&&(z=""),qe?z===">"||z==="<"?j="<0.0.0":j="*":z&&Ie?(xe&&(J=0),le=0,z===">"?(z=">=",xe?(X=+X+1,J=0,le=0):(J=+J+1,le=0)):z==="<="&&(z="<",xe?X=+X+1:J=+J+1),j=z+X+"."+J+"."+le):xe?j=">="+X+".0.0 <"+(+X+1)+".0.0":Fe&&(j=">="+X+"."+J+".0 <"+X+"."+(+J+1)+".0"),g("xRange return",j),j})}function Mr(b,I){return g("replaceStars",b,I),b.trim().replace(f[ze],"")}function rn(b,I,F,j,z,X,J,le,ue,qe,xe,Fe,Ie){return Se(F)?I="":Se(j)?I=">="+F+".0.0":Se(z)?I=">="+F+"."+j+".0":I=">="+I,Se(ue)?le="":Se(qe)?le="<"+(+ue+1)+".0.0":Se(xe)?le="<"+ue+"."+(+qe+1)+".0":Fe?le="<="+ue+"."+qe+"."+xe+"-"+Fe:le="<="+le,(I+" "+le).trim()}ve.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new ie(b,this.options));for(var I=0;I<this.set.length;I++)if(nn(this.set[I],b,this.options))return!0;return!1};function nn(b,I,F){for(var j=0;j<b.length;j++)if(!b[j].test(I))return!1;if(I.prerelease.length&&!F.includePrerelease){for(j=0;j<b.length;j++)if(g(b[j].semver),b[j].semver!==ht&&b[j].semver.prerelease.length>0){var z=b[j].semver;if(z.major===I.major&&z.minor===I.minor&&z.patch===I.patch)return!0}return!1}return!0}R.satisfies=We;function We(b,I,F){try{I=new ve(I,F)}catch(j){return!1}return I.test(b)}R.maxSatisfying=Lr;function Lr(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===-1)&&(j=J,z=new ie(j,F))}),j}R.minSatisfying=sn;function sn(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===1)&&(j=J,z=new ie(j,F))}),j}R.minVersion=an;function an(b,I){b=new ve(b,I);var F=new ie("0.0.0");if(b.test(F)||(F=new ie("0.0.0-0"),b.test(F)))return F;F=null;for(var j=0;j<b.set.length;++j){var z=b.set[j];z.forEach(function(X){var J=new ie(X.semver.version);switch(X.operator){case">":J.prerelease.length===0?J.patch++:J.prerelease.push(0),J.raw=J.format();case"":case">=":(!F||it(F,J))&&(F=J);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+X.operator)}})}return F&&b.test(F)?F:null}R.validRange=qr;function qr(b,I){try{return new ve(b,I).range||"*"}catch(F){return null}}R.ltr=on;function on(b,I,F){return kt(b,I,"<",F)}R.gtr=un;function un(b,I,F){return kt(b,I,">",F)}R.outside=kt;function kt(b,I,F,j){b=new ie(b,j),I=new ve(I,j);var z,X,J,le,ue;switch(F){case">":z=it,X=Gt,J=st,le=">",ue=">=";break;case"<":z=st,X=Ht,J=it,le="<",ue="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(We(b,I,j))return!1;for(var qe=0;qe<I.set.length;++qe){var xe=I.set[qe],Fe=null,Ie=null;if(xe.forEach(function(Be){Be.semver===ht&&(Be=new Ae(">=0.0.0")),Fe=Fe||Be,Ie=Ie||Be,z(Be.semver,Fe.semver,j)?Fe=Be:J(Be.semver,Ie.semver,j)&&(Ie=Be)}),Fe.operator===le||Fe.operator===ue||(!Ie.operator||Ie.operator===le)&&X(b,Ie.semver))return!1;if(Ie.operator===ue&&J(b,Ie.semver))return!1}return!0}R.prerelease=gr;function gr(b,I){var F=Ne(b,I);return F&&F.prerelease.length?F.prerelease:null}R.intersects=ln;function ln(b,I,F){return b=new ve(b,F),I=new ve(I,F),b.intersects(I)}R.coerce=vr;function vr(b){if(b instanceof ie)return b;if(typeof b!="string")return null;var I=b.match(f[Q]);return I==null?null:Ne(I[1]+"."+(I[2]||"0")+"."+(I[3]||"0"))}},9669:(u,R,g)=>{u.exports=g(1609)},7970:(u,R,g)=>{"use strict";var _=g(4867),S=g(6026),N=g(4097),f=g(5327),o=g(8605),l=g(7211),a=g(938).http,h=g(938).https,p=g(8835),d=g(8761),m=g(696),k=g(5061),y=g(481),E=/https:?/;function C(P,O,U){if(P.hostname=O.host,P.host=O.host,P.port=O.port,P.path=U,O.auth){var A=Buffer.from(O.auth.username+":"+O.auth.password,"utf8").toString("base64");P.headers["Proxy-Authorization"]="Basic "+A}P.beforeRedirect=function(x){x.headers.host=x.host,C(x,O,x.href)}}u.exports=function(O){return new Promise(function(A,$){var x=function(Pe){A(Pe)},G=function(Pe){$(Pe)},q=O.data,L=O.headers;if(!L["User-Agent"]&&!L["user-agent"]&&(L["User-Agent"]="axios/"+m.version),q&&!_.isStream(q)){if(!Buffer.isBuffer(q))if(_.isArrayBuffer(q))q=Buffer.from(new Uint8Array(q));else if(_.isString(q))q=Buffer.from(q,"utf-8");else return G(k("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",O));L["Content-Length"]=q.length}var M=void 0;if(O.auth){var B=O.auth.username||"",K=O.auth.password||"";M=B+":"+K}var Y=N(O.baseURL,O.url),Q=p.parse(Y),re=Q.protocol||"http:";if(!M&&Q.auth){var de=Q.auth.split(":"),pe=de[0]||"",_e=de[1]||"";M=pe+":"+_e}M&&delete L.Authorization;var ne=E.test(re),oe=ne?O.httpsAgent:O.httpAgent,se={path:f(Q.path,O.params,O.paramsSerializer).replace(/^\?/,""),method:O.method.toUpperCase(),headers:L,agent:oe,agents:{http:O.httpAgent,https:O.httpsAgent},auth:M};O.socketPath?se.socketPath=O.socketPath:(se.hostname=Q.hostname,se.port=Q.port);var ye=O.proxy;if(!ye&&ye!==!1){var be=re.slice(0,-1)+"_proxy",De=process.env[be]||process.env[be.toUpperCase()];if(De){var ge=p.parse(De),we=process.env.no_proxy||process.env.NO_PROXY,Ee=!0;if(we){var Ue=we.split(",").map(function(Pe){return Pe.trim()});Ee=!Ue.some(function(Pe){return Pe?Pe==="*"||Pe[0]==="."&&Q.hostname.substr(Q.hostname.length-Pe.length)===Pe?!0:Q.hostname===Pe:!1})}if(Ee&&(ye={host:ge.hostname,port:ge.port,protocol:ge.protocol},ge.auth)){var Ze=ge.auth.split(":");ye.auth={username:Ze[0],password:Ze[1]}}}}ye&&(se.headers.host=Q.hostname+(Q.port?":"+Q.port:""),C(se,ye,re+"//"+Q.hostname+(Q.port?":"+Q.port:"")+se.path));var Ge,ze=ne&&(ye?E.test(ye.protocol):!0);O.transport?Ge=O.transport:O.maxRedirects===0?Ge=ze?l:o:(O.maxRedirects&&(se.maxRedirects=O.maxRedirects),Ge=ze?h:a),O.maxBodyLength>-1&&(se.maxBodyLength=O.maxBodyLength);var Te=Ge.request(se,function(Pe){if(!Te.aborted){var et=Pe,ie=Pe.req||Te;if(Pe.statusCode!==204&&ie.method!=="HEAD"&&O.decompress!==!1)switch(Pe.headers["content-encoding"]){case"gzip":case"compress":case"deflate":et=et.pipe(d.createUnzip()),delete Pe.headers["content-encoding"];break}var Ut={status:Pe.statusCode,statusText:Pe.statusMessage,headers:Pe.headers,config:O,request:ie};if(O.responseType==="stream")Ut.data=et,S(x,G,Ut);else{var $t=[];et.on("data",function(Le){$t.push(Le),O.maxContentLength>-1&&Buffer.concat($t).length>O.maxContentLength&&(et.destroy(),G(k("maxContentLength size of "+O.maxContentLength+" exceeded",O,null,ie)))}),et.on("error",function(Le){Te.aborted||G(y(Le,O,null,ie))}),et.on("end",function(){var Le=Buffer.concat($t);O.responseType!=="arraybuffer"&&(Le=Le.toString(O.responseEncoding),(!O.responseEncoding||O.responseEncoding==="utf8")&&(Le=_.stripBOM(Le))),Ut.data=Le,S(x,G,Ut)})}}});Te.on("error",function(Pe){Te.aborted&&Pe.code!=="ERR_FR_TOO_MANY_REDIRECTS"||G(y(Pe,O,null,Te))}),O.timeout&&Te.setTimeout(O.timeout,function(){Te.abort(),G(k("timeout of "+O.timeout+"ms exceeded",O,"ECONNABORTED",Te))}),O.cancelToken&&O.cancelToken.promise.then(function(Pe){Te.aborted||(Te.abort(),G(Pe))}),_.isStream(q)?q.on("error",function(Pe){G(y(Pe,O,null,Te))}).pipe(Te):Te.end(q)})}},5448:(u,R,g)=>{"use strict";var _=g(4867),S=g(6026),N=g(4372),f=g(5327),o=g(4097),l=g(4109),a=g(7985),h=g(5061);u.exports=function(d){return new Promise(function(k,y){var E=d.data,C=d.headers;_.isFormData(E)&&delete C["Content-Type"];var P=new XMLHttpRequest;if(d.auth){var O=d.auth.username||"",U=d.auth.password?unescape(encodeURIComponent(d.auth.password)):"";C.Authorization="Basic "+btoa(O+":"+U)}var A=o(d.baseURL,d.url);if(P.open(d.method.toUpperCase(),f(A,d.params,d.paramsSerializer),!0),P.timeout=d.timeout,P.onreadystatechange=function(){if(!(!P||P.readyState!==4)&&!(P.status===0&&!(P.responseURL&&P.responseURL.indexOf("file:")===0))){var G="getAllResponseHeaders"in P?l(P.getAllResponseHeaders()):null,q=!d.responseType||d.responseType==="text"?P.responseText:P.response,L={data:q,status:P.status,statusText:P.statusText,headers:G,config:d,request:P};S(k,y,L),P=null}},P.onabort=function(){!P||(y(h("Request aborted",d,"ECONNABORTED",P)),P=null)},P.onerror=function(){y(h("Network Error",d,null,P)),P=null},P.ontimeout=function(){var G="timeout of "+d.timeout+"ms exceeded";d.timeoutErrorMessage&&(G=d.timeoutErrorMessage),y(h(G,d,"ECONNABORTED",P)),P=null},_.isStandardBrowserEnv()){var $=(d.withCredentials||a(A))&&d.xsrfCookieName?N.read(d.xsrfCookieName):void 0;$&&(C[d.xsrfHeaderName]=$)}if("setRequestHeader"in P&&_.forEach(C,function(G,q){typeof E=="undefined"&&q.toLowerCase()==="content-type"?delete C[q]:P.setRequestHeader(q,G)}),_.isUndefined(d.withCredentials)||(P.withCredentials=!!d.withCredentials),d.responseType)try{P.responseType=d.responseType}catch(x){if(d.responseType!=="json")throw x}typeof d.onDownloadProgress=="function"&&P.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&P.upload&&P.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(G){!P||(P.abort(),y(G),P=null)}),E||(E=null),P.send(E)})}},1609:(u,R,g)=>{"use strict";var _=g(4867),S=g(1849),N=g(321),f=g(7185),o=g(5655);function l(h){var p=new N(h),d=S(N.prototype.request,p);return _.extend(d,N.prototype,p),_.extend(d,p),d}var a=l(o);a.Axios=N,a.create=function(p){return l(f(a.defaults,p))},a.Cancel=g(5263),a.CancelToken=g(4972),a.isCancel=g(6502),a.all=function(p){return Promise.all(p)},a.spread=g(8713),a.isAxiosError=g(6268),u.exports=a,u.exports.default=a},5263:u=>{"use strict";function R(g){this.message=g}R.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},R.prototype.__CANCEL__=!0,u.exports=R},4972:(u,R,g)=>{"use strict";var _=g(5263);function S(N){if(typeof N!="function")throw new TypeError("executor must be a function.");var f;this.promise=new Promise(function(a){f=a});var o=this;N(function(a){o.reason||(o.reason=new _(a),f(o.reason))})}S.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},S.source=function(){var f,o=new S(function(a){f=a});return{token:o,cancel:f}},u.exports=S},6502:u=>{"use strict";u.exports=function(g){return!!(g&&g.__CANCEL__)}},321:(u,R,g)=>{"use strict";var _=g(4867),S=g(5327),N=g(782),f=g(3572),o=g(7185);function l(a){this.defaults=a,this.interceptors={request:new N,response:new N}}l.prototype.request=function(h){typeof h=="string"?(h=arguments[1]||{},h.url=arguments[0]):h=h||{},h=o(this.defaults,h),h.method?h.method=h.method.toLowerCase():this.defaults.method?h.method=this.defaults.method.toLowerCase():h.method="get";var p=[f,void 0],d=Promise.resolve(h);for(this.interceptors.request.forEach(function(k){p.unshift(k.fulfilled,k.rejected)}),this.interceptors.response.forEach(function(k){p.push(k.fulfilled,k.rejected)});p.length;)d=d.then(p.shift(),p.shift());return d},l.prototype.getUri=function(h){return h=o(this.defaults,h),S(h.url,h.params,h.paramsSerializer).replace(/^\?/,"")},_.forEach(["delete","get","head","options"],function(h){l.prototype[h]=function(p,d){return this.request(o(d||{},{method:h,url:p,data:(d||{}).data}))}}),_.forEach(["post","put","patch"],function(h){l.prototype[h]=function(p,d,m){return this.request(o(m||{},{method:h,url:p,data:d}))}}),u.exports=l},782:(u,R,g)=>{"use strict";var _=g(4867);function S(){this.handlers=[]}S.prototype.use=function(f,o){return this.handlers.push({fulfilled:f,rejected:o}),this.handlers.length-1},S.prototype.eject=function(f){this.handlers[f]&&(this.handlers[f]=null)},S.prototype.forEach=function(f){_.forEach(this.handlers,function(l){l!==null&&f(l)})},u.exports=S},4097:(u,R,g)=>{"use strict";var _=g(1793),S=g(9002);u.exports=function(f,o){return f&&!_(o)?S(f,o):o}},5061:(u,R,g)=>{"use strict";var _=g(481);u.exports=function(N,f,o,l,a){var h=new Error(N);return _(h,f,o,l,a)}},3572:(u,R,g)=>{"use strict";var _=g(4867),S=g(8527),N=g(6502),f=g(5655);function o(l){l.cancelToken&&l.cancelToken.throwIfRequested()}u.exports=function(a){o(a),a.headers=a.headers||{},a.data=S(a.data,a.headers,a.transformRequest),a.headers=_.merge(a.headers.common||{},a.headers[a.method]||{},a.headers),_.forEach(["delete","get","head","post","put","patch","common"],function(d){delete a.headers[d]});var h=a.adapter||f.adapter;return h(a).then(function(d){return o(a),d.data=S(d.data,d.headers,a.transformResponse),d},function(d){return N(d)||(o(a),d&&d.response&&(d.response.data=S(d.response.data,d.response.headers,a.transformResponse))),Promise.reject(d)})}},481:u=>{"use strict";u.exports=function(g,_,S,N,f){return g.config=_,S&&(g.code=S),g.request=N,g.response=f,g.isAxiosError=!0,g.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},g}},7185:(u,R,g)=>{"use strict";var _=g(4867);u.exports=function(N,f){f=f||{};var o={},l=["url","method","data"],a=["headers","auth","proxy","params"],h=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],p=["validateStatus"];function d(E,C){return _.isPlainObject(E)&&_.isPlainObject(C)?_.merge(E,C):_.isPlainObject(C)?_.merge({},C):_.isArray(C)?C.slice():C}function m(E){_.isUndefined(f[E])?_.isUndefined(N[E])||(o[E]=d(void 0,N[E])):o[E]=d(N[E],f[E])}_.forEach(l,function(C){_.isUndefined(f[C])||(o[C]=d(void 0,f[C]))}),_.forEach(a,m),_.forEach(h,function(C){_.isUndefined(f[C])?_.isUndefined(N[C])||(o[C]=d(void 0,N[C])):o[C]=d(void 0,f[C])}),_.forEach(p,function(C){C in f?o[C]=d(N[C],f[C]):C in N&&(o[C]=d(void 0,N[C]))});var k=l.concat(a).concat(h).concat(p),y=Object.keys(N).concat(Object.keys(f)).filter(function(C){return k.indexOf(C)===-1});return _.forEach(y,m),o}},6026:(u,R,g)=>{"use strict";var _=g(5061);u.exports=function(N,f,o){var l=o.config.validateStatus;!o.status||!l||l(o.status)?N(o):f(_("Request failed with status code "+o.status,o.config,null,o.request,o))}},8527:(u,R,g)=>{"use strict";var _=g(4867);u.exports=function(N,f,o){return _.forEach(o,function(a){N=a(N,f)}),N}},5655:(u,R,g)=>{"use strict";var _=g(4867),S=g(6016),N={"Content-Type":"application/x-www-form-urlencoded"};function f(a,h){!_.isUndefined(a)&&_.isUndefined(a["Content-Type"])&&(a["Content-Type"]=h)}function o(){var a;return typeof XMLHttpRequest!="undefined"?a=g(5448):typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(a=g(7970)),a}var l={adapter:o(),transformRequest:[function(h,p){return S(p,"Accept"),S(p,"Content-Type"),_.isFormData(h)||_.isArrayBuffer(h)||_.isBuffer(h)||_.isStream(h)||_.isFile(h)||_.isBlob(h)?h:_.isArrayBufferView(h)?h.buffer:_.isURLSearchParams(h)?(f(p,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):_.isObject(h)?(f(p,"application/json;charset=utf-8"),JSON.stringify(h)):h}],transformResponse:[function(h){if(typeof h=="string")try{h=JSON.parse(h)}catch(p){}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(h){return h>=200&&h<300}};l.headers={common:{Accept:"application/json, text/plain, */*"}},_.forEach(["delete","get","head"],function(h){l.headers[h]={}}),_.forEach(["post","put","patch"],function(h){l.headers[h]=_.merge(N)}),u.exports=l},1849:u=>{"use strict";u.exports=function(g,_){return function(){for(var N=new Array(arguments.length),f=0;f<N.length;f++)N[f]=arguments[f];return g.apply(_,N)}}},5327:(u,R,g)=>{"use strict";var _=g(4867);function S(N){return encodeURIComponent(N).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}u.exports=function(f,o,l){if(!o)return f;var a;if(l)a=l(o);else if(_.isURLSearchParams(o))a=o.toString();else{var h=[];_.forEach(o,function(m,k){m===null||typeof m=="undefined"||(_.isArray(m)?k=k+"[]":m=[m],_.forEach(m,function(E){_.isDate(E)?E=E.toISOString():_.isObject(E)&&(E=JSON.stringify(E)),h.push(S(k)+"="+S(E))}))}),a=h.join("&")}if(a){var p=f.indexOf("#");p!==-1&&(f=f.slice(0,p)),f+=(f.indexOf("?")===-1?"?":"&")+a}return f}},9002:u=>{"use strict";u.exports=function(g,_){return _?g.replace(/\/+$/,"")+"/"+_.replace(/^\/+/,""):g}},4372:(u,R,g)=>{"use strict";var _=g(4867);u.exports=_.isStandardBrowserEnv()?function(){return{write:function(f,o,l,a,h,p){var d=[];d.push(f+"="+encodeURIComponent(o)),_.isNumber(l)&&d.push("expires="+new Date(l).toGMTString()),_.isString(a)&&d.push("path="+a),_.isString(h)&&d.push("domain="+h),p===!0&&d.push("secure"),document.cookie=d.join("; ")},read:function(f){var o=document.cookie.match(new RegExp("(^|;\\s*)("+f+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(f){this.write(f,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},1793:u=>{"use strict";u.exports=function(g){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(g)}},6268:u=>{"use strict";u.exports=function(g){return typeof g=="object"&&g.isAxiosError===!0}},7985:(u,R,g)=>{"use strict";var _=g(4867);u.exports=_.isStandardBrowserEnv()?function(){var N=/(msie|trident)/i.test(navigator.userAgent),f=document.createElement("a"),o;function l(a){var h=a;return N&&(f.setAttribute("href",h),h=f.href),f.setAttribute("href",h),{href:f.href,protocol:f.protocol?f.protocol.replace(/:$/,""):"",host:f.host,search:f.search?f.search.replace(/^\?/,""):"",hash:f.hash?f.hash.replace(/^#/,""):"",hostname:f.hostname,port:f.port,pathname:f.pathname.charAt(0)==="/"?f.pathname:"/"+f.pathname}}return o=l(window.location.href),function(h){var p=_.isString(h)?l(h):h;return p.protocol===o.protocol&&p.host===o.host}}():function(){return function(){return!0}}()},6016:(u,R,g)=>{"use strict";var _=g(4867);u.exports=function(N,f){_.forEach(N,function(l,a){a!==f&&a.toUpperCase()===f.toUpperCase()&&(N[f]=l,delete N[a])})}},4109:(u,R,g)=>{"use strict";var _=g(4867),S=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];u.exports=function(f){var o={},l,a,h;return f&&_.forEach(f.split(`
`),function(d){if(h=d.indexOf(":"),l=_.trim(d.substr(0,h)).toLowerCase(),a=_.trim(d.substr(h+1)),l){if(o[l]&&S.indexOf(l)>=0)return;l==="set-cookie"?o[l]=(o[l]?o[l]:[]).concat([a]):o[l]=o[l]?o[l]+", "+a:a}}),o}},8713:u=>{"use strict";u.exports=function(g){return function(S){return g.apply(null,S)}}},4867:(u,R,g)=>{"use strict";var _=g(1849),S=Object.prototype.toString;function N(M){return S.call(M)==="[object Array]"}function f(M){return typeof M=="undefined"}function o(M){return M!==null&&!f(M)&&M.constructor!==null&&!f(M.constructor)&&typeof M.constructor.isBuffer=="function"&&M.constructor.isBuffer(M)}function l(M){return S.call(M)==="[object ArrayBuffer]"}function a(M){return typeof FormData!="undefined"&&M instanceof FormData}function h(M){var B;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?B=ArrayBuffer.isView(M):B=M&&M.buffer&&M.buffer instanceof ArrayBuffer,B}function p(M){return typeof M=="string"}function d(M){return typeof M=="number"}function m(M){return M!==null&&typeof M=="object"}function k(M){if(S.call(M)!=="[object Object]")return!1;var B=Object.getPrototypeOf(M);return B===null||B===Object.prototype}function y(M){return S.call(M)==="[object Date]"}function E(M){return S.call(M)==="[object File]"}function C(M){return S.call(M)==="[object Blob]"}function P(M){return S.call(M)==="[object Function]"}function O(M){return m(M)&&P(M.pipe)}function U(M){return typeof URLSearchParams!="undefined"&&M instanceof URLSearchParams}function A(M){return M.replace(/^\s*/,"").replace(/\s*$/,"")}function $(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function x(M,B){if(!(M===null||typeof M=="undefined"))if(typeof M!="object"&&(M=[M]),N(M))for(var K=0,Y=M.length;K<Y;K++)B.call(null,M[K],K,M);else for(var Q in M)Object.prototype.hasOwnProperty.call(M,Q)&&B.call(null,M[Q],Q,M)}function G(){var M={};function B(Q,re){k(M[re])&&k(Q)?M[re]=G(M[re],Q):k(Q)?M[re]=G({},Q):N(Q)?M[re]=Q.slice():M[re]=Q}for(var K=0,Y=arguments.length;K<Y;K++)x(arguments[K],B);return M}function q(M,B,K){return x(B,function(Q,re){K&&typeof Q=="function"?M[re]=_(Q,K):M[re]=Q}),M}function L(M){return M.charCodeAt(0)===65279&&(M=M.slice(1)),M}u.exports={isArray:N,isArrayBuffer:l,isBuffer:o,isFormData:a,isArrayBufferView:h,isString:p,isNumber:d,isObject:m,isPlainObject:k,isUndefined:f,isDate:y,isFile:E,isBlob:C,isFunction:P,isStream:O,isURLSearchParams:U,isStandardBrowserEnv:$,forEach:x,merge:G,extend:q,trim:A,stripBOM:L}},696:u=>{"use strict";u.exports=JSON.parse('{"name":"axios","version":"0.21.1","description":"Promise based HTTP client for the browser and node.js","main":"index.js","scripts":{"test":"grunt test && bundlesize","start":"node ./sandbox/server.js","build":"NODE_ENV=production grunt build","preversion":"npm test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json","postversion":"git push && git push --tags","examples":"node ./examples/server.js","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","fix":"eslint --fix lib/**/*.js"},"repository":{"type":"git","url":"https://github.com/axios/axios.git"},"keywords":["xhr","http","ajax","promise","node"],"author":"Matt Zabriskie","license":"MIT","bugs":{"url":"https://github.com/axios/axios/issues"},"homepage":"https://github.com/axios/axios","devDependencies":{"bundlesize":"^0.17.0","coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.0.2","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^20.1.0","grunt-karma":"^2.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^1.0.18","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^1.3.0","karma-chrome-launcher":"^2.2.0","karma-coverage":"^1.1.1","karma-firefox-launcher":"^1.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-opera-launcher":"^1.0.0","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^1.2.0","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.7","karma-webpack":"^1.7.0","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^5.2.0","sinon":"^4.5.0","typescript":"^2.8.1","url-search-params":"^0.10.0","webpack":"^1.13.1","webpack-dev-server":"^1.14.1"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"jsdelivr":"dist/axios.min.js","unpkg":"dist/axios.min.js","typings":"./index.d.ts","dependencies":{"follow-redirects":"^1.10.0"},"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}]}')},5186:(u,R,g)=>{var _=g(3698),S=g(2505),N=g(5382),f=Function.bind,o=f.bind(f);function l(m,k,y){var E=o(N,null).apply(null,y?[k,y]:[k]);m.api={remove:E},m.remove=E,["before","error","after","wrap"].forEach(function(C){var P=y?[k,C,y]:[k,C];m[C]=m.api[C]=o(S,null).apply(null,P)})}function a(){var m="h",k={registry:{}},y=_.bind(null,k,m);return l(y,k,m),y}function h(){var m={registry:{}},k=_.bind(null,m);return l(k,m),k}var p=!1;function d(){return p||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),p=!0),h()}d.Singular=a.bind(),d.Collection=h.bind(),u.exports=d,u.exports.Hook=d,u.exports.Singular=d.Singular,u.exports.Collection=d.Collection},2505:u=>{u.exports=R;function R(g,_,S,N){var f=N;g.registry[S]||(g.registry[S]=[]),_==="before"&&(N=function(o,l){return Promise.resolve().then(f.bind(null,l)).then(o.bind(null,l))}),_==="after"&&(N=function(o,l){var a;return Promise.resolve().then(o.bind(null,l)).then(function(h){return a=h,f(a,l)}).then(function(){return a})}),_==="error"&&(N=function(o,l){return Promise.resolve().then(o.bind(null,l)).catch(function(a){return f(a,l)})}),g.registry[S].push({hook:N,orig:f})}},3698:u=>{u.exports=R;function R(g,_,S,N){if(typeof S!="function")throw new Error("method for before hook must be a function");return N||(N={}),Array.isArray(_)?_.reverse().reduce(function(f,o){return R.bind(null,g,o,f,N)},S)():Promise.resolve().then(function(){return g.registry[_]?g.registry[_].reduce(function(f,o){return o.hook.bind(null,f,N)},S)():S(N)})}},5382:u=>{u.exports=R;function R(g,_,S){if(!!g.registry[_]){var N=g.registry[_].map(function(f){return f.orig}).indexOf(S);N!==-1&&g.registry[_].splice(N,1)}}},4046:(u,R,g)=>{"use strict";const _=g(1669),S=g(2357),N=g(9867),f=g(3223),o="cls@contexts",l="error@context",a=[];for(let A in f.providers)a[f.providers[A]]=A;const h=process.env.DEBUG_CLS_HOOKED;let p=-1;u.exports={getNamespace:m,createNamespace:k,destroyNamespace:y,reset:E,ERROR_SYMBOL:l};function d(A){this.name=A,this.active=null,this._set=[],this.id=null,this._contexts=new Map}d.prototype.set=function($,x){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return h&&C("    SETTING KEY:"+$+"="+x+" in ns:"+this.name+" uid:"+p+" active:"+_.inspect(this.active,!0)),this.active[$]=x,x},d.prototype.get=function($){if(!this.active){h&&C("    GETTING KEY:"+$+"=undefined "+this.name+" uid:"+p+" active:"+_.inspect(this.active,!0));return}return h&&C("    GETTING KEY:"+$+"="+this.active[$]+" "+this.name+" uid:"+p+" active:"+_.inspect(this.active,!0)),this.active[$]},d.prototype.createContext=function(){h&&C("   CREATING Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  active:"+_.inspect(this.active,!0,2,!0));let $=Object.create(this.active?this.active:Object.prototype);return $._ns_name=this.name,$.id=p,h&&C("   CREATED Context: "+this.name+" uid:"+p+" len:"+this._set.length+"  context:"+_.inspect($,!0,2,!0)),$},d.prototype.run=function($){let x=this.createContext();this.enter(x);try{return h&&C(" BEFORE RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+_.inspect(x)),$(x),x}catch(G){throw G&&(G[l]=x),G}finally{h&&C(" AFTER RUN: "+this.name+" uid:"+p+" len:"+this._set.length+" "+_.inspect(x)),this.exit(x)}},d.prototype.runAndReturn=function($){var x;return this.run(function(G){x=$(G)}),x},d.prototype.runPromise=function($){let x=this.createContext();this.enter(x);let G=$(x);if(!G||!G.then||!G.catch)throw new Error("fn must return a promise.");return h&&C(" BEFORE runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+_.inspect(x)),G.then(q=>(h&&C(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+_.inspect(x)),this.exit(x),q)).catch(q=>{throw q[l]=x,h&&C(" AFTER runPromise: "+this.name+" uid:"+p+" len:"+this._set.length+" "+_.inspect(x)),this.exit(x),q})},d.prototype.bind=function($,x){x||(this.active?x=this.active:x=this.createContext());let G=this;return function(){G.enter(x);try{return $.apply(this,arguments)}catch(L){throw L&&(L[l]=x),L}finally{G.exit(x)}}},d.prototype.enter=function($){S.ok($,"context must be provided for entering"),h&&C("  ENTER "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+_.inspect($)),this._set.push(this.active),this.active=$},d.prototype.exit=function($){if(S.ok($,"context must be provided for exiting"),h&&C("  EXIT "+this.name+" uid:"+p+" len:"+this._set.length+" context: "+_.inspect($)),this.active===$){S.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let x=this._set.lastIndexOf($);x<0?(h&&C("??ERROR?? context exiting but not entered - ignoring: "+_.inspect($)),S.ok(x>=0,`context not currently entered; can't exit. 
`+_.inspect(this)+`
`+_.inspect($))):(S.ok(x,"can't remove top context"),this._set.splice(x,1))},d.prototype.bindEmitter=function($){S.ok($.on&&$.addListener&&$.emit,"can only bind real EEs");let x=this,G="context@"+this.name;function q(M){!M||(M[o]||(M[o]=Object.create(null)),M[o][G]={namespace:x,context:x.active})}function L(M){if(!(M&&M[o]))return M;let B=M,K=M[o];return Object.keys(K).forEach(function(Y){let Q=K[Y];B=Q.namespace.bind(B,Q.context)}),B}N($,q,L)},d.prototype.fromException=function($){return $[l]};function m(A){return process.namespaces[A]}function k(A){S.ok(A,"namespace must be given a name."),h&&C("CREATING NAMESPACE "+A);let $=new d(A);return $.id=p,f.addHooks({init(x,G,q,L,M){p=x,L?($._contexts.set(x,$._contexts.get(L)),h&&C("PARENTID: "+A+" uid:"+x+" parent:"+L+" provider:"+q)):$._contexts.set(p,$.active),h&&C("INIT "+A+" uid:"+x+" parent:"+L+" provider:"+a[q]+" active:"+_.inspect($.active,!0))},pre(x,G){p=x;let q=$._contexts.get(x);q?(h&&C(" PRE "+A+" uid:"+x+" handle:"+P(G)+" context:"+_.inspect(q)),$.enter(q)):h&&C(" PRE MISSING CONTEXT "+A+" uid:"+x+" handle:"+P(G))},post(x,G){p=x;let q=$._contexts.get(x);q?(h&&C(" POST "+A+" uid:"+x+" handle:"+P(G)+" context:"+_.inspect(q)),$.exit(q)):h&&C(" POST MISSING CONTEXT "+A+" uid:"+x+" handle:"+P(G))},destroy(x){p=x,h&&C("DESTROY "+A+" uid:"+x+" context:"+_.inspect($._contexts.get(p))+" active:"+_.inspect($.active,!0)),$._contexts.delete(x)}}),process.namespaces[A]=$,$}function y(A){let $=m(A);S.ok($,`can't delete nonexistent namespace! "`+A+'"'),S.ok($.id,"don't assign to process.namespaces directly! "+_.inspect($)),process.namespaces[A]=null}function E(){process.namespaces&&Object.keys(process.namespaces).forEach(function(A){y(A)}),process.namespaces=Object.create(null)}process.namespaces={},f._state&&!f._state.enabled&&f.enable();function C(A){process.env.DEBUG&&process._rawDebug(A)}function P(A){if(!A)return A;if(typeof A=="function")return A.name?A.name:(A.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(A.constructor&&A.constructor.name)return A.constructor.name}if(h){var O=g(2512);for(var U in O.filter._modifiers)O.filter.deattach(U)}},3964:(u,R,g)=>{"use strict";const _=g(1669),S=g(2357),N=g(9867),f=g(7303),o="cls@contexts",l="error@context",a=process.env.DEBUG_CLS_HOOKED;let h=-1;u.exports={getNamespace:d,createNamespace:m,destroyNamespace:k,reset:y,ERROR_SYMBOL:l};function p(C){this.name=C,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}p.prototype.set=function(P,O){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[P]=O,a){const U=" ".repeat(this._indent<0?0:this._indent);E(U+"CONTEXT-SET KEY:"+P+"="+O+" in ns:"+this.name+" currentUid:"+h+" active:"+_.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return O},p.prototype.get=function(P){if(!this.active){if(a){const O=f.currentId(),U=f.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);E(`${A}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${P}=undefined currentUid:${h} asyncHooksCurrentId:${O} triggerId:${U} len:${this._set.length}`)}return}if(a){const O=f.executionAsyncId(),U=f.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);E(A+"CONTEXT-GETTING KEY:"+P+"="+this.active[P]+" ("+this.name+") currentUid:"+h+" active:"+_.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),E(`${A}CONTEXT-GETTING KEY: (${this.name}) ${P}=${this.active[P]} currentUid:${h} asyncHooksCurrentId:${O} triggerId:${U} len:${this._set.length} active:${_.inspect(this.active)}`)}return this.active[P]},p.prototype.createContext=function(){let P=Object.create(this.active?this.active:Object.prototype);if(P._ns_name=this.name,P.id=h,a){const O=f.executionAsyncId(),U=f.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);E(`${A}CONTEXT-CREATED Context: (${this.name}) currentUid:${h} asyncHooksCurrentId:${O} triggerId:${U} len:${this._set.length} context:${_.inspect(P,{showHidden:!0,depth:2,colors:!0})}`)}return P},p.prototype.run=function(P){let O=this.createContext();this.enter(O);try{if(a){const U=f.triggerAsyncId(),A=f.executionAsyncId(),$=" ".repeat(this._indent<0?0:this._indent);E(`${$}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${h} triggerId:${U} asyncHooksCurrentId:${A} len:${this._set.length} context:${_.inspect(O)}`)}return P(O),O}catch(U){throw U&&(U[l]=O),U}finally{if(a){const U=f.triggerAsyncId(),A=f.executionAsyncId(),$=" ".repeat(this._indent<0?0:this._indent);E(`${$}CONTEXT-RUN END: (${this.name}) currentUid:${h} triggerId:${U} asyncHooksCurrentId:${A} len:${this._set.length} ${_.inspect(O)}`)}this.exit(O)}},p.prototype.runAndReturn=function(P){let O;return this.run(function(U){O=P(U)}),O},p.prototype.runPromise=function(P){let O=this.createContext();this.enter(O);let U=P(O);if(!U||!U.then||!U.catch)throw new Error("fn must return a promise.");return a&&E("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+_.inspect(O)),U.then(A=>(a&&E("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+_.inspect(O)),this.exit(O),A)).catch(A=>{throw A[l]=O,a&&E("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+h+" len:"+this._set.length+" "+_.inspect(O)),this.exit(O),A})},p.prototype.bind=function(P,O){O||(this.active?O=this.active:O=this.createContext());let U=this;return function(){U.enter(O);try{return P.apply(this,arguments)}catch($){throw $&&($[l]=O),$}finally{U.exit(O)}}},p.prototype.enter=function(P){if(S.ok(P,"context must be provided for entering"),a){const O=f.executionAsyncId(),U=f.triggerAsyncId(),A=" ".repeat(this._indent<0?0:this._indent);E(`${A}CONTEXT-ENTER: (${this.name}) currentUid:${h} triggerId:${U} asyncHooksCurrentId:${O} len:${this._set.length} ${_.inspect(P)}`)}this._set.push(this.active),this.active=P},p.prototype.exit=function(P){if(S.ok(P,"context must be provided for exiting"),a){const U=f.executionAsyncId(),A=f.triggerAsyncId(),$=" ".repeat(this._indent<0?0:this._indent);E(`${$}CONTEXT-EXIT: (${this.name}) currentUid:${h} triggerId:${A} asyncHooksCurrentId:${U} len:${this._set.length} ${_.inspect(P)}`)}if(this.active===P){S.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let O=this._set.lastIndexOf(P);O<0?(a&&E("??ERROR?? context exiting but not entered - ignoring: "+_.inspect(P)),S.ok(O>=0,`context not currently entered; can't exit. 
`+_.inspect(this)+`
`+_.inspect(P))):(S.ok(O,"can't remove top context"),this._set.splice(O,1))},p.prototype.bindEmitter=function(P){S.ok(P.on&&P.addListener&&P.emit,"can only bind real EEs");let O=this,U="context@"+this.name;function A(x){!x||(x[o]||(x[o]=Object.create(null)),x[o][U]={namespace:O,context:O.active})}function $(x){if(!(x&&x[o]))return x;let G=x,q=x[o];return Object.keys(q).forEach(function(L){let M=q[L];G=M.namespace.bind(G,M.context)}),G}N(P,A,$)},p.prototype.fromException=function(P){return P[l]};function d(C){return process.namespaces[C]}function m(C){S.ok(C,"namespace must be given a name."),a&&E(`NS-CREATING NAMESPACE (${C})`);let P=new p(C);return P.id=h,f.createHook({init(U,A,$,x){if(h=f.executionAsyncId(),P.active){if(P._contexts.set(U,P.active),a){const G=" ".repeat(P._indent<0?0:P._indent);E(`${G}INIT [${A}] (${C}) asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${x}`)}}else if(h===0){const G=f.triggerAsyncId(),q=P._contexts.get(G);if(q){if(P._contexts.set(U,q),a){const L=" ".repeat(P._indent<0?0:P._indent);E(`${L}INIT USING CONTEXT FROM TRIGGERID [${A}] (${C}) asyncId:${U} currentUid:${h} triggerId:${G} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${x}`)}}else if(a){const L=" ".repeat(P._indent<0?0:P._indent);E(`${L}INIT MISSING CONTEXT [${A}] (${C}) asyncId:${U} currentUid:${h} triggerId:${G} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${x}`)}}if(a&&A==="PROMISE"){E(_.inspect(x,{showHidden:!0}));const G=x.parentId,q=" ".repeat(P._indent<0?0:P._indent);E(`${q}INIT RESOURCE-PROMISE [${A}] (${C}) parentId:${G} asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} resource:${x}`)}},before(U){h=f.executionAsyncId();let A;if(A=P._contexts.get(U)||P._contexts.get(h),A){if(a){const $=f.triggerAsyncId(),x=" ".repeat(P._indent<0?0:P._indent);E(`${x}BEFORE (${C}) asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${_.inspect(A)}`),P._indent+=2}P.enter(A)}else if(a){const $=f.triggerAsyncId(),x=" ".repeat(P._indent<0?0:P._indent);E(`${x}BEFORE MISSING CONTEXT (${C}) asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${_.inspect(P._contexts,{showHidden:!0,depth:2,colors:!0})}`),P._indent+=2}},after(U){h=f.executionAsyncId();let A;if(A=P._contexts.get(U)||P._contexts.get(h),A){if(a){const $=f.triggerAsyncId();P._indent-=2;const x=" ".repeat(P._indent<0?0:P._indent);E(`${x}AFTER (${C}) asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${_.inspect(A)}`)}P.exit(A)}else if(a){const $=f.triggerAsyncId();P._indent-=2;const x=" ".repeat(P._indent<0?0:P._indent);E(`${x}AFTER MISSING CONTEXT (${C}) asyncId:${U} currentUid:${h} triggerId:${$} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${_.inspect(A)}`)}},destroy(U){if(h=f.executionAsyncId(),a){const A=f.triggerAsyncId(),$=" ".repeat(P._indent<0?0:P._indent);E(`${$}DESTROY (${C}) currentUid:${h} asyncId:${U} triggerId:${A} active:${_.inspect(P.active,{showHidden:!0,depth:2,colors:!0})} context:${_.inspect(P._contexts.get(h))}`)}P._contexts.delete(U)}}).enable(),process.namespaces[C]=P,P}function k(C){let P=d(C);S.ok(P,`can't delete nonexistent namespace! "`+C+'"'),S.ok(P.id,"don't assign to process.namespaces directly! "+_.inspect(P)),process.namespaces[C]=null}function y(){process.namespaces&&Object.keys(process.namespaces).forEach(function(C){k(C)}),process.namespaces=Object.create(null)}process.namespaces={};function E(...C){a&&process._rawDebug(`${_.format(...C)}`)}},9562:(u,R,g)=>{"use strict";const _=g(9012);process&&_.gte(process.versions.node,"8.0.0")?u.exports=g(3964):u.exports=g(4046)},9012:(u,R)=>{R=u.exports=ie;var g;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?g=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:g=function(){},R.SEMVER_SPEC_VERSION="2.0.0";var _=256,S=Number.MAX_SAFE_INTEGER||9007199254740991,N=16,f=R.re=[],o=R.src=[],l=0,a=l++;o[a]="0|[1-9]\\d*";var h=l++;o[h]="[0-9]+";var p=l++;o[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=l++;o[d]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var m=l++;o[m]="("+o[h]+")\\.("+o[h]+")\\.("+o[h]+")";var k=l++;o[k]="(?:"+o[a]+"|"+o[p]+")";var y=l++;o[y]="(?:"+o[h]+"|"+o[p]+")";var E=l++;o[E]="(?:-("+o[k]+"(?:\\."+o[k]+")*))";var C=l++;o[C]="(?:-?("+o[y]+"(?:\\."+o[y]+")*))";var P=l++;o[P]="[0-9A-Za-z-]+";var O=l++;o[O]="(?:\\+("+o[P]+"(?:\\."+o[P]+")*))";var U=l++,A="v?"+o[d]+o[E]+"?"+o[O]+"?";o[U]="^"+A+"$";var $="[v=\\s]*"+o[m]+o[C]+"?"+o[O]+"?",x=l++;o[x]="^"+$+"$";var G=l++;o[G]="((?:<|>)?=?)";var q=l++;o[q]=o[h]+"|x|X|\\*";var L=l++;o[L]=o[a]+"|x|X|\\*";var M=l++;o[M]="[v=\\s]*("+o[L]+")(?:\\.("+o[L]+")(?:\\.("+o[L]+")(?:"+o[E]+")?"+o[O]+"?)?)?";var B=l++;o[B]="[v=\\s]*("+o[q]+")(?:\\.("+o[q]+")(?:\\.("+o[q]+")(?:"+o[C]+")?"+o[O]+"?)?)?";var K=l++;o[K]="^"+o[G]+"\\s*"+o[M]+"$";var Y=l++;o[Y]="^"+o[G]+"\\s*"+o[B]+"$";var Q=l++;o[Q]="(?:^|[^\\d])(\\d{1,"+N+"})(?:\\.(\\d{1,"+N+"}))?(?:\\.(\\d{1,"+N+"}))?(?:$|[^\\d])";var re=l++;o[re]="(?:~>?)";var de=l++;o[de]="(\\s*)"+o[re]+"\\s+",f[de]=new RegExp(o[de],"g");var pe="$1~",_e=l++;o[_e]="^"+o[re]+o[M]+"$";var ne=l++;o[ne]="^"+o[re]+o[B]+"$";var oe=l++;o[oe]="(?:\\^)";var se=l++;o[se]="(\\s*)"+o[oe]+"\\s+",f[se]=new RegExp(o[se],"g");var ye="$1^",be=l++;o[be]="^"+o[oe]+o[M]+"$";var De=l++;o[De]="^"+o[oe]+o[B]+"$";var ge=l++;o[ge]="^"+o[G]+"\\s*("+$+")$|^$";var we=l++;o[we]="^"+o[G]+"\\s*("+A+")$|^$";var Ee=l++;o[Ee]="(\\s*)"+o[G]+"\\s*("+$+"|"+o[M]+")",f[Ee]=new RegExp(o[Ee],"g");var Ue="$1$2$3",Ze=l++;o[Ze]="^\\s*("+o[M]+")\\s+-\\s+("+o[M]+")\\s*$";var Ge=l++;o[Ge]="^\\s*("+o[B]+")\\s+-\\s+("+o[B]+")\\s*$";var ze=l++;o[ze]="(<|>)?=?\\s*\\*";for(var Te=0;Te<l;Te++)g(Te,o[Te]),f[Te]||(f[Te]=new RegExp(o[Te]));R.parse=Ne;function Ne(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie)return b;if(typeof b!="string"||b.length>_)return null;var F=I.loose?f[x]:f[U];if(!F.test(b))return null;try{return new ie(b,I)}catch(j){return null}}R.valid=Pe;function Pe(b,I){var F=Ne(b,I);return F?F.version:null}R.clean=et;function et(b,I){var F=Ne(b.trim().replace(/^[=v]+/,""),I);return F?F.version:null}R.SemVer=ie;function ie(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie){if(b.loose===I.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>_)throw new TypeError("version is longer than "+_+" characters");if(!(this instanceof ie))return new ie(b,I);g("SemVer",b,I),this.options=I,this.loose=!!I.loose;var F=b.trim().match(I.loose?f[x]:f[U]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>S||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(j){if(/^[0-9]+$/.test(j)){var z=+j;if(z>=0&&z<S)return z}return j}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ie.prototype.toString=function(){return this.version},ie.prototype.compare=function(b){return g("SemVer.compare",this.version,this.options,b),b instanceof ie||(b=new ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},ie.prototype.compareMain=function(b){return b instanceof ie||(b=new ie(b,this.options)),Le(this.major,b.major)||Le(this.minor,b.minor)||Le(this.patch,b.patch)},ie.prototype.comparePre=function(b){if(b instanceof ie||(b=new ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var I=0;do{var F=this.prerelease[I],j=b.prerelease[I];if(g("prerelease compare",I,F,j),F===void 0&&j===void 0)return 0;if(j===void 0)return 1;if(F===void 0)return-1;if(F===j)continue;return Le(F,j)}while(++I)},ie.prototype.inc=function(b,I){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",I);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",I);break;case"prepatch":this.prerelease.length=0,this.inc("patch",I),this.inc("pre",I);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",I),this.inc("pre",I);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}I&&(this.prerelease[0]===I?isNaN(this.prerelease[1])&&(this.prerelease=[I,0]):this.prerelease=[I,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},R.inc=Ut;function Ut(b,I,F,j){typeof F=="string"&&(j=F,F=void 0);try{return new ie(b,F).inc(I,j).version}catch(z){return null}}R.diff=$t;function $t(b,I){if(Dt(b,I))return null;var F=Ne(b),j=Ne(I),z="";if(F.prerelease.length||j.prerelease.length){z="pre";var X="prerelease"}for(var J in F)if((J==="major"||J==="minor"||J==="patch")&&F[J]!==j[J])return z+J;return X}R.compareIdentifiers=Le;var xt=/^[0-9]+$/;function Le(b,I){var F=xt.test(b),j=xt.test(I);return F&&j&&(b=+b,I=+I),b===I?0:F&&!j?-1:j&&!F?1:b<I?-1:1}R.rcompareIdentifiers=Mt;function Mt(b,I){return Le(I,b)}R.major=Wt;function Wt(b,I){return new ie(b,I).major}R.minor=dt;function dt(b,I){return new ie(b,I).minor}R.patch=Zr;function Zr(b,I){return new ie(b,I).patch}R.compare=$e;function $e(b,I,F){return new ie(b,F).compare(new ie(I,F))}R.compareLoose=Ar;function Ar(b,I){return $e(b,I,!0)}R.rcompare=fr;function fr(b,I,F){return $e(I,b,F)}R.sort=St;function St(b,I){return b.sort(function(F,j){return R.compare(F,j,I)})}R.rsort=Fr;function Fr(b,I){return b.sort(function(F,j){return R.rcompare(F,j,I)})}R.gt=it;function it(b,I,F){return $e(b,I,F)>0}R.lt=st;function st(b,I,F){return $e(b,I,F)<0}R.eq=Dt;function Dt(b,I,F){return $e(b,I,F)===0}R.neq=Tt;function Tt(b,I,F){return $e(b,I,F)!==0}R.gte=Ht;function Ht(b,I,F){return $e(b,I,F)>=0}R.lte=Gt;function Gt(b,I,F){return $e(b,I,F)<=0}R.cmp=tt;function tt(b,I,F,j){switch(I){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Dt(b,F,j);case"!=":return Tt(b,F,j);case">":return it(b,F,j);case">=":return Ht(b,F,j);case"<":return st(b,F,j);case"<=":return Gt(b,F,j);default:throw new TypeError("Invalid operator: "+I)}}R.Comparator=Ae;function Ae(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof Ae){if(b.loose===!!I.loose)return b;b=b.value}if(!(this instanceof Ae))return new Ae(b,I);g("comparator",b,I),this.options=I,this.loose=!!I.loose,this.parse(b),this.semver===ht?this.value="":this.value=this.operator+this.semver.version,g("comp",this)}var ht={};Ae.prototype.parse=function(b){var I=this.options.loose?f[ge]:f[we],F=b.match(I);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new ie(F[2],this.options.loose):this.semver=ht},Ae.prototype.toString=function(){return this.value},Ae.prototype.test=function(b){return g("Comparator.test",b,this.options.loose),this.semver===ht?!0:(typeof b=="string"&&(b=new ie(b,this.options)),tt(b,this.operator,this.semver,this.options))},Ae.prototype.intersects=function(b,I){if(!(b instanceof Ae))throw new TypeError("a Comparator is required");(!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1});var F;if(this.operator==="")return F=new ve(b.value,I),We(this.value,F,I);if(b.operator==="")return F=new ve(this.value,I),We(b.semver,F,I);var j=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),z=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),X=this.semver.version===b.semver.version,J=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),le=tt(this.semver,"<",b.semver,I)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),ue=tt(this.semver,">",b.semver,I)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return j||z||X&&J||le||ue},R.Range=ve;function ve(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ve)return b.loose===!!I.loose&&b.includePrerelease===!!I.includePrerelease?b:new ve(b.raw,I);if(b instanceof Ae)return new ve(b.value,I);if(!(this instanceof ve))return new ve(b,I);if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(b){var I=this.options.loose;b=b.trim();var F=I?f[Ge]:f[Ze];b=b.replace(F,rn),g("hyphen replace",b),b=b.replace(f[Ee],Ue),g("comparator trim",b,f[Ee]),b=b.replace(f[de],pe),b=b.replace(f[se],ye),b=b.split(/\s+/).join(" ");var j=I?f[ge]:f[we],z=b.split(" ").map(function(X){return Vt(X,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(z=z.filter(function(X){return!!X.match(j)})),z=z.map(function(X){return new Ae(X,this.options)},this),z},ve.prototype.intersects=function(b,I){if(!(b instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(j){return b.set.some(function(z){return z.every(function(X){return j.intersects(X,I)})})})})},R.toComparators=Or;function Or(b,I){return new ve(b,I).set.map(function(F){return F.map(function(j){return j.value}).join(" ").trim().split(" ")})}function Vt(b,I){return g("comp",b,I),b=Qe(b,I),g("caret",b),b=en(b,I),g("tildes",b),b=Ce(b,I),g("xrange",b),b=Mr(b,I),g("stars",b),b}function Se(b){return!b||b.toLowerCase()==="x"||b==="*"}function en(b,I){return b.trim().split(/\s+/).map(function(F){return tn(F,I)}).join(" ")}function tn(b,I){var F=I.loose?f[ne]:f[_e];return b.replace(F,function(j,z,X,J,le){g("tilde",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":le?(g("replaceTilde pr",le),ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0"):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0",g("tilde return",ue),ue})}function Qe(b,I){return b.trim().split(/\s+/).map(function(F){return ft(F,I)}).join(" ")}function ft(b,I){g("caret",b,I);var F=I.loose?f[De]:f[be];return b.replace(F,function(j,z,X,J,le){g("caret",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?z==="0"?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+".0 <"+(+z+1)+".0.0":le?(g("replaceCaret pr",le),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+"-"+le+" <"+(+z+1)+".0.0"):(g("no pr"),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+" <"+(+z+1)+".0.0"),g("caret return",ue),ue})}function Ce(b,I){return g("replaceXRanges",b,I),b.split(/\s+/).map(function(F){return xr(F,I)}).join(" ")}function xr(b,I){b=b.trim();var F=I.loose?f[Y]:f[K];return b.replace(F,function(j,z,X,J,le,ue){g("xRange",b,j,z,X,J,le,ue);var qe=Se(X),xe=qe||Se(J),Fe=xe||Se(le),Ie=Fe;return z==="="&&Ie&&(z=""),qe?z===">"||z==="<"?j="<0.0.0":j="*":z&&Ie?(xe&&(J=0),le=0,z===">"?(z=">=",xe?(X=+X+1,J=0,le=0):(J=+J+1,le=0)):z==="<="&&(z="<",xe?X=+X+1:J=+J+1),j=z+X+"."+J+"."+le):xe?j=">="+X+".0.0 <"+(+X+1)+".0.0":Fe&&(j=">="+X+"."+J+".0 <"+X+"."+(+J+1)+".0"),g("xRange return",j),j})}function Mr(b,I){return g("replaceStars",b,I),b.trim().replace(f[ze],"")}function rn(b,I,F,j,z,X,J,le,ue,qe,xe,Fe,Ie){return Se(F)?I="":Se(j)?I=">="+F+".0.0":Se(z)?I=">="+F+"."+j+".0":I=">="+I,Se(ue)?le="":Se(qe)?le="<"+(+ue+1)+".0.0":Se(xe)?le="<"+ue+"."+(+qe+1)+".0":Fe?le="<="+ue+"."+qe+"."+xe+"-"+Fe:le="<="+le,(I+" "+le).trim()}ve.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new ie(b,this.options));for(var I=0;I<this.set.length;I++)if(nn(this.set[I],b,this.options))return!0;return!1};function nn(b,I,F){for(var j=0;j<b.length;j++)if(!b[j].test(I))return!1;if(I.prerelease.length&&!F.includePrerelease){for(j=0;j<b.length;j++)if(g(b[j].semver),b[j].semver!==ht&&b[j].semver.prerelease.length>0){var z=b[j].semver;if(z.major===I.major&&z.minor===I.minor&&z.patch===I.patch)return!0}return!1}return!0}R.satisfies=We;function We(b,I,F){try{I=new ve(I,F)}catch(j){return!1}return I.test(b)}R.maxSatisfying=Lr;function Lr(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===-1)&&(j=J,z=new ie(j,F))}),j}R.minSatisfying=sn;function sn(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===1)&&(j=J,z=new ie(j,F))}),j}R.minVersion=an;function an(b,I){b=new ve(b,I);var F=new ie("0.0.0");if(b.test(F)||(F=new ie("0.0.0-0"),b.test(F)))return F;F=null;for(var j=0;j<b.set.length;++j){var z=b.set[j];z.forEach(function(X){var J=new ie(X.semver.version);switch(X.operator){case">":J.prerelease.length===0?J.patch++:J.prerelease.push(0),J.raw=J.format();case"":case">=":(!F||it(F,J))&&(F=J);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+X.operator)}})}return F&&b.test(F)?F:null}R.validRange=qr;function qr(b,I){try{return new ve(b,I).range||"*"}catch(F){return null}}R.ltr=on;function on(b,I,F){return kt(b,I,"<",F)}R.gtr=un;function un(b,I,F){return kt(b,I,">",F)}R.outside=kt;function kt(b,I,F,j){b=new ie(b,j),I=new ve(I,j);var z,X,J,le,ue;switch(F){case">":z=it,X=Gt,J=st,le=">",ue=">=";break;case"<":z=st,X=Ht,J=it,le="<",ue="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(We(b,I,j))return!1;for(var qe=0;qe<I.set.length;++qe){var xe=I.set[qe],Fe=null,Ie=null;if(xe.forEach(function(Be){Be.semver===ht&&(Be=new Ae(">=0.0.0")),Fe=Fe||Be,Ie=Ie||Be,z(Be.semver,Fe.semver,j)?Fe=Be:J(Be.semver,Ie.semver,j)&&(Ie=Be)}),Fe.operator===le||Fe.operator===ue||(!Ie.operator||Ie.operator===le)&&X(b,Ie.semver))return!1;if(Ie.operator===ue&&J(b,Ie.semver))return!1}return!0}R.prerelease=gr;function gr(b,I){var F=Ne(b,I);return F&&F.prerelease.length?F.prerelease:null}R.intersects=ln;function ln(b,I,F){return b=new ve(b,F),I=new ve(I,F),b.intersects(I)}R.coerce=vr;function vr(b){if(b instanceof ie)return b;if(typeof b!="string")return null;var I=b.match(f[Q]);return I==null?null:Ne(I[1]+"."+(I[2]||"0")+"."+(I[3]||"0"))}},3057:(u,R,g)=>{"use strict";var _=g(2357),S=g(9867),N="cls@contexts",f="error@context";process.addAsyncListener||g(7645);function o(d){this.name=d,this.active=null,this._set=[],this.id=null}o.prototype.set=function(d,m){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[d]=m,m},o.prototype.get=function(d){if(!!this.active)return this.active[d]},o.prototype.createContext=function(){return Object.create(this.active)},o.prototype.run=function(d){var m=this.createContext();this.enter(m);try{return d(m),m}catch(k){throw k&&(k[f]=m),k}finally{this.exit(m)}},o.prototype.runAndReturn=function(d){var m;return this.run(function(k){m=d(k)}),m},o.prototype.bind=function(d,m){m||(this.active?m=this.active:m=this.createContext());var k=this;return function(){k.enter(m);try{return d.apply(this,arguments)}catch(y){throw y&&(y[f]=m),y}finally{k.exit(m)}}},o.prototype.enter=function(d){_.ok(d,"context must be provided for entering"),this._set.push(this.active),this.active=d},o.prototype.exit=function(d){if(_.ok(d,"context must be provided for exiting"),this.active===d){_.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var m=this._set.lastIndexOf(d);_.ok(m>=0,"context not currently entered; can't exit"),_.ok(m,"can't remove top context"),this._set.splice(m,1)},o.prototype.bindEmitter=function(d){_.ok(d.on&&d.addListener&&d.emit,"can only bind real EEs");var m=this,k="context@"+this.name;function y(C){!C||(C[N]||(C[N]=Object.create(null)),C[N][k]={namespace:m,context:m.active})}function E(C){if(!(C&&C[N]))return C;var P=C,O=C[N];return Object.keys(O).forEach(function(U){var A=O[U];P=A.namespace.bind(P,A.context)}),P}S(d,y,E)},o.prototype.fromException=function(d){return d[f]};function l(d){return process.namespaces[d]}function a(d){_.ok(d,"namespace must be given a name!");var m=new o(d);return m.id=process.addAsyncListener({create:function(){return m.active},before:function(k,y){y&&m.enter(y)},after:function(k,y){y&&m.exit(y)},error:function(k){k&&m.exit(k)}}),process.namespaces[d]=m,m}function h(d){var m=l(d);_.ok(m,"can't delete nonexistent namespace!"),_.ok(m.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(m.id),process.namespaces[d]=null}function p(){process.namespaces&&Object.keys(process.namespaces).forEach(function(d){h(d)}),process.namespaces=Object.create(null)}process.namespaces||p(),u.exports={getNamespace:l,createNamespace:a,destroyNamespace:h,reset:p}},5175:u=>{"use strict";function R(g){if(!/^data:/i.test(g))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');g=g.replace(/\r?\n/g,"");const _=g.indexOf(",");if(_===-1||_<=4)throw new TypeError("malformed data: URI");const S=g.substring(5,_).split(";");let N="",f=!1;const o=S[0]||"text/plain";let l=o;for(let d=1;d<S.length;d++)S[d]==="base64"?f=!0:(l+=`;${S[d]}`,S[d].indexOf("charset=")===0&&(N=S[d].substring(8)));!S[0]&&!N.length&&(l+=";charset=US-ASCII",N="US-ASCII");const a=f?"base64":"ascii",h=unescape(g.substring(_+1)),p=Buffer.from(h,a);return p.type=o,p.typeFull=l,p.charset=N,p}u.exports=R},7484:function(u){(function(R,g){u.exports=g()})(this,function(){"use strict";var R="millisecond",g="second",_="minute",S="hour",N="day",f="week",o="month",l="quarter",a="year",h="date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},k=function(G,q,L){var M=String(G);return!M||M.length>=q?G:""+Array(q+1-M.length).join(L)+G},y={s:k,z:function(G){var q=-G.utcOffset(),L=Math.abs(q),M=Math.floor(L/60),B=L%60;return(q<=0?"+":"-")+k(M,2,"0")+":"+k(B,2,"0")},m:function G(q,L){if(q.date()<L.date())return-G(L,q);var M=12*(L.year()-q.year())+(L.month()-q.month()),B=q.clone().add(M,o),K=L-B<0,Y=q.clone().add(M+(K?-1:1),o);return+(-(M+(L-B)/(K?B-Y:Y-B))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:o,y:a,w:f,d:N,D:h,h:S,m:_,s:g,ms:R,Q:l}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},E="en",C={};C[E]=m;var P=function(G){return G instanceof $},O=function(G,q,L){var M;if(!G)return E;if(typeof G=="string")C[G]&&(M=G),q&&(C[G]=q,M=G);else{var B=G.name;C[B]=G,M=B}return!L&&M&&(E=M),M||!L&&E},U=function(G,q){if(P(G))return G.clone();var L=typeof q=="object"?q:{};return L.date=G,L.args=arguments,new $(L)},A=y;A.l=O,A.i=P,A.w=function(G,q){return U(G,{locale:q.$L,utc:q.$u,x:q.$x,$offset:q.$offset})};var $=function(){function G(L){this.$L=O(L.locale,null,!0),this.parse(L)}var q=G.prototype;return q.parse=function(L){this.$d=function(M){var B=M.date,K=M.utc;if(B===null)return new Date(NaN);if(A.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var Y=B.match(p);if(Y){var Q=Y[2]-1||0,re=(Y[7]||"0").substring(0,3);return K?new Date(Date.UTC(Y[1],Q,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,re)):new Date(Y[1],Q,Y[3]||1,Y[4]||0,Y[5]||0,Y[6]||0,re)}}return new Date(B)}(L),this.$x=L.x||{},this.init()},q.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},q.$utils=function(){return A},q.isValid=function(){return this.$d.toString()!=="Invalid Date"},q.isSame=function(L,M){var B=U(L);return this.startOf(M)<=B&&B<=this.endOf(M)},q.isAfter=function(L,M){return U(L)<this.startOf(M)},q.isBefore=function(L,M){return this.endOf(M)<U(L)},q.$g=function(L,M,B){return A.u(L)?this[M]:this.set(B,L)},q.unix=function(){return Math.floor(this.valueOf()/1e3)},q.valueOf=function(){return this.$d.getTime()},q.startOf=function(L,M){var B=this,K=!!A.u(M)||M,Y=A.p(L),Q=function(ye,be){var De=A.w(B.$u?Date.UTC(B.$y,be,ye):new Date(B.$y,be,ye),B);return K?De:De.endOf(N)},re=function(ye,be){return A.w(B.toDate()[ye].apply(B.toDate("s"),(K?[0,0,0,0]:[23,59,59,999]).slice(be)),B)},de=this.$W,pe=this.$M,_e=this.$D,ne="set"+(this.$u?"UTC":"");switch(Y){case a:return K?Q(1,0):Q(31,11);case o:return K?Q(1,pe):Q(0,pe+1);case f:var oe=this.$locale().weekStart||0,se=(de<oe?de+7:de)-oe;return Q(K?_e-se:_e+(6-se),pe);case N:case h:return re(ne+"Hours",0);case S:return re(ne+"Minutes",1);case _:return re(ne+"Seconds",2);case g:return re(ne+"Milliseconds",3);default:return this.clone()}},q.endOf=function(L){return this.startOf(L,!1)},q.$set=function(L,M){var B,K=A.p(L),Y="set"+(this.$u?"UTC":""),Q=(B={},B[N]=Y+"Date",B[h]=Y+"Date",B[o]=Y+"Month",B[a]=Y+"FullYear",B[S]=Y+"Hours",B[_]=Y+"Minutes",B[g]=Y+"Seconds",B[R]=Y+"Milliseconds",B)[K],re=K===N?this.$D+(M-this.$W):M;if(K===o||K===a){var de=this.clone().set(h,1);de.$d[Q](re),de.init(),this.$d=de.set(h,Math.min(this.$D,de.daysInMonth())).$d}else Q&&this.$d[Q](re);return this.init(),this},q.set=function(L,M){return this.clone().$set(L,M)},q.get=function(L){return this[A.p(L)]()},q.add=function(L,M){var B,K=this;L=Number(L);var Y=A.p(M),Q=function(pe){var _e=U(K);return A.w(_e.date(_e.date()+Math.round(pe*L)),K)};if(Y===o)return this.set(o,this.$M+L);if(Y===a)return this.set(a,this.$y+L);if(Y===N)return Q(1);if(Y===f)return Q(7);var re=(B={},B[_]=6e4,B[S]=36e5,B[g]=1e3,B)[Y]||1,de=this.$d.getTime()+L*re;return A.w(de,this)},q.subtract=function(L,M){return this.add(-1*L,M)},q.format=function(L){var M=this;if(!this.isValid())return"Invalid Date";var B=L||"YYYY-MM-DDTHH:mm:ssZ",K=A.z(this),Y=this.$locale(),Q=this.$H,re=this.$m,de=this.$M,pe=Y.weekdays,_e=Y.months,ne=function(be,De,ge,we){return be&&(be[De]||be(M,B))||ge[De].substr(0,we)},oe=function(be){return A.s(Q%12||12,be,"0")},se=Y.meridiem||function(be,De,ge){var we=be<12?"AM":"PM";return ge?we.toLowerCase():we},ye={YY:String(this.$y).slice(-2),YYYY:this.$y,M:de+1,MM:A.s(de+1,2,"0"),MMM:ne(Y.monthsShort,de,_e,3),MMMM:ne(_e,de),D:this.$D,DD:A.s(this.$D,2,"0"),d:String(this.$W),dd:ne(Y.weekdaysMin,this.$W,pe,2),ddd:ne(Y.weekdaysShort,this.$W,pe,3),dddd:pe[this.$W],H:String(Q),HH:A.s(Q,2,"0"),h:oe(1),hh:oe(2),a:se(Q,re,!0),A:se(Q,re,!1),m:String(re),mm:A.s(re,2,"0"),s:String(this.$s),ss:A.s(this.$s,2,"0"),SSS:A.s(this.$ms,3,"0"),Z:K};return B.replace(d,function(be,De){return De||ye[be]||K.replace(":","")})},q.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},q.diff=function(L,M,B){var K,Y=A.p(M),Q=U(L),re=6e4*(Q.utcOffset()-this.utcOffset()),de=this-Q,pe=A.m(this,Q);return pe=(K={},K[a]=pe/12,K[o]=pe,K[l]=pe/3,K[f]=(de-re)/6048e5,K[N]=(de-re)/864e5,K[S]=de/36e5,K[_]=de/6e4,K[g]=de/1e3,K)[Y]||de,B?pe:A.a(pe)},q.daysInMonth=function(){return this.endOf(o).$D},q.$locale=function(){return C[this.$L]},q.locale=function(L,M){if(!L)return this.$L;var B=this.clone(),K=O(L,M,!0);return K&&(B.$L=K),B},q.clone=function(){return A.w(this.$d,this)},q.toDate=function(){return new Date(this.valueOf())},q.toJSON=function(){return this.isValid()?this.toISOString():null},q.toISOString=function(){return this.$d.toISOString()},q.toString=function(){return this.$d.toUTCString()},G}(),x=$.prototype;return U.prototype=x,[["$ms",R],["$s",g],["$m",_],["$H",S],["$W",N],["$M",o],["$y",a],["$D",h]].forEach(function(G){x[G[1]]=function(q){return this.$g(q,G[0],G[1])}}),U.extend=function(G,q){return G.$i||(G(q,$,U),G.$i=!0),U},U.locale=O,U.isDayjs=P,U.unix=function(G){return U(1e3*G)},U.en=C[E],U.Ls=C,U.p={},U})},4110:function(u){(function(R,g){u.exports=g()})(this,function(){"use strict";return function(R,g,_){R=R||{};var S=g.prototype,N={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function f(l,a,h,p){return S.fromToBase(l,a,h,p)}_.en.relativeTime=N,S.fromToBase=function(l,a,h,p,d){for(var m,k,y,E=h.$locale().relativeTime||N,C=R.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],P=C.length,O=0;O<P;O+=1){var U=C[O];U.d&&(m=p?_(l).diff(h,U.d,!0):h.diff(l,U.d,!0));var A=(R.rounding||Math.round)(Math.abs(m));if(y=m>0,A<=U.r||!U.r){A<=1&&O>0&&(U=C[O-1]);var $=E[U.l];d&&(A=d(""+A)),k=typeof $=="string"?$.replace("%d",A):$(A,a,U.l,y);break}}if(a)return k;var x=y?E.future:E.past;return typeof x=="function"?x(k):x.replace("%s",k)},S.to=function(l,a){return f(l,a,this,!0)},S.from=function(l,a){return f(l,a,this)};var o=function(l){return l.$u?_.utc():_()};S.toNow=function(l){return this.to(o(this),l)},S.fromNow=function(l){return this.from(o(this),l)}}})},660:function(u){(function(R,g){u.exports=g()})(this,function(){"use strict";return function(R,g,_){_.updateLocale=function(S,N){var f=_.Ls[S];if(f)return(N?Object.keys(N):[]).forEach(function(o){f[o]=N[o]}),f}}})},9435:u=>{var R=1e3,g=R*60,_=g*60,S=_*24,N=S*7,f=S*365.25;u.exports=function(p,d){d=d||{};var m=typeof p;if(m==="string"&&p.length>0)return o(p);if(m==="number"&&isFinite(p))return d.long?a(p):l(p);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(p))};function o(p){if(p=String(p),!(p.length>100)){var d=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(p);if(!!d){var m=parseFloat(d[1]),k=(d[2]||"ms").toLowerCase();switch(k){case"years":case"year":case"yrs":case"yr":case"y":return m*f;case"weeks":case"week":case"w":return m*N;case"days":case"day":case"d":return m*S;case"hours":case"hour":case"hrs":case"hr":case"h":return m*_;case"minutes":case"minute":case"mins":case"min":case"m":return m*g;case"seconds":case"second":case"secs":case"sec":case"s":return m*R;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function l(p){var d=Math.abs(p);return d>=S?Math.round(p/S)+"d":d>=_?Math.round(p/_)+"h":d>=g?Math.round(p/g)+"m":d>=R?Math.round(p/R)+"s":p+"ms"}function a(p){var d=Math.abs(p);return d>=S?h(p,d,S,"day"):d>=_?h(p,d,_,"hour"):d>=g?h(p,d,g,"minute"):d>=R?h(p,d,R,"second"):p+" ms"}function h(p,d,m,k){var y=d>=m*1.5;return Math.round(p/m)+" "+k+(y?"s":"")}},1758:(u,R,g)=>{R.formatArgs=S,R.save=N,R.load=f,R.useColors=_,R.storage=o(),R.destroy=(()=>{let a=!1;return()=>{a||(a=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),R.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function _(){return typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function S(a){if(a[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+a[0]+(this.useColors?"%c ":" ")+"+"+u.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;a.splice(1,0,h,"color: inherit");let p=0,d=0;a[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(p++,m==="%c"&&(d=p))}),a.splice(d,0,h)}R.log=console.debug||console.log||(()=>{});function N(a){try{a?R.storage.setItem("debug",a):R.storage.removeItem("debug")}catch(h){}}function f(){let a;try{a=R.storage.getItem("debug")}catch(h){}return!a&&typeof process!="undefined"&&"env"in process&&(a=process.env.DEBUG),a}function o(){try{return localStorage}catch(a){}}u.exports=g(2447)(R);const{formatters:l}=u.exports;l.j=function(a){try{return JSON.stringify(a)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}},2447:(u,R,g)=>{function _(S){f.debug=f,f.default=f,f.coerce=d,f.disable=a,f.enable=l,f.enabled=h,f.humanize=g(9435),f.destroy=m,Object.keys(S).forEach(k=>{f[k]=S[k]}),f.names=[],f.skips=[],f.formatters={};function N(k){let y=0;for(let E=0;E<k.length;E++)y=(y<<5)-y+k.charCodeAt(E),y|=0;return f.colors[Math.abs(y)%f.colors.length]}f.selectColor=N;function f(k){let y,E=null;function C(...P){if(!C.enabled)return;const O=C,U=Number(new Date),A=U-(y||U);O.diff=A,O.prev=y,O.curr=U,y=U,P[0]=f.coerce(P[0]),typeof P[0]!="string"&&P.unshift("%O");let $=0;P[0]=P[0].replace(/%([a-zA-Z%])/g,(G,q)=>{if(G==="%%")return"%";$++;const L=f.formatters[q];if(typeof L=="function"){const M=P[$];G=L.call(O,M),P.splice($,1),$--}return G}),f.formatArgs.call(O,P),(O.log||f.log).apply(O,P)}return C.namespace=k,C.useColors=f.useColors(),C.color=f.selectColor(k),C.extend=o,C.destroy=f.destroy,Object.defineProperty(C,"enabled",{enumerable:!0,configurable:!1,get:()=>E===null?f.enabled(k):E,set:P=>{E=P}}),typeof f.init=="function"&&f.init(C),C}function o(k,y){const E=f(this.namespace+(typeof y=="undefined"?":":y)+k);return E.log=this.log,E}function l(k){f.save(k),f.names=[],f.skips=[];let y;const E=(typeof k=="string"?k:"").split(/[\s,]+/),C=E.length;for(y=0;y<C;y++)!E[y]||(k=E[y].replace(/\*/g,".*?"),k[0]==="-"?f.skips.push(new RegExp("^"+k.substr(1)+"$")):f.names.push(new RegExp("^"+k+"$")))}function a(){const k=[...f.names.map(p),...f.skips.map(p).map(y=>"-"+y)].join(",");return f.enable(""),k}function h(k){if(k[k.length-1]==="*")return!0;let y,E;for(y=0,E=f.skips.length;y<E;y++)if(f.skips[y].test(k))return!1;for(y=0,E=f.names.length;y<E;y++)if(f.names[y].test(k))return!0;return!1}function p(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}function d(k){return k instanceof Error?k.stack||k.message:k}function m(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return f.enable(f.load()),f}u.exports=_},8104:(u,R,g)=>{typeof process=="undefined"||process.type==="renderer"||process.browser===!0||process.__nwjs?u.exports=g(1758):u.exports=g(39)},39:(u,R,g)=>{const _=g(3867),S=g(1669);R.init=p,R.log=l,R.formatArgs=f,R.save=a,R.load=h,R.useColors=N,R.destroy=S.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),R.colors=[6,2,3,4,5,1];try{const m=g(2130);m&&(m.stderr||m).level>=2&&(R.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(m){}R.inspectOpts=Object.keys(process.env).filter(m=>/^debug_/i.test(m)).reduce((m,k)=>{const y=k.substring(6).toLowerCase().replace(/_([a-z])/g,(C,P)=>P.toUpperCase());let E=process.env[k];return/^(yes|on|true|enabled)$/i.test(E)?E=!0:/^(no|off|false|disabled)$/i.test(E)?E=!1:E==="null"?E=null:E=Number(E),m[y]=E,m},{});function N(){return"colors"in R.inspectOpts?Boolean(R.inspectOpts.colors):_.isatty(process.stderr.fd)}function f(m){const{namespace:k,useColors:y}=this;if(y){const E=this.color,C="[3"+(E<8?E:"8;5;"+E),P=`  ${C};1m${k} [0m`;m[0]=P+m[0].split(`
`).join(`
`+P),m.push(C+"m+"+u.exports.humanize(this.diff)+"[0m")}else m[0]=o()+k+" "+m[0]}function o(){return R.inspectOpts.hideDate?"":new Date().toISOString()+" "}function l(...m){return process.stderr.write(S.format(...m)+`
`)}function a(m){m?process.env.DEBUG=m:delete process.env.DEBUG}function h(){return process.env.DEBUG}function p(m){m.inspectOpts={};const k=Object.keys(R.inspectOpts);for(let y=0;y<k.length;y++)m.inspectOpts[k[y]]=R.inspectOpts[k[y]]}u.exports=g(2447)(R);const{formatters:d}=u.exports;d.o=function(m){return this.inspectOpts.colors=this.useColors,S.inspect(m,this.inspectOpts).split(`
`).map(k=>k.trim()).join(" ")},d.O=function(m){return this.inspectOpts.colors=this.useColors,S.inspect(m,this.inspectOpts)}},8604:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(l){for(var a,h=1,p=arguments.length;h<p;h++){a=arguments[h];for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&(l[d]=a[d])}return l};Object.defineProperty(R,"__esModule",{value:!0});var S=g(4953);R.AzureMonitorSymbol="Azure_Monitor_Tracer";var N=function(l){try{var a=g(8921).BasicTracer,h=S.channel.spanContextPropagator?{scopeManager:S.channel.spanContextPropagator}:void 0,p=new a(h),d=p.startSpan;p.startSpan=function(m,k){if(!k||!k.parent){var y=p.getCurrentSpan();y&&y.operation&&y.operation.traceparent&&(k=_({},k,{parent:{traceId:y.operation.traceparent.traceId,spanId:y.operation.traceparent.spanId}}))}var E=d.call(this,m,k);return E.addEvent("Application Insights Integration enabled"),E},p.addSpanProcessor(new f),p[R.AzureMonitorSymbol]=!0,l.setTracer(p)}catch(m){}return l},f=function(){function l(){}return l.prototype.onStart=function(a){},l.prototype.onEnd=function(a){S.channel.publish("azure-coretracing",a)},l.prototype.shutdown=function(){},l}();R.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:N};function o(){S.channel.registerMonkeyPatch("@azure/core-tracing",R.azureCoreTracing)}R.enable=o},8859:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=function(f){var o=f.prototype._emit;return f.prototype._emit=function(l,a){var h=o.apply(this,arguments);if(!a){var p=h;p||(p=o.call(this,l,!0)),_.channel.publish("bunyan",{level:l.level,result:p})}return h},f};R.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:S};function N(){_.channel.registerMonkeyPatch("bunyan",R.bunyan)}R.enable=N},2495:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=g(2413),N=function(o){var l=new S.Writable,a=new S.Writable;l.write=function(E){if(!E)return!0;var C=E.toString();return _.channel.publish("console",{message:C}),!0},a.write=function(E){if(!E)return!0;var C=E.toString();return _.channel.publish("console",{message:C,stderr:!0}),!0};for(var h=new o.Console(l,a),p=["log","info","warn","error","dir","time","timeEnd","trace","assert"],d=function(E){var C=o[E];C&&(o[E]=function(){if(h[E])try{h[E].apply(h,arguments)}catch(P){}return C.apply(o,arguments)})},m=0,k=p;m<k.length;m++){var y=k[m];d(y)}return o};R.console={versionSpecifier:">= 4.0.0",patch:N};function f(){_.channel.registerMonkeyPatch("console",R.console),g(7082)}R.enable=f},4106:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(8604);R.azuresdk=_;var S=g(8859);R.bunyan=S;var N=g(2495);R.console=N;var f=g(2028);R.mongodbCore=f;var o=g(8436);R.mongodb=o;var l=g(8002);R.mysql=l;var a=g(9024);R.pgPool=a;var h=g(8060);R.pg=h;var p=g(4487);R.redis=p;var d=g(6661);R.tedious=d;var m=g(4650);R.winston=m;function k(){S.enable(),N.enable(),f.enable(),o.enable(),l.enable(),h.enable(),a.enable(),p.enable(),m.enable(),_.enable(),d.enable()}R.enable=k},2028:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=function(f){var o=f.Server.prototype.connect;return f.Server.prototype.connect=function(){var a=o.apply(this,arguments),h=this.s.pool.write;this.s.pool.write=function(){var m=typeof arguments[1]=="function"?1:2;return typeof arguments[m]=="function"&&(arguments[m]=_.channel.bindToContext(arguments[m])),h.apply(this,arguments)};var p=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=_.channel.bindToContext(arguments[1])),p.apply(this,arguments)},a},f};R.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:S};function N(){_.channel.registerMonkeyPatch("mongodb-core",R.mongoCore)}R.enable=N},8436:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(h){for(var p,d=1,m=arguments.length;d<m;d++){p=arguments[d];for(var k in p)Object.prototype.hasOwnProperty.call(p,k)&&(h[k]=p[k])}return h};Object.defineProperty(R,"__esModule",{value:!0});var S=g(4953),N=function(h){var p=h.instrument({operationIdGenerator:{next:function(){return S.channel.bindToContext(function(m){return m()})}}}),d={};return p.on("started",function(m){d[m.requestId]||(d[m.requestId]=_({},m,{time:new Date}))}),p.on("succeeded",function(m){var k=d[m.requestId];k&&delete d[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return S.channel.publish("mongodb",{startedData:k,event:m,succeeded:!0})}):S.channel.publish("mongodb",{startedData:k,event:m,succeeded:!0})}),p.on("failed",function(m){var k=d[m.requestId];k&&delete d[m.requestId],typeof m.operationId=="function"?m.operationId(function(){return S.channel.publish("mongodb",{startedData:k,event:m,succeeded:!1})}):S.channel.publish("mongodb",{startedData:k,event:m,succeeded:!1})}),h},f=function(h){var p=h.instrument(),d={},m={};return p.on("started",function(k){d[k.requestId]||(m[k.requestId]=S.channel.bindToContext(function(y){return y()}),d[k.requestId]=_({},k,{time:new Date}))}),p.on("succeeded",function(k){var y=d[k.requestId];y&&delete d[k.requestId],typeof k=="object"&&typeof m[k.requestId]=="function"&&(m[k.requestId](function(){return S.channel.publish("mongodb",{startedData:y,event:k,succeeded:!0})}),delete m[k.requestId])}),p.on("failed",function(k){var y=d[k.requestId];y&&delete d[k.requestId],typeof k=="object"&&typeof m[k.requestId]=="function"&&(m[k.requestId](function(){return S.channel.publish("mongodb",{startedData:y,event:k,succeeded:!1})}),delete m[k.requestId])}),h},o=function(h){var p=h.Server.prototype.connect;return h.Server.prototype.connect=function(){var m=p.apply(this,arguments),k=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var C=typeof arguments[1]=="function"?1:2;return typeof arguments[C]=="function"&&(arguments[C]=S.channel.bindToContext(arguments[C])),k.apply(this,arguments)};var y=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=S.channel.bindToContext(arguments[1])),y.apply(this,arguments)},m},h},l=function(h){o(h);var p=h.instrument(),d={},m={};return p.on("started",function(k){d[k.requestId]||(m[k.requestId]=S.channel.bindToContext(function(y){return y()}),d[k.requestId]=k)}),p.on("succeeded",function(k){var y=d[k.requestId];y&&delete d[k.requestId],typeof k=="object"&&typeof m[k.requestId]=="function"&&(m[k.requestId](function(){return S.channel.publish("mongodb",{startedData:y,event:k,succeeded:!0})}),delete m[k.requestId])}),p.on("failed",function(k){var y=d[k.requestId];y&&delete d[k.requestId],typeof k=="object"&&typeof m[k.requestId]=="function"&&(m[k.requestId](function(){return S.channel.publish("mongodb",{startedData:y,event:k,succeeded:!1})}),delete m[k.requestId])}),h};R.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:N},R.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:f},R.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:l};function a(){S.channel.registerMonkeyPatch("mongodb",R.mongo2),S.channel.registerMonkeyPatch("mongodb",R.mongo3),S.channel.registerMonkeyPatch("mongodb",R.mongo330)}R.enable=a},8002:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=g(5622),N=function(o,l){var a=function(y,E){return function(C,P){var O=y[C];O&&(y[C]=function(){for(var A=arguments.length-1,$=arguments.length-1;$>=0;--$)if(typeof arguments[$]=="function"){A=$;break}else if(typeof arguments[$]!="undefined")break;var x=arguments[A],G={result:null,startTime:null,startDate:null};typeof x=="function"&&(P?(G.startTime=process.hrtime(),G.startDate=new Date,arguments[A]=_.channel.bindToContext(P(G,x))):arguments[A]=_.channel.bindToContext(x));var q=O.apply(this,arguments);return G.result=q,q})}},h=function(y,E){return a(y.prototype,E+".prototype")},p=["connect","changeUser","ping","statistics","end"],d=g(4694)(S.dirname(l)+"/lib/Connection");p.forEach(function(y){return h(d,"Connection")(y)}),a(d,"Connection")("createQuery",function(y,E){return function(C){var P=process.hrtime(y.startTime),O=P[0]*1e3+P[1]/1e6|0;_.channel.publish("mysql",{query:y.result,callbackArgs:arguments,err:C,duration:O,time:y.startDate}),E.apply(this,arguments)}});var m=["_enqueueCallback"],k=g(420)(S.dirname(l)+"/lib/Pool");return m.forEach(function(y){return h(k,"Pool")(y)}),o};R.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:N};function f(){_.channel.registerMonkeyPatch("mysql",R.mysql)}R.enable=f},9024:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953);function S(f){var o=f.prototype.connect;return f.prototype.connect=function(a){return a&&(arguments[0]=_.channel.bindToContext(a)),o.apply(this,arguments)},f}R.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:S};function N(){_.channel.registerMonkeyPatch("pg-pool",R.postgresPool1)}R.enable=N},8060:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=g(8614);function N(l,a){var h=l.Client.prototype.query,p="__diagnosticOriginalFunc";return l.Client.prototype.query=function(m,k,y){var E={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},C=process.hrtime(),P;function O(U){U&&U[p]&&(U=U[p]);var A=_.channel.bindToContext(function($,x){var G=process.hrtime(C);if(E.result=x&&{rowCount:x.rowCount,command:x.command},E.error=$,E.duration=Math.ceil(G[0]*1e3+G[1]/1e6),_.channel.publish("postgres",E),$){if(U)return U.apply(this,arguments);P&&P instanceof S.EventEmitter&&P.emit("error",$)}else U&&U.apply(this,arguments)});try{return Object.defineProperty(A,p,{value:U}),A}catch($){return U}}try{typeof m=="string"?k instanceof Array?(E.query.preparable={text:m,args:k},y=O(y)):(E.query.text=m,y?y=O(y):k=O(k)):(typeof m.name=="string"?E.query.plan=m.name:m.values instanceof Array?E.query.preparable={text:m.text,args:m.values}:E.query.text=m.text,y?y=O(y):k?k=O(k):m.callback=O(m.callback))}catch(U){return h.apply(this,arguments)}return arguments[0]=m,arguments[1]=k,arguments[2]=y,arguments.length=arguments.length>3?arguments.length:3,P=h.apply(this,arguments),P},l}function f(l,a){var h=l.Client.prototype.query,p="__diagnosticOriginalFunc";return l.Client.prototype.query=function(m,k,y){var E=this,C=!!y,P={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},O=process.hrtime(),U;function A($){$&&$[p]&&($=$[p]);var x=_.channel.bindToContext(function(G,q){var L=process.hrtime(O);if(P.result=q&&{rowCount:q.rowCount,command:q.command},P.error=G,P.duration=Math.ceil(L[0]*1e3+L[1]/1e6),_.channel.publish("postgres",P),G){if($)return $.apply(this,arguments);U&&U instanceof S.EventEmitter&&U.emit("error",G)}else $&&$.apply(this,arguments)});try{return Object.defineProperty(x,p,{value:$}),x}catch(G){return $}}try{typeof m=="string"?k instanceof Array?(P.query.preparable={text:m,args:k},C=typeof y=="function",y=C?A(y):y):(P.query.text=m,y?(C=typeof y=="function",y=C?A(y):y):(C=typeof k=="function",k=C?A(k):k)):(typeof m.name=="string"?P.query.plan=m.name:m.values instanceof Array?P.query.preparable={text:m.text,args:m.values}:P.query.text=m.text,y?(C=typeof y=="function",y=A(y)):k?(C=typeof k=="function",k=C?A(k):k):(C=typeof m.callback=="function",m.callback=C?A(m.callback):m.callback))}catch($){return h.apply(this,arguments)}return arguments[0]=m,arguments[1]=k,arguments[2]=y,arguments.length=arguments.length>3?arguments.length:3,U=h.apply(this,arguments),C?U:U.then(function($){return A()(void 0,$),new E._Promise(function(x,G){x($)})}).catch(function($){return A()($,void 0),new E._Promise(function(x,G){G($)})})},l}R.postgres6={versionSpecifier:"6.*",patch:N},R.postgres7={versionSpecifier:">=7.* <=8.*",patch:f};function o(){_.channel.registerMonkeyPatch("pg",R.postgres6),_.channel.registerMonkeyPatch("pg",R.postgres7)}R.enable=o},4487:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(4953),S=function(f){var o=f.RedisClient.prototype.internal_send_command;return f.RedisClient.prototype.internal_send_command=function(l){if(l){var a=l.callback;if(!a||!a.pubsubBound){var h=this.address,p=process.hrtime(),d=new Date;l.callback=_.channel.bindToContext(function(m,k){var y=process.hrtime(p),E=y[0]*1e3+y[1]/1e6|0;_.channel.publish("redis",{duration:E,address:h,commandObj:l,err:m,result:k,time:d}),typeof a=="function"&&a.apply(this,arguments)}),l.callback.pubsubBound=!0}}return o.call(this,l)},f};R.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:S};function N(){_.channel.registerMonkeyPatch("redis",R.redis)}R.enable=N},6661:function(u,R,g){"use strict";var _=this&&this.__assign||Object.assign||function(o){for(var l,a=1,h=arguments.length;a<h;a++){l=arguments[a];for(var p in l)Object.prototype.hasOwnProperty.call(l,p)&&(o[p]=l[p])}return o};Object.defineProperty(R,"__esModule",{value:!0});var S=g(4953),N=function(o){var l=o.Connection.prototype.makeRequest;return o.Connection.prototype.makeRequest=function(){function h(d){var m=process.hrtime(),k={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return S.channel.bindToContext(function(y,E,C){var P=process.hrtime(m);k=_({},k,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!y&&{rowCount:E,rows:C},query:{text:this.parametersByName.statement.value},error:y,duration:Math.ceil(P[0]*1e3+P[1]/1e6)}),S.channel.publish("tedious",k),d.call(this,y,E,C)})}var p=arguments[0];arguments[0].callback=h(p.callback),l.apply(this,arguments)},o};R.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:N};function f(){S.channel.registerMonkeyPatch("tedious",R.tedious)}R.enable=f},4650:function(u,R,g){"use strict";var _=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,p){h.__proto__=p}||function(h,p){for(var d in p)p.hasOwnProperty(d)&&(h[d]=p[d])};return function(h,p){a(h,p);function d(){this.constructor=h}h.prototype=p===null?Object.create(p):(d.prototype=p.prototype,new d)}}(),S=this&&this.__rest||function(a,h){var p={};for(var d in a)Object.prototype.hasOwnProperty.call(a,d)&&h.indexOf(d)<0&&(p[d]=a[d]);if(a!=null&&typeof Object.getOwnPropertySymbols=="function")for(var m=0,d=Object.getOwnPropertySymbols(a);m<d.length;m++)h.indexOf(d[m])<0&&(p[d[m]]=a[d[m]]);return p};Object.defineProperty(R,"__esModule",{value:!0});var N=g(4953),f=function(a){var h=a.Logger.prototype.log,p,d=function(m,k,y){var E;return p===a.config.npm.levels?E="npm":p===a.config.syslog.levels?E="syslog":E="unknown",N.channel.publish("winston",{level:m,message:k,meta:y,levelKind:E}),k};return a.Logger.prototype.log=function(){return p=this.levels,!this.filters||this.filters.length===0?this.filters=[d]:this.filters[this.filters.length-1]!==d&&(this.filters=this.filters.filter(function(k){return k!==d}),this.filters.push(d)),h.apply(this,arguments)},a},o=function(a){var h=function(y,E){var C;return y.config.npm.levels[E]!=null?C="npm":y.config.syslog.levels[E]!=null?C="syslog":C="unknown",C},p=function(y){_(E,y);function E(C,P){var O=y.call(this,P)||this;return O.winston=C,O}return E.prototype.log=function(C,P){var O=C.message,U=C.level,A=C.meta,$=S(C,["message","level","meta"]);U=typeof Symbol.for=="function"?C[Symbol.for("level")]:U,O=C instanceof Error?C:O;var x=h(this.winston,U);A=A||{};for(var G in $)$.hasOwnProperty(G)&&(A[G]=$[G]);N.channel.publish("winston",{message:O,level:U,levelKind:x,meta:A}),P()},E}(a.Transport);function d(){var y=arguments[0].levels||a.config.npm.levels,E;for(var C in y)y.hasOwnProperty(C)&&(E=E===void 0||y[C]>y[E]?C:E);this.add(new p(a,{level:E}))}var m=a.createLogger;a.createLogger=function(){var E=arguments[0].levels||a.config.npm.levels,C;for(var P in E)E.hasOwnProperty(P)&&(C=C===void 0||E[P]>E[C]?P:C);var O=m.apply(this,arguments);O.add(new p(a,{level:C}));var U=O.configure;return O.configure=function(){U.apply(this,arguments),d.apply(this,arguments)},O};var k=a.createLogger;return a.configure=function(){k.apply(this,arguments),d.apply(this,arguments)},a.add(new p(a)),a};R.winston3={versionSpecifier:"3.x",patch:o},R.winston2={versionSpecifier:"2.x",patch:f};function l(){N.channel.registerMonkeyPatch("winston",R.winston2),N.channel.registerMonkeyPatch("winston",R.winston3)}R.enable=l},4694:u=>{function R(g){var _=new Error("Cannot find module '"+g+"'");throw _.code="MODULE_NOT_FOUND",_}R.keys=()=>[],R.resolve=R,R.id=4694,u.exports=R},420:u=>{function R(g){var _=new Error("Cannot find module '"+g+"'");throw _.code="MODULE_NOT_FOUND",_}R.keys=()=>[],R.resolve=R,R.id=420,u.exports=R},4953:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(7424),S=g(7424);R.makePatchingRequire=S.makePatchingRequire;var N=function(l){return!0},f=function(){function l(){this.version=g(5236).i8,this.subscribers={},this.contextPreservationFunction=function(a){return a},this.knownPatches={},this.currentlyPublishing=!1}return l.prototype.shouldPublish=function(a){var h=this.subscribers[a];return h?h.some(function(p){var d=p.filter;return!d||d(!1)}):!1},l.prototype.publish=function(a,h){if(!this.currentlyPublishing){var p=this.subscribers[a];if(p){var d={timestamp:Date.now(),data:h};this.currentlyPublishing=!0,p.forEach(function(m){var k=m.listener,y=m.filter;try{y&&y(!0)&&k(d)}catch(E){}}),this.currentlyPublishing=!1}}},l.prototype.subscribe=function(a,h,p){p===void 0&&(p=N),this.subscribers[a]||(this.subscribers[a]=[]),this.subscribers[a].push({listener:h,filter:p})},l.prototype.unsubscribe=function(a,h,p){p===void 0&&(p=N);var d=this.subscribers[a];if(d){for(var m=0;m<d.length;++m)if(d[m].listener===h&&d[m].filter===p)return d.splice(m,1),!0}return!1},l.prototype.reset=function(){var a=this;this.subscribers={},this.contextPreservationFunction=function(h){return h},Object.getOwnPropertyNames(this.knownPatches).forEach(function(h){return delete a.knownPatches[h]})},l.prototype.bindToContext=function(a){return this.contextPreservationFunction(a)},l.prototype.addContextPreservation=function(a){var h=this.contextPreservationFunction;this.contextPreservationFunction=function(p){return a(h(p))}},l.prototype.registerMonkeyPatch=function(a,h){this.knownPatches[a]||(this.knownPatches[a]=[]),this.knownPatches[a].push(h)},l.prototype.getPatchesObject=function(){return this.knownPatches},l}();if(!global.diagnosticsSource){global.diagnosticsSource=new f;var o=g(2282);o.prototype.require=_.makePatchingRequire(global.diagnosticsSource.getPatchesObject())}R.channel=global.diagnosticsSource},7424:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(5622),S=g(4014),N=g(2282),f=Object.keys(process.binding("natives")),o=N.prototype.require;function l(a){var h={};return function(d){var m=o.apply(this,arguments);if(a[d]){var k=N._resolveFilename(d,this);if(h.hasOwnProperty(k))return h[k];var y=void 0;if(f.indexOf(d)<0)try{y=o.call(this,_.join(d,"package.json")).version}catch(A){return m}else y=process.version.substring(1);var E=y.indexOf("-");E>=0&&(y=y.substring(0,E));for(var C=m,P=0,O=a[d];P<O.length;P++){var U=O[P];S.satisfies(y,U.versionSpecifier)&&(C=U.patch(C,k))}return h[k]=C}return m}}R.makePatchingRequire=l},4014:(u,R)=>{R=u.exports=ie;var g;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?g=function(){var b=Array.prototype.slice.call(arguments,0);b.unshift("SEMVER"),console.log.apply(console,b)}:g=function(){},R.SEMVER_SPEC_VERSION="2.0.0";var _=256,S=Number.MAX_SAFE_INTEGER||9007199254740991,N=16,f=R.re=[],o=R.src=[],l=0,a=l++;o[a]="0|[1-9]\\d*";var h=l++;o[h]="[0-9]+";var p=l++;o[p]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var d=l++;o[d]="("+o[a]+")\\.("+o[a]+")\\.("+o[a]+")";var m=l++;o[m]="("+o[h]+")\\.("+o[h]+")\\.("+o[h]+")";var k=l++;o[k]="(?:"+o[a]+"|"+o[p]+")";var y=l++;o[y]="(?:"+o[h]+"|"+o[p]+")";var E=l++;o[E]="(?:-("+o[k]+"(?:\\."+o[k]+")*))";var C=l++;o[C]="(?:-?("+o[y]+"(?:\\."+o[y]+")*))";var P=l++;o[P]="[0-9A-Za-z-]+";var O=l++;o[O]="(?:\\+("+o[P]+"(?:\\."+o[P]+")*))";var U=l++,A="v?"+o[d]+o[E]+"?"+o[O]+"?";o[U]="^"+A+"$";var $="[v=\\s]*"+o[m]+o[C]+"?"+o[O]+"?",x=l++;o[x]="^"+$+"$";var G=l++;o[G]="((?:<|>)?=?)";var q=l++;o[q]=o[h]+"|x|X|\\*";var L=l++;o[L]=o[a]+"|x|X|\\*";var M=l++;o[M]="[v=\\s]*("+o[L]+")(?:\\.("+o[L]+")(?:\\.("+o[L]+")(?:"+o[E]+")?"+o[O]+"?)?)?";var B=l++;o[B]="[v=\\s]*("+o[q]+")(?:\\.("+o[q]+")(?:\\.("+o[q]+")(?:"+o[C]+")?"+o[O]+"?)?)?";var K=l++;o[K]="^"+o[G]+"\\s*"+o[M]+"$";var Y=l++;o[Y]="^"+o[G]+"\\s*"+o[B]+"$";var Q=l++;o[Q]="(?:^|[^\\d])(\\d{1,"+N+"})(?:\\.(\\d{1,"+N+"}))?(?:\\.(\\d{1,"+N+"}))?(?:$|[^\\d])";var re=l++;o[re]="(?:~>?)";var de=l++;o[de]="(\\s*)"+o[re]+"\\s+",f[de]=new RegExp(o[de],"g");var pe="$1~",_e=l++;o[_e]="^"+o[re]+o[M]+"$";var ne=l++;o[ne]="^"+o[re]+o[B]+"$";var oe=l++;o[oe]="(?:\\^)";var se=l++;o[se]="(\\s*)"+o[oe]+"\\s+",f[se]=new RegExp(o[se],"g");var ye="$1^",be=l++;o[be]="^"+o[oe]+o[M]+"$";var De=l++;o[De]="^"+o[oe]+o[B]+"$";var ge=l++;o[ge]="^"+o[G]+"\\s*("+$+")$|^$";var we=l++;o[we]="^"+o[G]+"\\s*("+A+")$|^$";var Ee=l++;o[Ee]="(\\s*)"+o[G]+"\\s*("+$+"|"+o[M]+")",f[Ee]=new RegExp(o[Ee],"g");var Ue="$1$2$3",Ze=l++;o[Ze]="^\\s*("+o[M]+")\\s+-\\s+("+o[M]+")\\s*$";var Ge=l++;o[Ge]="^\\s*("+o[B]+")\\s+-\\s+("+o[B]+")\\s*$";var ze=l++;o[ze]="(<|>)?=?\\s*\\*";for(var Te=0;Te<l;Te++)g(Te,o[Te]),f[Te]||(f[Te]=new RegExp(o[Te]));R.parse=Ne;function Ne(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie)return b;if(typeof b!="string"||b.length>_)return null;var F=I.loose?f[x]:f[U];if(!F.test(b))return null;try{return new ie(b,I)}catch(j){return null}}R.valid=Pe;function Pe(b,I){var F=Ne(b,I);return F?F.version:null}R.clean=et;function et(b,I){var F=Ne(b.trim().replace(/^[=v]+/,""),I);return F?F.version:null}R.SemVer=ie;function ie(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ie){if(b.loose===I.loose)return b;b=b.version}else if(typeof b!="string")throw new TypeError("Invalid Version: "+b);if(b.length>_)throw new TypeError("version is longer than "+_+" characters");if(!(this instanceof ie))return new ie(b,I);g("SemVer",b,I),this.options=I,this.loose=!!I.loose;var F=b.trim().match(I.loose?f[x]:f[U]);if(!F)throw new TypeError("Invalid Version: "+b);if(this.raw=b,this.major=+F[1],this.minor=+F[2],this.patch=+F[3],this.major>S||this.major<0)throw new TypeError("Invalid major version");if(this.minor>S||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>S||this.patch<0)throw new TypeError("Invalid patch version");F[4]?this.prerelease=F[4].split(".").map(function(j){if(/^[0-9]+$/.test(j)){var z=+j;if(z>=0&&z<S)return z}return j}):this.prerelease=[],this.build=F[5]?F[5].split("."):[],this.format()}ie.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},ie.prototype.toString=function(){return this.version},ie.prototype.compare=function(b){return g("SemVer.compare",this.version,this.options,b),b instanceof ie||(b=new ie(b,this.options)),this.compareMain(b)||this.comparePre(b)},ie.prototype.compareMain=function(b){return b instanceof ie||(b=new ie(b,this.options)),Le(this.major,b.major)||Le(this.minor,b.minor)||Le(this.patch,b.patch)},ie.prototype.comparePre=function(b){if(b instanceof ie||(b=new ie(b,this.options)),this.prerelease.length&&!b.prerelease.length)return-1;if(!this.prerelease.length&&b.prerelease.length)return 1;if(!this.prerelease.length&&!b.prerelease.length)return 0;var I=0;do{var F=this.prerelease[I],j=b.prerelease[I];if(g("prerelease compare",I,F,j),F===void 0&&j===void 0)return 0;if(j===void 0)return 1;if(F===void 0)return-1;if(F===j)continue;return Le(F,j)}while(++I)},ie.prototype.inc=function(b,I){switch(b){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",I);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",I);break;case"prepatch":this.prerelease.length=0,this.inc("patch",I),this.inc("pre",I);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",I),this.inc("pre",I);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var F=this.prerelease.length;--F>=0;)typeof this.prerelease[F]=="number"&&(this.prerelease[F]++,F=-2);F===-1&&this.prerelease.push(0)}I&&(this.prerelease[0]===I?isNaN(this.prerelease[1])&&(this.prerelease=[I,0]):this.prerelease=[I,0]);break;default:throw new Error("invalid increment argument: "+b)}return this.format(),this.raw=this.version,this},R.inc=Ut;function Ut(b,I,F,j){typeof F=="string"&&(j=F,F=void 0);try{return new ie(b,F).inc(I,j).version}catch(z){return null}}R.diff=$t;function $t(b,I){if(Dt(b,I))return null;var F=Ne(b),j=Ne(I),z="";if(F.prerelease.length||j.prerelease.length){z="pre";var X="prerelease"}for(var J in F)if((J==="major"||J==="minor"||J==="patch")&&F[J]!==j[J])return z+J;return X}R.compareIdentifiers=Le;var xt=/^[0-9]+$/;function Le(b,I){var F=xt.test(b),j=xt.test(I);return F&&j&&(b=+b,I=+I),b===I?0:F&&!j?-1:j&&!F?1:b<I?-1:1}R.rcompareIdentifiers=Mt;function Mt(b,I){return Le(I,b)}R.major=Wt;function Wt(b,I){return new ie(b,I).major}R.minor=dt;function dt(b,I){return new ie(b,I).minor}R.patch=Zr;function Zr(b,I){return new ie(b,I).patch}R.compare=$e;function $e(b,I,F){return new ie(b,F).compare(new ie(I,F))}R.compareLoose=Ar;function Ar(b,I){return $e(b,I,!0)}R.rcompare=fr;function fr(b,I,F){return $e(I,b,F)}R.sort=St;function St(b,I){return b.sort(function(F,j){return R.compare(F,j,I)})}R.rsort=Fr;function Fr(b,I){return b.sort(function(F,j){return R.rcompare(F,j,I)})}R.gt=it;function it(b,I,F){return $e(b,I,F)>0}R.lt=st;function st(b,I,F){return $e(b,I,F)<0}R.eq=Dt;function Dt(b,I,F){return $e(b,I,F)===0}R.neq=Tt;function Tt(b,I,F){return $e(b,I,F)!==0}R.gte=Ht;function Ht(b,I,F){return $e(b,I,F)>=0}R.lte=Gt;function Gt(b,I,F){return $e(b,I,F)<=0}R.cmp=tt;function tt(b,I,F,j){switch(I){case"===":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b===F;case"!==":return typeof b=="object"&&(b=b.version),typeof F=="object"&&(F=F.version),b!==F;case"":case"=":case"==":return Dt(b,F,j);case"!=":return Tt(b,F,j);case">":return it(b,F,j);case">=":return Ht(b,F,j);case"<":return st(b,F,j);case"<=":return Gt(b,F,j);default:throw new TypeError("Invalid operator: "+I)}}R.Comparator=Ae;function Ae(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof Ae){if(b.loose===!!I.loose)return b;b=b.value}if(!(this instanceof Ae))return new Ae(b,I);g("comparator",b,I),this.options=I,this.loose=!!I.loose,this.parse(b),this.semver===ht?this.value="":this.value=this.operator+this.semver.version,g("comp",this)}var ht={};Ae.prototype.parse=function(b){var I=this.options.loose?f[ge]:f[we],F=b.match(I);if(!F)throw new TypeError("Invalid comparator: "+b);this.operator=F[1],this.operator==="="&&(this.operator=""),F[2]?this.semver=new ie(F[2],this.options.loose):this.semver=ht},Ae.prototype.toString=function(){return this.value},Ae.prototype.test=function(b){return g("Comparator.test",b,this.options.loose),this.semver===ht?!0:(typeof b=="string"&&(b=new ie(b,this.options)),tt(b,this.operator,this.semver,this.options))},Ae.prototype.intersects=function(b,I){if(!(b instanceof Ae))throw new TypeError("a Comparator is required");(!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1});var F;if(this.operator==="")return F=new ve(b.value,I),We(this.value,F,I);if(b.operator==="")return F=new ve(this.value,I),We(b.semver,F,I);var j=(this.operator===">="||this.operator===">")&&(b.operator===">="||b.operator===">"),z=(this.operator==="<="||this.operator==="<")&&(b.operator==="<="||b.operator==="<"),X=this.semver.version===b.semver.version,J=(this.operator===">="||this.operator==="<=")&&(b.operator===">="||b.operator==="<="),le=tt(this.semver,"<",b.semver,I)&&(this.operator===">="||this.operator===">")&&(b.operator==="<="||b.operator==="<"),ue=tt(this.semver,">",b.semver,I)&&(this.operator==="<="||this.operator==="<")&&(b.operator===">="||b.operator===">");return j||z||X&&J||le||ue},R.Range=ve;function ve(b,I){if((!I||typeof I!="object")&&(I={loose:!!I,includePrerelease:!1}),b instanceof ve)return b.loose===!!I.loose&&b.includePrerelease===!!I.includePrerelease?b:new ve(b.raw,I);if(b instanceof Ae)return new ve(b.value,I);if(!(this instanceof ve))return new ve(b,I);if(this.options=I,this.loose=!!I.loose,this.includePrerelease=!!I.includePrerelease,this.raw=b,this.set=b.split(/\s*\|\|\s*/).map(function(F){return this.parseRange(F.trim())},this).filter(function(F){return F.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+b);this.format()}ve.prototype.format=function(){return this.range=this.set.map(function(b){return b.join(" ").trim()}).join("||").trim(),this.range},ve.prototype.toString=function(){return this.range},ve.prototype.parseRange=function(b){var I=this.options.loose;b=b.trim();var F=I?f[Ge]:f[Ze];b=b.replace(F,rn),g("hyphen replace",b),b=b.replace(f[Ee],Ue),g("comparator trim",b,f[Ee]),b=b.replace(f[de],pe),b=b.replace(f[se],ye),b=b.split(/\s+/).join(" ");var j=I?f[ge]:f[we],z=b.split(" ").map(function(X){return Vt(X,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(z=z.filter(function(X){return!!X.match(j)})),z=z.map(function(X){return new Ae(X,this.options)},this),z},ve.prototype.intersects=function(b,I){if(!(b instanceof ve))throw new TypeError("a Range is required");return this.set.some(function(F){return F.every(function(j){return b.set.some(function(z){return z.every(function(X){return j.intersects(X,I)})})})})},R.toComparators=Or;function Or(b,I){return new ve(b,I).set.map(function(F){return F.map(function(j){return j.value}).join(" ").trim().split(" ")})}function Vt(b,I){return g("comp",b,I),b=Qe(b,I),g("caret",b),b=en(b,I),g("tildes",b),b=Ce(b,I),g("xrange",b),b=Mr(b,I),g("stars",b),b}function Se(b){return!b||b.toLowerCase()==="x"||b==="*"}function en(b,I){return b.trim().split(/\s+/).map(function(F){return tn(F,I)}).join(" ")}function tn(b,I){var F=I.loose?f[ne]:f[_e];return b.replace(F,function(j,z,X,J,le){g("tilde",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":le?(g("replaceTilde pr",le),ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0"):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0",g("tilde return",ue),ue})}function Qe(b,I){return b.trim().split(/\s+/).map(function(F){return ft(F,I)}).join(" ")}function ft(b,I){g("caret",b,I);var F=I.loose?f[De]:f[be];return b.replace(F,function(j,z,X,J,le){g("caret",b,j,z,X,J,le);var ue;return Se(z)?ue="":Se(X)?ue=">="+z+".0.0 <"+(+z+1)+".0.0":Se(J)?z==="0"?ue=">="+z+"."+X+".0 <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+".0 <"+(+z+1)+".0.0":le?(g("replaceCaret pr",le),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+"-"+le+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+"-"+le+" <"+(+z+1)+".0.0"):(g("no pr"),z==="0"?X==="0"?ue=">="+z+"."+X+"."+J+" <"+z+"."+X+"."+(+J+1):ue=">="+z+"."+X+"."+J+" <"+z+"."+(+X+1)+".0":ue=">="+z+"."+X+"."+J+" <"+(+z+1)+".0.0"),g("caret return",ue),ue})}function Ce(b,I){return g("replaceXRanges",b,I),b.split(/\s+/).map(function(F){return xr(F,I)}).join(" ")}function xr(b,I){b=b.trim();var F=I.loose?f[Y]:f[K];return b.replace(F,function(j,z,X,J,le,ue){g("xRange",b,j,z,X,J,le,ue);var qe=Se(X),xe=qe||Se(J),Fe=xe||Se(le),Ie=Fe;return z==="="&&Ie&&(z=""),qe?z===">"||z==="<"?j="<0.0.0":j="*":z&&Ie?(xe&&(J=0),le=0,z===">"?(z=">=",xe?(X=+X+1,J=0,le=0):(J=+J+1,le=0)):z==="<="&&(z="<",xe?X=+X+1:J=+J+1),j=z+X+"."+J+"."+le):xe?j=">="+X+".0.0 <"+(+X+1)+".0.0":Fe&&(j=">="+X+"."+J+".0 <"+X+"."+(+J+1)+".0"),g("xRange return",j),j})}function Mr(b,I){return g("replaceStars",b,I),b.trim().replace(f[ze],"")}function rn(b,I,F,j,z,X,J,le,ue,qe,xe,Fe,Ie){return Se(F)?I="":Se(j)?I=">="+F+".0.0":Se(z)?I=">="+F+"."+j+".0":I=">="+I,Se(ue)?le="":Se(qe)?le="<"+(+ue+1)+".0.0":Se(xe)?le="<"+ue+"."+(+qe+1)+".0":Fe?le="<="+ue+"."+qe+"."+xe+"-"+Fe:le="<="+le,(I+" "+le).trim()}ve.prototype.test=function(b){if(!b)return!1;typeof b=="string"&&(b=new ie(b,this.options));for(var I=0;I<this.set.length;I++)if(nn(this.set[I],b,this.options))return!0;return!1};function nn(b,I,F){for(var j=0;j<b.length;j++)if(!b[j].test(I))return!1;if(I.prerelease.length&&!F.includePrerelease){for(j=0;j<b.length;j++)if(g(b[j].semver),b[j].semver!==ht&&b[j].semver.prerelease.length>0){var z=b[j].semver;if(z.major===I.major&&z.minor===I.minor&&z.patch===I.patch)return!0}return!1}return!0}R.satisfies=We;function We(b,I,F){try{I=new ve(I,F)}catch(j){return!1}return I.test(b)}R.maxSatisfying=Lr;function Lr(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===-1)&&(j=J,z=new ie(j,F))}),j}R.minSatisfying=sn;function sn(b,I,F){var j=null,z=null;try{var X=new ve(I,F)}catch(J){return null}return b.forEach(function(J){X.test(J)&&(!j||z.compare(J)===1)&&(j=J,z=new ie(j,F))}),j}R.minVersion=an;function an(b,I){b=new ve(b,I);var F=new ie("0.0.0");if(b.test(F)||(F=new ie("0.0.0-0"),b.test(F)))return F;F=null;for(var j=0;j<b.set.length;++j){var z=b.set[j];z.forEach(function(X){var J=new ie(X.semver.version);switch(X.operator){case">":J.prerelease.length===0?J.patch++:J.prerelease.push(0),J.raw=J.format();case"":case">=":(!F||it(F,J))&&(F=J);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+X.operator)}})}return F&&b.test(F)?F:null}R.validRange=qr;function qr(b,I){try{return new ve(b,I).range||"*"}catch(F){return null}}R.ltr=on;function on(b,I,F){return kt(b,I,"<",F)}R.gtr=un;function un(b,I,F){return kt(b,I,">",F)}R.outside=kt;function kt(b,I,F,j){b=new ie(b,j),I=new ve(I,j);var z,X,J,le,ue;switch(F){case">":z=it,X=Gt,J=st,le=">",ue=">=";break;case"<":z=st,X=Ht,J=it,le="<",ue="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(We(b,I,j))return!1;for(var qe=0;qe<I.set.length;++qe){var xe=I.set[qe],Fe=null,Ie=null;if(xe.forEach(function(Be){Be.semver===ht&&(Be=new Ae(">=0.0.0")),Fe=Fe||Be,Ie=Ie||Be,z(Be.semver,Fe.semver,j)?Fe=Be:J(Be.semver,Ie.semver,j)&&(Ie=Be)}),Fe.operator===le||Fe.operator===ue||(!Ie.operator||Ie.operator===le)&&X(b,Ie.semver))return!1;if(Ie.operator===ue&&J(b,Ie.semver))return!1}return!0}R.prerelease=gr;function gr(b,I){var F=Ne(b,I);return F&&F.prerelease.length?F.prerelease:null}R.intersects=ln;function ln(b,I,F){return b=new ve(b,F),I=new ve(I,F),b.intersects(I)}R.coerce=vr;function vr(b){if(b instanceof ie)return b;if(typeof b!="string")return null;var I=b.match(f[Q]);return I==null?null:Ne(I[1]+"."+(I[2]||"0")+"."+(I[3]||"0"))}},5236:u=>{"use strict";u.exports={i8:"0.2.0"}},9867:(u,R,g)=>{"use strict";var _=g(6372),S=_.wrap,N=_.unwrap,f="wrap@before";function o(d,m,k){var y=!!d[m]&&d.propertyIsEnumerable(m);Object.defineProperty(d,m,{configurable:!0,enumerable:y,writable:!0,value:k})}function l(d,m){for(var k=m.length,y=0;y<k;y++){var E=m[y],C=d[f];if(typeof C=="function")C(E);else if(Array.isArray(C))for(var P=C.length,O=0;O<P;O++)C[O](E)}}function a(d,m){var k;return k=d._events&&d._events[m],Array.isArray(k)||(k?k=[k]:k=[]),k}function h(d,m,k){var y=a(d,m),E=y.filter(function(C){return k.indexOf(C)===-1});E.length>0&&l(d,E)}function p(d,m){if(!!d){var k=d;if(typeof d=="function")k=m(d);else if(Array.isArray(d)){k=[];for(var y=0;y<d.length;y++)k[y]=m(d[y])}return k}}u.exports=function(m,k,y){if(!m||!m.on||!m.addListener||!m.removeListener||!m.emit)throw new Error("can only wrap real EEs");if(!k)throw new Error("must have function to run on listener addition");if(!y)throw new Error("must have function to wrap listeners when emitting");function E(P){return function(U,A){var $=a(this,U).slice();try{var x=P.call(this,U,A);return h(this,U,$),x}finally{this.on.__wrapped||S(this,"on",E),this.addListener.__wrapped||S(this,"addListener",E)}}}function C(P){return function(U){if(!this._events||!this._events[U])return P.apply(this,arguments);var A=this._events[U];function $(x){return function(){this._events[U]=A;try{return x.apply(this,arguments)}finally{A=this._events[U],this._events[U]=p(A,y)}}}S(this,"removeListener",$);try{return this._events[U]=p(A,y),P.apply(this,arguments)}finally{N(this,"removeListener"),this._events[U]=A}}}m[f]?typeof m[f]=="function"?o(m,f,[m[f],k]):Array.isArray(m[f])&&m[f].push(k):o(m,f,k),m.__wrapped||(S(m,"addListener",E),S(m,"on",E),S(m,"emit",C),o(m,"__unwrap",function(){N(m,"addListener"),N(m,"on"),N(m,"emit"),delete m[f],delete m.__wrapped}),o(m,"__wrapped",!0))}},4063:u=>{"use strict";u.exports=function R(g,_){if(g===_)return!0;if(g&&_&&typeof g=="object"&&typeof _=="object"){if(g.constructor!==_.constructor)return!1;var S,N,f;if(Array.isArray(g)){if(S=g.length,S!=_.length)return!1;for(N=S;N--!=0;)if(!R(g[N],_[N]))return!1;return!0}if(g.constructor===RegExp)return g.source===_.source&&g.flags===_.flags;if(g.valueOf!==Object.prototype.valueOf)return g.valueOf()===_.valueOf();if(g.toString!==Object.prototype.toString)return g.toString()===_.toString();if(f=Object.keys(g),S=f.length,S!==Object.keys(_).length)return!1;for(N=S;N--!=0;)if(!Object.prototype.hasOwnProperty.call(_,f[N]))return!1;for(N=S;N--!=0;){var o=f[N];if(!R(g[o],_[o]))return!1}return!0}return g!==g&&_!==_}},5035:u=>{"use strict";u.exports=function(R,g){g||(g={}),typeof g=="function"&&(g={cmp:g});var _=typeof g.cycles=="boolean"?g.cycles:!1,S=g.cmp&&function(f){return function(o){return function(l,a){var h={key:l,value:o[l]},p={key:a,value:o[a]};return f(h,p)}}}(g.cmp),N=[];return function f(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var l,a;if(Array.isArray(o)){for(a="[",l=0;l<o.length;l++)l&&(a+=","),a+=f(o[l])||"null";return a+"]"}if(o===null)return"null";if(N.indexOf(o)!==-1){if(_)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var h=N.push(o)-1,p=Object.keys(o).sort(S&&S(o));for(a="",l=0;l<p.length;l++){var d=p[l],m=f(o[d]);!m||(a&&(a+=","),a+=JSON.stringify(d)+":"+m)}return N.splice(h,1),"{"+a+"}"}}(R)}},6030:(u,R,g)=>{const{Readable:_}=g(2413),S=new WeakMap;async function*N(o){for(const l of o)"stream"in l?yield*l.stream():yield l}class f{constructor(l=[],a={type:""}){let h=0;const p=l.map(m=>{let k;return m instanceof Buffer?k=m:ArrayBuffer.isView(m)?k=Buffer.from(m.buffer,m.byteOffset,m.byteLength):m instanceof ArrayBuffer?k=Buffer.from(m):m instanceof f?k=m:k=Buffer.from(typeof m=="string"?m:String(m)),h+=k.length||k.size||0,k}),d=a.type===void 0?"":String(a.type).toLowerCase();S.set(this,{type:/[^\u0020-\u007E]/.test(d)?"":d,size:h,parts:p})}get size(){return S.get(this).size}get type(){return S.get(this).type}async text(){return Buffer.from(await this.arrayBuffer()).toString()}async arrayBuffer(){const l=new Uint8Array(this.size);let a=0;for await(const h of this.stream())l.set(h,a),a+=h.length;return l.buffer}stream(){return _.from(N(S.get(this).parts))}slice(l=0,a=this.size,h=""){const{size:p}=this;let d=l<0?Math.max(p+l,0):Math.min(l,p),m=a<0?Math.max(p+a,0):Math.min(a,p);const k=Math.max(m-d,0),y=S.get(this).parts.values(),E=[];let C=0;for(const O of y){const U=ArrayBuffer.isView(O)?O.byteLength:O.size;if(d&&U<=d)d-=U,m-=U;else{const A=O.slice(d,Math.min(U,m));if(E.push(A),C+=ArrayBuffer.isView(A)?A.byteLength:A.size,d=0,C>=k)break}}const P=new f([],{type:h});return Object.assign(S.get(P),{size:k,parts:E}),P}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](l){return typeof l=="object"&&typeof l.stream=="function"&&l.stream.length===0&&typeof l.constructor=="function"&&/^(Blob|File)$/.test(l[Symbol.toStringTag])}}Object.defineProperties(f.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),u.exports=f},2261:(u,R,g)=>{var _;u.exports=function(){if(!_)try{_=g(8104)("follow-redirects")}catch(S){_=function(){}}_.apply(null,arguments)}},938:(u,R,g)=>{var _=g(8835),S=_.URL,N=g(8605),f=g(7211),o=g(2413).Writable,l=g(2357),a=g(2261),h=Object.create(null);["abort","aborted","connect","error","socket","timeout"].forEach(function(A){h[A]=function($,x,G){this._redirectable.emit(A,$,x,G)}});var p=U("ERR_FR_REDIRECTION_FAILURE",""),d=U("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),m=U("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),k=U("ERR_STREAM_WRITE_AFTER_END","write after end");function y(A,$){o.call(this),this._sanitizeOptions(A),this._options=A,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],$&&this.on("response",$);var x=this;this._onNativeResponse=function(G){x._processResponse(G)},this._performRequest()}y.prototype=Object.create(o.prototype),y.prototype.abort=function(){this._currentRequest.removeAllListeners(),this._currentRequest.on("error",C),this._currentRequest.abort(),this.emit("abort"),this.removeAllListeners()},y.prototype.write=function(A,$,x){if(this._ending)throw new k;if(!(typeof A=="string"||typeof A=="object"&&"length"in A))throw new TypeError("data should be a string, Buffer or Uint8Array");if(typeof $=="function"&&(x=$,$=null),A.length===0){x&&x();return}this._requestBodyLength+A.length<=this._options.maxBodyLength?(this._requestBodyLength+=A.length,this._requestBodyBuffers.push({data:A,encoding:$}),this._currentRequest.write(A,$,x)):(this.emit("error",new m),this.abort())},y.prototype.end=function(A,$,x){if(typeof A=="function"?(x=A,A=$=null):typeof $=="function"&&(x=$,$=null),!A)this._ended=this._ending=!0,this._currentRequest.end(null,null,x);else{var G=this,q=this._currentRequest;this.write(A,$,function(){G._ended=!0,q.end(null,null,x)}),this._ending=!0}},y.prototype.setHeader=function(A,$){this._options.headers[A]=$,this._currentRequest.setHeader(A,$)},y.prototype.removeHeader=function(A){delete this._options.headers[A],this._currentRequest.removeHeader(A)},y.prototype.setTimeout=function(A,$){var x=this;$&&this.on("timeout",$);function G(){x._timeout&&clearTimeout(x._timeout),x._timeout=setTimeout(function(){x.emit("timeout"),q()},A)}function q(){clearTimeout(this._timeout),$&&x.removeListener("timeout",$),this.socket||x._currentRequest.removeListener("socket",G)}return this.socket?G():this._currentRequest.once("socket",G),this.once("response",q),this.once("error",q),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach(function(A){y.prototype[A]=function($,x){return this._currentRequest[A]($,x)}}),["aborted","connection","socket"].forEach(function(A){Object.defineProperty(y.prototype,A,{get:function(){return this._currentRequest[A]}})}),y.prototype._sanitizeOptions=function(A){if(A.headers||(A.headers={}),A.host&&(A.hostname||(A.hostname=A.host),delete A.host),!A.pathname&&A.path){var $=A.path.indexOf("?");$<0?A.pathname=A.path:(A.pathname=A.path.substring(0,$),A.search=A.path.substring($))}},y.prototype._performRequest=function(){var A=this._options.protocol,$=this._options.nativeProtocols[A];if(!$){this.emit("error",new TypeError("Unsupported protocol "+A));return}if(this._options.agents){var x=A.substr(0,A.length-1);this._options.agent=this._options.agents[x]}var G=this._currentRequest=$.request(this._options,this._onNativeResponse);this._currentUrl=_.format(this._options),G._redirectable=this;for(var q in h)q&&G.on(q,h[q]);if(this._isRedirect){var L=0,M=this,B=this._requestBodyBuffers;(function K(Y){if(G===M._currentRequest)if(Y)M.emit("error",Y);else if(L<B.length){var Q=B[L++];G.finished||G.write(Q.data,Q.encoding,K)}else M._ended&&G.end()})()}},y.prototype._processResponse=function(A){var $=A.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:A.headers,statusCode:$});var x=A.headers.location;if(x&&this._options.followRedirects!==!1&&$>=300&&$<400){if(this._currentRequest.removeAllListeners(),this._currentRequest.on("error",C),this._currentRequest.abort(),A.destroy(),++this._redirectCount>this._options.maxRedirects){this.emit("error",new d);return}(($===301||$===302)&&this._options.method==="POST"||$===303&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],O(/^content-/i,this._options.headers));var G=O(/^host$/i,this._options.headers)||_.parse(this._currentUrl).hostname,q=_.resolve(this._currentUrl,x);a("redirecting to",q),this._isRedirect=!0;var L=_.parse(q);if(Object.assign(this._options,L),L.hostname!==G&&O(/^authorization$/i,this._options.headers),typeof this._options.beforeRedirect=="function"){var M={headers:A.headers};try{this._options.beforeRedirect.call(null,this._options,M)}catch(K){this.emit("error",K);return}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(K){var B=new p("Redirected request failed: "+K.message);B.cause=K,this.emit("error",B)}}else A.responseUrl=this._currentUrl,A.redirects=this._redirects,this.emit("response",A),this._requestBodyBuffers=[]};function E(A){var $={maxRedirects:21,maxBodyLength:10*1024*1024},x={};return Object.keys(A).forEach(function(G){var q=G+":",L=x[q]=A[G],M=$[G]=Object.create(L);function B(Y,Q,re){if(typeof Y=="string"){var de=Y;try{Y=P(new S(de))}catch(pe){Y=_.parse(de)}}else S&&Y instanceof S?Y=P(Y):(re=Q,Q=Y,Y={protocol:q});return typeof Q=="function"&&(re=Q,Q=null),Q=Object.assign({maxRedirects:$.maxRedirects,maxBodyLength:$.maxBodyLength},Y,Q),Q.nativeProtocols=x,l.equal(Q.protocol,q,"protocol mismatch"),a("options",Q),new y(Q,re)}function K(Y,Q,re){var de=M.request(Y,Q,re);return de.end(),de}Object.defineProperties(M,{request:{value:B,configurable:!0,enumerable:!0,writable:!0},get:{value:K,configurable:!0,enumerable:!0,writable:!0}})}),$}function C(){}function P(A){var $={protocol:A.protocol,hostname:A.hostname.startsWith("[")?A.hostname.slice(1,-1):A.hostname,hash:A.hash,search:A.search,pathname:A.pathname,path:A.pathname+A.search,href:A.href};return A.port!==""&&($.port=Number(A.port)),$}function O(A,$){var x;for(var G in $)A.test(G)&&(x=$[G],delete $[G]);return x}function U(A,$){function x(G){Error.captureStackTrace(this,this.constructor),this.message=G||$}return x.prototype=new Error,x.prototype.constructor=x,x.prototype.name="Error ["+A+"]",x.prototype.code=A,x}u.exports=E({http:N,https:f}),u.exports.wrap=E},9967:u=>{var R={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"Merged"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"MergedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commitUrl"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"HeadRefDeleted"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"HeadRefDeletedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Ref"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Ref"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"target"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Comment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"IssueComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanReact"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Commit"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestCommit"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"committer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authoredDate"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"AssignedEvent"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AssignedEvent"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actor"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"user"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Review"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReview"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"authorAssociation"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"submittedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"Reactable"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Reactable"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewThread"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewThread"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"TimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Merged"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Commit"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"HeadRefDeleted"},directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueTimelineEvents"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"last"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"150"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"timelineItems"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"Variable",name:{kind:"Name",value:"last"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"AssignedEvent"},directives:[]}]}}]}}]}}]}}]}},{kind:"FragmentDefinition",name:{kind:"Name",value:"ReviewComment"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewComment"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalPosition"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffHunk"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"position"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"replyTo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalCommit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"oid"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"reactionGroups"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerHasReacted"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"users"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"viewerCanUpdate"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanDelete"},arguments:[],directives:[]}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetPendingReviewId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"author"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[{kind:"Argument",name:{kind:"Name",value:"id"},value:{kind:"Variable",name:{kind:"Name",value:"pullRequestId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"PullRequest"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviews"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"author"},value:{kind:"Variable",name:{kind:"Name",value:"author"}}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"ListValue",values:[{kind:"EnumValue",value:"PENDING"}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},defaultValue:{kind:"IntValue",value:"100"},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reviewThreads"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isResolved"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanResolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerCanUnresolve"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"diffSide"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"line"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"originalLine"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isOutdated"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"headRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRef"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Ref"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"baseRefName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRefOid"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"baseRepository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"merged"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"suggestedReviewers"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isAuthor"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"isCommenter"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"reviewer"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestFiles"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"files"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"path"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"viewerViewedState"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssueWithComments"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"pullRequest"},name:{kind:"Name",value:"issue"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetUser"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"login"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"user"},arguments:[{kind:"Argument",name:{kind:"Name",value:"login"},value:{kind:"Variable",name:{kind:"Name",value:"login"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"Field",name:{kind:"Name",value:"bio"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"company"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"location"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contributionsCollection"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commitContributionsByRepository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"maxRepositories"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"contributions"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"occurredAt"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nameWithOwner"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestMergeability"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mergeable"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"PullRequestState"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestReviewCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequestReviewComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReviewComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ReadyForReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkPullRequestReadyForReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markPullRequestReadyForReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isDraft"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddPullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"SubmitReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"event"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PullRequestReviewEvent"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"body"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submitPullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"event"},value:{kind:"Variable",name:{kind:"Name",value:"event"}}},{kind:"ObjectField",name:{kind:"Name",value:"pullRequestReviewId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"ObjectField",name:{kind:"Name",value:"body"},value:{kind:"Variable",name:{kind:"Name",value:"body"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}},{kind:"FragmentSpread",name:{kind:"Name",value:"Review"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReview"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"DeletePullRequestReviewInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"deletePullRequestReview"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequestReview"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"comments"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewComment"},directives:[]}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"DeleteReaction"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"RemoveReactionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"removeReaction"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"reaction"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"content"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"subject"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Reactable"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdatePullRequest"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdatePullRequestInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updatePullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AddIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AddCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"addComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commentEdge"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"EditIssueComment"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UpdateIssueCommentInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateIssueComment"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueComment"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"Comment"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMentionableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"mentionableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetAssignableUsers"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"first"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"after"}},type:{kind:"NamedType",name:{kind:"Name",value:"String"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"assignableUsers"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"Variable",name:{kind:"Name",value:"first"}}},{kind:"Argument",name:{kind:"Name",value:"after"},value:{kind:"Variable",name:{kind:"Name",value:"after"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"rateLimit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"limit"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cost"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"remaining"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resetAt"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"IssuesWithoutMilestone"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}},{kind:"ObjectField",name:{kind:"Name",value:"milestone"},value:{kind:"NullValue"}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"MaxIssue"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"1"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"CREATED_AT"}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetMilestones"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignee"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"milestones"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"12"}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"DUE_DATE"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"issues"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"filterBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"assignee"},value:{kind:"Variable",name:{kind:"Name",value:"assignee"}}}]}},{kind:"Argument",name:{kind:"Name",value:"orderBy"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"direction"},value:{kind:"EnumValue",value:"DESC"}},{kind:"ObjectField",name:{kind:"Name",value:"field"},value:{kind:"EnumValue",value:"UPDATED_AT"}}]}},{kind:"Argument",name:{kind:"Name",value:"states"},value:{kind:"EnumValue",value:"OPEN"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"Issues"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"query"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"search"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}},{kind:"Argument",name:{kind:"Name",value:"type"},value:{kind:"EnumValue",value:"ISSUE"}},{kind:"Argument",name:{kind:"Name",value:"query"},value:{kind:"Variable",name:{kind:"Name",value:"query"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"issueCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"pageInfo"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hasNextPage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"endCursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"edges"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"node"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Issue"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"number"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"body"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"bodyHTML"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"assignees"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"10"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"author"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[{kind:"Argument",name:{kind:"Name",value:"size"},value:{kind:"IntValue",value:"50"}}],directives:[]},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"User"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Organization"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"email"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"updatedAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"labels"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"50"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"color"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"databaseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"milestone"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"dueOn"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetViewerPermission"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"viewerPermission"},arguments:[],directives:[]}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetRepositoryForkDetails"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isFork"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"parent"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"owner"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"login"},arguments:[],directives:[]}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetChecks"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"owner"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"name"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"number"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"repository"},arguments:[{kind:"Argument",name:{kind:"Name",value:"owner"},value:{kind:"Variable",name:{kind:"Name",value:"owner"}}},{kind:"Argument",name:{kind:"Name",value:"name"},value:{kind:"Variable",name:{kind:"Name",value:"name"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[{kind:"Argument",name:{kind:"Name",value:"number"},value:{kind:"Variable",name:{kind:"Name",value:"number"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commits"},arguments:[{kind:"Argument",name:{kind:"Name",value:"last"},value:{kind:"IntValue",value:"1"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"commit"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"statusCheckRollup"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"contexts"},arguments:[{kind:"Argument",name:{kind:"Name",value:"first"},value:{kind:"IntValue",value:"100"}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"StatusContext"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"state"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"targetUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"context"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"avatarUrl"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"CheckRun"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"conclusion"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"detailsUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"resourcePath"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"checkSuite"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"app"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"logoUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"url"},arguments:[],directives:[]}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"ResolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ResolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"resolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnresolveReviewThread"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnresolveReviewThreadInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unresolveReviewThread"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"thread"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ReviewThread"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"MarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"MarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"markFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UnmarkFileAsViewed"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"UnmarkFileAsViewedInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"unmarkFileAsViewed"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"pullRequest"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:14578}};R.loc.source={body:`# /*---------------------------------------------------------------------------------------------
#  *  Copyright (c) Microsoft Corporation. All rights reserved.
#  *  Licensed under the MIT License. See License.txt in the project root for license information.
#  *--------------------------------------------------------------------------------------------*/

fragment Merged on MergedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	mergeRef {
		name
	}
	commit {
		oid
		commitUrl
	}
	url
}

fragment HeadRefDeleted on HeadRefDeletedEvent {
	id
	actor {
		login
		avatarUrl
		url
	}
	createdAt
	headRefName
}

fragment Ref on Ref {
	name
	repository {
		owner {
			login
		}
		url
	}
	target {
		oid
	}
}

fragment Comment on IssueComment {
	id
	databaseId
	authorAssociation
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	url
	body
	bodyHTML
	updatedAt
	createdAt
	viewerCanUpdate
	viewerCanReact
	viewerCanDelete
}

fragment Commit on PullRequestCommit {
	id
	commit {
		author {
			user {
				login
				avatarUrl
				url
				email
			}
		}
		committer {
			avatarUrl
			name
		}
		oid
		message
		authoredDate
	}
	url
}

fragment AssignedEvent on AssignedEvent {
	actor {
		login
		avatarUrl
		url
	}
	user {
		login
		avatarUrl
		url
	}
}

fragment Review on PullRequestReview {
	id
	databaseId
	authorAssociation
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	state
	body
	bodyHTML
	submittedAt
	updatedAt
	createdAt
}

fragment Reactable on Reactable {
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
}

fragment ReviewThread on PullRequestReviewThread {
	id
	isResolved
	viewerCanResolve
	viewerCanUnresolve
	path
	diffSide
	line
	originalLine
	isOutdated
	comments(first: 100) {
		nodes {
			...ReviewComment
		}
	}
}

query TimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Merged
					...Comment
					...Review
					...Commit
					...AssignedEvent
					...HeadRefDeleted
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssueTimelineEvents($owner: String!, $name: String!, $number: Int!, $last: Int = 150) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			timelineItems(last: $last) {
				nodes {
					__typename
					...Comment
					...AssignedEvent
				}
			}
		}
	}
}

fragment ReviewComment on PullRequestReviewComment {
	id
	databaseId
	url
	author {
		login
		avatarUrl
		url
		... on User {
			email
		}
		... on Organization {
			email
		}
	}
	path
	originalPosition
	body
	bodyHTML
	diffHunk
	position
	state
	pullRequestReview {
		databaseId
	}
	commit {
		oid
	}
	replyTo {
		databaseId
	}
	createdAt
	originalCommit {
		oid
	}
	reactionGroups {
		content
		viewerHasReacted
		users {
			totalCount
		}
	}
	viewerCanUpdate
	viewerCanDelete
}

query GetPendingReviewId($pullRequestId: ID!, $author: String!) {
	node(id: $pullRequestId) {
		... on PullRequest {
			reviews(first: 1, author: $author, states: [PENDING]) {
				nodes {
					id
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestComments($owner: String!, $name: String!, $number: Int!, $first: Int = 100) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			reviewThreads(first: $first) {
				nodes {
					id
					isResolved
					viewerCanResolve
					viewerCanUnresolve
					path
					diffSide
					line
					originalLine
					isOutdated
					comments(first: 100) {
						nodes {
							...ReviewComment
						}
					}
				}
			}
		}
	}
}

query PullRequest($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			headRef {
				...Ref
			}
			headRefName
			headRefOid
			headRepository {
				owner {
					login
				}
				url
			}
			baseRef {
				...Ref
			}
			baseRefName
			baseRefOid
			baseRepository {
				owner {
					login
				}
				url
			}
			labels(first: 50) {
				nodes {
					name
				}
			}
			merged
			mergeable
			id
			databaseId
			isDraft
			milestone {
				title
				dueOn
				createdAt
				id
			}
			assignees(first: 10) {
				nodes {
					login
					name
					avatarUrl
					url
					email
				}
			}
			suggestedReviewers {
				isAuthor
				isCommenter
				reviewer {
					login
					avatarUrl
					name
					url
				}
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestFiles($owner: String!, $name: String!, $number: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			files(first: 100, after: $after) {
				nodes {
					path
					viewerViewedState
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
	}
}

query Issue($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
		}
	}
}

query IssueWithComments($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest: issue(number: $number) {
			number
			url
			state
			body
			bodyHTML
			title
			author {
				login
				url
				avatarUrl
				... on User {
					email
				}
				... on Organization {
					email
				}
			}
			createdAt
			updatedAt
			labels(first: 50) {
				nodes {
					name
					color
				}
			}
			id
			databaseId
			comments(first: 50) {
				nodes {
					author {
						login
						url
						avatarUrl
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					body
					databaseId
				}
			}
		}
	}
}

query GetUser($login: String!) {
	user(login: $login) {
		login
		avatarUrl(size: 50)
		bio
		name
		company
		location
		contributionsCollection {
			commitContributionsByRepository(maxRepositories: 50) {
				contributions(first: 1) {
					nodes {
						occurredAt
					}
				}
				repository {
					nameWithOwner
				}
			}
		}
		url
	}
}

query PullRequestMergeability($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			mergeable
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query PullRequestState($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			title
			number
			state
		}
	}
}

mutation AddComment($input: AddPullRequestReviewCommentInput!) {
	addPullRequestReviewComment(input: $input) {
		comment {
			...ReviewComment
		}
	}
}

mutation AddReviewThread($input: AddPullRequestReviewThreadInput!) {
	addPullRequestReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation EditComment($input: UpdatePullRequestReviewCommentInput!) {
	updatePullRequestReviewComment(input: $input) {
		pullRequestReviewComment {
			...ReviewComment
		}
	}
}

mutation ReadyForReview($input: MarkPullRequestReadyForReviewInput!) {
	markPullRequestReadyForReview(input: $input) {
		pullRequest {
			isDraft
		}
	}
}

mutation StartReview($input: AddPullRequestReviewInput!) {
	addPullRequestReview(input: $input) {
		pullRequestReview {
			id
		}
	}
}

mutation SubmitReview($id: ID!, $event: PullRequestReviewEvent!, $body: String) {
	submitPullRequestReview(input: { event: $event, pullRequestReviewId: $id, body: $body }) {
		pullRequestReview {
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
			...Review
		}
	}
}

mutation DeleteReview($input: DeletePullRequestReviewInput!) {
	deletePullRequestReview(input: $input) {
		pullRequestReview {
			databaseId
			comments(first: 100) {
				nodes {
					...ReviewComment
				}
			}
		}
	}
}

mutation AddReaction($input: AddReactionInput!) {
	addReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation DeleteReaction($input: RemoveReactionInput!) {
	removeReaction(input: $input) {
		reaction {
			content
		}
		subject {
			...Reactable
		}
	}
}

mutation UpdatePullRequest($input: UpdatePullRequestInput!) {
	updatePullRequest(input: $input) {
		pullRequest {
			body
			bodyHTML
			title
		}
	}
}

mutation AddIssueComment($input: AddCommentInput!) {
	addComment(input: $input) {
		commentEdge {
			node {
				...Comment
			}
		}
	}
}

mutation EditIssueComment($input: UpdateIssueCommentInput!) {
	updateIssueComment(input: $input) {
		issueComment {
			...Comment
		}
	}
}

query GetMentionableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		mentionableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query GetAssignableUsers($owner: String!, $name: String!, $first: Int!, $after: String) {
	repository(owner: $owner, name: $name) {
		assignableUsers(first: $first, after: $after) {
			nodes {
				login
				avatarUrl
				name
				url
				email
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
	rateLimit {
		limit
		cost
		remaining
		resetAt
	}
}

query IssuesWithoutMilestone($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		issues(
			first: 100
			states: OPEN
			filterBy: { assignee: $assignee, milestone: null }
			orderBy: { direction: DESC, field: UPDATED_AT }
		) {
			edges {
				node {
					... on Issue {
						number
						url
						state
						body
						bodyHTML
						title
						assignees(first: 10) {
							nodes {
								login
								url
								email
							}
						}
						author {
							login
							url
							avatarUrl(size: 50)
							... on User {
								email
							}
							... on Organization {
								email
							}
						}
						createdAt
						updatedAt
						labels(first: 50) {
							nodes {
								name
								color
							}
						}
						id
						databaseId
						milestone {
							title
							dueOn
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query MaxIssue($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		issues(first: 1, orderBy: { direction: DESC, field: CREATED_AT }) {
			edges {
				node {
					... on Issue {
						number
					}
				}
			}
		}
	}
}

query GetMilestones($owner: String!, $name: String!, $assignee: String!) {
	repository(owner: $owner, name: $name) {
		milestones(first: 12, orderBy: { direction: DESC, field: DUE_DATE }, states: OPEN) {
			nodes {
				dueOn
				title
				createdAt
				id
				issues(
					first: 100
					filterBy: { assignee: $assignee }
					orderBy: { direction: DESC, field: UPDATED_AT }
					states: OPEN
				) {
					edges {
						node {
							... on Issue {
								number
								url
								state
								body
								bodyHTML
								title
								assignees(first: 10) {
									nodes {
										avatarUrl
										email
										login
										url
									}
								}
								author {
									login
									url
									avatarUrl(size: 50)
									... on User {
										email
									}
									... on Organization {
										email
									}
								}
								createdAt
								updatedAt
								labels(first: 50) {
									nodes {
										name
										color
									}
								}
								id
								databaseId
								milestone {
									title
									dueOn
								}
							}
						}
					}
				}
			}
			pageInfo {
				hasNextPage
				endCursor
			}
		}
	}
}

query Issues($query: String!) {
	search(first: 100, type: ISSUE, query: $query) {
		issueCount
		pageInfo {
			hasNextPage
			endCursor
		}
		edges {
			node {
				... on Issue {
					number
					url
					state
					body
					bodyHTML
					title
					assignees(first: 10) {
						nodes {
							avatarUrl
							email
							login
							url
						}
					}
					author {
						login
						url
						avatarUrl(size: 50)
						... on User {
							email
						}
						... on Organization {
							email
						}
					}
					createdAt
					updatedAt
					labels(first: 50) {
						nodes {
							name
							color
						}
					}
					id
					databaseId
					milestone {
						title
						dueOn
						id
						createdAt
					}
					repository {
						name
						owner {
							login
						}
						url
					}
				}
			}
		}
	}
}

query GetViewerPermission($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		viewerPermission
	}
}

query GetRepositoryForkDetails($owner: String!, $name: String!) {
	repository(owner: $owner, name: $name) {
		isFork
		parent {
			name
			owner {
				login
			}
		}
	}
}

query GetChecks($owner: String!, $name: String!, $number: Int!) {
	repository(owner: $owner, name: $name) {
		pullRequest(number: $number) {
			commits(last: 1) {
				nodes {
					commit {
						statusCheckRollup {
							state
							contexts(first: 100) {
								nodes {
									... on StatusContext {
										id
										state
										targetUrl
										description
										context
										avatarUrl
									}
									... on CheckRun {
										id
										conclusion
										title
										detailsUrl
										name
										resourcePath
										checkSuite {
											app {
												logoUrl
												url
											}
										}
									}
								}
							}
						}
					}
				}
			}
		}
	}
}

mutation ResolveReviewThread($input: ResolveReviewThreadInput!) {
	resolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation UnresolveReviewThread($input: UnresolveReviewThreadInput!) {
	unresolveReviewThread(input: $input) {
		thread {
			...ReviewThread
		}
	}
}

mutation MarkFileAsViewed($input: MarkFileAsViewedInput!) {
	markFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}

mutation UnmarkFileAsViewed($input: UnmarkFileAsViewedInput!) {
	unmarkFileAsViewed(input: $input) {
		pullRequest {
			id
		}
	}
}`,name:"GraphQL request",locationOffset:{line:1,column:1}};var g={};function _(l){return l.filter(function(a){if(a.kind!=="FragmentDefinition")return!0;var h=a.name.value;return g[h]?!1:(g[h]=!0,!0)})}function S(l,a){if(l.kind==="FragmentSpread")a.add(l.name.value);else if(l.kind==="VariableDefinition"){var h=l.type;h.kind==="NamedType"&&a.add(h.name.value)}l.selectionSet&&l.selectionSet.selections.forEach(function(p){S(p,a)}),l.variableDefinitions&&l.variableDefinitions.forEach(function(p){S(p,a)}),l.definitions&&l.definitions.forEach(function(p){S(p,a)})}var N={};(function(){R.definitions.forEach(function(a){if(a.name){var h=new Set;S(a,h),N[a.name.value]=h}})})();function f(l,a){for(var h=0;h<l.definitions.length;h++){var p=l.definitions[h];if(p.name&&p.name.value==a)return p}}function o(l,a){var h={kind:l.kind,definitions:[f(l,a)]};l.hasOwnProperty("loc")&&(h.loc=l.loc);var p=N[a]||new Set,d=new Set,m=new Set;for(p.forEach(function(y){m.add(y)});m.size>0;){var k=m;m=new Set,k.forEach(function(y){if(!d.has(y)){d.add(y);var E=N[y]||new Set;E.forEach(function(C){m.add(C)})}})}return d.forEach(function(y){var E=f(l,y);E&&h.definitions.push(E)}),h}u.exports=R,u.exports.TimelineEvents=o(R,"TimelineEvents"),u.exports.IssueTimelineEvents=o(R,"IssueTimelineEvents"),u.exports.GetPendingReviewId=o(R,"GetPendingReviewId"),u.exports.PullRequestComments=o(R,"PullRequestComments"),u.exports.PullRequest=o(R,"PullRequest"),u.exports.PullRequestFiles=o(R,"PullRequestFiles"),u.exports.Issue=o(R,"Issue"),u.exports.IssueWithComments=o(R,"IssueWithComments"),u.exports.GetUser=o(R,"GetUser"),u.exports.PullRequestMergeability=o(R,"PullRequestMergeability"),u.exports.PullRequestState=o(R,"PullRequestState"),u.exports.AddComment=o(R,"AddComment"),u.exports.AddReviewThread=o(R,"AddReviewThread"),u.exports.EditComment=o(R,"EditComment"),u.exports.ReadyForReview=o(R,"ReadyForReview"),u.exports.StartReview=o(R,"StartReview"),u.exports.SubmitReview=o(R,"SubmitReview"),u.exports.DeleteReview=o(R,"DeleteReview"),u.exports.AddReaction=o(R,"AddReaction"),u.exports.DeleteReaction=o(R,"DeleteReaction"),u.exports.UpdatePullRequest=o(R,"UpdatePullRequest"),u.exports.AddIssueComment=o(R,"AddIssueComment"),u.exports.EditIssueComment=o(R,"EditIssueComment"),u.exports.GetMentionableUsers=o(R,"GetMentionableUsers"),u.exports.GetAssignableUsers=o(R,"GetAssignableUsers"),u.exports.IssuesWithoutMilestone=o(R,"IssuesWithoutMilestone"),u.exports.MaxIssue=o(R,"MaxIssue"),u.exports.GetMilestones=o(R,"GetMilestones"),u.exports.Issues=o(R,"Issues"),u.exports.GetViewerPermission=o(R,"GetViewerPermission"),u.exports.GetRepositoryForkDetails=o(R,"GetRepositoryForkDetails"),u.exports.GetChecks=o(R,"GetChecks"),u.exports.ResolveReviewThread=o(R,"ResolveReviewThread"),u.exports.UnresolveReviewThread=o(R,"UnresolveReviewThread"),u.exports.MarkFileAsViewed=o(R,"MarkFileAsViewed"),u.exports.UnmarkFileAsViewed=o(R,"UnmarkFileAsViewed")},972:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=f;var _=N(g(7706)),S=N(g(8554));function N(o){return o&&o.__esModule?o:{default:o}}function f(o){var l=o.prototype.toJSON;typeof l=="function"||(0,_.default)(0),o.prototype.inspect=l,S.default&&(o.prototype[S.default]=l)}},1868:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=l;var _=S(g(8554));function S(y){return y&&y.__esModule?y:{default:y}}function N(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?N=function(C){return typeof C}:N=function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},N(y)}var f=10,o=2;function l(y){return a(y,[])}function a(y,E){switch(N(y)){case"string":return JSON.stringify(y);case"function":return y.name?"[function ".concat(y.name,"]"):"[function]";case"object":return y===null?"null":h(y,E);default:return String(y)}}function h(y,E){if(E.indexOf(y)!==-1)return"[Circular]";var C=[].concat(E,[y]),P=m(y);if(P!==void 0){var O=P.call(y);if(O!==y)return typeof O=="string"?O:a(O,C)}else if(Array.isArray(y))return d(y,C);return p(y,C)}function p(y,E){var C=Object.keys(y);if(C.length===0)return"{}";if(E.length>o)return"["+k(y)+"]";var P=C.map(function(O){var U=a(y[O],E);return O+": "+U});return"{ "+P.join(", ")+" }"}function d(y,E){if(y.length===0)return"[]";if(E.length>o)return"[Array]";for(var C=Math.min(f,y.length),P=y.length-C,O=[],U=0;U<C;++U)O.push(a(y[U],E));return P===1?O.push("... 1 more item"):P>1&&O.push("... ".concat(P," more items")),"["+O.join(", ")+"]"}function m(y){var E=y[String(_.default)];if(typeof E=="function")return E;if(typeof y.inspect=="function")return y.inspect}function k(y){var E=Object.prototype.toString.call(y).replace(/^\[object /,"").replace(/]$/,"");if(E==="Object"&&typeof y.constructor=="function"){var C=y.constructor.name;if(typeof C=="string"&&C!=="")return C}return E}},7706:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=g;function g(_,S){var N=Boolean(_);if(!N)throw new Error(S!=null?S:"Unexpected invariant triggered.")}},8554:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var g=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,_=g;R.default=_},1807:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isNode=o,R.Token=R.Location=void 0;var _=S(g(972));function S(l){return l&&l.__esModule?l:{default:l}}var N=function(){function l(h,p,d){this.start=h.start,this.end=p.end,this.startToken=h,this.endToken=p,this.source=d}var a=l.prototype;return a.toJSON=function(){return{start:this.start,end:this.end}},l}();R.Location=N,(0,_.default)(N);var f=function(){function l(h,p,d,m,k,y,E){this.kind=h,this.start=p,this.end=d,this.line=m,this.column=k,this.value=E,this.prev=y,this.next=null}var a=l.prototype;return a.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},l}();R.Token=f,(0,_.default)(f);function o(l){return l!=null&&typeof l.kind=="string"}},849:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.dedentBlockStringValue=g,R.getBlockStringIndentation=S,R.printBlockString=N;function g(f){var o=f.split(/\r\n|[\n\r]/g),l=S(f);if(l!==0)for(var a=1;a<o.length;a++)o[a]=o[a].slice(l);for(var h=0;h<o.length&&_(o[h]);)++h;for(var p=o.length;p>h&&_(o[p-1]);)--p;return o.slice(h,p).join(`
`)}function _(f){for(var o=0;o<f.length;++o)if(f[o]!==" "&&f[o]!=="	")return!1;return!0}function S(f){for(var o,l=!0,a=!0,h=0,p=null,d=0;d<f.length;++d)switch(f.charCodeAt(d)){case 13:f.charCodeAt(d+1)===10&&++d;case 10:l=!1,a=!0,h=0;break;case 9:case 32:++h;break;default:a&&!l&&(p===null||h<p)&&(p=h),a=!1}return(o=p)!==null&&o!==void 0?o:0}function N(f){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=f.indexOf(`
`)===-1,h=f[0]===" "||f[0]==="	",p=f[f.length-1]==='"',d=f[f.length-1]==="\\",m=!a||p||d||l,k="";return m&&!(a&&h)&&(k+=`
`+o),k+=o?f.replace(/\n/g,`
`+o):f,m&&(k+=`
`),'"""'+k.replace(/"""/g,'\\"""')+'"""'}},3033:(u,R,g)=>{"use strict";var _;_={value:!0},R.S=f;var S=g(285),N=g(849);function f(E){return(0,S.visit)(E,{leave:l})}var o=80,l={Name:function(C){return C.value},Variable:function(C){return"$"+C.name},Document:function(C){return h(C.definitions,`

`)+`
`},OperationDefinition:function(C){var P=C.operation,O=C.name,U=d("(",h(C.variableDefinitions,", "),")"),A=h(C.directives," "),$=C.selectionSet;return!O&&!A&&!U&&P==="query"?$:h([P,h([O,U]),A,$]," ")},VariableDefinition:function(C){var P=C.variable,O=C.type,U=C.defaultValue,A=C.directives;return P+": "+O+d(" = ",U)+d(" ",h(A," "))},SelectionSet:function(C){var P=C.selections;return p(P)},Field:function(C){var P=C.alias,O=C.name,U=C.arguments,A=C.directives,$=C.selectionSet,x=d("",P,": ")+O,G=x+d("(",h(U,", "),")");return G.length>o&&(G=x+d(`(
`,m(h(U,`
`)),`
)`)),h([G,h(A," "),$]," ")},Argument:function(C){var P=C.name,O=C.value;return P+": "+O},FragmentSpread:function(C){var P=C.name,O=C.directives;return"..."+P+d(" ",h(O," "))},InlineFragment:function(C){var P=C.typeCondition,O=C.directives,U=C.selectionSet;return h(["...",d("on ",P),h(O," "),U]," ")},FragmentDefinition:function(C){var P=C.name,O=C.typeCondition,U=C.variableDefinitions,A=C.directives,$=C.selectionSet;return"fragment ".concat(P).concat(d("(",h(U,", "),")")," ")+"on ".concat(O," ").concat(d("",h(A," ")," "))+$},IntValue:function(C){var P=C.value;return P},FloatValue:function(C){var P=C.value;return P},StringValue:function(C,P){var O=C.value,U=C.block;return U?(0,N.printBlockString)(O,P==="description"?"":"  "):JSON.stringify(O)},BooleanValue:function(C){var P=C.value;return P?"true":"false"},NullValue:function(){return"null"},EnumValue:function(C){var P=C.value;return P},ListValue:function(C){var P=C.values;return"["+h(P,", ")+"]"},ObjectValue:function(C){var P=C.fields;return"{"+h(P,", ")+"}"},ObjectField:function(C){var P=C.name,O=C.value;return P+": "+O},Directive:function(C){var P=C.name,O=C.arguments;return"@"+P+d("(",h(O,", "),")")},NamedType:function(C){var P=C.name;return P},ListType:function(C){var P=C.type;return"["+P+"]"},NonNullType:function(C){var P=C.type;return P+"!"},SchemaDefinition:a(function(E){var C=E.directives,P=E.operationTypes;return h(["schema",h(C," "),p(P)]," ")}),OperationTypeDefinition:function(C){var P=C.operation,O=C.type;return P+": "+O},ScalarTypeDefinition:a(function(E){var C=E.name,P=E.directives;return h(["scalar",C,h(P," ")]," ")}),ObjectTypeDefinition:a(function(E){var C=E.name,P=E.interfaces,O=E.directives,U=E.fields;return h(["type",C,d("implements ",h(P," & ")),h(O," "),p(U)]," ")}),FieldDefinition:a(function(E){var C=E.name,P=E.arguments,O=E.type,U=E.directives;return C+(y(P)?d(`(
`,m(h(P,`
`)),`
)`):d("(",h(P,", "),")"))+": "+O+d(" ",h(U," "))}),InputValueDefinition:a(function(E){var C=E.name,P=E.type,O=E.defaultValue,U=E.directives;return h([C+": "+P,d("= ",O),h(U," ")]," ")}),InterfaceTypeDefinition:a(function(E){var C=E.name,P=E.interfaces,O=E.directives,U=E.fields;return h(["interface",C,d("implements ",h(P," & ")),h(O," "),p(U)]," ")}),UnionTypeDefinition:a(function(E){var C=E.name,P=E.directives,O=E.types;return h(["union",C,h(P," "),O&&O.length!==0?"= "+h(O," | "):""]," ")}),EnumTypeDefinition:a(function(E){var C=E.name,P=E.directives,O=E.values;return h(["enum",C,h(P," "),p(O)]," ")}),EnumValueDefinition:a(function(E){var C=E.name,P=E.directives;return h([C,h(P," ")]," ")}),InputObjectTypeDefinition:a(function(E){var C=E.name,P=E.directives,O=E.fields;return h(["input",C,h(P," "),p(O)]," ")}),DirectiveDefinition:a(function(E){var C=E.name,P=E.arguments,O=E.repeatable,U=E.locations;return"directive @"+C+(y(P)?d(`(
`,m(h(P,`
`)),`
)`):d("(",h(P,", "),")"))+(O?" repeatable":"")+" on "+h(U," | ")}),SchemaExtension:function(C){var P=C.directives,O=C.operationTypes;return h(["extend schema",h(P," "),p(O)]," ")},ScalarTypeExtension:function(C){var P=C.name,O=C.directives;return h(["extend scalar",P,h(O," ")]," ")},ObjectTypeExtension:function(C){var P=C.name,O=C.interfaces,U=C.directives,A=C.fields;return h(["extend type",P,d("implements ",h(O," & ")),h(U," "),p(A)]," ")},InterfaceTypeExtension:function(C){var P=C.name,O=C.interfaces,U=C.directives,A=C.fields;return h(["extend interface",P,d("implements ",h(O," & ")),h(U," "),p(A)]," ")},UnionTypeExtension:function(C){var P=C.name,O=C.directives,U=C.types;return h(["extend union",P,h(O," "),U&&U.length!==0?"= "+h(U," | "):""]," ")},EnumTypeExtension:function(C){var P=C.name,O=C.directives,U=C.values;return h(["extend enum",P,h(O," "),p(U)]," ")},InputObjectTypeExtension:function(C){var P=C.name,O=C.directives,U=C.fields;return h(["extend input",P,h(O," "),p(U)]," ")}};function a(E){return function(C){return h([C.description,E(C)],`
`)}}function h(E){var C,P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(C=E==null?void 0:E.filter(function(O){return O}).join(P))!==null&&C!==void 0?C:""}function p(E){return d(`{
`,m(h(E,`
`)),`
}`)}function d(E,C){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return C!=null&&C!==""?E+C+P:""}function m(E){return d("  ",E.replace(/\n/g,`
  `))}function k(E){return E.indexOf(`
`)!==-1}function y(E){return E!=null&&E.some(k)}},285:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.visit=l,R.visitInParallel=a,R.getVisitFn=h,R.BREAK=R.QueryDocumentKeys=void 0;var _=N(g(1868)),S=g(1807);function N(p){return p&&p.__esModule?p:{default:p}}var f={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};R.QueryDocumentKeys=f;var o=Object.freeze({});R.BREAK=o;function l(p,d){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:f,k=void 0,y=Array.isArray(p),E=[p],C=-1,P=[],O=void 0,U=void 0,A=void 0,$=[],x=[],G=p;do{C++;var q=C===E.length,L=q&&P.length!==0;if(q){if(U=x.length===0?void 0:$[$.length-1],O=A,A=x.pop(),L){if(y)O=O.slice();else{for(var M={},B=0,K=Object.keys(O);B<K.length;B++){var Y=K[B];M[Y]=O[Y]}O=M}for(var Q=0,re=0;re<P.length;re++){var de=P[re][0],pe=P[re][1];y&&(de-=Q),y&&pe===null?(O.splice(de,1),Q++):O[de]=pe}}C=k.index,E=k.keys,P=k.edits,y=k.inArray,k=k.prev}else{if(U=A?y?C:E[C]:void 0,O=A?A[U]:G,O==null)continue;A&&$.push(U)}var _e=void 0;if(!Array.isArray(O)){if(!(0,S.isNode)(O))throw new Error("Invalid AST Node: ".concat((0,_.default)(O),"."));var ne=h(d,O.kind,q);if(ne){if(_e=ne.call(d,O,U,A,$,x),_e===o)break;if(_e===!1){if(!q){$.pop();continue}}else if(_e!==void 0&&(P.push([U,_e]),!q))if((0,S.isNode)(_e))O=_e;else{$.pop();continue}}}if(_e===void 0&&L&&P.push([U,O]),q)$.pop();else{var oe;k={inArray:y,index:C,keys:E,edits:P,prev:k},y=Array.isArray(O),E=y?O:(oe=m[O.kind])!==null&&oe!==void 0?oe:[],C=-1,P=[],A&&x.push(A),A=O}}while(k!==void 0);return P.length!==0&&(G=P[P.length-1][1]),G}function a(p){var d=new Array(p.length);return{enter:function(k){for(var y=0;y<p.length;y++)if(d[y]==null){var E=h(p[y],k.kind,!1);if(E){var C=E.apply(p[y],arguments);if(C===!1)d[y]=k;else if(C===o)d[y]=o;else if(C!==void 0)return C}}},leave:function(k){for(var y=0;y<p.length;y++)if(d[y]==null){var E=h(p[y],k.kind,!0);if(E){var C=E.apply(p[y],arguments);if(C===o)d[y]=o;else if(C!==void 0&&C!==!1)return C}}else d[y]===k&&(d[y]=null)}}}function h(p,d,m){var k=p[d];if(k){if(!m&&typeof k=="function")return k;var y=m?k.leave:k.enter;if(typeof y=="function")return y}else{var E=m?p.leave:p.enter;if(E){if(typeof E=="function")return E;var C=E[d];if(typeof C=="function")return C}}}},6560:u=>{"use strict";u.exports=(R,g=process.argv)=>{const _=R.startsWith("-")?"":R.length===1?"-":"--",S=g.indexOf(_+R),N=g.indexOf("--");return S!==-1&&(N===-1||S<N)}},9593:(u,R,g)=>{"use strict";const _=g(4411),S=Symbol("max"),N=Symbol("length"),f=Symbol("lengthCalculator"),o=Symbol("allowStale"),l=Symbol("maxAge"),a=Symbol("dispose"),h=Symbol("noDisposeOnSet"),p=Symbol("lruList"),d=Symbol("cache"),m=Symbol("updateAgeOnGet"),k=()=>1;class y{constructor(x){if(typeof x=="number"&&(x={max:x}),x||(x={}),x.max&&(typeof x.max!="number"||x.max<0))throw new TypeError("max must be a non-negative number");const G=this[S]=x.max||Infinity,q=x.length||k;if(this[f]=typeof q!="function"?k:q,this[o]=x.stale||!1,x.maxAge&&typeof x.maxAge!="number")throw new TypeError("maxAge must be a number");this[l]=x.maxAge||0,this[a]=x.dispose,this[h]=x.noDisposeOnSet||!1,this[m]=x.updateAgeOnGet||!1,this.reset()}set max(x){if(typeof x!="number"||x<0)throw new TypeError("max must be a non-negative number");this[S]=x||Infinity,P(this)}get max(){return this[S]}set allowStale(x){this[o]=!!x}get allowStale(){return this[o]}set maxAge(x){if(typeof x!="number")throw new TypeError("maxAge must be a non-negative number");this[l]=x,P(this)}get maxAge(){return this[l]}set lengthCalculator(x){typeof x!="function"&&(x=k),x!==this[f]&&(this[f]=x,this[N]=0,this[p].forEach(G=>{G.length=this[f](G.value,G.key),this[N]+=G.length})),P(this)}get lengthCalculator(){return this[f]}get length(){return this[N]}get itemCount(){return this[p].length}rforEach(x,G){G=G||this;for(let q=this[p].tail;q!==null;){const L=q.prev;A(this,x,q,G),q=L}}forEach(x,G){G=G||this;for(let q=this[p].head;q!==null;){const L=q.next;A(this,x,q,G),q=L}}keys(){return this[p].toArray().map(x=>x.key)}values(){return this[p].toArray().map(x=>x.value)}reset(){this[a]&&this[p]&&this[p].length&&this[p].forEach(x=>this[a](x.key,x.value)),this[d]=new Map,this[p]=new _,this[N]=0}dump(){return this[p].map(x=>C(this,x)?!1:{k:x.key,v:x.value,e:x.now+(x.maxAge||0)}).toArray().filter(x=>x)}dumpLru(){return this[p]}set(x,G,q){if(q=q||this[l],q&&typeof q!="number")throw new TypeError("maxAge must be a number");const L=q?Date.now():0,M=this[f](G,x);if(this[d].has(x)){if(M>this[S])return O(this,this[d].get(x)),!1;const Y=this[d].get(x).value;return this[a]&&(this[h]||this[a](x,Y.value)),Y.now=L,Y.maxAge=q,Y.value=G,this[N]+=M-Y.length,Y.length=M,this.get(x),P(this),!0}const B=new U(x,G,M,L,q);return B.length>this[S]?(this[a]&&this[a](x,G),!1):(this[N]+=B.length,this[p].unshift(B),this[d].set(x,this[p].head),P(this),!0)}has(x){if(!this[d].has(x))return!1;const G=this[d].get(x).value;return!C(this,G)}get(x){return E(this,x,!0)}peek(x){return E(this,x,!1)}pop(){const x=this[p].tail;return x?(O(this,x),x.value):null}del(x){O(this,this[d].get(x))}load(x){this.reset();const G=Date.now();for(let q=x.length-1;q>=0;q--){const L=x[q],M=L.e||0;if(M===0)this.set(L.k,L.v);else{const B=M-G;B>0&&this.set(L.k,L.v,B)}}}prune(){this[d].forEach((x,G)=>E(this,G,!1))}}const E=($,x,G)=>{const q=$[d].get(x);if(q){const L=q.value;if(C($,L)){if(O($,q),!$[o])return}else G&&($[m]&&(q.value.now=Date.now()),$[p].unshiftNode(q));return L.value}},C=($,x)=>{if(!x||!x.maxAge&&!$[l])return!1;const G=Date.now()-x.now;return x.maxAge?G>x.maxAge:$[l]&&G>$[l]},P=$=>{if($[N]>$[S])for(let x=$[p].tail;$[N]>$[S]&&x!==null;){const G=x.prev;O($,x),x=G}},O=($,x)=>{if(x){const G=x.value;$[a]&&$[a](G.key,G.value),$[N]-=G.length,$[d].delete(G.key),$[p].removeNode(x)}};class U{constructor(x,G,q,L,M){this.key=x,this.value=G,this.length=q,this.now=L,this.maxAge=M||0}}const A=($,x,G,q)=>{let L=G.value;C($,L)&&(O($,G),$[o]||(L=void 0)),L&&x.call(q,L.value,L.key,$)};u.exports=y},7468:(u,R,g)=>{const _=g(9930),{defaults:S}=g(8644),{inline:N}=g(9709),{findClosingBracket:f,escape:o}=g(621);u.exports=class Ni{constructor(a,h){if(this.options=h||S,this.links=a,this.rules=N.normal,this.options.renderer=this.options.renderer||new _,this.renderer=this.options.renderer,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.pedantic?this.rules=N.pedantic:this.options.gfm&&(this.options.breaks?this.rules=N.breaks:this.rules=N.gfm)}static get rules(){return N}static output(a,h,p){return new Ni(h,p).output(a)}output(a){let h="",p,d,m,k,y,E;for(;a;){if(y=this.rules.escape.exec(a)){a=a.substring(y[0].length),h+=o(y[1]);continue}if(y=this.rules.tag.exec(a)){!this.inLink&&/^<a /i.test(y[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(y[0])&&(this.inLink=!1),!this.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(y[0])?this.inRawBlock=!0:this.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(y[0])&&(this.inRawBlock=!1),a=a.substring(y[0].length),h+=this.renderer.html(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(y[0]):o(y[0]):y[0]);continue}if(y=this.rules.link.exec(a)){const C=f(y[2],"()");if(C>-1){const O=(y[0].indexOf("!")===0?5:4)+y[1].length+C;y[2]=y[2].substring(0,C),y[0]=y[0].substring(0,O).trim(),y[3]=""}a=a.substring(y[0].length),this.inLink=!0,m=y[2],this.options.pedantic?(p=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(m),p?(m=p[1],k=p[3]):k=""):k=y[3]?y[3].slice(1,-1):"",m=m.trim().replace(/^<([\s\S]*)>$/,"$1"),h+=this.outputLink(y,{href:Ni.escapes(m),title:Ni.escapes(k)}),this.inLink=!1;continue}if((y=this.rules.reflink.exec(a))||(y=this.rules.nolink.exec(a))){if(a=a.substring(y[0].length),p=(y[2]||y[1]).replace(/\s+/g," "),p=this.links[p.toLowerCase()],!p||!p.href){h+=y[0].charAt(0),a=y[0].substring(1)+a;continue}this.inLink=!0,h+=this.outputLink(y,p),this.inLink=!1;continue}if(y=this.rules.strong.exec(a)){a=a.substring(y[0].length),h+=this.renderer.strong(this.output(y[4]||y[3]||y[2]||y[1]));continue}if(y=this.rules.em.exec(a)){a=a.substring(y[0].length),h+=this.renderer.em(this.output(y[6]||y[5]||y[4]||y[3]||y[2]||y[1]));continue}if(y=this.rules.code.exec(a)){a=a.substring(y[0].length),h+=this.renderer.codespan(o(y[2].trim(),!0));continue}if(y=this.rules.br.exec(a)){a=a.substring(y[0].length),h+=this.renderer.br();continue}if(y=this.rules.del.exec(a)){a=a.substring(y[0].length),h+=this.renderer.del(this.output(y[1]));continue}if(y=this.rules.autolink.exec(a)){a=a.substring(y[0].length),y[2]==="@"?(d=o(this.mangle(y[1])),m="mailto:"+d):(d=o(y[1]),m=d),h+=this.renderer.link(m,null,d);continue}if(!this.inLink&&(y=this.rules.url.exec(a))){if(y[2]==="@")d=o(y[0]),m="mailto:"+d;else{do E=y[0],y[0]=this.rules._backpedal.exec(y[0])[0];while(E!==y[0]);d=o(y[0]),y[1]==="www."?m="http://"+d:m=d}a=a.substring(y[0].length),h+=this.renderer.link(m,null,d);continue}if(y=this.rules.text.exec(a)){a=a.substring(y[0].length),this.inRawBlock?h+=this.renderer.text(this.options.sanitize?this.options.sanitizer?this.options.sanitizer(y[0]):o(y[0]):y[0]):h+=this.renderer.text(o(this.smartypants(y[0])));continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return h}static escapes(a){return a&&a.replace(Ni.rules._escapes,"$1")}outputLink(a,h){const p=h.href,d=h.title?o(h.title):null;return a[0].charAt(0)!=="!"?this.renderer.link(p,d,this.output(a[1])):this.renderer.image(p,d,o(a[1]))}smartypants(a){return this.options.smartypants?a.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026"):a}mangle(a){if(!this.options.mangle)return a;const h=a.length;let p="",d=0,m;for(;d<h;d++)m=a.charCodeAt(d),Math.random()>.5&&(m="x"+m.toString(16)),p+="&#"+m+";";return p}}},1092:(u,R,g)=>{const{defaults:_}=g(8644),{block:S}=g(9709),{rtrim:N,splitCells:f,escape:o}=g(621);u.exports=class hc{constructor(a){this.tokens=[],this.tokens.links=Object.create(null),this.options=a||_,this.rules=S.normal,this.options.pedantic?this.rules=S.pedantic:this.options.gfm&&(this.rules=S.gfm)}static get rules(){return S}static lex(a,h){return new hc(h).lex(a)}lex(a){return a=a.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.token(a,!0)}token(a,h){a=a.replace(/^ +$/gm,"");let p,d,m,k,y,E,C,P,O,U,A,$,x,G,q,L;for(;a;){if((m=this.rules.newline.exec(a))&&(a=a.substring(m[0].length),m[0].length>1&&this.tokens.push({type:"space"})),m=this.rules.code.exec(a)){const M=this.tokens[this.tokens.length-1];a=a.substring(m[0].length),M&&M.type==="paragraph"?M.text+=`
`+m[0].trimRight():(m=m[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",codeBlockStyle:"indented",text:this.options.pedantic?m:N(m,`
`)}));continue}if(m=this.rules.fences.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"code",lang:m[2]?m[2].trim():m[2],text:m[3]||""});continue}if(m=this.rules.heading.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"heading",depth:m[1].length,text:m[2]});continue}if((m=this.rules.nptable.exec(a))&&(E={type:"table",header:f(m[1].replace(/^ *| *\| *$/g,"")),align:m[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:m[3]?m[3].replace(/\n$/,"").split(`
`):[]},E.header.length===E.align.length)){for(a=a.substring(m[0].length),A=0;A<E.align.length;A++)/^ *-+: *$/.test(E.align[A])?E.align[A]="right":/^ *:-+: *$/.test(E.align[A])?E.align[A]="center":/^ *:-+ *$/.test(E.align[A])?E.align[A]="left":E.align[A]=null;for(A=0;A<E.cells.length;A++)E.cells[A]=f(E.cells[A],E.header.length);this.tokens.push(E);continue}if(m=this.rules.hr.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"hr"});continue}if(m=this.rules.blockquote.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"blockquote_start"}),m=m[0].replace(/^ *> ?/gm,""),this.token(m,h),this.tokens.push({type:"blockquote_end"});continue}if(m=this.rules.list.exec(a)){for(a=a.substring(m[0].length),k=m[2],G=k.length>1,C={type:"list_start",ordered:G,start:G?+k:"",loose:!1},this.tokens.push(C),m=m[0].match(this.rules.item),P=[],p=!1,x=m.length,A=0;A<x;A++)E=m[A],U=E.length,E=E.replace(/^ *([*+-]|\d+\.) */,""),~E.indexOf(`
 `)&&(U-=E.length,E=this.options.pedantic?E.replace(/^ {1,4}/gm,""):E.replace(new RegExp("^ {1,"+U+"}","gm"),"")),A!==x-1&&(y=S.bullet.exec(m[A+1])[0],(k.length>1?y.length===1:y.length>1||this.options.smartLists&&y!==k)&&(a=m.slice(A+1).join(`
`)+a,A=x-1)),d=p||/\n\n(?!\s*$)/.test(E),A!==x-1&&(p=E.charAt(E.length-1)===`
`,d||(d=p)),d&&(C.loose=!0),q=/^\[[ xX]\] /.test(E),L=void 0,q&&(L=E[1]!==" ",E=E.replace(/^\[[ xX]\] +/,"")),O={type:"list_item_start",task:q,checked:L,loose:d},P.push(O),this.tokens.push(O),this.token(E,!1),this.tokens.push({type:"list_item_end"});if(C.loose)for(x=P.length,A=0;A<x;A++)P[A].loose=!0;this.tokens.push({type:"list_end"});continue}if(m=this.rules.html.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&(m[1]==="pre"||m[1]==="script"||m[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(m[0]):o(m[0]):m[0]});continue}if(h&&(m=this.rules.def.exec(a))){a=a.substring(m[0].length),m[3]&&(m[3]=m[3].substring(1,m[3].length-1)),$=m[1].toLowerCase().replace(/\s+/g," "),this.tokens.links[$]||(this.tokens.links[$]={href:m[2],title:m[3]});continue}if((m=this.rules.table.exec(a))&&(E={type:"table",header:f(m[1].replace(/^ *| *\| *$/g,"")),align:m[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:m[3]?m[3].replace(/\n$/,"").split(`
`):[]},E.header.length===E.align.length)){for(a=a.substring(m[0].length),A=0;A<E.align.length;A++)/^ *-+: *$/.test(E.align[A])?E.align[A]="right":/^ *:-+: *$/.test(E.align[A])?E.align[A]="center":/^ *:-+ *$/.test(E.align[A])?E.align[A]="left":E.align[A]=null;for(A=0;A<E.cells.length;A++)E.cells[A]=f(E.cells[A].replace(/^ *\| *| *\| *$/g,""),E.header.length);this.tokens.push(E);continue}if(m=this.rules.lheading.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"heading",depth:m[2].charAt(0)==="="?1:2,text:m[1]});continue}if(h&&(m=this.rules.paragraph.exec(a))){a=a.substring(m[0].length),this.tokens.push({type:"paragraph",text:m[1].charAt(m[1].length-1)===`
`?m[1].slice(0,-1):m[1]});continue}if(m=this.rules.text.exec(a)){a=a.substring(m[0].length),this.tokens.push({type:"text",text:m[0]});continue}if(a)throw new Error("Infinite loop on byte: "+a.charCodeAt(0))}return this.tokens}}},9170:(u,R,g)=>{const _=g(9930),S=g(1846),N=g(7468),f=g(1477),{defaults:o}=g(8644),{merge:l,unescape:a}=g(621);u.exports=class mc{constructor(p){this.tokens=[],this.token=null,this.options=p||o,this.options.renderer=this.options.renderer||new _,this.renderer=this.options.renderer,this.renderer.options=this.options,this.slugger=new S}static parse(p,d){return new mc(d).parse(p)}parse(p){this.inline=new N(p.links,this.options),this.inlineText=new N(p.links,l({},this.options,{renderer:new f})),this.tokens=p.reverse();let d="";for(;this.next();)d+=this.tok();return d}next(){return this.token=this.tokens.pop(),this.token}peek(){return this.tokens[this.tokens.length-1]||0}parseText(){let p=this.token.text;for(;this.peek().type==="text";)p+=`
`+this.next().text;return this.inline.output(p)}tok(){let p="";switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,a(this.inlineText.output(this.token.text)),this.slugger);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":{let d="",m,k,y,E;for(y="",m=0;m<this.token.header.length;m++)y+=this.renderer.tablecell(this.inline.output(this.token.header[m]),{header:!0,align:this.token.align[m]});for(d+=this.renderer.tablerow(y),m=0;m<this.token.cells.length;m++){for(k=this.token.cells[m],y="",E=0;E<k.length;E++)y+=this.renderer.tablecell(this.inline.output(k[E]),{header:!1,align:this.token.align[E]});p+=this.renderer.tablerow(y)}return this.renderer.table(d,p)}case"blockquote_start":{for(p="";this.next().type!=="blockquote_end";)p+=this.tok();return this.renderer.blockquote(p)}case"list_start":{p="";const d=this.token.ordered,m=this.token.start;for(;this.next().type!=="list_end";)p+=this.tok();return this.renderer.list(p,d,m)}case"list_item_start":{p="";const d=this.token.loose,m=this.token.checked,k=this.token.task;if(this.token.task)if(d)if(this.peek().type==="text"){const y=this.peek();y.text=this.renderer.checkbox(m)+" "+y.text}else this.tokens.push({type:"text",text:this.renderer.checkbox(m)});else p+=this.renderer.checkbox(m);for(;this.next().type!=="list_item_end";)p+=!d&&this.token.type==="text"?this.parseText():this.tok();return this.renderer.listitem(p,k,m)}case"html":return this.renderer.html(this.token.text);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText());default:{const d='Token with "'+this.token.type+'" type was not found.';if(this.options.silent)console.log(d);else throw new Error(d)}}}}},9930:(u,R,g)=>{const{defaults:_}=g(8644),{cleanUrl:S,escape:N}=g(621);u.exports=class{constructor(o){this.options=o||_}code(o,l,a){const h=(l||"").match(/\S*/)[0];if(this.options.highlight){const p=this.options.highlight(o,h);p!=null&&p!==o&&(a=!0,o=p)}return h?'<pre><code class="'+this.options.langPrefix+N(h,!0)+'">'+(a?o:N(o,!0))+`</code></pre>
`:"<pre><code>"+(a?o:N(o,!0))+"</code></pre>"}blockquote(o){return`<blockquote>
`+o+`</blockquote>
`}html(o){return o}heading(o,l,a,h){return this.options.headerIds?"<h"+l+' id="'+this.options.headerPrefix+h.slug(a)+'">'+o+"</h"+l+`>
`:"<h"+l+">"+o+"</h"+l+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(o,l,a){const h=l?"ol":"ul",p=l&&a!==1?' start="'+a+'"':"";return"<"+h+p+`>
`+o+"</"+h+`>
`}listitem(o){return"<li>"+o+`</li>
`}checkbox(o){return"<input "+(o?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(o){return"<p>"+o+`</p>
`}table(o,l){return l&&(l="<tbody>"+l+"</tbody>"),`<table>
<thead>
`+o+`</thead>
`+l+`</table>
`}tablerow(o){return`<tr>
`+o+`</tr>
`}tablecell(o,l){const a=l.header?"th":"td";return(l.align?"<"+a+' align="'+l.align+'">':"<"+a+">")+o+"</"+a+`>
`}strong(o){return"<strong>"+o+"</strong>"}em(o){return"<em>"+o+"</em>"}codespan(o){return"<code>"+o+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(o){return"<del>"+o+"</del>"}link(o,l,a){if(o=S(this.options.sanitize,this.options.baseUrl,o),o===null)return a;let h='<a href="'+N(o)+'"';return l&&(h+=' title="'+l+'"'),h+=">"+a+"</a>",h}image(o,l,a){if(o=S(this.options.sanitize,this.options.baseUrl,o),o===null)return a;let h='<img src="'+o+'" alt="'+a+'"';return l&&(h+=' title="'+l+'"'),h+=this.options.xhtml?"/>":">",h}text(o){return o}}},1846:u=>{u.exports=class{constructor(){this.seen={}}slug(g){let _=g.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-");if(this.seen.hasOwnProperty(_)){const S=_;do this.seen[S]++,_=S+"-"+this.seen[S];while(this.seen.hasOwnProperty(_))}return this.seen[_]=0,_}}},1477:u=>{u.exports=class{strong(g){return g}em(g){return g}codespan(g){return g}del(g){return g}html(g){return g}text(g){return g}link(g,_,S){return""+S}image(g,_,S){return""+S}br(){return""}}},8644:u=>{function R(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,xhtml:!1}}function g(_){u.exports.defaults=_}u.exports={defaults:R(),getDefaults:R,changeDefaults:g}},621:u=>{const R=/[&<>"']/,g=/[&<>"']/g,_=/[<>"']|&(?!#?\w+;)/,S=/[<>"']|&(?!#?\w+;)/g,N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},f=L=>N[L];function o(L,M){if(M){if(R.test(L))return L.replace(g,f)}else if(_.test(L))return L.replace(S,f);return L}const l=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function a(L){return L.replace(l,(M,B)=>(B=B.toLowerCase(),B==="colon"?":":B.charAt(0)==="#"?B.charAt(1)==="x"?String.fromCharCode(parseInt(B.substring(2),16)):String.fromCharCode(+B.substring(1)):""))}const h=/(^|[^\[])\^/g;function p(L,M){L=L.source||L,M=M||"";const B={replace:(K,Y)=>(Y=Y.source||Y,Y=Y.replace(h,"$1"),L=L.replace(K,Y),B),getRegex:()=>new RegExp(L,M)};return B}const d=/[^\w:]/g,m=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function k(L,M,B){if(L){let K;try{K=decodeURIComponent(a(B)).replace(d,"").toLowerCase()}catch(Y){return null}if(K.indexOf("javascript:")===0||K.indexOf("vbscript:")===0||K.indexOf("data:")===0)return null}M&&!m.test(B)&&(B=O(M,B));try{B=encodeURI(B).replace(/%25/g,"%")}catch(K){return null}return B}const y={},E=/^[^:]+:\/*[^/]*$/,C=/^([^:]+:)[\s\S]*$/,P=/^([^:]+:\/*[^/]*)[\s\S]*$/;function O(L,M){y[" "+L]||(E.test(L)?y[" "+L]=L+"/":y[" "+L]=x(L,"/",!0)),L=y[" "+L];const B=L.indexOf(":")===-1;return M.substring(0,2)==="//"?B?M:L.replace(C,"$1")+M:M.charAt(0)==="/"?B?M:L.replace(P,"$1")+M:L+M}const U={exec:function(){}};function A(L){let M=1,B,K;for(;M<arguments.length;M++){B=arguments[M];for(K in B)Object.prototype.hasOwnProperty.call(B,K)&&(L[K]=B[K])}return L}function $(L,M){const B=L.replace(/\|/g,(Q,re,de)=>{let pe=!1,_e=re;for(;--_e>=0&&de[_e]==="\\";)pe=!pe;return pe?"|":" |"}),K=B.split(/ \|/);let Y=0;if(K.length>M)K.splice(M);else for(;K.length<M;)K.push("");for(;Y<K.length;Y++)K[Y]=K[Y].trim().replace(/\\\|/g,"|");return K}function x(L,M,B){const K=L.length;if(K===0)return"";let Y=0;for(;Y<K;){const Q=L.charAt(K-Y-1);if(Q===M&&!B)Y++;else if(Q!==M&&B)Y++;else break}return L.substr(0,K-Y)}function G(L,M){if(L.indexOf(M[1])===-1)return-1;const B=L.length;let K=0,Y=0;for(;Y<B;Y++)if(L[Y]==="\\")Y++;else if(L[Y]===M[0])K++;else if(L[Y]===M[1]&&(K--,K<0))return Y;return-1}function q(L){L&&L.sanitize&&!L.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}u.exports={escape:o,unescape:a,edit:p,cleanUrl:k,resolveUrl:O,noopTest:U,merge:A,splitCells:$,rtrim:x,findClosingBracket:G,checkSanitizeDeprecation:q}},7228:(u,R,g)=>{const _=g(1092),S=g(9170),N=g(9930),f=g(1477),o=g(7468),l=g(1846),{merge:a,checkSanitizeDeprecation:h,escape:p}=g(621),{getDefaults:d,changeDefaults:m,defaults:k}=g(8644);function y(E,C,P){if(typeof E=="undefined"||E===null)throw new Error("marked(): input parameter is undefined or null");if(typeof E!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(E)+", string expected");if(P||typeof C=="function"){P||(P=C,C=null),C=a({},y.defaults,C||{}),h(C);const O=C.highlight;let U,A,$=0;try{U=_.lex(E,C)}catch(G){return P(G)}A=U.length;const x=function(G){if(G)return C.highlight=O,P(G);let q;try{q=S.parse(U,C)}catch(L){G=L}return C.highlight=O,G?P(G):P(null,q)};if(!O||O.length<3||(delete C.highlight,!A))return x();for(;$<U.length;$++)(function(G){return G.type!=="code"?--A||x():O(G.text,G.lang,function(q,L){if(q)return x(q);if(L==null||L===G.text)return--A||x();G.text=L,G.escaped=!0,--A||x()})})(U[$]);return}try{return C=a({},y.defaults,C||{}),h(C),S.parse(_.lex(E,C),C)}catch(O){if(O.message+=`
Please report this to https://github.com/markedjs/marked.`,(C||y.defaults).silent)return"<p>An error occurred:</p><pre>"+p(O.message+"",!0)+"</pre>";throw O}}y.options=y.setOptions=function(E){return a(y.defaults,E),m(y.defaults),y},y.getDefaults=d,y.defaults=k,y.Parser=S,y.parser=S.parse,y.Renderer=N,y.TextRenderer=f,y.Lexer=_,y.lexer=_.lex,y.InlineLexer=o,y.inlineLexer=o.output,y.Slugger=l,y.parse=y,u.exports=y},9709:(u,R,g)=>{const{noopTest:_,edit:S,merge:N}=g(621),f={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6}) +([^\n]*?)(?: +#+)? *(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?\\?>\\n*|<![A-Z][\\s\\S]*?>\\n*|<!\\[CDATA\\[[\\s\\S]*?\\]\\]>\\n*|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:_,table:_,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html)[^\n]+)*)/,text:/^[^\n]+/};f._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,f._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,f.def=S(f.def).replace("label",f._label).replace("title",f._title).getRegex(),f.bullet=/(?:[*+-]|\d{1,9}\.)/,f.item=/^( *)(bull) ?[^\n]*(?:\n(?!\1bull ?)[^\n]*)*/,f.item=S(f.item,"gm").replace(/bull/g,f.bullet).getRegex(),f.list=S(f.list).replace(/bull/g,f.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+f.def.source+")").getRegex(),f._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",f._comment=/<!--(?!-?>)[\s\S]*?-->/,f.html=S(f.html,"i").replace("comment",f._comment).replace("tag",f._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),f.paragraph=S(f._paragraph).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.blockquote=S(f.blockquote).replace("paragraph",f.paragraph).getRegex(),f.normal=N({},f),f.gfm=N({},f.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n *([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n *\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),f.gfm.nptable=S(f.gfm.nptable).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.gfm.table=S(f.gfm.table).replace("hr",f.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",f._tag).getRegex(),f.pedantic=N({},f.normal,{html:S(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",f._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *(?:#+ *)?(?:\n+|$)/,fences:_,paragraph:S(f.normal._paragraph).replace("hr",f.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",f.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const o={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:_,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,strong:/^__([^\s_])__(?!_)|^\*\*([^\s*])\*\*(?!\*)|^__([^\s][\s\S]*?[^\s])__(?!_)|^\*\*([^\s][\s\S]*?[^\s])\*\*(?!\*)/,em:/^_([^\s_])_(?!_)|^\*([^\s*<\[])\*(?!\*)|^_([^\s<][\s\S]*?[^\s_])_(?!_|[^\spunctuation])|^_([^\s_<][\s\S]*?[^\s])_(?!_|[^\spunctuation])|^\*([^\s<"][\s\S]*?[^\s\*])\*(?!\*|[^\spunctuation])|^\*([^\s*"<\[][\s\S]*?[^\s])\*(?!\*)/,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:_,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n))|(?= {2,}\n))/};o._punctuation=`!"#$%&'()*+,\\-./:;<=>?@\\[^_{|}~`,o.em=S(o.em).replace(/punctuation/g,o._punctuation).getRegex(),o._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,o._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,o._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,o.autolink=S(o.autolink).replace("scheme",o._scheme).replace("email",o._email).getRegex(),o._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,o.tag=S(o.tag).replace("comment",f._comment).replace("attribute",o._attribute).getRegex(),o._label=/(?:\[[^\[\]]*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,o._href=/<(?:\\[<>]?|[^\s<>\\])*>|[^\s\x00-\x1f]*/,o._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,o.link=S(o.link).replace("label",o._label).replace("href",o._href).replace("title",o._title).getRegex(),o.reflink=S(o.reflink).replace("label",o._label).getRegex(),o.normal=N({},o),o.pedantic=N({},o.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/,link:S(/^!?\[(label)\]\((.*?)\)/).replace("label",o._label).getRegex(),reflink:S(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",o._label).getRegex()}),o.gfm=N({},o.normal,{escape:S(o.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^~+(?=\S)([\s\S]*?\S)~+/,text:/^(`+|[^`])(?:[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?= {2,}\n|[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),o.gfm.url=S(o.gfm.url,"i").replace("email",o.gfm._extended_email).getRegex(),o.breaks=N({},o.gfm,{br:S(o.br).replace("{2,}","*").getRegex(),text:S(o.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),u.exports={block:f,inline:o}},778:(u,R,g)=>{var _=g(2479);u.exports=_(S),u.exports.strict=_(N),S.proto=S(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return S(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return N(this)},configurable:!0})});function S(f){var o=function(){return o.called?o.value:(o.called=!0,o.value=f.apply(this,arguments))};return o.called=!1,o}function N(f){var o=function(){if(o.called)throw new Error(o.onceError);return o.called=!0,o.value=f.apply(this,arguments)},l=f.name||"Function wrapped with `once`";return o.onceError=l+" shouldn't be called more than once",o.called=!1,o}},6372:u=>{"use strict";function R(a){return typeof a=="function"}var g=console.error.bind(console);function _(a,h,p){var d=!!a[h]&&a.propertyIsEnumerable(h);Object.defineProperty(a,h,{configurable:!0,enumerable:d,writable:!0,value:p})}function S(a){a&&a.logger&&(R(a.logger)?g=a.logger:g("new logger isn't a function, not replacing"))}function N(a,h,p){if(!a||!a[h]){g("no original function "+h+" to wrap");return}if(!p){g("no wrapper function"),g(new Error().stack);return}if(!R(a[h])||!R(p)){g("original object and wrapper must be functions");return}var d=a[h],m=p(d,h);return _(m,"__original",d),_(m,"__unwrap",function(){a[h]===m&&_(a,h,d)}),_(m,"__wrapped",!0),_(a,h,m),m}function f(a,h,p){if(a)Array.isArray(a)||(a=[a]);else{g("must provide one or more modules to patch"),g(new Error().stack);return}if(!(h&&Array.isArray(h))){g("must provide one or more functions to wrap on modules");return}a.forEach(function(d){h.forEach(function(m){N(d,m,p)})})}function o(a,h){if(!a||!a[h]){g("no function to unwrap."),g(new Error().stack);return}if(!a[h].__unwrap)g("no original to unwrap to -- has "+h+" already been unwrapped?");else return a[h].__unwrap()}function l(a,h){if(a)Array.isArray(a)||(a=[a]);else{g("must provide one or more modules to patch"),g(new Error().stack);return}if(!(h&&Array.isArray(h))){g("must provide one or more functions to unwrap on modules");return}a.forEach(function(p){h.forEach(function(d){o(p,d)})})}S.wrap=N,S.massWrap=f,S.unwrap=o,S.massUnwrap=l,u.exports=S},6200:(u,R,g)=>{"use strict";const _=g(1669),S=g(1003),N=/\s/,f=/\r|\n/,o=/^(Host|Match)$/i,l=1,a=2;function h(d,m){return m.hasOwnProperty(d.param)&&m[d.param]===d.value}class p extends Array{compute(m){const k={},y=(E,C)=>{E==="IdentityFile"?(k[E]||(k[E]=[])).push(C):k[E]==null&&(k[E]=C)};for(const E of this)E.type===l&&(E.param==="Host"?S(E.value,m)&&(y(E.param,E.value),E.config.filter(C=>C.type===l).forEach(C=>y(C.param,C.value))):E.param==="Match"||y(E.param,E.value));return k}find(m={}){if(typeof m=="function")return super.find(m);if(!(m&&("Host"in m||"Match"in m)))throw new Error("Can only find by Host or Match");return super.find(k=>h(k,m))}remove(m={}){if(!(m&&("Host"in m||"Match"in m)))throw new Error("Can only remove by Host or Match");const k=typeof m=="function"?super.findIndex(m):super.findIndex(y=>h(y,m));if(k>=0)return this.splice(k,1)}toString(){return this.constructor.stringify(this)}append(m){let k="  ";e:for(const C of this)if(o.test(C.param)){for(const P of C.config)if(P.before){k=P.before;break e}}if(this.length>0){let C=this[this.length-1];C.config&&(C=C.config[C.config.length-1]),C.after=`
`}let y=this,E=this;for(const C in m){const P={type:l,param:C,separator:" ",value:m[C],before:"",after:`
`};o.test(C)?(y=E,y.push(P),y=P.config=new p):(P.before=y===E?"":k,y.push(P))}return E}static stringify(m){let k="";const y=(C,P)=>Array.isArray(C)?C.map(O=>y(O,N.test(O))).join(" "):P?`"${C}"`:C,E=C=>{if(k+=C.before,C.type===a)k+=C.content;else if(C.type===l){const P=C.quoted||/IdentityFile/i.test(C.param)&&N.test(C.value),O=y(C.value,P);k+=`${C.param}${C.separator}${O}`}k+=C.after,C.config&&C.config.forEach(E)};return m.forEach(E),k}static get DIRECTIVE(){return l}static get COMMENT(){return a}static parse(m){let k=0,y=P(),E=new p,C=E;function P(){return m[k++]}function O(){let B="";for(;N.test(y);)B+=y,y=P();return B}function U(){let B="";for(;f.test(y);)B+=y,y=P();return B}function A(){let B="";for(;y&&/[^ \t=]/.test(y);)B+=y,y=P();return B}function $(){let B=O();return y==="="&&(B+=y,y=P()),B+O()}function x(){let B="",K=!1,Y=!1;for(;y&&!f.test(y);)Y?(B+=y==='"'?y:`\\${y}`,Y=!1):y==='"'&&(!B||K)?K=!K:y==="\\"?Y=!0:B+=y,y=P();if(K||Y)throw new Error(`Unexpected line break at ${B}`);return B.trim()}function G(){const B=a;let K="";for(;y&&!f.test(y);)K+=y,y=P();return{type:B,content:K}}function q(){const B=[];let K="",Y=!1,Q=!1;for(;y&&!f.test(y);)Q?(K+=y==='"'?y:`\\${y}`,Q=!1):y==='"'?Y=!Y:y==="\\"?Q=!0:Y?K+=y:/[ \t]/.test(y)?K&&(B.push(K),K=""):K+=y,y=P();if(Y||Q)throw new Error(`Unexpected line break at ${B.concat(K).join(" ")}`);return B.push(K),B.length>1?B:B[0]}function L(){const B=l,K=A(),Y=K.toLowerCase()=="host",Q={type:B,param:K,separator:$(),quoted:!Y&&y==='"',value:Y?q():x()};return Q.quoted||delete Q.quoted,Q}function M(){const B=O(),K=y==="#"?G():L(),Y=U();return K.before=B,K.after=Y,K}for(;y;){let B=M();B.type===l&&o.test(B.param)?(E=C,E.push(B),E=B.config=new p):E.push(B)}return C}}p.find=_.deprecate((d,m)=>{const k=d.find(m);return k?[k,d.indexOf(k)]:null},"SSHConfig.find() is deprected. Use SSHConfig.prototype.find() instead."),u.exports=p},1003:u=>{"use strict";function R(_,S){return _=_.replace(/\./g,"\\.").replace(/\+/g,"\\+").replace(/\*/g,".*").replace(/\?/g,".?"),new RegExp("^(?:"+_+")$").test(S)}function g(_,S){const N=Array.isArray(_)?_:_.split(/,/);let f=!1;for(const o of N){if(o[0]=="!"&&R(o.slice(1),S))return!1;R(o,S)&&(f=!0)}return f}u.exports=g},465:u=>{function R(g){try{return Error.prototype.toString.call(g)}catch(_){try{return"<error: "+_+">"}catch(S){return"<error>"}}}u.exports=function(_,S){var N=[];N.push(R(_));for(var f=0;f<S.length;f++){var o=S[f],l;try{l=o.toString()}catch(a){try{l="<error: "+a+">"}catch(h){l="<error>"}}N.push("    at "+l)}return N.join(`
`)}},2512:(u,R,g)=>{if(global._stackChain)if(global._stackChain.version===g(9414).i8)u.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else u.exports=global._stackChain=g(7898)},9414:u=>{"use strict";u.exports={i8:"1.3.7"}},7898:(u,R,g)=>{var _=g(465);function S(){this.extend=new o,this.filter=new o,this.format=new l,this.version=g(9414).i8}var N=!1;S.prototype.callSite=function d(m){m||(m={}),N=!0;var k={};Error.captureStackTrace(k,d);var y=k.stack;return N=!1,y=y.slice(m.slice||0),m.extend&&(y=this.extend._modify(k,y)),m.filter&&(y=this.filter._modify(k,y)),y};var f=new S;function o(){this._modifiers=[]}o.prototype._modify=function(d,m){for(var k=0,y=this._modifiers.length;k<y;k++)m=this._modifiers[k](d,m);return m},o.prototype.attach=function(d){this._modifiers.push(d)},o.prototype.deattach=function(d){var m=this._modifiers.indexOf(d);return m===-1?!1:(this._modifiers.splice(m,1),!0)};function l(){this._formater=_,this._previous=void 0}l.prototype.replace=function(d){d?this._formater=d:this.restore()},l.prototype.restore=function(){this._formater=_,this._previous=void 0},l.prototype._backup=function(){this._previous=this._formater},l.prototype._roolback=function(){this._previous===_?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&f.format.replace(Error.prepareStackTrace);var a=!1;function h(d,m){if(N)return m;if(a)return _(d,m);var k=m.concat();k=f.extend._modify(d,k),k=f.filter._modify(d,k),k=k.slice(0,Error.stackTraceLimit),Object.isExtensible(d)&&Object.getOwnPropertyDescriptor(d,"callSite")===void 0&&(d.callSite={original:m,mutated:k}),a=!0;var y=f.format._formater(d,k);return a=!1,y}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return h},set:function(d){d===h?f.format._roolback():(f.format._backup(),f.format.replace(d))}});function p(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:p,set:function(d){Object.defineProperty(this,"callSite",{value:d,writable:!0,configurable:!0})},configurable:!0}),u.exports=f},2130:(u,R,g)=>{"use strict";const _=g(2087),S=g(3867),N=g(6560),{env:f}=process;let o;N("no-color")||N("no-colors")||N("color=false")||N("color=never")?o=0:(N("color")||N("colors")||N("color=true")||N("color=always"))&&(o=1),"FORCE_COLOR"in f&&(f.FORCE_COLOR==="true"?o=1:f.FORCE_COLOR==="false"?o=0:o=f.FORCE_COLOR.length===0?1:Math.min(parseInt(f.FORCE_COLOR,10),3));function l(p){return p===0?!1:{level:p,hasBasic:!0,has256:p>=2,has16m:p>=3}}function a(p,d){if(o===0)return 0;if(N("color=16m")||N("color=full")||N("color=truecolor"))return 3;if(N("color=256"))return 2;if(p&&!d&&o===void 0)return 0;const m=o||0;if(f.TERM==="dumb")return m;if(process.platform==="win32"){const k=_.release().split(".");return Number(k[0])>=10&&Number(k[2])>=10586?Number(k[2])>=14931?3:2:1}if("CI"in f)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(k=>k in f)||f.CI_NAME==="codeship"?1:m;if("TEAMCITY_VERSION"in f)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(f.TEAMCITY_VERSION)?1:0;if(f.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in f){const k=parseInt((f.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(f.TERM_PROGRAM){case"iTerm.app":return k>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(f.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(f.TERM)||"COLORTERM"in f?1:m}function h(p){const d=a(p,p&&p.isTTY);return l(d)}u.exports={supportsColor:h,stdout:l(a(!0,S.isatty(1))),stderr:l(a(!0,S.isatty(2)))}},7121:(u,R,g)=>{"use strict";g.d(R,{Z:()=>f});function _(o){var l,a=o.Symbol;return typeof a=="function"?a.observable?l=a.observable:(l=a("observable"),a.observable=l):l="@@observable",l}u=g.hmd(u);var S;typeof self!="undefined"?S=self:typeof window!="undefined"?S=window:typeof global!="undefined"?S=global:S=u;var N=_(S);const f=N},4802:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});var _=g(6363);R.ExperimentationService=_.ExperimentationService},6363:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(4067),S=g(4234),N=g(5975);class f extends N.ExperimentationServiceAutoPolling{constructor(l){super(l.telemetry,l.filterProviders||[],l.refetchInterval!=null?l.refetchInterval:0,l.featuresTelemetryPropertyName,l.assignmentContextTelemetryPropertyName,l.telemetryEventName,l.storageKey,l.keyValueStorage);this.options=l,this.invokeInit()}init(){this.featureProviders=[],this.addFeatureProvider(new _.TasApiFeatureProvider(new S.AxiosHttpClient(this.options.endpoint),this.telemetry,this.filterProviders)),super.init()}}R.ExperimentationService=f,f.REFRESH_RATE_IN_MINUTES=30},5975:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(3663),S=g(3334);class N extends _.ExperimentationServiceBase{constructor(o,l,a,h,p,d,m,k){super(o,h,p,d,m,k);if(this.telemetry=o,this.filterProviders=l,this.refreshRateMs=a,this.featuresTelemetryPropertyName=h,this.assignmentContextTelemetryPropertyName=p,this.telemetryEventName=d,this.storageKey=m,this.storage=k,a<1e3&&a!==0)throw new Error("The minimum refresh rate for polling is 1000 ms (1 second). If you wish to deactivate this auto-polling use value of 0.");a>0&&(this.pollingService=new S.PollingService(a),this.pollingService.OnPollTick(async()=>{await super.getFeaturesAsync()}))}init(){this.pollingService?this.pollingService.StartPolling(!0):super.getFeaturesAsync()}async getFeaturesAsync(o=!1){if(this.pollingService){this.pollingService.StopPolling();let l=await super.getFeaturesAsync(o);return this.pollingService.StartPolling(),l}else return await super.getFeaturesAsync(o)}}R.ExperimentationServiceAutoPolling=N},3663:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(7002);class S{constructor(f,o,l,a,h,p){this.telemetry=f,this.featuresTelemetryPropertyName=o,this.assignmentContextTelemetryPropertyName=l,this.telemetryEventName=a,this.storageKey=h,this.storage=p,this.featuresConsumed=!1,this.initializePromise=this.loadCachePromise,this.cachedTelemetryEvents=[],this._features={features:[],assignmentContext:"",configs:[]},this.storageKey||(this.storageKey="ABExp.Features"),this.storage||(p=new _.MemoryKeyValueStorage),this.loadCachePromise=this.loadCachedFeatureData()}get features(){return this._features}set features(f){this._features=f,this.telemetry&&(this.telemetry.setSharedProperty(this.featuresTelemetryPropertyName,this.features.features.join(";")),this.telemetry.setSharedProperty(this.assignmentContextTelemetryPropertyName,this.features.assignmentContext))}async getFeaturesAsync(f=!1){if(this.fetchPromise!=null)return await this.fetchPromise,this.features;if(!this.featureProviders||this.featureProviders.length===0)return Promise.resolve({features:[],assignmentContext:"",configs:[]});this.fetchPromise=Promise.all(this.featureProviders.map(async l=>await l.getFeatures()));let o=await this.fetchPromise;return this.fetchPromise=void 0,this.updateFeatures(o,f),this.features}updateFeatures(f,o=!1){let l={features:[],assignmentContext:"",configs:[]};for(let a of f){for(let h of a.features)l.features.includes(h)||l.features.push(h);for(let h of a.configs){const p=l.configs.find(d=>d.Id===h.Id);p?p.Parameters=Object.assign(Object.assign({},p.Parameters),h.Parameters):l.configs.push(h)}l.assignmentContext+=a.assignmentContext}(o||!this.featuresConsumed)&&(this.features=l),this.storage&&this.storage.setValue(this.storageKey,l)}async loadCachedFeatureData(){let f;this.storage&&(f=await this.storage.getValue(this.storageKey),f!==void 0&&f.configs===void 0&&(f.configs=[])),this.features.features.length===0&&(this.features=f||{features:[],assignmentContext:"",configs:[]})}isFlightEnabled(f){return this.featuresConsumed=!0,this.PostEventToTelemetry(f),this.features.features.includes(f)}async isCachedFlightEnabled(f){return await this.loadCachePromise,this.featuresConsumed=!0,this.PostEventToTelemetry(f),this.features.features.includes(f)}async isFlightEnabledAsync(f){const o=await this.getFeaturesAsync(!0);return this.featuresConsumed=!0,this.PostEventToTelemetry(f),o.features.includes(f)}getTreatmentVariable(f,o){var l;return this.featuresConsumed=!0,this.PostEventToTelemetry(`${f}.${o}`),(l=this.features.configs.find(h=>h.Id===f))===null||l===void 0?void 0:l.Parameters[o]}async getTreatmentVariableAsync(f,o){return await this.getFeaturesAsync(!0),this.getTreatmentVariable(f,o)}PostEventToTelemetry(f){this.cachedTelemetryEvents.includes(f)||(this.telemetry.postEvent(this.telemetryEventName,new Map([["ABExp.queriedFeature",f]])),this.cachedTelemetryEvents.push(f))}invokeInit(){this.init()}addFeatureProvider(...f){if(!(f==null||this.featureProviders==null))for(let o of f)this.featureProviders.push(o)}}R.ExperimentationServiceBase=S},69:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class g{constructor(S){this.telemetry=S,this.isFetching=!1}async getFeatures(){if(this.isFetching&&this.fetchPromise)return this.fetchPromise;this.fetchPromise=this.fetch();let S=await this.fetchPromise;return this.isFetching=!1,this.fetchPromise=void 0,S}}R.BaseFeatureProvider=g},4e3:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(69);class S extends _.BaseFeatureProvider{constructor(f,o){super(f);this.telemetry=f,this.filterProviders=o,this.cachedTelemetryEvents=[]}getFilters(){let f=new Map;for(let o of this.filterProviders){let l=o.getFilters();for(let a of l.keys()){let h=l.get(a);f.set(a,h)}}return f}PostEventToTelemetry(f){if(this.cachedTelemetryEvents.includes(f))return;const o=JSON.stringify(f);this.telemetry.postEvent("report-headers",new Map([["ABExp.headers",o]])),this.cachedTelemetryEvents.push(f)}}R.FilteredFeatureProvider=S},4067:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(4e3);class S extends _.FilteredFeatureProvider{constructor(f,o,l){super(o,l);this.httpClient=f,this.telemetry=o,this.filterProviders=l}async fetch(){let f=this.getFilters(),o={};for(let d of f.keys()){const m=f.get(d);o[d]=m}let l=await this.httpClient.get({headers:o});f.keys.length>0&&this.PostEventToTelemetry(o);let a=l.data,h=a.Configs,p=[];for(let d of h)if(!!d.Parameters)for(let m of Object.keys(d.Parameters)){const k=m+(d.Parameters[m]?"":"cf");p.includes(k)||p.push(k)}return{features:p,assignmentContext:a.AssignmentContext,configs:h}}}R.TasApiFeatureProvider=S},4234:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(9669);class S{constructor(f){this.endpoint=f}get(f){return _.default.get(this.endpoint,Object.assign(Object.assign({},f),{proxy:!1}))}}R.AxiosHttpClient=S},7002:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class g{constructor(){this.storage=new Map}async getValue(S,N){return this.storage.has(S)?await Promise.resolve(this.storage.get(S)):await Promise.resolve(N||void 0)}setValue(S,N){this.storage.set(S,N)}}R.MemoryKeyValueStorage=g},3334:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class g{constructor(S){this.fetchInterval=S}StopPolling(){clearInterval(this.intervalHandle),this.intervalHandle=void 0}OnPollTick(S){this.onTick=S}StartPolling(S=!1){this.intervalHandle&&this.StopPolling(),this.onTick!=null&&(S&&this.onTick().then(()=>{}).catch(()=>{}),this.intervalHandle=setInterval(async()=>{await this.onTick()},this.fetchInterval),this.intervalHandle.unref&&this.intervalHandle.unref())}}R.PollingService=g},6149:(u,R,g)=>{u.exports=g(5468)},5468:(u,R,g)=>{"use strict";var _,S=g(1631),N=g(4016),f=g(8605),o=g(7211),l=g(8614),a=g(2357),h=g(1669);_=p,R.httpsOverHttp=d,_=m,_=k;function p(U){var A=new y(U);return A.request=f.request,A}function d(U){var A=new y(U);return A.request=f.request,A.createSocket=E,A.defaultPort=443,A}function m(U){var A=new y(U);return A.request=o.request,A}function k(U){var A=new y(U);return A.request=o.request,A.createSocket=E,A.defaultPort=443,A}function y(U){var A=this;A.options=U||{},A.proxyOptions=A.options.proxy||{},A.maxSockets=A.options.maxSockets||f.Agent.defaultMaxSockets,A.requests=[],A.sockets=[],A.on("free",function(x,G,q,L){for(var M=C(G,q,L),B=0,K=A.requests.length;B<K;++B){var Y=A.requests[B];if(Y.host===M.host&&Y.port===M.port){A.requests.splice(B,1),Y.request.onSocket(x);return}}x.destroy(),A.removeSocket(x)})}h.inherits(y,l.EventEmitter),y.prototype.addRequest=function(A,$,x,G){var q=this,L=P({request:A},q.options,C($,x,G));if(q.sockets.length>=this.maxSockets){q.requests.push(L);return}q.createSocket(L,function(M){M.on("free",B),M.on("close",K),M.on("agentRemove",K),A.onSocket(M);function B(){q.emit("free",M,L)}function K(Y){q.removeSocket(M),M.removeListener("free",B),M.removeListener("close",K),M.removeListener("agentRemove",K)}})},y.prototype.createSocket=function(A,$){var x=this,G={};x.sockets.push(G);var q=P({},x.proxyOptions,{method:"CONNECT",path:A.host+":"+A.port,agent:!1,headers:{host:A.host+":"+A.port}});A.localAddress&&(q.localAddress=A.localAddress),q.proxyAuth&&(q.headers=q.headers||{},q.headers["Proxy-Authorization"]="Basic "+new Buffer(q.proxyAuth).toString("base64")),O("making CONNECT request");var L=x.request(q);L.useChunkedEncodingByDefault=!1,L.once("response",M),L.once("upgrade",B),L.once("connect",K),L.once("error",Y),L.end();function M(Q){Q.upgrade=!0}function B(Q,re,de){process.nextTick(function(){K(Q,re,de)})}function K(Q,re,de){if(L.removeAllListeners(),re.removeAllListeners(),Q.statusCode!==200){O("tunneling socket could not be established, statusCode=%d",Q.statusCode),re.destroy();var pe=new Error("tunneling socket could not be established, statusCode="+Q.statusCode);pe.code="ECONNRESET",A.request.emit("error",pe),x.removeSocket(G);return}if(de.length>0){O("got illegal response body from proxy"),re.destroy();var pe=new Error("got illegal response body from proxy");pe.code="ECONNRESET",A.request.emit("error",pe),x.removeSocket(G);return}return O("tunneling connection has established"),x.sockets[x.sockets.indexOf(G)]=re,$(re)}function Y(Q){L.removeAllListeners(),O(`tunneling socket could not be established, cause=%s
`,Q.message,Q.stack);var re=new Error("tunneling socket could not be established, cause="+Q.message);re.code="ECONNRESET",A.request.emit("error",re),x.removeSocket(G)}},y.prototype.removeSocket=function(A){var $=this.sockets.indexOf(A);if($!==-1){this.sockets.splice($,1);var x=this.requests.shift();x&&this.createSocket(x,function(G){x.request.onSocket(G)})}};function E(U,A){var $=this;y.prototype.createSocket.call($,U,function(x){var G=U.request.getHeader("host"),q=P({},$.options,{socket:x,servername:G?G.replace(/:.*$/,""):U.host}),L=N.connect(0,q);$.sockets[$.sockets.indexOf(x)]=L,A(L)})}function C(U,A,$){return typeof U=="string"?{host:U,port:A,localAddress:$}:U}function P(U){for(var A=1,$=arguments.length;A<$;++A){var x=arguments[A];if(typeof x=="object")for(var G=Object.keys(x),q=0,L=G.length;q<L;++q){var M=G[q];x[M]!==void 0&&(U[M]=x[M])}}return U}var O;process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?O=function(){var U=Array.prototype.slice.call(arguments);typeof U[0]=="string"?U[0]="TUNNEL: "+U[0]:U.unshift("TUNNEL:"),console.error.apply(console,U)}:O=function(){},_=O},4398:(u,R,g)=>{"use strict";var _;_={value:!0},process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var S=g(5747),N=g(2087),f=g(5622),o=g(7549),l=g(9574),a=function(){function h(p,d,m,k){var y=this;this.extensionId=p,this.extensionVersion=d,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!k;var E=process.env.VSCODE_LOGS||"";E&&p&&process.env.VSCODE_LOG_LEVEL==="trace"&&(E=f.join(E,p+".txt"),this.logStream=S.createWriteStream(E,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(m),this.configListener=o.workspace.onDidChangeConfiguration(function(){return y.updateUserOptIn(m)})}return h.prototype.updateUserOptIn=function(p){var d=o.workspace.getConfiguration(h.TELEMETRY_CONFIG_ID);this.userOptIn!==d.get(h.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=d.get(h.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(p):this.dispose())},h.prototype.createAppInsightsClient=function(p){l.defaultClient?(this.appInsightsClient=new l.TelemetryClient(p),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(l.setup(p).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=l.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),o&&o.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=o.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=o.env.sessionId),p&&p.indexOf("AIF-")===0&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},h.prototype.getCommonProperties=function(){var p=Object.create(null);if(p["common.os"]=N.platform(),p["common.platformversion"]=(N.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),p["common.extname"]=this.extensionId,p["common.extversion"]=this.extensionVersion,o&&o.env){switch(p["common.vscodemachineid"]=o.env.machineId,p["common.vscodesessionid"]=o.env.sessionId,p["common.vscodeversion"]=o.version,o.env.uiKind){case o.UIKind.Web:p["common.uikind"]="web";break;case o.UIKind.Desktop:p["common.uikind"]="desktop";break;default:p["common.uikind"]="unknown"}p["common.remotename"]=this.cleanRemoteName(o.env.remoteName)}return p},h.prototype.cleanRemoteName=function(p){if(!p)return"none";var d="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach(function(m){p.indexOf(m+"+")===0&&(d=m)}),d},h.prototype.shouldSendErrorTelemetry=function(){return this.firstParty?this.cleanRemoteName(o.env.remoteName)!=="other"?!0:!(this.extension===void 0||this.extension.extensionKind===o.ExtensionKind.Workspace||o.env.uiKind===o.UIKind.Web):!0},Object.defineProperty(h.prototype,"extension",{get:function(){return this._extension===void 0&&(this._extension=o.extensions.getExtension(this.extensionId)),this._extension},enumerable:!0,configurable:!0}),h.prototype.cloneAndChange=function(p,d){if(p===null||typeof p!="object"||typeof d!="function")return p;var m={};for(var k in p)m[k]=d(k,p[k]);return m},h.prototype.anonymizeFilePaths=function(p,d){if(p==null)return"";var m=[new RegExp(o.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&m.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var k=p;if(d){for(var y=[],E=0,C=m;E<C.length;E++)for(var P=C[E];;){var O=P.exec(p);if(!O)break;y.push([O.index,P.lastIndex])}var U=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,A=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,$=0;k="";for(var x=function(){var M=A.exec(p);if(!M)return"break";!U.test(M[0])&&y.every(function(B){var K=B[0],Y=B[1];return M.index<K||M.index>=Y})&&(k+=p.substring($,M.index)+"<REDACTED: user-file-path>",$=A.lastIndex)};;){var G=x();if(G==="break")break}$<p.length&&(k+=p.substr($))}for(var q=0,L=m;q<L.length;q++){var P=L[q];k=k.replace(P,"")}return k},h.prototype.sendTelemetryEvent=function(p,d,m){var k=this;if(this.userOptIn&&p&&this.appInsightsClient){var y=this.cloneAndChange(d,function(E,C){return k.anonymizeFilePaths(C,k.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+p,properties:y,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.sendTelemetryErrorEvent=function(p,d,m,k){var y=this;if(this.userOptIn&&p&&this.appInsightsClient){var E=this.cloneAndChange(d,function(C,P){return y.shouldSendErrorTelemetry()?y.anonymizeFilePaths(P,y.firstParty):k===void 0||k.indexOf(C)!==-1?"REDACTED":y.anonymizeFilePaths(P,y.firstParty)});this.appInsightsClient.trackEvent({name:this.extensionId+"/"+p,properties:E,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.sendTelemetryException=function(p,d,m){var k=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&p&&this.appInsightsClient){var y=this.cloneAndChange(d,function(E,C){return k.anonymizeFilePaths(C,k.firstParty)});this.appInsightsClient.trackException({exception:p,properties:y,measurements:m}),this.logStream&&this.logStream.write("telemetry/"+p.name+" "+p.message+" "+JSON.stringify({properties:d,measurements:m})+`
`)}},h.prototype.dispose=function(){var p=this;this.configListener.dispose();var d=new Promise(function(k){if(!p.logStream)return k(void 0);p.logStream.on("finish",k),p.logStream.end()}),m=new Promise(function(k){p.appInsightsClient?p.appInsightsClient.flush({callback:function(){p.appInsightsClient=void 0,k(void 0)}}):k(void 0)});return Promise.all([m,d])},h.TELEMETRY_CONFIG_ID="telemetry",h.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",h}();R.Z=a},9035:(u,R,g)=>{"use strict";var _;_={value:!0};var S=g(5654);R.X7=S.getExperimentationService,_=S.getExperimentationServiceAsync;var N=g(2560);R.aU=N.TargetPopulation},5708:(u,R)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});class g{constructor(S){this.mementoGlobalStorage=S}async getValue(S,N){return await this.mementoGlobalStorage.get(S)||N}setValue(S,N){this.mementoGlobalStorage.update(S,N)}}R.MementoKeyValueStorage=g},2560:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(7549);class S{constructor(l,a,h){this.extensionName=l,this.extensionVersion=a,this.targetPopulation=h}static trimVersionSuffix(l){const a=/\-[a-zA-Z0-9]+$/;return l.split(a)[0]}getFilterValue(l){switch(l){case N.ApplicationVersion:return S.trimVersionSuffix(_.version);case N.Build:return _.env.appName;case N.ClientId:return _.env.machineId;case N.ExtensionName:return this.extensionName;case N.ExtensionVersion:return S.trimVersionSuffix(this.extensionVersion);case N.Language:return _.env.language;case N.TargetPopulation:return this.targetPopulation;default:return""}}getFilters(){let l=new Map,a=Object.values(N);for(let h of a)l.set(h,this.getFilterValue(h));return l}}R.VSCodeFilterProvider=S;var N;(function(o){o.Market="X-MSEdge-Market",o.CorpNet="X-FD-Corpnet",o.ApplicationVersion="X-VSCode-AppVersion",o.Build="X-VSCode-Build",o.ClientId="X-MSEdge-ClientId",o.ExtensionName="X-VSCode-ExtensionName",o.ExtensionVersion="X-VSCode-ExtensionVersion",o.Language="X-VSCode-Language",o.TargetPopulation="X-VSCode-TargetPopulation"})(N=R.Filters||(R.Filters={}));var f;(function(o){o.Team="team",o.Internal="internal",o.Insiders="insider",o.Public="public"})(f=R.TargetPopulation||(R.TargetPopulation={}))},5654:(u,R,g)=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});const _=g(2560),S=g(4802),N=g(5708),f="https://default.exp-tas.com/vscode/ab",o="query-expfeature",l="VSCode.ABExp.Features",a="abexp.assignmentcontext",h="VSCode.ABExp.FeatureData",p=1e3*60*30;function d(k,y,E,C,P,...O){if(!P)throw new Error("Memento storage was not provided.");const A=[new _.VSCodeFilterProvider(k,y,E),...O],$=new N.MementoKeyValueStorage(P);return new S.ExperimentationService({filterProviders:A,telemetry:C,storageKey:h,keyValueStorage:$,featuresTelemetryPropertyName:l,assignmentContextTelemetryPropertyName:a,telemetryEventName:o,endpoint:f,refetchInterval:p})}R.getExperimentationService=d;async function m(k,y,E,C,P,...O){const U=d(k,y,E,C,P,...O);return await U.initializePromise,U}R.getExperimentationServiceAsync=m},2479:u=>{u.exports=R;function R(g,_){if(g&&_)return R(g)(_);if(typeof g!="function")throw new TypeError("need wrapper function");return Object.keys(g).forEach(function(N){S[N]=g[N]}),S;function S(){for(var N=new Array(arguments.length),f=0;f<N.length;f++)N[f]=arguments[f];var o=g.apply(this,N),l=N[N.length-1];return typeof o=="function"&&o!==l&&Object.keys(l).forEach(function(a){o[a]=l[a]}),o}}},9602:u=>{"use strict";u.exports=function(R){R.prototype[Symbol.iterator]=function*(){for(let g=this.head;g;g=g.next)yield g.value}}},4411:(u,R,g)=>{"use strict";u.exports=_,_.Node=o,_.create=_;function _(l){var a=this;if(a instanceof _||(a=new _),a.tail=null,a.head=null,a.length=0,l&&typeof l.forEach=="function")l.forEach(function(d){a.push(d)});else if(arguments.length>0)for(var h=0,p=arguments.length;h<p;h++)a.push(arguments[h]);return a}_.prototype.removeNode=function(l){if(l.list!==this)throw new Error("removing node which does not belong to this list");var a=l.next,h=l.prev;return a&&(a.prev=h),h&&(h.next=a),l===this.head&&(this.head=a),l===this.tail&&(this.tail=h),l.list.length--,l.next=null,l.prev=null,l.list=null,a},_.prototype.unshiftNode=function(l){if(l!==this.head){l.list&&l.list.removeNode(l);var a=this.head;l.list=this,l.next=a,a&&(a.prev=l),this.head=l,this.tail||(this.tail=l),this.length++}},_.prototype.pushNode=function(l){if(l!==this.tail){l.list&&l.list.removeNode(l);var a=this.tail;l.list=this,l.prev=a,a&&(a.next=l),this.tail=l,this.head||(this.head=l),this.length++}},_.prototype.push=function(){for(var l=0,a=arguments.length;l<a;l++)N(this,arguments[l]);return this.length},_.prototype.unshift=function(){for(var l=0,a=arguments.length;l<a;l++)f(this,arguments[l]);return this.length},_.prototype.pop=function(){if(!!this.tail){var l=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,l}},_.prototype.shift=function(){if(!!this.head){var l=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,l}},_.prototype.forEach=function(l,a){a=a||this;for(var h=this.head,p=0;h!==null;p++)l.call(a,h.value,p,this),h=h.next},_.prototype.forEachReverse=function(l,a){a=a||this;for(var h=this.tail,p=this.length-1;h!==null;p--)l.call(a,h.value,p,this),h=h.prev},_.prototype.get=function(l){for(var a=0,h=this.head;h!==null&&a<l;a++)h=h.next;if(a===l&&h!==null)return h.value},_.prototype.getReverse=function(l){for(var a=0,h=this.tail;h!==null&&a<l;a++)h=h.prev;if(a===l&&h!==null)return h.value},_.prototype.map=function(l,a){a=a||this;for(var h=new _,p=this.head;p!==null;)h.push(l.call(a,p.value,this)),p=p.next;return h},_.prototype.mapReverse=function(l,a){a=a||this;for(var h=new _,p=this.tail;p!==null;)h.push(l.call(a,p.value,this)),p=p.prev;return h},_.prototype.reduce=function(l,a){var h,p=this.head;if(arguments.length>1)h=a;else if(this.head)p=this.head.next,h=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=0;p!==null;d++)h=l(h,p.value,d),p=p.next;return h},_.prototype.reduceReverse=function(l,a){var h,p=this.tail;if(arguments.length>1)h=a;else if(this.tail)p=this.tail.prev,h=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var d=this.length-1;p!==null;d--)h=l(h,p.value,d),p=p.prev;return h},_.prototype.toArray=function(){for(var l=new Array(this.length),a=0,h=this.head;h!==null;a++)l[a]=h.value,h=h.next;return l},_.prototype.toArrayReverse=function(){for(var l=new Array(this.length),a=0,h=this.tail;h!==null;a++)l[a]=h.value,h=h.prev;return l},_.prototype.slice=function(l,a){a=a||this.length,a<0&&(a+=this.length),l=l||0,l<0&&(l+=this.length);var h=new _;if(a<l||a<0)return h;l<0&&(l=0),a>this.length&&(a=this.length);for(var p=0,d=this.head;d!==null&&p<l;p++)d=d.next;for(;d!==null&&p<a;p++,d=d.next)h.push(d.value);return h},_.prototype.sliceReverse=function(l,a){a=a||this.length,a<0&&(a+=this.length),l=l||0,l<0&&(l+=this.length);var h=new _;if(a<l||a<0)return h;l<0&&(l=0),a>this.length&&(a=this.length);for(var p=this.length,d=this.tail;d!==null&&p>a;p--)d=d.prev;for(;d!==null&&p>l;p--,d=d.prev)h.push(d.value);return h},_.prototype.splice=function(l,a,...h){l>this.length&&(l=this.length-1),l<0&&(l=this.length+l);for(var p=0,d=this.head;d!==null&&p<l;p++)d=d.next;for(var m=[],p=0;d&&p<a;p++)m.push(d.value),d=this.removeNode(d);d===null&&(d=this.tail),d!==this.head&&d!==this.tail&&(d=d.prev);for(var p=0;p<h.length;p++)d=S(this,d,h[p]);return m},_.prototype.reverse=function(){for(var l=this.head,a=this.tail,h=l;h!==null;h=h.prev){var p=h.prev;h.prev=h.next,h.next=p}return this.head=a,this.tail=l,this};function S(l,a,h){var p=a===l.head?new o(h,null,a,l):new o(h,a,a.next,l);return p.next===null&&(l.tail=p),p.prev===null&&(l.head=p),l.length++,p}function N(l,a){l.tail=new o(a,l.tail,null,l),l.head||(l.head=l.tail),l.length++}function f(l,a){l.head=new o(a,null,l.head,l),l.tail||(l.tail=l.head),l.length++}function o(l,a,h,p){if(!(this instanceof o))return new o(l,a,h,p);this.list=p,this.value=l,a?(a.next=this,this.prev=a):this.prev=null,h?(h.prev=this,this.next=h):this.next=null}try{g(9602)(_)}catch(l){}},9329:(u,R,g)=>{u.exports=g(516).Observable},516:(u,R)=>{"use strict";var g;g={value:!0},R.Observable=void 0;function _(q,L){if(!(q instanceof L))throw new TypeError("Cannot call a class as a function")}function S(q,L){for(var M=0;M<L.length;M++){var B=L[M];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(q,B.key,B)}}function N(q,L,M){return L&&S(q.prototype,L),M&&S(q,M),q}var f=function(){return typeof Symbol=="function"},o=function(q){return f()&&Boolean(Symbol[q])},l=function(q){return o(q)?Symbol[q]:"@@"+q};f()&&!o("observable")&&(Symbol.observable=Symbol("observable"));var a=l("iterator"),h=l("observable"),p=l("species");function d(q,L){var M=q[L];if(M!=null){if(typeof M!="function")throw new TypeError(M+" is not a function");return M}}function m(q){var L=q.constructor;return L!==void 0&&(L=L[p],L===null&&(L=void 0)),L!==void 0?L:G}function k(q){return q instanceof G}function y(q){y.log?y.log(q):setTimeout(function(){throw q})}function E(q){Promise.resolve().then(function(){try{q()}catch(L){y(L)}})}function C(q){var L=q._cleanup;if(L!==void 0&&(q._cleanup=void 0,!!L))try{if(typeof L=="function")L();else{var M=d(L,"unsubscribe");M&&M.call(L)}}catch(B){y(B)}}function P(q){q._observer=void 0,q._queue=void 0,q._state="closed"}function O(q){var L=q._queue;if(!!L){q._queue=void 0,q._state="ready";for(var M=0;M<L.length&&(U(q,L[M].type,L[M].value),q._state!=="closed");++M);}}function U(q,L,M){q._state="running";var B=q._observer;try{var K=d(B,L);switch(L){case"next":K&&K.call(B,M);break;case"error":if(P(q),K)K.call(B,M);else throw M;break;case"complete":P(q),K&&K.call(B);break}}catch(Y){y(Y)}q._state==="closed"?C(q):q._state==="running"&&(q._state="ready")}function A(q,L,M){if(q._state!=="closed"){if(q._state==="buffering"){q._queue.push({type:L,value:M});return}if(q._state!=="ready"){q._state="buffering",q._queue=[{type:L,value:M}],E(function(){return O(q)});return}U(q,L,M)}}var $=function(){function q(L,M){_(this,q),this._cleanup=void 0,this._observer=L,this._queue=void 0,this._state="initializing";var B=new x(this);try{this._cleanup=M.call(void 0,B)}catch(K){B.error(K)}this._state==="initializing"&&(this._state="ready")}return N(q,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(P(this),C(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),q}(),x=function(){function q(L){_(this,q),this._subscription=L}return N(q,[{key:"next",value:function(M){A(this._subscription,"next",M)}},{key:"error",value:function(M){A(this._subscription,"error",M)}},{key:"complete",value:function(){A(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),q}(),G=function(){function q(L){if(_(this,q),!(this instanceof q))throw new TypeError("Observable cannot be called as a function");if(typeof L!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=L}return N(q,[{key:"subscribe",value:function(M){return(typeof M!="object"||M===null)&&(M={next:M,error:arguments[1],complete:arguments[2]}),new $(M,this._subscriber)}},{key:"forEach",value:function(M){var B=this;return new Promise(function(K,Y){if(typeof M!="function"){Y(new TypeError(M+" is not a function"));return}function Q(){re.unsubscribe(),K()}var re=B.subscribe({next:function(de){try{M(de,Q)}catch(pe){Y(pe),re.unsubscribe()}},error:Y,complete:K})})}},{key:"map",value:function(M){var B=this;if(typeof M!="function")throw new TypeError(M+" is not a function");var K=m(this);return new K(function(Y){return B.subscribe({next:function(Q){try{Q=M(Q)}catch(re){return Y.error(re)}Y.next(Q)},error:function(Q){Y.error(Q)},complete:function(){Y.complete()}})})}},{key:"filter",value:function(M){var B=this;if(typeof M!="function")throw new TypeError(M+" is not a function");var K=m(this);return new K(function(Y){return B.subscribe({next:function(Q){try{if(!M(Q))return}catch(re){return Y.error(re)}Y.next(Q)},error:function(Q){Y.error(Q)},complete:function(){Y.complete()}})})}},{key:"reduce",value:function(M){var B=this;if(typeof M!="function")throw new TypeError(M+" is not a function");var K=m(this),Y=arguments.length>1,Q=!1,re=arguments[1],de=re;return new K(function(pe){return B.subscribe({next:function(_e){var ne=!Q;if(Q=!0,!ne||Y)try{de=M(de,_e)}catch(oe){return pe.error(oe)}else de=_e},error:function(_e){pe.error(_e)},complete:function(){if(!Q&&!Y)return pe.error(new TypeError("Cannot reduce an empty sequence"));pe.next(de),pe.complete()}})})}},{key:"concat",value:function(){for(var M=this,B=arguments.length,K=new Array(B),Y=0;Y<B;Y++)K[Y]=arguments[Y];var Q=m(this);return new Q(function(re){var de,pe=0;function _e(ne){de=ne.subscribe({next:function(oe){re.next(oe)},error:function(oe){re.error(oe)},complete:function(){pe===K.length?(de=void 0,re.complete()):_e(Q.from(K[pe++]))}})}return _e(M),function(){de&&(de.unsubscribe(),de=void 0)}})}},{key:"flatMap",value:function(M){var B=this;if(typeof M!="function")throw new TypeError(M+" is not a function");var K=m(this);return new K(function(Y){var Q=[],re=B.subscribe({next:function(pe){if(M)try{pe=M(pe)}catch(ne){return Y.error(ne)}var _e=K.from(pe).subscribe({next:function(ne){Y.next(ne)},error:function(ne){Y.error(ne)},complete:function(){var ne=Q.indexOf(_e);ne>=0&&Q.splice(ne,1),de()}});Q.push(_e)},error:function(pe){Y.error(pe)},complete:function(){de()}});function de(){re.closed&&Q.length===0&&Y.complete()}return function(){Q.forEach(function(pe){return pe.unsubscribe()}),re.unsubscribe()}})}},{key:h,value:function(){return this}}],[{key:"from",value:function(M){var B=typeof this=="function"?this:q;if(M==null)throw new TypeError(M+" is not an object");var K=d(M,h);if(K){var Y=K.call(M);if(Object(Y)!==Y)throw new TypeError(Y+" is not an object");return k(Y)&&Y.constructor===B?Y:new B(function(Q){return Y.subscribe(Q)})}if(o("iterator")&&(K=d(M,a),K))return new B(function(Q){E(function(){if(!Q.closed){var re=!0,de=!1,pe=void 0;try{for(var _e=K.call(M)[Symbol.iterator](),ne;!(re=(ne=_e.next()).done);re=!0){var oe=ne.value;if(Q.next(oe),Q.closed)return}}catch(se){de=!0,pe=se}finally{try{!re&&_e.return!=null&&_e.return()}finally{if(de)throw pe}}Q.complete()}})});if(Array.isArray(M))return new B(function(Q){E(function(){if(!Q.closed){for(var re=0;re<M.length;++re)if(Q.next(M[re]),Q.closed)return;Q.complete()}})});throw new TypeError(M+" is not observable")}},{key:"of",value:function(){for(var M=arguments.length,B=new Array(M),K=0;K<M;K++)B[K]=arguments[K];var Y=typeof this=="function"?this:q;return new Y(function(Q){E(function(){if(!Q.closed){for(var re=0;re<B.length;++re)if(Q.next(B[re]),Q.closed)return;Q.complete()}})})}},{key:p,get:function(){return this}}]),q}();R.Observable=G,f()&&Object.defineProperty(G,Symbol("extensions"),{value:{symbol:h,hostReportError:y},configurable:!0})},8921:u=>{"use strict";u.exports=require("@opentelemetry/tracing")},6591:u=>{"use strict";u.exports=require("applicationinsights-native-metrics")},2357:u=>{"use strict";u.exports=require("assert")},7303:u=>{"use strict";u.exports=require("async_hooks")},3129:u=>{"use strict";u.exports=require("child_process")},7082:u=>{"use strict";u.exports=require("console")},7619:u=>{"use strict";u.exports=require("constants")},6417:u=>{"use strict";u.exports=require("crypto")},881:u=>{"use strict";u.exports=require("dns")},8614:u=>{"use strict";u.exports=require("events")},5747:u=>{"use strict";u.exports=require("fs")},8605:u=>{"use strict";u.exports=require("http")},7211:u=>{"use strict";u.exports=require("https")},2282:u=>{"use strict";u.exports=require("module")},1631:u=>{"use strict";u.exports=require("net")},2087:u=>{"use strict";u.exports=require("os")},5622:u=>{"use strict";u.exports=require("path")},2413:u=>{"use strict";u.exports=require("stream")},8213:u=>{"use strict";u.exports=require("timers")},4016:u=>{"use strict";u.exports=require("tls")},3867:u=>{"use strict";u.exports=require("tty")},8835:u=>{"use strict";u.exports=require("url")},1669:u=>{"use strict";u.exports=require("util")},7549:u=>{"use strict";u.exports=require("vscode")},8761:u=>{"use strict";u.exports=require("zlib")}},eo={};function Re(u){var R=eo[u];if(R!==void 0)return R.exports;var g=eo[u]={id:u,loaded:!1,exports:{}};return pc[u].call(g.exports,g,g.exports,Re),g.loaded=!0,g.exports}(()=>{Re.n=u=>{var R=u&&u.__esModule?()=>u.default:()=>u;return Re.d(R,{a:R}),R}})(),(()=>{Re.d=(u,R)=>{for(var g in R)Re.o(R,g)&&!Re.o(u,g)&&Object.defineProperty(u,g,{enumerable:!0,get:R[g]})}})(),(()=>{Re.hmd=u=>(u=Object.create(u),u.children||(u.children=[]),Object.defineProperty(u,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+u.id)}}),u)})(),(()=>{Re.o=(u,R)=>Object.prototype.hasOwnProperty.call(u,R)})(),(()=>{Re.r=u=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})}})();var ys={};(()=>{"use strict";Re.r(ys),Re.d(ys,{activate:()=>Kg,deactivate:()=>Xg});var u=Re(7549),R=Re(4398),g=Object.defineProperty,_=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?g(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),S;(function(t){t[t.Info=0]="Info",t[t.Debug=1]="Debug",t[t.Off=2]="Off"})(S||(S={}));const N="githubPullRequests",f="logLevel";class o{constructor(){_(this,"_outputChannel"),_(this,"_logLevel"),_(this,"_disposable"),this._outputChannel=u.window.createOutputChannel("GitHub Pull Request"),this._disposable=u.workspace.onDidChangeConfiguration(()=>{this.getLogLevel()}),this.getLogLevel()}appendLine(e,r){switch(this._logLevel){case 2:return;case 1:const i=`${new Date().getTime()/1e3}s`,s=r?`${r}> ${e}`:`${e}`;this._outputChannel.appendLine(`[Debug ${i}] ${s}`);return;case 0:default:this._outputChannel.appendLine("[Info] "+(r?`${r}> ${e}`:`${e}`));return}}debug(e,r){this._logLevel===1&&this.appendLine(e,r)}dispose(){this._disposable&&this._disposable.dispose()}getLogLevel(){switch(u.workspace.getConfiguration(N).get(f)){case"debug":this._logLevel=1;break;case"off":this._logLevel=2;break;case"info":default:this._logLevel=0;break}}}const a=new o;var h=Re(5622),p=Re(7484),d=Re.n(p),m=Re(4110),k=Re.n(m),y=Re(660),E=Re.n(y),C=Object.defineProperty,P=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?C(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);d().extend(k(),{thresholds:[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:6,d:"day"},{l:"w",r:7},{l:"ww",r:3,d:"week"},{l:"M",r:4},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}]}),d().extend(E()),d().updateLocale("en",{relativeTime:{future:"in %s",past:"%s ago",s:"seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"}});function O(t,e){const r=Object.create(null);return t.filter(n=>{const i=e(n);return r[i]?!1:(r[i]=!0,!0)})}function U(t){return t.forEach(e=>e.dispose()),[]}function A(t){return{dispose:t}}function $(t){return A(()=>U(t))}function x(...t){return(e,r=null,n)=>{const i=$(t.map(s=>s(c=>e.call(r,c))));return n&&n.push(i),i}}function G(t,e){return(r,n=null,i)=>t(s=>e(s)&&r.call(n,s),null,i)}function q(t){return(e,r=null,n)=>{const i=t(s=>(i.dispose(),e.call(r,s)),null,n);return i}}function L(t){return/^[a-zA-Z]:\\/.test(t)}function M(t,e){return t===e?!0:(t.charAt(t.length-1)!==sep&&(t+=sep),L(t)&&(t=t.toLowerCase(),e=e.toLowerCase()),e.startsWith(t))}function B(t,e){return t.reduce((r,n)=>{const i=e(n);return r[i]=[...r[i]||[],n],r},Object.create(null))}function K(t){return!!t.errors}function Y(t){let e=!0;if(!!t.errors&&Array.isArray(t.errors)){for(const r of t.errors)if(!r.field||!r.value||!r.code){e=!1;break}}else e=!1;return e}function Q(t){if(!(t instanceof Error))return typeof t=="string"?t:t.gitErrorCode?`${t.message}. Please check git output for more details`:t.stderr?`${t.stderr}. Please check git output for more details`:"Error";let e=t.message,r;if(t.message==="Validation Failed"&&Y(t))r=t.errors.map(n=>`Value "${n.value}" cannot be set for field ${n.field} (code: ${n.code})`).join(", ");else if(K(t)&&t.errors)return t.errors.map(n=>typeof n=="string"?n:n.message).join(", ");return r&&(e=`${e}: ${r}`),e}const re=(t,e)=>e(t);async function de(t,e=re){let r;return new Promise((n,i)=>r=t(s=>{try{Promise.resolve(e(s,n,i)).catch(i)}catch(c){i(c)}})).then(n=>(r.dispose(),n),n=>{throw r.dispose(),n})}function pe(t){const e=dayjs(t),r=Date.now();return e.diff(r,"month"),e.diff(r,"month")<1?e.fromNow():e.diff(r,"year")<1?`on ${e.format("MMM D")}`:`on ${e.format("MMM D, YYYY")}`}var _e;(function(t){t[t.Period=46]="Period",t[t.Slash=47]="Slash",t[t.A=65]="A",t[t.Z=90]="Z",t[t.Backslash=92]="Backslash",t[t.a=97]="a",t[t.z=122]="z"})(_e||(_e={}));function ne(t,e){return t<e?-1:t>e?1:0}function oe(t,e,r=0,n=t.length,i=0,s=e.length){for(;r<n&&i<s;r++,i++){const w=t.charCodeAt(r),T=e.charCodeAt(i);if(w<T)return-1;if(w>T)return 1}const c=n-r,v=s-i;return c<v?-1:c>v?1:0}function se(t,e){return ye(t,e,0,t.length,0,e.length)}function ye(t,e,r=0,n=t.length,i=0,s=e.length){for(;r<n&&i<s;r++,i++){let w=t.charCodeAt(r),T=e.charCodeAt(i);if(w===T)continue;const D=w-T;if(!(D===32&&De(T))&&!(D===-32&&De(w)))return be(w)&&be(T)?D:oe(t.toLowerCase(),e.toLowerCase(),r,n,i,s)}const c=n-r,v=s-i;return c<v?-1:c>v?1:0}function be(t){return t>=97&&t<=122}function De(t){return t>=65&&t<=90}class ge{constructor(){P(this,"_value",""),P(this,"_pos",0)}reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){const r=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return r-n}value(){return this._value[this._pos]}}class we{constructor(e=!0){this._caseSensitive=e,P(this,"_value"),P(this,"_from"),P(this,"_to")}reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?oe(e,this._value,0,e.length,this._from,this._to):ye(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}class Ee{constructor(e=!0,r=!0){this._splitOnBackslash=e,this._caseSensitive=r,P(this,"_value"),P(this,"_from"),P(this,"_to")}reset(e){return this._value=e.replace(/\\$|\/$/,""),this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++){const r=this._value.charCodeAt(this._to);if(r===47||this._splitOnBackslash&&r===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?oe(e,this._value,0,e.length,this._from,this._to):ye(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}}var Ue;(function(t){t[t.Scheme=1]="Scheme",t[t.Authority=2]="Authority",t[t.Path=3]="Path",t[t.Query=4]="Query",t[t.Fragment=5]="Fragment"})(Ue||(Ue={}));class Ze{constructor(e){this._ignorePathCasing=e,P(this,"_pathIterator"),P(this,"_value"),P(this,"_states",[]),P(this,"_stateIdx",0)}reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Ee(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return se(e,this._value.scheme);if(this._states[this._stateIdx]===2)return se(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return ne(e,this._value.query);if(this._states[this._stateIdx]===5)return ne(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}}class Ge{constructor(){P(this,"segment"),P(this,"value"),P(this,"key"),P(this,"left"),P(this,"mid"),P(this,"right")}isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}}class ze{constructor(e){P(this,"_iter"),P(this,"_root"),this._iter=e}static forUris(e=()=>!1){return new ze(new Ze(e))}static forPaths(){return new ze(new Ee)}static forStrings(){return new ze(new ge)}static forConfigKeys(){return new ze(new we)}clear(){this._root=void 0}set(e,r){const n=this._iter.reset(e);let i;for(this._root||(this._root=new Ge,this._root.segment=n.value()),i=this._root;;){const c=n.cmp(i.segment);if(c>0)i.left||(i.left=new Ge,i.left.segment=n.value()),i=i.left;else if(c<0)i.right||(i.right=new Ge,i.right.segment=n.value()),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Ge,i.mid.segment=n.value()),i=i.mid;else break}const s=i.value;return i.value=r,i.key=e,s}get(e){var r;return(r=this._getNode(e))==null?void 0:r.value}_getNode(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else break}return n}has(e){const r=this._getNode(e);return!((r==null?void 0:r.value)===void 0&&(r==null?void 0:r.mid)===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,r){const n=this._iter.reset(e),i=[];let s=this._root;for(;s;){const c=n.cmp(s.segment);if(c>0)i.push([1,s]),s=s.left;else if(c<0)i.push([-1,s]),s=s.right;else if(n.hasNext())n.next(),i.push([0,s]),s=s.mid;else{for(r?(s.left=void 0,s.mid=void 0,s.right=void 0):s.value=void 0;i.length>0&&s.isEmpty();){let[v,w]=i.pop();switch(v){case 1:w.left=void 0;break;case 0:w.mid=void 0;break;case-1:w.right=void 0;break}s=w}break}}}findSubstr(e){const r=this._iter.reset(e);let n=this._root,i;for(;n;){const s=r.cmp(n.segment);if(s>0)n=n.left;else if(s<0)n=n.right;else if(r.hasNext())r.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){const r=this._iter.reset(e);let n=this._root;for(;n;){const i=r.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(r.hasNext())r.next(),n=n.mid;else return n.mid?this._entries(n.mid):void 0}}forEach(e){for(const[r,n]of this)e(n,r)}*[Symbol.iterator](){yield*this._entries(this._root)}*_entries(e){e&&(yield*this._entries(e.left),e.value&&(yield[e.key,e.value]),yield*this._entries(e.mid),yield*this._entries(e.right))}}var Te=Object.defineProperty,Ne=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Te(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Pe;(function(t){t[t.Head=0]="Head",t[t.RemoteHead=1]="RemoteHead",t[t.Tag=2]="Tag"})(Pe||(Pe={}));var et;(function(t){t.BadConfigFile="BadConfigFile",t.AuthenticationFailed="AuthenticationFailed",t.NoUserNameConfigured="NoUserNameConfigured",t.NoUserEmailConfigured="NoUserEmailConfigured",t.NoRemoteRepositorySpecified="NoRemoteRepositorySpecified",t.NotAGitRepository="NotAGitRepository",t.NotAtRepositoryRoot="NotAtRepositoryRoot",t.Conflict="Conflict",t.StashConflict="StashConflict",t.UnmergedChanges="UnmergedChanges",t.PushRejected="PushRejected",t.RemoteConnectionError="RemoteConnectionError",t.DirtyWorkTree="DirtyWorkTree",t.CantOpenResource="CantOpenResource",t.GitNotFound="GitNotFound",t.CantCreatePipe="CantCreatePipe",t.CantAccessRemote="CantAccessRemote",t.RepositoryNotFound="RepositoryNotFound",t.RepositoryIsLocked="RepositoryIsLocked",t.BranchNotFullyMerged="BranchNotFullyMerged",t.NoRemoteReference="NoRemoteReference",t.InvalidBranchName="InvalidBranchName",t.BranchAlreadyExists="BranchAlreadyExists",t.NoLocalChanges="NoLocalChanges",t.NoStashFound="NoStashFound",t.LocalChangesOverwritten="LocalChangesOverwritten",t.NoUpstreamBranch="NoUpstreamBranch",t.IsInSubmodule="IsInSubmodule",t.WrongCase="WrongCase",t.CantLockRef="CantLockRef",t.CantRebaseMultipleBranches="CantRebaseMultipleBranches",t.PatchDoesNotApply="PatchDoesNotApply"})(et||(et={}));const ie=class{constructor(){Ne(this,"_providers",new Map),Ne(this,"_onDidOpenRepository",new u.EventEmitter),Ne(this,"onDidOpenRepository",this._onDidOpenRepository.event),Ne(this,"_onDidCloseRepository",new u.EventEmitter),Ne(this,"onDidCloseRepository",this._onDidCloseRepository.event),Ne(this,"_onDidChangeState",new u.EventEmitter),Ne(this,"onDidChangeState",this._onDidChangeState.event),Ne(this,"_onDidPublish",new u.EventEmitter),Ne(this,"onDidPublish",this._onDidPublish.event),Ne(this,"_disposables"),this._disposables=[]}get repositories(){const t=[];return this._providers.forEach(({repositories:e})=>{e&&t.push(...e)}),t}get state(){if(this._providers.size!==0){for(const[,{state:t}]of this._providers)if(t!=="initialized")return"uninitialized";return"initialized"}}_updateReposContext(){const t=Array.from(this._providers.values()).reduce((e,r)=>e+r.repositories.length,0);u.commands.executeCommand("setContext","gitHubOpenRepositoryCount",t)}registerGitProvider(t){a.appendLine("Registering git provider");const e=this._nextHandle();return this._providers.set(e,t),this._disposables.push(t.onDidCloseRepository(r=>this._onDidCloseRepository.fire(r))),this._disposables.push(t.onDidOpenRepository(r=>{a.appendLine(`Repository ${r.rootUri} has been opened`),this._updateReposContext(),this._onDidOpenRepository.fire(r)})),t.onDidChangeState&&this._disposables.push(t.onDidChangeState(r=>this._onDidChangeState.fire(r))),t.onDidPublish&&this._disposables.push(t.onDidPublish(r=>this._onDidPublish.fire(r))),this._updateReposContext(),t.repositories.forEach(r=>{this._onDidOpenRepository.fire(r)}),{dispose:()=>{const r=t==null?void 0:t.repositories;r&&r.length>0&&r.forEach(n=>this._onDidCloseRepository.fire(n)),this._providers.delete(e)}}}getGitProvider(t){const e=ze.forUris();return this._providers.forEach(r=>{const n=r.repositories;if(n&&n.length>0)for(const i of n)e.set(i.rootUri,r)}),e.findSubstr(t)}_nextHandle(){return ie._handlePool++}dispose(){this._disposables.forEach(t=>t.dispose())}};let Ut=ie;Ne(Ut,"_handlePool",0);const $t=new Map;function xt(t,e){$t.set(t,e)}function Le(t){$t.delete(t)}function Mt(t){for(const e of $t.values())if(e.hasCommentThread(t))return e;a.appendLine(`Unable to find handler for comment thread ${t.threadId}`)}function Wt(t){return JSON.parse(t)}function dt(t){try{return JSON.parse(t.query)}catch(e){}}function Zr(t){try{return JSON.parse(t.query)}catch(e){}}const $e=["image/png","image/gif","image/jpeg","image/webp","image/tiff","image/bmp"],Ar=u.Uri.parse("data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==");async function fr(t,e){try{const{commit:r,baseCommit:n,headCommit:i,isBase:s}=JSON.parse(t.query),c=t.scheme==="review"?r:s?n:i,{size:v,object:w}=await e.getObjectDetails(c,t.fsPath),{mimetype:T}=await e.detectObjectType(w);if(T==="text/plain")return;if($e.indexOf(T)>-1){const D=await e.buffer(c,t.fsPath);return u.Uri.parse(`data:${T};label:${h.basename(t.fsPath)};description:${c};size:${v};base64,${D.toString("base64")}`)}}catch(r){return}}function St(t,e,r,n,i,s,c){const v={path:e||t.path,ref:r,commit:n,base:s.base,isOutdated:i,rootPath:c.path};let w=t.path;return s.replaceFileExtension&&(w=`${w}.git`),t.with({scheme:"review",path:w,query:JSON.stringify(v)})}function Fr(t,e,r,n){const i={prNumber:e,fileName:r,status:n};return t.with({scheme:"filechange",query:JSON.stringify(i)})}function it(t){try{return t.query?JSON.parse(t.query):void 0}catch(e){}}function st(t,e,r,n,i,s,c){const v={baseCommit:r,headCommit:n,isBase:s,fileName:i,prNumber:e.number,status:c,remoteName:e.githubRepository.remote.remoteName},w=t.path;return t.with({scheme:"pr",path:w,query:JSON.stringify(v)})}var Dt;(function(t){t.file="file"})(Dt||(Dt={}));function Tt(t,e){return t.scheme===Dt.file?h.resolve(t.fsPath,e):h.posix.resolve(t.path,e)}class Ht extends u.EventEmitter{handleUri(e){this.fire(e)}}const Gt=new Ht,tt="GitHub.vscode-pull-request-github",Ae="git",ht="ghpr",ve="initialize",Or="statechange",Vt="github:focusedReview",Se=require("buffer");var en=Re(4063),tn=Re.n(en),Qe;(function(t){t.LEFT="LEFT",t.RIGHT="RIGHT"})(Qe||(Qe={}));var ft;(function(t){t.DISMISSED="DISMISSED",t.VIEWED="VIEWED",t.UNVIEWED="UNVIEWED"})(ft||(ft={}));var Ce;(function(t){t[t.ADD=0]="ADD",t[t.COPY=1]="COPY",t[t.DELETE=2]="DELETE",t[t.MODIFY=3]="MODIFY",t[t.RENAME=4]="RENAME",t[t.TYPE=5]="TYPE",t[t.UNKNOWN=6]="UNKNOWN",t[t.UNMERGED=7]="UNMERGED"})(Ce||(Ce={}));class xr{constructor(e,r,n,i,s,c,v,w){this.baseCommit=e,this.status=r,this.fileName=n,this.previousFileName=i,this.patch=s,this.diffHunks=c,this.isPartial=v,this.blobUrl=w}}class Mr{constructor(e,r,n,i,s){this.baseCommit=e,this.blobUrl=r,this.status=n,this.fileName=i,this.previousFileName=s}}var rn=Object.defineProperty,nn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?rn(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),We;(function(t){t[t.Context=0]="Context",t[t.Add=1]="Add",t[t.Delete=2]="Delete",t[t.Control=3]="Control"})(We||(We={}));class Lr{constructor(e,r,n,i,s,c=!0){this.type=e,this.oldLineNumber=r,this.newLineNumber=n,this.positionInHunk=i,this._raw=s,this.endwithLineBreak=c}get raw(){return this._raw}get text(){return this._raw.substr(1)}}function sn(t){switch(t[0]){case" ":return 0;case"+":return 1;case"-":return 2;default:return 3}}class an{constructor(e,r,n,i,s){this.oldLineNumber=e,this.oldLength=r,this.newLineNumber=n,this.newLength=i,this.positionInHunk=s,nn(this,"diffLines",[])}}const qr=/^@@ \-(\d+)(,(\d+))?( \+(\d+)(,(\d+)?)?)? @@/;function on(t){let e=0,r=0;for(;(r=t.indexOf("\r",r))!==-1;)r++,e++;return e}function*un(t){let e=0;for(;e!==-1&&e<t.length;){const r=e;e=t.indexOf(`
`,e);let i=(e!==-1?e:t.length)-r;e!==-1&&(e>0&&t[e-1]==="\r"&&i--,e++),yield t.substr(r,i)}}function*kt(t){const e=un(t);let r=e.next(),n,i=-1,s=-1,c=-1;for(;!r.done;){const v=r.value;if(qr.test(v)){n&&(yield n,n=void 0),i===-1&&(i=0);const w=qr.exec(v),T=s=Number(w[1]),D=Number(w[3])||1,H=c=Number(w[5]),V=Number(w[7])||1;n=new an(T,D,H,V,i),n.diffLines.push(new Lr(3,-1,-1,i,v))}else if(n){const w=sn(v);if(w===3)n.diffLines&&n.diffLines.length&&(n.diffLines[n.diffLines.length-1].endwithLineBreak=!1);else{n.diffLines.push(new Lr(w,w!==1?s:-1,w!==2?c:-1,i,v));const T=1+on(v);switch(w){case 0:s+=T,c+=T;break;case 2:s+=T;break;case 1:c+=T;break}}}i!==-1&&++i,r=e.next()}n&&(yield n)}function gr(t){const e=kt(t);let r=e.next();const n=[],i=[];for(;!r.done;){const s=r.value;n.push(s);for(let c=0;c<s.diffLines.length;c++){const v=s.diffLines[c];if(!(v.type===2||v.type===3))if(v.type===1)i.push(v.text);else{const w=v.text;i.push(w)}}r=e.next()}return n}function ln(t,e){const r=t.split(/\r?\n/),n=kt(e);let i=n.next();const s=[],c=[];let v=0;for(;!i.done;){const w=i.value;s.push(w);const T=w.oldLineNumber;for(let D=v+1;D<T;D++)c.push(r[D-1]);v=T+w.oldLength-1;for(let D=0;D<w.diffLines.length;D++){const H=w.diffLines[D];if(!(H.type===2||H.type===3))if(H.type===1)c.push(H.text);else{const V=H.text;c.push(V)}}i=n.next()}if(v<r.length)for(let w=v+1;w<=r.length;w++)c.push(r[w-1]);return c.join(`
`)}function vr(t){switch(t){case"removed":return Ce.DELETE;case"added":return Ce.ADD;case"renamed":return Ce.RENAME;case"modified":return Ce.MODIFY;default:return Ce.UNKNOWN}}async function b(t,e,r){const n=[];for(let i=0;i<t.length;i++){const s=t[i],c=vr(s.status);if(!s.patch){n.push(new Mr(r,s.blob_url,c,s.filename,s.previous_filename));continue}let v=!1;switch(c){case Ce.DELETE:case Ce.MODIFY:try{await e.getObjectDetails(r,s.filename),v=!0}catch(D){}break;case Ce.RENAME:try{await e.getObjectDetails(r,s.previous_filename),v=!0}catch(D){}break}const w=gr(s.patch),T=!v&&c!==Ce.ADD;n.push(new xr(r,c,s.filename,s.previous_filename,s.patch,w,T,s.blob_url))}return n}var I=Re(5747),F=Re(2087),j=Re(6200),z=Object.defineProperty,X=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const J=/^(?:([^@:]+)@)?([^:/]+):?(.+)$/,le=/^([a-z-]+):\/\//,ue=t=>{const e=le.exec(t);if(e){const[c,v]=e;if(v==="ssh")t=t.slice(c.length);else return}const r=J.exec(t);if(!r)return;const[,n,i,s]=r;return{User:n,Host:i,path:s}},qe=(t,e=ws.current)=>{const r=ue(t);return r&&e(r)};function xe(t){return{...t,Hostname:t.Host}}function Fe(...t){const e=t.filter(r=>!!r);return r=>e.reduce((n,i)=>({...n,...i(n)}),r)}function Ie(t){const e=(0,j.parse)(t);return r=>e.compute(r.Host)}const Be=class{static fromConfig(t){return Fe(xe,Ie(t))}};let ws=Be;X(ws,"default",xe),X(ws,"current",Be.default);var fc=Object.defineProperty,to=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ro=class{static fromConfig(t){return Fe(xe,Ie(t))}};let bs=ro;to(bs,"default",Fe(xe,vc())),to(bs,"current",ro.default);const gc=(t,e=bs.current)=>{const r=ue(t);return r&&e(r)};function vc(t=(0,h.join)((0,F.homedir)(),".ssh","config")){try{const e=(0,I.readFileSync)(t).toString();return Ie(e)}catch(e){a.appendLine(`${t}: ${e.message}`)}}var yc=Object.defineProperty,Jn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?yc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),no;(function(t){t[t.Local=0]="Local",t[t.HTTP=1]="HTTP",t[t.SSH=2]="SSH",t[t.GIT=3]="GIT",t[t.OTHER=4]="OTHER"})(no||(no={}));class Ur{constructor(e){if(Jn(this,"type",4),Jn(this,"host",""),Jn(this,"owner",""),Jn(this,"repositoryName",""),Jn(this,"url"),!this.parseSshProtocol(e))try{this.url=u.Uri.parse(e),this.type=this.getType(this.url.scheme),this.host=this.getHostName(this.url.authority),this.host&&(this.repositoryName=this.getRepositoryName(this.url.path)||"",this.owner=this.getOwnerName(this.url.path)||"")}catch(r){a.appendLine(`Failed to parse '${e}'`),u.window.showWarningMessage(`Unable to parse remote '${e}'. Please check that it is correctly formatted.`)}}get nameWithOwner(){return this.owner?`${this.owner}/${this.repositoryName}`:this.repositoryName}getType(e){switch(e){case"file":return 0;case"http":case"https":return 1;case"git":return 3;case"ssh":return 2;default:return 4}}parseSshProtocol(e){const r=gc(e);if(!r)return!1;const{Hostname:n,HostName:i,path:s}=r;return this.host=i||n,this.owner=this.getOwnerName(s)||"",this.repositoryName=this.getRepositoryName(s)||"",this.type=2,!0}getHostName(e){const r=/^(?:.*:?@)?([^:]*)(?::.*)?$/.exec(e);return r&&r.length>=2?r[1].toLocaleLowerCase()==="www.github.com"?"github.com":r[1]:""}getRepositoryName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.lastIndexOf("/"),i=r.substr(n+1);if(!(i===""||i==="/"))return i.replace(/\/$/,"").replace(/\.git$/,"")}getOwnerName(e){let r=e.replace(/\\/g,"/");r.endsWith("/")&&(r=r.substr(0,r.length-1));const n=r.split("/");if(n.length>1)return n[n.length-2]}normalizeUri(){if(this.type===4&&!this.url)return;if(this.type===0)return this.url;let e="https";this.url&&(this.url.scheme==="http"||this.url.scheme==="https")&&(e=this.url.scheme);try{return u.Uri.parse(`${e}://${this.host.toLocaleLowerCase()}/${this.nameWithOwner.toLocaleLowerCase()}`)}catch(r){return}}toString(){if(this.type===2)return`git@${this.host}:${this.owner}/${this.repositoryName}`;if(this.type===3)return`git://git@${this.host}:${this.owner}/${this.repositoryName}`;const e=this.normalizeUri();if(e)return e.toString()}update(e){return e.type&&(this.type=e.type),e.host&&(this.host=e.host),e.owner&&(this.owner=e.owner),e.repositoryName&&(this.repositoryName=e.repositoryName),this}equals(e){const r=this.normalizeUri();if(!r)return!1;const n=e.normalizeUri();return n?r.toString().toLocaleLowerCase()===n.toString().toLocaleLowerCase():!1}}var wc=Object.defineProperty,bc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class io{constructor(e,r,n,i){this.ref=e,this.label=r,this.sha=n,bc(this,"repositoryCloneUrl"),this.repositoryCloneUrl=new Ur(i)}}var gt;(function(t){t[t.Committed=0]="Committed",t[t.Mentioned=1]="Mentioned",t[t.Subscribed=2]="Subscribed",t[t.Commented=3]="Commented",t[t.Reviewed=4]="Reviewed",t[t.Labeled=5]="Labeled",t[t.Milestoned=6]="Milestoned",t[t.Assigned=7]="Assigned",t[t.HeadRefDeleted=8]="HeadRefDeleted",t[t.Merged=9]="Merged",t[t.Other=10]="Other"})(gt||(gt={}));function ks(t){return t.event===4}function kc(t){return t.event===0}function _c(t){return t.event===3}function Jg(t){return t.event===9}function Zg(t){return t.event===7}function ev(t){return t.event===8}function Ec(t){return!!t.conclusion}var wt;(function(t){t[t.Query=0]="Query",t[t.All=1]="All",t[t.LocalPullRequest=2]="LocalPullRequest"})(wt||(wt={}));var yr;(function(t){t.Approve="APPROVE",t.RequestChanges="REQUEST_CHANGES",t.Comment="COMMENT"})(yr||(yr={}));var rt;(function(t){t[t.Open=0]="Open",t[t.Merged=1]="Merged",t[t.Closed=2]="Closed"})(rt||(rt={}));var $r;(function(t){t[t.Mergeable=0]="Mergeable",t[t.NotMergeable=1]="NotMergeable",t[t.Unknown=2]="Unknown"})($r||($r={}));var _s=Re(6417),Rc=Re.n(_s),Cc=Object.defineProperty,Sc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const so=class{static initialize(t){so.icons={reactions:{THUMBS_UP:t.asAbsolutePath(h.join("resources","icons","reactions","thumbs_up.png")),THUMBS_DOWN:t.asAbsolutePath(h.join("resources","icons","reactions","thumbs_down.png")),CONFUSED:t.asAbsolutePath(h.join("resources","icons","reactions","confused.png")),EYES:t.asAbsolutePath(h.join("resources","icons","reactions","eyes.png")),HEART:t.asAbsolutePath(h.join("resources","icons","reactions","heart.png")),HOORAY:t.asAbsolutePath(h.join("resources","icons","reactions","hooray.png")),LAUGH:t.asAbsolutePath(h.join("resources","icons","reactions","laugh.png")),ROCKET:t.asAbsolutePath(h.join("resources","icons","reactions","rocket.png"))}}}};let or=so;Sc(or,"icons");function Pi(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Tc=Re(5186);/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function ao(t){return Object.prototype.toString.call(t)==="[object Object]"}function oo(t){var e,r;return ao(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(ao(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}function Nc(t){return t?Object.keys(t).reduce((e,r)=>(e[r.toLowerCase()]=t[r],e),{}):{}}function uo(t,e){const r=Object.assign({},t);return Object.keys(e).forEach(n=>{oo(e[n])?n in t?r[n]=uo(t[n],e[n]):Object.assign(r,{[n]:e[n]}):Object.assign(r,{[n]:e[n]})}),r}function lo(t){for(const e in t)t[e]===void 0&&delete t[e];return t}function Es(t,e,r){if(typeof e=="string"){let[i,s]=e.split(" ");r=Object.assign(s?{method:i,url:s}:{url:i},r)}else r=Object.assign({},e);r.headers=Nc(r.headers),lo(r),lo(r.headers);const n=uo(t||{},r);return t&&t.mediaType.previews.length&&(n.mediaType.previews=t.mediaType.previews.filter(i=>!n.mediaType.previews.includes(i)).concat(n.mediaType.previews)),n.mediaType.previews=n.mediaType.previews.map(i=>i.replace(/-preview/,"")),n}function Pc(t,e){const r=/\?/.test(t)?"&":"?",n=Object.keys(e);return n.length===0?t:t+r+n.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}const Ic=/\{[^}]+\}/g;function Dc(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function Ac(t){const e=t.match(Ic);return e?e.map(Dc).reduce((r,n)=>r.concat(n),[]):[]}function co(t,e){return Object.keys(t).filter(r=>!e.includes(r)).reduce((r,n)=>(r[n]=t[n],r),{})}function ho(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function En(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function Zn(t,e,r){return e=t==="+"||t==="#"?ho(e):En(e),r?En(r)+"="+e:e}function Rn(t){return t!=null}function Rs(t){return t===";"||t==="&"||t==="?"}function Fc(t,e,r,n){var i=t[r],s=[];if(Rn(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),n&&n!=="*"&&(i=i.substring(0,parseInt(n,10))),s.push(Zn(e,i,Rs(e)?r:""));else if(n==="*")Array.isArray(i)?i.filter(Rn).forEach(function(c){s.push(Zn(e,c,Rs(e)?r:""))}):Object.keys(i).forEach(function(c){Rn(i[c])&&s.push(Zn(e,i[c],c))});else{const c=[];Array.isArray(i)?i.filter(Rn).forEach(function(v){c.push(Zn(e,v))}):Object.keys(i).forEach(function(v){Rn(i[v])&&(c.push(En(v)),c.push(Zn(e,i[v].toString())))}),Rs(e)?s.push(En(r)+"="+c.join(",")):c.length!==0&&s.push(c.join(","))}else e===";"?Rn(i)&&s.push(En(r)):i===""&&(e==="&"||e==="?")?s.push(En(r)+"="):i===""&&s.push("");return s}function Oc(t){return{expand:xc.bind(null,t)}}function xc(t,e){var r=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(n,i,s){if(i){let v="";const w=[];if(r.indexOf(i.charAt(0))!==-1&&(v=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(T){var D=/([^:\*]*)(?::(\d+)|(\*))?/.exec(T);w.push(Fc(e,v,D[1],D[2]||D[3]))}),v&&v!=="+"){var c=",";return v==="?"?c="&":v!=="#"&&(c=v),(w.length!==0?v:"")+w.join(c)}else return w.join(",")}else return ho(s)})}function mo(t){let e=t.method.toUpperCase(),r=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),n=Object.assign({},t.headers),i,s=co(t,["method","baseUrl","url","headers","request","mediaType"]);const c=Ac(r);r=Oc(r).expand(s),/^http/.test(r)||(r=t.baseUrl+r);const v=Object.keys(t).filter(D=>c.includes(D)).concat("baseUrl"),w=co(s,v);if(!/application\/octet-stream/i.test(n.accept)&&(t.mediaType.format&&(n.accept=n.accept.split(/,/).map(D=>D.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){const D=n.accept.match(/[\w-]+(?=-preview)/g)||[];n.accept=D.concat(t.mediaType.previews).map(H=>{const V=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${H}-preview${V}`}).join(",")}return["GET","HEAD"].includes(e)?r=Pc(r,w):"data"in w?i=w.data:Object.keys(w).length?i=w:n["content-length"]=0,!n["content-type"]&&typeof i!="undefined"&&(n["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i=="undefined"&&(i=""),Object.assign({method:e,url:r,headers:n},typeof i!="undefined"?{body:i}:null,t.request?{request:t.request}:null)}function Mc(t,e,r){return mo(Es(t,e,r))}function po(t,e){const r=Es(t,e),n=Mc.bind(null,r);return Object.assign(n,{DEFAULTS:r,defaults:po.bind(null,r),merge:Es.bind(null,r),parse:mo})}const Lc=`octokit-endpoint.js/6.0.11 ${Pi()}`,qc=po(null,{method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Lc},mediaType:{format:"",previews:[]}});var je=Re(2413),cn=Re(8605),Cn=Re(8835),Ii=Re(7211),Bt=Re(8761);const Uc=je.Readable,wr=Symbol("buffer"),Cs=Symbol("type");class Sn{constructor(){this[Cs]="";const e=arguments[0],r=arguments[1],n=[];let i=0;if(e){const c=e,v=Number(c.length);for(let w=0;w<v;w++){const T=c[w];let D;T instanceof Buffer?D=T:ArrayBuffer.isView(T)?D=Buffer.from(T.buffer,T.byteOffset,T.byteLength):T instanceof ArrayBuffer?D=Buffer.from(T):T instanceof Sn?D=T[wr]:D=Buffer.from(typeof T=="string"?T:String(T)),i+=D.length,n.push(D)}}this[wr]=Buffer.concat(n);let s=r&&r.type!==void 0&&String(r.type).toLowerCase();s&&!/[^\u0020-\u007E]/.test(s)&&(this[Cs]=s)}get size(){return this[wr].length}get type(){return this[Cs]}text(){return Promise.resolve(this[wr].toString())}arrayBuffer(){const e=this[wr],r=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(r)}stream(){const e=new Uc;return e._read=function(){},e.push(this[wr]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,r=arguments[0],n=arguments[1];let i,s;r===void 0?i=0:r<0?i=Math.max(e+r,0):i=Math.min(r,e),n===void 0?s=e:n<0?s=Math.max(e+n,0):s=Math.min(n,e);const c=Math.max(s-i,0),w=this[wr].slice(i,i+c),T=new Sn([],{type:arguments[2]});return T[wr]=w,T}}Object.defineProperties(Sn.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(Sn.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0});function At(t,e,r){Error.call(this,t),this.message=t,this.type=e,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}At.prototype=Object.create(Error.prototype),At.prototype.constructor=At,At.prototype.name="FetchError";let Ss;try{Ss=require("encoding").convert}catch(t){}const br=Symbol("Body internals"),fo=je.PassThrough;function bt(t){var e=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.size;let i=n===void 0?0:n;var s=r.timeout;let c=s===void 0?0:s;t==null?t=null:go(t)?t=Buffer.from(t.toString()):ei(t)||Buffer.isBuffer(t)||(Object.prototype.toString.call(t)==="[object ArrayBuffer]"?t=Buffer.from(t):ArrayBuffer.isView(t)?t=Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof je||(t=Buffer.from(String(t)))),this[br]={body:t,disturbed:!1,error:null},this.size=i,this.timeout=c,t instanceof je&&t.on("error",function(v){const w=v.name==="AbortError"?v:new At(`Invalid response body while trying to fetch ${e.url}: ${v.message}`,"system",v);e[br].error=w})}bt.prototype={get body(){return this[br].body},get bodyUsed(){return this[br].disturbed},arrayBuffer(){return Tn.call(this).then(function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)})},blob(){let t=this.headers&&this.headers.get("content-type")||"";return Tn.call(this).then(function(e){return Object.assign(new Sn([],{type:t.toLowerCase()}),{[wr]:e})})},json(){var t=this;return Tn.call(this).then(function(e){try{return JSON.parse(e.toString())}catch(r){return bt.Promise.reject(new At(`invalid json response body at ${t.url} reason: ${r.message}`,"invalid-json"))}})},text(){return Tn.call(this).then(function(t){return t.toString()})},buffer(){return Tn.call(this)},textConverted(){var t=this;return Tn.call(this).then(function(e){return $c(e,t.headers)})}},Object.defineProperties(bt.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),bt.mixIn=function(t){for(const e of Object.getOwnPropertyNames(bt.prototype))if(!(e in t)){const r=Object.getOwnPropertyDescriptor(bt.prototype,e);Object.defineProperty(t,e,r)}};function Tn(){var t=this;if(this[br].disturbed)return bt.Promise.reject(new TypeError(`body used already for: ${this.url}`));if(this[br].disturbed=!0,this[br].error)return bt.Promise.reject(this[br].error);let e=this.body;if(e===null)return bt.Promise.resolve(Buffer.alloc(0));if(ei(e)&&(e=e.stream()),Buffer.isBuffer(e))return bt.Promise.resolve(e);if(!(e instanceof je))return bt.Promise.resolve(Buffer.alloc(0));let r=[],n=0,i=!1;return new bt.Promise(function(s,c){let v;t.timeout&&(v=setTimeout(function(){i=!0,c(new At(`Response timeout while trying to fetch ${t.url} (over ${t.timeout}ms)`,"body-timeout"))},t.timeout)),e.on("error",function(w){w.name==="AbortError"?(i=!0,c(w)):c(new At(`Invalid response body while trying to fetch ${t.url}: ${w.message}`,"system",w))}),e.on("data",function(w){if(!(i||w===null)){if(t.size&&n+w.length>t.size){i=!0,c(new At(`content size at ${t.url} over limit: ${t.size}`,"max-size"));return}n+=w.length,r.push(w)}}),e.on("end",function(){if(!i){clearTimeout(v);try{s(Buffer.concat(r,n))}catch(w){c(new At(`Could not create Buffer from response body for ${t.url}: ${w.message}`,"system",w))}}})})}function $c(t,e){if(typeof Ss!="function")throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=e.get("content-type");let n="utf-8",i,s;return r&&(i=/charset=([^;]*)/i.exec(r)),s=t.slice(0,1024).toString(),!i&&s&&(i=/<meta.+?charset=(['"])(.+?)\1/i.exec(s)),!i&&s&&(i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(s),i||(i=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(s),i&&i.pop()),i&&(i=/charset=(.*)/i.exec(i.pop()))),!i&&s&&(i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(s)),i&&(n=i.pop(),(n==="gb2312"||n==="gbk")&&(n="gb18030")),Ss(t,"UTF-8",n).toString()}function go(t){return typeof t!="object"||typeof t.append!="function"||typeof t.delete!="function"||typeof t.get!="function"||typeof t.getAll!="function"||typeof t.has!="function"||typeof t.set!="function"?!1:t.constructor.name==="URLSearchParams"||Object.prototype.toString.call(t)==="[object URLSearchParams]"||typeof t.sort=="function"}function ei(t){return typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&typeof t.constructor.name=="string"&&/^(Blob|File)$/.test(t.constructor.name)&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}function vo(t){let e,r,n=t.body;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return n instanceof je&&typeof n.getBoundary!="function"&&(e=new fo,r=new fo,n.pipe(e),n.pipe(r),t[br].body=e,n=r),n}function yo(t){return t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":go(t)?"application/x-www-form-urlencoded;charset=UTF-8":ei(t)?t.type||null:Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object ArrayBuffer]"||ArrayBuffer.isView(t)?null:typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:t instanceof je?null:"text/plain;charset=UTF-8"}function wo(t){const e=t.body;return e===null?0:ei(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"&&(e._lengthRetrievers&&e._lengthRetrievers.length==0||e.hasKnownLength&&e.hasKnownLength())?e.getLengthSync():null}function Hc(t,e){const r=e.body;r===null?t.end():ei(r)?r.stream().pipe(t):Buffer.isBuffer(r)?(t.write(r),t.end()):r.pipe(t)}bt.Promise=global.Promise;const bo=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,Ts=/[^\t\x20-\x7e\x80-\xff]/;function ti(t){if(t=`${t}`,bo.test(t)||t==="")throw new TypeError(`${t} is not a legal HTTP header name`)}function ko(t){if(t=`${t}`,Ts.test(t))throw new TypeError(`${t} is not a legal HTTP header value`)}function Nn(t,e){e=e.toLowerCase();for(const r in t)if(r.toLowerCase()===e)return r}const at=Symbol("map");class Xt{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;if(this[at]=Object.create(null),e instanceof Xt){const r=e.raw(),n=Object.keys(r);for(const i of n)for(const s of r[i])this.append(i,s);return}if(e!=null)if(typeof e=="object"){const r=e[Symbol.iterator];if(r!=null){if(typeof r!="function")throw new TypeError("Header pairs must be iterable");const n=[];for(const i of e){if(typeof i!="object"||typeof i[Symbol.iterator]!="function")throw new TypeError("Each header pair must be iterable");n.push(Array.from(i))}for(const i of n){if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");this.append(i[0],i[1])}}else for(const n of Object.keys(e)){const i=e[n];this.append(n,i)}}else throw new TypeError("Provided initializer must be an object")}get(e){e=`${e}`,ti(e);const r=Nn(this[at],e);return r===void 0?null:this[at][r].join(", ")}forEach(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=Ns(this),i=0;for(;i<n.length;){var s=n[i];const c=s[0],v=s[1];e.call(r,v,c,this),n=Ns(this),i++}}set(e,r){e=`${e}`,r=`${r}`,ti(e),ko(r);const n=Nn(this[at],e);this[at][n!==void 0?n:e]=[r]}append(e,r){e=`${e}`,r=`${r}`,ti(e),ko(r);const n=Nn(this[at],e);n!==void 0?this[at][n].push(r):this[at][e]=[r]}has(e){return e=`${e}`,ti(e),Nn(this[at],e)!==void 0}delete(e){e=`${e}`,ti(e);const r=Nn(this[at],e);r!==void 0&&delete this[at][r]}raw(){return this[at]}keys(){return Is(this,"key")}values(){return Is(this,"value")}[Symbol.iterator](){return Is(this,"key+value")}}Xt.prototype.entries=Xt.prototype[Symbol.iterator],Object.defineProperty(Xt.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(Xt.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});function Ns(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"key+value";return Object.keys(t[at]).sort().map(e==="key"?function(n){return n.toLowerCase()}:e==="value"?function(n){return t[at][n].join(", ")}:function(n){return[n.toLowerCase(),t[at][n].join(", ")]})}const Ps=Symbol("internal");function Is(t,e){const r=Object.create(Ds);return r[Ps]={target:t,kind:e,index:0},r}const Ds=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==Ds)throw new TypeError("Value of `this` is not a HeadersIterator");var t=this[Ps];const e=t.target,r=t.kind,n=t.index,i=Ns(e,r),s=i.length;return n>=s?{value:void 0,done:!0}:(this[Ps].index=n+1,{value:i[n],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(Ds,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});function Gc(t){const e=Object.assign({__proto__:null},t[at]),r=Nn(t[at],"Host");return r!==void 0&&(e[r]=e[r][0]),e}function Vc(t){const e=new Xt;for(const r of Object.keys(t))if(!bo.test(r))if(Array.isArray(t[r]))for(const n of t[r])Ts.test(n)||(e[at][r]===void 0?e[at][r]=[n]:e[at][r].push(n));else Ts.test(t[r])||(e[at][r]=[t[r]]);return e}const Hr=Symbol("Response internals"),Bc=cn.STATUS_CODES;class ur{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bt.call(this,e,r);const n=r.status||200,i=new Xt(r.headers);if(e!=null&&!i.has("Content-Type")){const s=yo(e);s&&i.append("Content-Type",s)}this[Hr]={url:r.url,status:n,statusText:r.statusText||Bc[n],headers:i,counter:r.counter}}get url(){return this[Hr].url||""}get status(){return this[Hr].status}get ok(){return this[Hr].status>=200&&this[Hr].status<300}get redirected(){return this[Hr].counter>0}get statusText(){return this[Hr].statusText}get headers(){return this[Hr].headers}clone(){return new ur(vo(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}bt.mixIn(ur.prototype),Object.defineProperties(ur.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(ur.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const kr=Symbol("Request internals"),As=Cn.parse,jc=Cn.format,zc="destroy"in je.Readable.prototype;function Di(t){return typeof t=="object"&&typeof t[kr]=="object"}function Qc(t){const e=t&&typeof t=="object"&&Object.getPrototypeOf(t);return!!(e&&e.constructor.name==="AbortSignal")}class dn{constructor(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;Di(e)?n=As(e.url):(e&&e.href?n=As(e.href):n=As(`${e}`),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||Di(e)&&e.body!==null)&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let s=r.body!=null?r.body:Di(e)&&e.body!==null?vo(e):null;bt.call(this,s,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const c=new Xt(r.headers||e.headers||{});if(s!=null&&!c.has("Content-Type")){const w=yo(s);w&&c.append("Content-Type",w)}let v=Di(e)?e.signal:null;if("signal"in r&&(v=r.signal),v!=null&&!Qc(v))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[kr]={method:i,redirect:r.redirect||e.redirect||"follow",headers:c,parsedURL:n,signal:v},this.follow=r.follow!==void 0?r.follow:e.follow!==void 0?e.follow:20,this.compress=r.compress!==void 0?r.compress:e.compress!==void 0?e.compress:!0,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[kr].method}get url(){return jc(this[kr].parsedURL)}get headers(){return this[kr].headers}get redirect(){return this[kr].redirect}get signal(){return this[kr].signal}clone(){return new dn(this)}}bt.mixIn(dn.prototype),Object.defineProperty(dn.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(dn.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});function Wc(t){const e=t[kr].parsedURL,r=new Xt(t[kr].headers);if(r.has("Accept")||r.set("Accept","*/*"),!e.protocol||!e.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(e.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(t.signal&&t.body instanceof je.Readable&&!zc)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let n=null;if(t.body==null&&/^(POST|PUT)$/i.test(t.method)&&(n="0"),t.body!=null){const s=wo(t);typeof s=="number"&&(n=String(s))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let i=t.agent;return typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close"),Object.assign({},e,{method:t.method,headers:Gc(r),agent:i})}function ri(t){Error.call(this,t),this.type="aborted",this.message=t,Error.captureStackTrace(this,this.constructor)}ri.prototype=Object.create(Error.prototype),ri.prototype.constructor=ri,ri.prototype.name="AbortError";const _o=je.PassThrough,Kc=Cn.resolve;function Gr(t,e){if(!Gr.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return bt.Promise=Gr.Promise,new Gr.Promise(function(r,n){const i=new dn(t,e),s=Wc(i),c=(s.protocol==="https:"?Ii:cn).request,v=i.signal;let w=null;const T=function(){let ee=new ri("The user aborted a request.");n(ee),i.body&&i.body instanceof je.Readable&&i.body.destroy(ee),!(!w||!w.body)&&w.body.emit("error",ee)};if(v&&v.aborted){T();return}const D=function(){T(),W()},H=c(s);let V;v&&v.addEventListener("abort",D);function W(){H.abort(),v&&v.removeEventListener("abort",D),clearTimeout(V)}i.timeout&&H.once("socket",function(Z){V=setTimeout(function(){n(new At(`network timeout at: ${i.url}`,"request-timeout")),W()},i.timeout)}),H.on("error",function(Z){n(new At(`request to ${i.url} failed, reason: ${Z.message}`,"system",Z)),W()}),H.on("response",function(Z){clearTimeout(V);const ee=Vc(Z.headers);if(Gr.isRedirect(Z.statusCode)){const ce=ee.get("Location"),ke=ce===null?null:Kc(i.url,ce);switch(i.redirect){case"error":n(new At(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),W();return;case"manual":if(ke!==null)try{ee.set("Location",ke)}catch(Ye){n(Ye)}break;case"follow":if(ke===null)break;if(i.counter>=i.follow){n(new At(`maximum redirect reached at: ${i.url}`,"max-redirect")),W();return}const Ke={headers:new Xt(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,timeout:i.timeout,size:i.size};if(Z.statusCode!==303&&i.body&&wo(i)===null){n(new At("Cannot follow redirect with body being a readable stream","unsupported-redirect")),W();return}(Z.statusCode===303||(Z.statusCode===301||Z.statusCode===302)&&i.method==="POST")&&(Ke.method="GET",Ke.body=void 0,Ke.headers.delete("content-length")),r(Gr(new dn(ke,Ke))),W();return}}Z.once("end",function(){v&&v.removeEventListener("abort",D)});let te=Z.pipe(new _o);const ae={url:i.url,status:Z.statusCode,statusText:Z.statusMessage,headers:ee,size:i.size,timeout:i.timeout,counter:i.counter},me=ee.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||me===null||Z.statusCode===204||Z.statusCode===304){w=new ur(te,ae),r(w);return}const fe={flush:Bt.Z_SYNC_FLUSH,finishFlush:Bt.Z_SYNC_FLUSH};if(me=="gzip"||me=="x-gzip"){te=te.pipe(Bt.createGunzip(fe)),w=new ur(te,ae),r(w);return}if(me=="deflate"||me=="x-deflate"){Z.pipe(new _o).once("data",function(ke){(ke[0]&15)==8?te=te.pipe(Bt.createInflate()):te=te.pipe(Bt.createInflateRaw()),w=new ur(te,ae),r(w)});return}if(me=="br"&&typeof Bt.createBrotliDecompress=="function"){te=te.pipe(Bt.createBrotliDecompress()),w=new ur(te,ae),r(w);return}w=new ur(te,ae),r(w)}),Hc(H,i)})}Gr.isRedirect=function(t){return t===301||t===302||t===303||t===307||t===308},Gr.Promise=global.Promise;const Yc=Gr;class Xc extends Error{constructor(e){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}}var Jc=Re(778),Zc=Re.n(Jc);const ed=Zc()(t=>console.warn(t));class ni extends Error{constructor(e,r,n){super(e);Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=r,Object.defineProperty(this,"code",{get(){return ed(new Xc("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),r}}),this.headers=n.headers||{};const i=Object.assign({},n.request);n.request.headers.authorization&&(i.headers=Object.assign({},n.request.headers,{authorization:n.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}}const td="5.4.14";function rd(t){return t.arrayBuffer()}function Eo(t){(oo(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let e={},r,n;return(t.request&&t.request.fetch||Yc)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(s=>{n=s.url,r=s.status;for(const v of s.headers)e[v[0]]=v[1];if(r===204||r===205)return;if(t.method==="HEAD"){if(r<400)return;throw new ni(s.statusText,r,{headers:e,request:t})}if(r===304)throw new ni("Not modified",r,{headers:e,request:t});if(r>=400)return s.text().then(v=>{const w=new ni(v,r,{headers:e,request:t});try{let T=JSON.parse(w.message);Object.assign(w,T);let D=T.errors;w.message=w.message+": "+D.map(JSON.stringify).join(", ")}catch(T){}throw w});const c=s.headers.get("content-type");return/application\/json/.test(c)?s.json():!c||/^text\/|charset=utf-8$/.test(c)?s.text():rd(s)}).then(s=>({status:r,url:n,headers:e,data:s})).catch(s=>{throw s instanceof ni?s:new ni(s.message,500,{headers:e,request:t})})}function Fs(t,e){const r=t.defaults(e);return Object.assign(function(i,s){const c=r.merge(i,s);if(!c.request||!c.request.hook)return Eo(r.parse(c));const v=(w,T)=>Eo(r.parse(r.merge(w,T)));return Object.assign(v,{endpoint:r,defaults:Fs.bind(null,r)}),c.request.hook(v,c)},{endpoint:r,defaults:Fs.bind(null,r)})}const Ai=Fs(qc,{headers:{"user-agent":`octokit-request.js/${td} ${Pi()}`}}),nd="4.6.1";class id extends Error{constructor(e,r){const n=r.data.errors[0].message;super(n);Object.assign(this,r.data),Object.assign(this,{headers:r.headers}),this.name="GraphqlError",this.request=e,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}const sd=["method","baseUrl","url","headers","request","query","mediaType"],ad=["query","method","url"],Ro=/\/api\/v3\/?$/;function od(t,e,r){if(r){if(typeof e=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(const c in r)if(!!ad.includes(c))return Promise.reject(new Error(`[@octokit/graphql] "${c}" cannot be used as variable name`))}const n=typeof e=="string"?Object.assign({query:e},r):e,i=Object.keys(n).reduce((c,v)=>sd.includes(v)?(c[v]=n[v],c):(c.variables||(c.variables={}),c.variables[v]=n[v],c),{}),s=n.baseUrl||t.endpoint.DEFAULTS.baseUrl;return Ro.test(s)&&(i.url=s.replace(Ro,"/api/graphql")),t(i).then(c=>{if(c.data.errors){const v={};for(const w of Object.keys(c.headers))v[w]=c.headers[w];throw new id(i,{headers:v,data:c.data})}return c.data.data})}function Os(t,e){const r=t.defaults(e);return Object.assign((i,s)=>od(r,i,s),{defaults:Os.bind(null,r),endpoint:Ai.endpoint})}const nv=Os(Ai,{headers:{"user-agent":`octokit-graphql.js/${nd} ${Pi()}`},method:"POST",url:"/graphql"});function ud(t){return Os(t,{method:"POST",url:"/graphql"})}async function ld(t){const e=t.split(/\./).length===3?"app":/^v\d+\./.test(t)?"installation":"oauth";return{type:"token",token:t,tokenType:e}}function cd(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function dd(t,e,r,n){const i=e.endpoint.merge(r,n);return i.headers.authorization=cd(t),e(i)}const hd=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(ld.bind(null,e),{hook:dd.bind(null,e)})},Co="3.3.1";class xs{constructor(e={}){const r=new Tc.Collection,n={baseUrl:Ai.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:r.bind(null,"request")}),mediaType:{previews:[],format:""}};if(n.headers["user-agent"]=[e.userAgent,`octokit-core.js/${Co} ${Pi()}`].filter(Boolean).join(" "),e.baseUrl&&(n.baseUrl=e.baseUrl),e.previews&&(n.mediaType.previews=e.previews),e.timeZone&&(n.headers["time-zone"]=e.timeZone),this.request=Ai.defaults(n),this.graphql=ud(this.request).defaults(n),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=r,e.authStrategy){const{authStrategy:s,...c}=e,v=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:c},e.auth));r.wrap("request",v.hook),this.auth=v}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{const s=hd(e.auth);r.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...n){const i=n[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var r;const n=this.plugins;return r=class extends this{},r.plugins=n.concat(e.filter(s=>!n.includes(s))),r}}xs.VERSION=Co,xs.plugins=[];const md="1.0.3";function So(t){t.hook.wrap("request",(e,r)=>{t.log.debug("request",r);const n=Date.now(),i=t.request.endpoint.parse(r),s=i.url.replace(r.baseUrl,"");return e(r).then(c=>(t.log.info(`${i.method} ${s} - ${c.status} in ${Date.now()-n}ms`),c)).catch(c=>{throw t.log.info(`${i.method} ${s} - ${c.status} in ${Date.now()-n}ms`),c})})}So.VERSION=md;const pd="2.13.2";function fd(t){if(!("total_count"in t.data&&!("url"in t.data)))return t;const r=t.data.incomplete_results,n=t.data.repository_selection,i=t.data.total_count;delete t.data.incomplete_results,delete t.data.repository_selection,delete t.data.total_count;const s=Object.keys(t.data)[0],c=t.data[s];return t.data=c,typeof r!="undefined"&&(t.data.incomplete_results=r),typeof n!="undefined"&&(t.data.repository_selection=n),t.data.total_count=i,t}function Ms(t,e,r){const n=typeof e=="function"?e.endpoint(r):t.request.endpoint(e,r),i=typeof e=="function"?e:t.request,s=n.method,c=n.headers;let v=n.url;return{[Symbol.asyncIterator]:()=>({async next(){if(!v)return{done:!0};const w=await i({method:s,url:v,headers:c}),T=fd(w);return v=((T.headers.link||"").match(/<([^>]+)>;\s*rel="next"/)||[])[1],{value:T}}})}}function To(t,e,r,n){return typeof r=="function"&&(n=r,r=void 0),No(t,[],Ms(t,e,r)[Symbol.asyncIterator](),n)}function No(t,e,r,n){return r.next().then(i=>{if(i.done)return e;let s=!1;function c(){s=!0}return e=e.concat(n?n(i.value,c):i.value.data),s?e:No(t,e,r,n)})}const iv=Object.assign(To,{iterator:Ms}),gd=null;function sv(t){return typeof t=="string"?gd.includes(t):!1}function Po(t){return{paginate:Object.assign(To.bind(null,t),{iterator:Ms.bind(null,t)})}}Po.VERSION=pd;const vd={actions:{addSelectedRepoToOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],cancelWorkflowRun:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/cancel"],createOrUpdateOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}"],createOrUpdateRepoSecret:["PUT /repos/{owner}/{repo}/actions/secrets/{secret_name}"],createRegistrationTokenForOrg:["POST /orgs/{org}/actions/runners/registration-token"],createRegistrationTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/registration-token"],createRemoveTokenForOrg:["POST /orgs/{org}/actions/runners/remove-token"],createRemoveTokenForRepo:["POST /repos/{owner}/{repo}/actions/runners/remove-token"],createWorkflowDispatch:["POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches"],deleteArtifact:["DELETE /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],deleteOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}"],deleteRepoSecret:["DELETE /repos/{owner}/{repo}/actions/secrets/{secret_name}"],deleteSelfHostedRunnerFromOrg:["DELETE /orgs/{org}/actions/runners/{runner_id}"],deleteSelfHostedRunnerFromRepo:["DELETE /repos/{owner}/{repo}/actions/runners/{runner_id}"],deleteWorkflowRun:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}"],deleteWorkflowRunLogs:["DELETE /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],disableSelectedRepositoryGithubActionsOrganization:["DELETE /orgs/{org}/actions/permissions/repositories/{repository_id}"],disableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/disable"],downloadArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}/{archive_format}"],downloadJobLogsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}/logs"],downloadWorkflowRunLogs:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/logs"],enableSelectedRepositoryGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories/{repository_id}"],enableWorkflow:["PUT /repos/{owner}/{repo}/actions/workflows/{workflow_id}/enable"],getAllowedActionsOrganization:["GET /orgs/{org}/actions/permissions/selected-actions"],getAllowedActionsRepository:["GET /repos/{owner}/{repo}/actions/permissions/selected-actions"],getArtifact:["GET /repos/{owner}/{repo}/actions/artifacts/{artifact_id}"],getGithubActionsPermissionsOrganization:["GET /orgs/{org}/actions/permissions"],getGithubActionsPermissionsRepository:["GET /repos/{owner}/{repo}/actions/permissions"],getJobForWorkflowRun:["GET /repos/{owner}/{repo}/actions/jobs/{job_id}"],getOrgPublicKey:["GET /orgs/{org}/actions/secrets/public-key"],getOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}"],getRepoPermissions:["GET /repos/{owner}/{repo}/actions/permissions",{},{renamed:["actions","getGithubActionsPermissionsRepository"]}],getRepoPublicKey:["GET /repos/{owner}/{repo}/actions/secrets/public-key"],getRepoSecret:["GET /repos/{owner}/{repo}/actions/secrets/{secret_name}"],getSelfHostedRunnerForOrg:["GET /orgs/{org}/actions/runners/{runner_id}"],getSelfHostedRunnerForRepo:["GET /repos/{owner}/{repo}/actions/runners/{runner_id}"],getWorkflow:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}"],getWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}"],getWorkflowRunUsage:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/timing"],getWorkflowUsage:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/timing"],listArtifactsForRepo:["GET /repos/{owner}/{repo}/actions/artifacts"],listJobsForWorkflowRun:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/jobs"],listOrgSecrets:["GET /orgs/{org}/actions/secrets"],listRepoSecrets:["GET /repos/{owner}/{repo}/actions/secrets"],listRepoWorkflows:["GET /repos/{owner}/{repo}/actions/workflows"],listRunnerApplicationsForOrg:["GET /orgs/{org}/actions/runners/downloads"],listRunnerApplicationsForRepo:["GET /repos/{owner}/{repo}/actions/runners/downloads"],listSelectedReposForOrgSecret:["GET /orgs/{org}/actions/secrets/{secret_name}/repositories"],listSelectedRepositoriesEnabledGithubActionsOrganization:["GET /orgs/{org}/actions/permissions/repositories"],listSelfHostedRunnersForOrg:["GET /orgs/{org}/actions/runners"],listSelfHostedRunnersForRepo:["GET /repos/{owner}/{repo}/actions/runners"],listWorkflowRunArtifacts:["GET /repos/{owner}/{repo}/actions/runs/{run_id}/artifacts"],listWorkflowRuns:["GET /repos/{owner}/{repo}/actions/workflows/{workflow_id}/runs"],listWorkflowRunsForRepo:["GET /repos/{owner}/{repo}/actions/runs"],reRunWorkflow:["POST /repos/{owner}/{repo}/actions/runs/{run_id}/rerun"],removeSelectedRepoFromOrgSecret:["DELETE /orgs/{org}/actions/secrets/{secret_name}/repositories/{repository_id}"],setAllowedActionsOrganization:["PUT /orgs/{org}/actions/permissions/selected-actions"],setAllowedActionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions/selected-actions"],setGithubActionsPermissionsOrganization:["PUT /orgs/{org}/actions/permissions"],setGithubActionsPermissionsRepository:["PUT /repos/{owner}/{repo}/actions/permissions"],setSelectedReposForOrgSecret:["PUT /orgs/{org}/actions/secrets/{secret_name}/repositories"],setSelectedRepositoriesEnabledGithubActionsOrganization:["PUT /orgs/{org}/actions/permissions/repositories"]},activity:{checkRepoIsStarredByAuthenticatedUser:["GET /user/starred/{owner}/{repo}"],deleteRepoSubscription:["DELETE /repos/{owner}/{repo}/subscription"],deleteThreadSubscription:["DELETE /notifications/threads/{thread_id}/subscription"],getFeeds:["GET /feeds"],getRepoSubscription:["GET /repos/{owner}/{repo}/subscription"],getThread:["GET /notifications/threads/{thread_id}"],getThreadSubscriptionForAuthenticatedUser:["GET /notifications/threads/{thread_id}/subscription"],listEventsForAuthenticatedUser:["GET /users/{username}/events"],listNotificationsForAuthenticatedUser:["GET /notifications"],listOrgEventsForAuthenticatedUser:["GET /users/{username}/events/orgs/{org}"],listPublicEvents:["GET /events"],listPublicEventsForRepoNetwork:["GET /networks/{owner}/{repo}/events"],listPublicEventsForUser:["GET /users/{username}/events/public"],listPublicOrgEvents:["GET /orgs/{org}/events"],listReceivedEventsForUser:["GET /users/{username}/received_events"],listReceivedPublicEventsForUser:["GET /users/{username}/received_events/public"],listRepoEvents:["GET /repos/{owner}/{repo}/events"],listRepoNotificationsForAuthenticatedUser:["GET /repos/{owner}/{repo}/notifications"],listReposStarredByAuthenticatedUser:["GET /user/starred"],listReposStarredByUser:["GET /users/{username}/starred"],listReposWatchedByUser:["GET /users/{username}/subscriptions"],listStargazersForRepo:["GET /repos/{owner}/{repo}/stargazers"],listWatchedReposForAuthenticatedUser:["GET /user/subscriptions"],listWatchersForRepo:["GET /repos/{owner}/{repo}/subscribers"],markNotificationsAsRead:["PUT /notifications"],markRepoNotificationsAsRead:["PUT /repos/{owner}/{repo}/notifications"],markThreadAsRead:["PATCH /notifications/threads/{thread_id}"],setRepoSubscription:["PUT /repos/{owner}/{repo}/subscription"],setThreadSubscription:["PUT /notifications/threads/{thread_id}/subscription"],starRepoForAuthenticatedUser:["PUT /user/starred/{owner}/{repo}"],unstarRepoForAuthenticatedUser:["DELETE /user/starred/{owner}/{repo}"]},apps:{addRepoToInstallation:["PUT /user/installations/{installation_id}/repositories/{repository_id}"],checkToken:["POST /applications/{client_id}/token"],createContentAttachment:["POST /content_references/{content_reference_id}/attachments",{mediaType:{previews:["corsair"]}}],createFromManifest:["POST /app-manifests/{code}/conversions"],createInstallationAccessToken:["POST /app/installations/{installation_id}/access_tokens"],deleteAuthorization:["DELETE /applications/{client_id}/grant"],deleteInstallation:["DELETE /app/installations/{installation_id}"],deleteToken:["DELETE /applications/{client_id}/token"],getAuthenticated:["GET /app"],getBySlug:["GET /apps/{app_slug}"],getInstallation:["GET /app/installations/{installation_id}"],getOrgInstallation:["GET /orgs/{org}/installation"],getRepoInstallation:["GET /repos/{owner}/{repo}/installation"],getSubscriptionPlanForAccount:["GET /marketplace_listing/accounts/{account_id}"],getSubscriptionPlanForAccountStubbed:["GET /marketplace_listing/stubbed/accounts/{account_id}"],getUserInstallation:["GET /users/{username}/installation"],getWebhookConfigForApp:["GET /app/hook/config"],listAccountsForPlan:["GET /marketplace_listing/plans/{plan_id}/accounts"],listAccountsForPlanStubbed:["GET /marketplace_listing/stubbed/plans/{plan_id}/accounts"],listInstallationReposForAuthenticatedUser:["GET /user/installations/{installation_id}/repositories"],listInstallations:["GET /app/installations"],listInstallationsForAuthenticatedUser:["GET /user/installations"],listPlans:["GET /marketplace_listing/plans"],listPlansStubbed:["GET /marketplace_listing/stubbed/plans"],listReposAccessibleToInstallation:["GET /installation/repositories"],listSubscriptionsForAuthenticatedUser:["GET /user/marketplace_purchases"],listSubscriptionsForAuthenticatedUserStubbed:["GET /user/marketplace_purchases/stubbed"],removeRepoFromInstallation:["DELETE /user/installations/{installation_id}/repositories/{repository_id}"],resetToken:["PATCH /applications/{client_id}/token"],revokeInstallationAccessToken:["DELETE /installation/token"],scopeToken:["POST /applications/{client_id}/token/scoped"],suspendInstallation:["PUT /app/installations/{installation_id}/suspended"],unsuspendInstallation:["DELETE /app/installations/{installation_id}/suspended"],updateWebhookConfigForApp:["PATCH /app/hook/config"]},billing:{getGithubActionsBillingOrg:["GET /orgs/{org}/settings/billing/actions"],getGithubActionsBillingUser:["GET /users/{username}/settings/billing/actions"],getGithubPackagesBillingOrg:["GET /orgs/{org}/settings/billing/packages"],getGithubPackagesBillingUser:["GET /users/{username}/settings/billing/packages"],getSharedStorageBillingOrg:["GET /orgs/{org}/settings/billing/shared-storage"],getSharedStorageBillingUser:["GET /users/{username}/settings/billing/shared-storage"]},checks:{create:["POST /repos/{owner}/{repo}/check-runs"],createSuite:["POST /repos/{owner}/{repo}/check-suites"],get:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}"],getSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}"],listAnnotations:["GET /repos/{owner}/{repo}/check-runs/{check_run_id}/annotations"],listForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-runs"],listForSuite:["GET /repos/{owner}/{repo}/check-suites/{check_suite_id}/check-runs"],listSuitesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/check-suites"],rerequestSuite:["POST /repos/{owner}/{repo}/check-suites/{check_suite_id}/rerequest"],setSuitesPreferences:["PATCH /repos/{owner}/{repo}/check-suites/preferences"],update:["PATCH /repos/{owner}/{repo}/check-runs/{check_run_id}"]},codeScanning:{deleteAnalysis:["DELETE /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}{?confirm_delete}"],getAlert:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}",{},{renamedParameters:{alert_id:"alert_number"}}],getAnalysis:["GET /repos/{owner}/{repo}/code-scanning/analyses/{analysis_id}"],getSarif:["GET /repos/{owner}/{repo}/code-scanning/sarifs/{sarif_id}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/code-scanning/alerts"],listAlertsInstances:["GET /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}/instances"],listRecentAnalyses:["GET /repos/{owner}/{repo}/code-scanning/analyses"],updateAlert:["PATCH /repos/{owner}/{repo}/code-scanning/alerts/{alert_number}"],uploadSarif:["POST /repos/{owner}/{repo}/code-scanning/sarifs"]},codesOfConduct:{getAllCodesOfConduct:["GET /codes_of_conduct",{mediaType:{previews:["scarlet-witch"]}}],getConductCode:["GET /codes_of_conduct/{key}",{mediaType:{previews:["scarlet-witch"]}}],getForRepo:["GET /repos/{owner}/{repo}/community/code_of_conduct",{mediaType:{previews:["scarlet-witch"]}}]},emojis:{get:["GET /emojis"]},enterpriseAdmin:{disableSelectedOrganizationGithubActionsEnterprise:["DELETE /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],enableSelectedOrganizationGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations/{org_id}"],getAllowedActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/selected-actions"],getGithubActionsPermissionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions"],listSelectedOrganizationsEnabledGithubActionsEnterprise:["GET /enterprises/{enterprise}/actions/permissions/organizations"],setAllowedActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/selected-actions"],setGithubActionsPermissionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions"],setSelectedOrganizationsEnabledGithubActionsEnterprise:["PUT /enterprises/{enterprise}/actions/permissions/organizations"]},gists:{checkIsStarred:["GET /gists/{gist_id}/star"],create:["POST /gists"],createComment:["POST /gists/{gist_id}/comments"],delete:["DELETE /gists/{gist_id}"],deleteComment:["DELETE /gists/{gist_id}/comments/{comment_id}"],fork:["POST /gists/{gist_id}/forks"],get:["GET /gists/{gist_id}"],getComment:["GET /gists/{gist_id}/comments/{comment_id}"],getRevision:["GET /gists/{gist_id}/{sha}"],list:["GET /gists"],listComments:["GET /gists/{gist_id}/comments"],listCommits:["GET /gists/{gist_id}/commits"],listForUser:["GET /users/{username}/gists"],listForks:["GET /gists/{gist_id}/forks"],listPublic:["GET /gists/public"],listStarred:["GET /gists/starred"],star:["PUT /gists/{gist_id}/star"],unstar:["DELETE /gists/{gist_id}/star"],update:["PATCH /gists/{gist_id}"],updateComment:["PATCH /gists/{gist_id}/comments/{comment_id}"]},git:{createBlob:["POST /repos/{owner}/{repo}/git/blobs"],createCommit:["POST /repos/{owner}/{repo}/git/commits"],createRef:["POST /repos/{owner}/{repo}/git/refs"],createTag:["POST /repos/{owner}/{repo}/git/tags"],createTree:["POST /repos/{owner}/{repo}/git/trees"],deleteRef:["DELETE /repos/{owner}/{repo}/git/refs/{ref}"],getBlob:["GET /repos/{owner}/{repo}/git/blobs/{file_sha}"],getCommit:["GET /repos/{owner}/{repo}/git/commits/{commit_sha}"],getRef:["GET /repos/{owner}/{repo}/git/ref/{ref}"],getTag:["GET /repos/{owner}/{repo}/git/tags/{tag_sha}"],getTree:["GET /repos/{owner}/{repo}/git/trees/{tree_sha}"],listMatchingRefs:["GET /repos/{owner}/{repo}/git/matching-refs/{ref}"],updateRef:["PATCH /repos/{owner}/{repo}/git/refs/{ref}"]},gitignore:{getAllTemplates:["GET /gitignore/templates"],getTemplate:["GET /gitignore/templates/{name}"]},interactions:{getRestrictionsForAuthenticatedUser:["GET /user/interaction-limits"],getRestrictionsForOrg:["GET /orgs/{org}/interaction-limits"],getRestrictionsForRepo:["GET /repos/{owner}/{repo}/interaction-limits"],getRestrictionsForYourPublicRepos:["GET /user/interaction-limits",{},{renamed:["interactions","getRestrictionsForAuthenticatedUser"]}],removeRestrictionsForAuthenticatedUser:["DELETE /user/interaction-limits"],removeRestrictionsForOrg:["DELETE /orgs/{org}/interaction-limits"],removeRestrictionsForRepo:["DELETE /repos/{owner}/{repo}/interaction-limits"],removeRestrictionsForYourPublicRepos:["DELETE /user/interaction-limits",{},{renamed:["interactions","removeRestrictionsForAuthenticatedUser"]}],setRestrictionsForAuthenticatedUser:["PUT /user/interaction-limits"],setRestrictionsForOrg:["PUT /orgs/{org}/interaction-limits"],setRestrictionsForRepo:["PUT /repos/{owner}/{repo}/interaction-limits"],setRestrictionsForYourPublicRepos:["PUT /user/interaction-limits",{},{renamed:["interactions","setRestrictionsForAuthenticatedUser"]}]},issues:{addAssignees:["POST /repos/{owner}/{repo}/issues/{issue_number}/assignees"],addLabels:["POST /repos/{owner}/{repo}/issues/{issue_number}/labels"],checkUserCanBeAssigned:["GET /repos/{owner}/{repo}/assignees/{assignee}"],create:["POST /repos/{owner}/{repo}/issues"],createComment:["POST /repos/{owner}/{repo}/issues/{issue_number}/comments"],createLabel:["POST /repos/{owner}/{repo}/labels"],createMilestone:["POST /repos/{owner}/{repo}/milestones"],deleteComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}"],deleteLabel:["DELETE /repos/{owner}/{repo}/labels/{name}"],deleteMilestone:["DELETE /repos/{owner}/{repo}/milestones/{milestone_number}"],get:["GET /repos/{owner}/{repo}/issues/{issue_number}"],getComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}"],getEvent:["GET /repos/{owner}/{repo}/issues/events/{event_id}"],getLabel:["GET /repos/{owner}/{repo}/labels/{name}"],getMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}"],list:["GET /issues"],listAssignees:["GET /repos/{owner}/{repo}/assignees"],listComments:["GET /repos/{owner}/{repo}/issues/{issue_number}/comments"],listCommentsForRepo:["GET /repos/{owner}/{repo}/issues/comments"],listEvents:["GET /repos/{owner}/{repo}/issues/{issue_number}/events"],listEventsForRepo:["GET /repos/{owner}/{repo}/issues/events"],listEventsForTimeline:["GET /repos/{owner}/{repo}/issues/{issue_number}/timeline",{mediaType:{previews:["mockingbird"]}}],listForAuthenticatedUser:["GET /user/issues"],listForOrg:["GET /orgs/{org}/issues"],listForRepo:["GET /repos/{owner}/{repo}/issues"],listLabelsForMilestone:["GET /repos/{owner}/{repo}/milestones/{milestone_number}/labels"],listLabelsForRepo:["GET /repos/{owner}/{repo}/labels"],listLabelsOnIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/labels"],listMilestones:["GET /repos/{owner}/{repo}/milestones"],lock:["PUT /repos/{owner}/{repo}/issues/{issue_number}/lock"],removeAllLabels:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels"],removeAssignees:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/assignees"],removeLabel:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/labels/{name}"],setLabels:["PUT /repos/{owner}/{repo}/issues/{issue_number}/labels"],unlock:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/lock"],update:["PATCH /repos/{owner}/{repo}/issues/{issue_number}"],updateComment:["PATCH /repos/{owner}/{repo}/issues/comments/{comment_id}"],updateLabel:["PATCH /repos/{owner}/{repo}/labels/{name}"],updateMilestone:["PATCH /repos/{owner}/{repo}/milestones/{milestone_number}"]},licenses:{get:["GET /licenses/{license}"],getAllCommonlyUsed:["GET /licenses"],getForRepo:["GET /repos/{owner}/{repo}/license"]},markdown:{render:["POST /markdown"],renderRaw:["POST /markdown/raw",{headers:{"content-type":"text/plain; charset=utf-8"}}]},meta:{get:["GET /meta"],getOctocat:["GET /octocat"],getZen:["GET /zen"],root:["GET /"]},migrations:{cancelImport:["DELETE /repos/{owner}/{repo}/import"],deleteArchiveForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],deleteArchiveForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],downloadArchiveForOrg:["GET /orgs/{org}/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getArchiveForAuthenticatedUser:["GET /user/migrations/{migration_id}/archive",{mediaType:{previews:["wyandotte"]}}],getCommitAuthors:["GET /repos/{owner}/{repo}/import/authors"],getImportStatus:["GET /repos/{owner}/{repo}/import"],getLargeFiles:["GET /repos/{owner}/{repo}/import/large_files"],getStatusForAuthenticatedUser:["GET /user/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],getStatusForOrg:["GET /orgs/{org}/migrations/{migration_id}",{mediaType:{previews:["wyandotte"]}}],listForAuthenticatedUser:["GET /user/migrations",{mediaType:{previews:["wyandotte"]}}],listForOrg:["GET /orgs/{org}/migrations",{mediaType:{previews:["wyandotte"]}}],listReposForOrg:["GET /orgs/{org}/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],listReposForUser:["GET /user/migrations/{migration_id}/repositories",{mediaType:{previews:["wyandotte"]}}],mapCommitAuthor:["PATCH /repos/{owner}/{repo}/import/authors/{author_id}"],setLfsPreference:["PATCH /repos/{owner}/{repo}/import/lfs"],startForAuthenticatedUser:["POST /user/migrations"],startForOrg:["POST /orgs/{org}/migrations"],startImport:["PUT /repos/{owner}/{repo}/import"],unlockRepoForAuthenticatedUser:["DELETE /user/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],unlockRepoForOrg:["DELETE /orgs/{org}/migrations/{migration_id}/repos/{repo_name}/lock",{mediaType:{previews:["wyandotte"]}}],updateImport:["PATCH /repos/{owner}/{repo}/import"]},orgs:{blockUser:["PUT /orgs/{org}/blocks/{username}"],cancelInvitation:["DELETE /orgs/{org}/invitations/{invitation_id}"],checkBlockedUser:["GET /orgs/{org}/blocks/{username}"],checkMembershipForUser:["GET /orgs/{org}/members/{username}"],checkPublicMembershipForUser:["GET /orgs/{org}/public_members/{username}"],convertMemberToOutsideCollaborator:["PUT /orgs/{org}/outside_collaborators/{username}"],createInvitation:["POST /orgs/{org}/invitations"],createWebhook:["POST /orgs/{org}/hooks"],deleteWebhook:["DELETE /orgs/{org}/hooks/{hook_id}"],get:["GET /orgs/{org}"],getMembershipForAuthenticatedUser:["GET /user/memberships/orgs/{org}"],getMembershipForUser:["GET /orgs/{org}/memberships/{username}"],getWebhook:["GET /orgs/{org}/hooks/{hook_id}"],getWebhookConfigForOrg:["GET /orgs/{org}/hooks/{hook_id}/config"],list:["GET /organizations"],listAppInstallations:["GET /orgs/{org}/installations"],listBlockedUsers:["GET /orgs/{org}/blocks"],listFailedInvitations:["GET /orgs/{org}/failed_invitations"],listForAuthenticatedUser:["GET /user/orgs"],listForUser:["GET /users/{username}/orgs"],listInvitationTeams:["GET /orgs/{org}/invitations/{invitation_id}/teams"],listMembers:["GET /orgs/{org}/members"],listMembershipsForAuthenticatedUser:["GET /user/memberships/orgs"],listOutsideCollaborators:["GET /orgs/{org}/outside_collaborators"],listPendingInvitations:["GET /orgs/{org}/invitations"],listPublicMembers:["GET /orgs/{org}/public_members"],listWebhooks:["GET /orgs/{org}/hooks"],pingWebhook:["POST /orgs/{org}/hooks/{hook_id}/pings"],removeMember:["DELETE /orgs/{org}/members/{username}"],removeMembershipForUser:["DELETE /orgs/{org}/memberships/{username}"],removeOutsideCollaborator:["DELETE /orgs/{org}/outside_collaborators/{username}"],removePublicMembershipForAuthenticatedUser:["DELETE /orgs/{org}/public_members/{username}"],setMembershipForUser:["PUT /orgs/{org}/memberships/{username}"],setPublicMembershipForAuthenticatedUser:["PUT /orgs/{org}/public_members/{username}"],unblockUser:["DELETE /orgs/{org}/blocks/{username}"],update:["PATCH /orgs/{org}"],updateMembershipForAuthenticatedUser:["PATCH /user/memberships/orgs/{org}"],updateWebhook:["PATCH /orgs/{org}/hooks/{hook_id}"],updateWebhookConfigForOrg:["PATCH /orgs/{org}/hooks/{hook_id}/config"]},packages:{deletePackageForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}"],deletePackageForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}"],deletePackageVersionForAuthenticatedUser:["DELETE /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],deletePackageVersionForOrg:["DELETE /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getAllPackageVersionsForAPackageOwnedByAnOrg:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForAPackageOwnedByTheAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions"],getAllPackageVersionsForPackageOwnedByUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions"],getPackageForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}"],getPackageForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}"],getPackageForUser:["GET /users/{username}/packages/{package_type}/{package_name}"],getPackageVersionForAuthenticatedUser:["GET /user/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForOrganization:["GET /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}"],getPackageVersionForUser:["GET /users/{username}/packages/{package_type}/{package_name}/versions/{package_version_id}"],restorePackageForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/restore"],restorePackageForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/restore"],restorePackageVersionForAuthenticatedUser:["POST /user/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"],restorePackageVersionForOrg:["POST /orgs/{org}/packages/{package_type}/{package_name}/versions/{package_version_id}/restore"]},projects:{addCollaborator:["PUT /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],createCard:["POST /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],createColumn:["POST /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],createForAuthenticatedUser:["POST /user/projects",{mediaType:{previews:["inertia"]}}],createForOrg:["POST /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],createForRepo:["POST /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],delete:["DELETE /projects/{project_id}",{mediaType:{previews:["inertia"]}}],deleteCard:["DELETE /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],deleteColumn:["DELETE /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],get:["GET /projects/{project_id}",{mediaType:{previews:["inertia"]}}],getCard:["GET /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],getColumn:["GET /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}],getPermissionForUser:["GET /projects/{project_id}/collaborators/{username}/permission",{mediaType:{previews:["inertia"]}}],listCards:["GET /projects/columns/{column_id}/cards",{mediaType:{previews:["inertia"]}}],listCollaborators:["GET /projects/{project_id}/collaborators",{mediaType:{previews:["inertia"]}}],listColumns:["GET /projects/{project_id}/columns",{mediaType:{previews:["inertia"]}}],listForOrg:["GET /orgs/{org}/projects",{mediaType:{previews:["inertia"]}}],listForRepo:["GET /repos/{owner}/{repo}/projects",{mediaType:{previews:["inertia"]}}],listForUser:["GET /users/{username}/projects",{mediaType:{previews:["inertia"]}}],moveCard:["POST /projects/columns/cards/{card_id}/moves",{mediaType:{previews:["inertia"]}}],moveColumn:["POST /projects/columns/{column_id}/moves",{mediaType:{previews:["inertia"]}}],removeCollaborator:["DELETE /projects/{project_id}/collaborators/{username}",{mediaType:{previews:["inertia"]}}],update:["PATCH /projects/{project_id}",{mediaType:{previews:["inertia"]}}],updateCard:["PATCH /projects/columns/cards/{card_id}",{mediaType:{previews:["inertia"]}}],updateColumn:["PATCH /projects/columns/{column_id}",{mediaType:{previews:["inertia"]}}]},pulls:{checkIfMerged:["GET /repos/{owner}/{repo}/pulls/{pull_number}/merge"],create:["POST /repos/{owner}/{repo}/pulls"],createReplyForReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments/{comment_id}/replies"],createReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],createReviewComment:["POST /repos/{owner}/{repo}/pulls/{pull_number}/comments"],deletePendingReview:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],deleteReviewComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}"],dismissReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/dismissals"],get:["GET /repos/{owner}/{repo}/pulls/{pull_number}"],getReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],getReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}"],list:["GET /repos/{owner}/{repo}/pulls"],listCommentsForReview:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/comments"],listCommits:["GET /repos/{owner}/{repo}/pulls/{pull_number}/commits"],listFiles:["GET /repos/{owner}/{repo}/pulls/{pull_number}/files"],listRequestedReviewers:["GET /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],listReviewComments:["GET /repos/{owner}/{repo}/pulls/{pull_number}/comments"],listReviewCommentsForRepo:["GET /repos/{owner}/{repo}/pulls/comments"],listReviews:["GET /repos/{owner}/{repo}/pulls/{pull_number}/reviews"],merge:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge"],removeRequestedReviewers:["DELETE /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],requestReviewers:["POST /repos/{owner}/{repo}/pulls/{pull_number}/requested_reviewers"],submitReview:["POST /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}/events"],update:["PATCH /repos/{owner}/{repo}/pulls/{pull_number}"],updateBranch:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/update-branch",{mediaType:{previews:["lydian"]}}],updateReview:["PUT /repos/{owner}/{repo}/pulls/{pull_number}/reviews/{review_id}"],updateReviewComment:["PATCH /repos/{owner}/{repo}/pulls/comments/{comment_id}"]},rateLimit:{get:["GET /rate_limit"]},reactions:{createForCommitComment:["POST /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssue:["POST /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForIssueComment:["POST /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForPullRequestReviewComment:["POST /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],createForTeamDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],deleteForCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssue:["DELETE /repos/{owner}/{repo}/issues/{issue_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForIssueComment:["DELETE /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForPullRequestComment:["DELETE /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussion:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteForTeamDiscussionComment:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}}],deleteLegacy:["DELETE /reactions/{reaction_id}",{mediaType:{previews:["squirrel-girl"]}},{deprecated:"octokit.reactions.deleteLegacy() is deprecated, see https://docs.github.com/v3/reactions/#delete-a-reaction-legacy"}],listForCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssue:["GET /repos/{owner}/{repo}/issues/{issue_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForIssueComment:["GET /repos/{owner}/{repo}/issues/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForPullRequestReviewComment:["GET /repos/{owner}/{repo}/pulls/comments/{comment_id}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}],listForTeamDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/reactions",{mediaType:{previews:["squirrel-girl"]}}]},repos:{acceptInvitation:["PATCH /user/repository_invitations/{invitation_id}"],addAppAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],addCollaborator:["PUT /repos/{owner}/{repo}/collaborators/{username}"],addStatusCheckContexts:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],addTeamAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],addUserAccessRestrictions:["POST /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],checkCollaborator:["GET /repos/{owner}/{repo}/collaborators/{username}"],checkVulnerabilityAlerts:["GET /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],compareCommits:["GET /repos/{owner}/{repo}/compare/{base}...{head}"],createCommitComment:["POST /repos/{owner}/{repo}/commits/{commit_sha}/comments"],createCommitSignatureProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],createCommitStatus:["POST /repos/{owner}/{repo}/statuses/{sha}"],createDeployKey:["POST /repos/{owner}/{repo}/keys"],createDeployment:["POST /repos/{owner}/{repo}/deployments"],createDeploymentStatus:["POST /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],createDispatchEvent:["POST /repos/{owner}/{repo}/dispatches"],createForAuthenticatedUser:["POST /user/repos"],createFork:["POST /repos/{owner}/{repo}/forks"],createInOrg:["POST /orgs/{org}/repos"],createOrUpdateFileContents:["PUT /repos/{owner}/{repo}/contents/{path}"],createPagesSite:["POST /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],createRelease:["POST /repos/{owner}/{repo}/releases"],createUsingTemplate:["POST /repos/{template_owner}/{template_repo}/generate",{mediaType:{previews:["baptiste"]}}],createWebhook:["POST /repos/{owner}/{repo}/hooks"],declineInvitation:["DELETE /user/repository_invitations/{invitation_id}"],delete:["DELETE /repos/{owner}/{repo}"],deleteAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],deleteAdminBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],deleteBranchProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection"],deleteCommitComment:["DELETE /repos/{owner}/{repo}/comments/{comment_id}"],deleteCommitSignatureProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],deleteDeployKey:["DELETE /repos/{owner}/{repo}/keys/{key_id}"],deleteDeployment:["DELETE /repos/{owner}/{repo}/deployments/{deployment_id}"],deleteFile:["DELETE /repos/{owner}/{repo}/contents/{path}"],deleteInvitation:["DELETE /repos/{owner}/{repo}/invitations/{invitation_id}"],deletePagesSite:["DELETE /repos/{owner}/{repo}/pages",{mediaType:{previews:["switcheroo"]}}],deletePullRequestReviewProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],deleteRelease:["DELETE /repos/{owner}/{repo}/releases/{release_id}"],deleteReleaseAsset:["DELETE /repos/{owner}/{repo}/releases/assets/{asset_id}"],deleteWebhook:["DELETE /repos/{owner}/{repo}/hooks/{hook_id}"],disableAutomatedSecurityFixes:["DELETE /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],disableVulnerabilityAlerts:["DELETE /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],downloadArchive:["GET /repos/{owner}/{repo}/zipball/{ref}",{},{renamed:["repos","downloadZipballArchive"]}],downloadTarballArchive:["GET /repos/{owner}/{repo}/tarball/{ref}"],downloadZipballArchive:["GET /repos/{owner}/{repo}/zipball/{ref}"],enableAutomatedSecurityFixes:["PUT /repos/{owner}/{repo}/automated-security-fixes",{mediaType:{previews:["london"]}}],enableVulnerabilityAlerts:["PUT /repos/{owner}/{repo}/vulnerability-alerts",{mediaType:{previews:["dorian"]}}],get:["GET /repos/{owner}/{repo}"],getAccessRestrictions:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions"],getAdminBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],getAllStatusCheckContexts:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts"],getAllTopics:["GET /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],getAppsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps"],getBranch:["GET /repos/{owner}/{repo}/branches/{branch}"],getBranchProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection"],getClones:["GET /repos/{owner}/{repo}/traffic/clones"],getCodeFrequencyStats:["GET /repos/{owner}/{repo}/stats/code_frequency"],getCollaboratorPermissionLevel:["GET /repos/{owner}/{repo}/collaborators/{username}/permission"],getCombinedStatusForRef:["GET /repos/{owner}/{repo}/commits/{ref}/status"],getCommit:["GET /repos/{owner}/{repo}/commits/{ref}"],getCommitActivityStats:["GET /repos/{owner}/{repo}/stats/commit_activity"],getCommitComment:["GET /repos/{owner}/{repo}/comments/{comment_id}"],getCommitSignatureProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_signatures",{mediaType:{previews:["zzzax"]}}],getCommunityProfileMetrics:["GET /repos/{owner}/{repo}/community/profile"],getContent:["GET /repos/{owner}/{repo}/contents/{path}"],getContributorsStats:["GET /repos/{owner}/{repo}/stats/contributors"],getDeployKey:["GET /repos/{owner}/{repo}/keys/{key_id}"],getDeployment:["GET /repos/{owner}/{repo}/deployments/{deployment_id}"],getDeploymentStatus:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses/{status_id}"],getLatestPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/latest"],getLatestRelease:["GET /repos/{owner}/{repo}/releases/latest"],getPages:["GET /repos/{owner}/{repo}/pages"],getPagesBuild:["GET /repos/{owner}/{repo}/pages/builds/{build_id}"],getParticipationStats:["GET /repos/{owner}/{repo}/stats/participation"],getPullRequestReviewProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],getPunchCardStats:["GET /repos/{owner}/{repo}/stats/punch_card"],getReadme:["GET /repos/{owner}/{repo}/readme"],getRelease:["GET /repos/{owner}/{repo}/releases/{release_id}"],getReleaseAsset:["GET /repos/{owner}/{repo}/releases/assets/{asset_id}"],getReleaseByTag:["GET /repos/{owner}/{repo}/releases/tags/{tag}"],getStatusChecksProtection:["GET /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],getTeamsWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams"],getTopPaths:["GET /repos/{owner}/{repo}/traffic/popular/paths"],getTopReferrers:["GET /repos/{owner}/{repo}/traffic/popular/referrers"],getUsersWithAccessToProtectedBranch:["GET /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users"],getViews:["GET /repos/{owner}/{repo}/traffic/views"],getWebhook:["GET /repos/{owner}/{repo}/hooks/{hook_id}"],getWebhookConfigForRepo:["GET /repos/{owner}/{repo}/hooks/{hook_id}/config"],listBranches:["GET /repos/{owner}/{repo}/branches"],listBranchesForHeadCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/branches-where-head",{mediaType:{previews:["groot"]}}],listCollaborators:["GET /repos/{owner}/{repo}/collaborators"],listCommentsForCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/comments"],listCommitCommentsForRepo:["GET /repos/{owner}/{repo}/comments"],listCommitStatusesForRef:["GET /repos/{owner}/{repo}/commits/{ref}/statuses"],listCommits:["GET /repos/{owner}/{repo}/commits"],listContributors:["GET /repos/{owner}/{repo}/contributors"],listDeployKeys:["GET /repos/{owner}/{repo}/keys"],listDeploymentStatuses:["GET /repos/{owner}/{repo}/deployments/{deployment_id}/statuses"],listDeployments:["GET /repos/{owner}/{repo}/deployments"],listForAuthenticatedUser:["GET /user/repos"],listForOrg:["GET /orgs/{org}/repos"],listForUser:["GET /users/{username}/repos"],listForks:["GET /repos/{owner}/{repo}/forks"],listInvitations:["GET /repos/{owner}/{repo}/invitations"],listInvitationsForAuthenticatedUser:["GET /user/repository_invitations"],listLanguages:["GET /repos/{owner}/{repo}/languages"],listPagesBuilds:["GET /repos/{owner}/{repo}/pages/builds"],listPublic:["GET /repositories"],listPullRequestsAssociatedWithCommit:["GET /repos/{owner}/{repo}/commits/{commit_sha}/pulls",{mediaType:{previews:["groot"]}}],listReleaseAssets:["GET /repos/{owner}/{repo}/releases/{release_id}/assets"],listReleases:["GET /repos/{owner}/{repo}/releases"],listTags:["GET /repos/{owner}/{repo}/tags"],listTeams:["GET /repos/{owner}/{repo}/teams"],listWebhooks:["GET /repos/{owner}/{repo}/hooks"],merge:["POST /repos/{owner}/{repo}/merges"],pingWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/pings"],removeAppAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],removeCollaborator:["DELETE /repos/{owner}/{repo}/collaborators/{username}"],removeStatusCheckContexts:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],removeStatusCheckProtection:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],removeTeamAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],removeUserAccessRestrictions:["DELETE /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],renameBranch:["POST /repos/{owner}/{repo}/branches/{branch}/rename"],replaceAllTopics:["PUT /repos/{owner}/{repo}/topics",{mediaType:{previews:["mercy"]}}],requestPagesBuild:["POST /repos/{owner}/{repo}/pages/builds"],setAdminBranchProtection:["POST /repos/{owner}/{repo}/branches/{branch}/protection/enforce_admins"],setAppAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/apps",{},{mapToData:"apps"}],setStatusCheckContexts:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks/contexts",{},{mapToData:"contexts"}],setTeamAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/teams",{},{mapToData:"teams"}],setUserAccessRestrictions:["PUT /repos/{owner}/{repo}/branches/{branch}/protection/restrictions/users",{},{mapToData:"users"}],testPushWebhook:["POST /repos/{owner}/{repo}/hooks/{hook_id}/tests"],transfer:["POST /repos/{owner}/{repo}/transfer"],update:["PATCH /repos/{owner}/{repo}"],updateBranchProtection:["PUT /repos/{owner}/{repo}/branches/{branch}/protection"],updateCommitComment:["PATCH /repos/{owner}/{repo}/comments/{comment_id}"],updateInformationAboutPagesSite:["PUT /repos/{owner}/{repo}/pages"],updateInvitation:["PATCH /repos/{owner}/{repo}/invitations/{invitation_id}"],updatePullRequestReviewProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_pull_request_reviews"],updateRelease:["PATCH /repos/{owner}/{repo}/releases/{release_id}"],updateReleaseAsset:["PATCH /repos/{owner}/{repo}/releases/assets/{asset_id}"],updateStatusCheckPotection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks",{},{renamed:["repos","updateStatusCheckProtection"]}],updateStatusCheckProtection:["PATCH /repos/{owner}/{repo}/branches/{branch}/protection/required_status_checks"],updateWebhook:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}"],updateWebhookConfigForRepo:["PATCH /repos/{owner}/{repo}/hooks/{hook_id}/config"],uploadReleaseAsset:["POST /repos/{owner}/{repo}/releases/{release_id}/assets{?name,label}",{baseUrl:"https://uploads.github.com"}]},search:{code:["GET /search/code"],commits:["GET /search/commits",{mediaType:{previews:["cloak"]}}],issuesAndPullRequests:["GET /search/issues"],labels:["GET /search/labels"],repos:["GET /search/repositories"],topics:["GET /search/topics",{mediaType:{previews:["mercy"]}}],users:["GET /search/users"]},secretScanning:{getAlert:["GET /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"],listAlertsForRepo:["GET /repos/{owner}/{repo}/secret-scanning/alerts"],updateAlert:["PATCH /repos/{owner}/{repo}/secret-scanning/alerts/{alert_number}"]},teams:{addOrUpdateMembershipForUserInOrg:["PUT /orgs/{org}/teams/{team_slug}/memberships/{username}"],addOrUpdateProjectPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],addOrUpdateRepoPermissionsInOrg:["PUT /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],checkPermissionsForProjectInOrg:["GET /orgs/{org}/teams/{team_slug}/projects/{project_id}",{mediaType:{previews:["inertia"]}}],checkPermissionsForRepoInOrg:["GET /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],create:["POST /orgs/{org}/teams"],createDiscussionCommentInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],createDiscussionInOrg:["POST /orgs/{org}/teams/{team_slug}/discussions"],deleteDiscussionCommentInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],deleteDiscussionInOrg:["DELETE /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],deleteInOrg:["DELETE /orgs/{org}/teams/{team_slug}"],getByName:["GET /orgs/{org}/teams/{team_slug}"],getDiscussionCommentInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],getDiscussionInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],getMembershipForUserInOrg:["GET /orgs/{org}/teams/{team_slug}/memberships/{username}"],list:["GET /orgs/{org}/teams"],listChildInOrg:["GET /orgs/{org}/teams/{team_slug}/teams"],listDiscussionCommentsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments"],listDiscussionsInOrg:["GET /orgs/{org}/teams/{team_slug}/discussions"],listForAuthenticatedUser:["GET /user/teams"],listMembersInOrg:["GET /orgs/{org}/teams/{team_slug}/members"],listPendingInvitationsInOrg:["GET /orgs/{org}/teams/{team_slug}/invitations"],listProjectsInOrg:["GET /orgs/{org}/teams/{team_slug}/projects",{mediaType:{previews:["inertia"]}}],listReposInOrg:["GET /orgs/{org}/teams/{team_slug}/repos"],removeMembershipForUserInOrg:["DELETE /orgs/{org}/teams/{team_slug}/memberships/{username}"],removeProjectInOrg:["DELETE /orgs/{org}/teams/{team_slug}/projects/{project_id}"],removeRepoInOrg:["DELETE /orgs/{org}/teams/{team_slug}/repos/{owner}/{repo}"],updateDiscussionCommentInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}/comments/{comment_number}"],updateDiscussionInOrg:["PATCH /orgs/{org}/teams/{team_slug}/discussions/{discussion_number}"],updateInOrg:["PATCH /orgs/{org}/teams/{team_slug}"]},users:{addEmailForAuthenticated:["POST /user/emails"],block:["PUT /user/blocks/{username}"],checkBlocked:["GET /user/blocks/{username}"],checkFollowingForUser:["GET /users/{username}/following/{target_user}"],checkPersonIsFollowedByAuthenticated:["GET /user/following/{username}"],createGpgKeyForAuthenticated:["POST /user/gpg_keys"],createPublicSshKeyForAuthenticated:["POST /user/keys"],deleteEmailForAuthenticated:["DELETE /user/emails"],deleteGpgKeyForAuthenticated:["DELETE /user/gpg_keys/{gpg_key_id}"],deletePublicSshKeyForAuthenticated:["DELETE /user/keys/{key_id}"],follow:["PUT /user/following/{username}"],getAuthenticated:["GET /user"],getByUsername:["GET /users/{username}"],getContextForUser:["GET /users/{username}/hovercard"],getGpgKeyForAuthenticated:["GET /user/gpg_keys/{gpg_key_id}"],getPublicSshKeyForAuthenticated:["GET /user/keys/{key_id}"],list:["GET /users"],listBlockedByAuthenticated:["GET /user/blocks"],listEmailsForAuthenticated:["GET /user/emails"],listFollowedByAuthenticated:["GET /user/following"],listFollowersForAuthenticatedUser:["GET /user/followers"],listFollowersForUser:["GET /users/{username}/followers"],listFollowingForUser:["GET /users/{username}/following"],listGpgKeysForAuthenticated:["GET /user/gpg_keys"],listGpgKeysForUser:["GET /users/{username}/gpg_keys"],listPublicEmailsForAuthenticated:["GET /user/public_emails"],listPublicKeysForUser:["GET /users/{username}/keys"],listPublicSshKeysForAuthenticated:["GET /user/keys"],setPrimaryEmailVisibilityForAuthenticated:["PATCH /user/email/visibility"],unblock:["DELETE /user/blocks/{username}"],unfollow:["DELETE /user/following/{username}"],updateAuthenticated:["PATCH /user"]}},yd="4.12.0";function wd(t,e){const r={};for(const[n,i]of Object.entries(e))for(const[s,c]of Object.entries(i)){const[v,w,T]=c,[D,H]=v.split(/ /),V=Object.assign({method:D,url:H},w);r[n]||(r[n]={});const W=r[n];if(T){W[s]=bd(t,n,s,V,T);continue}W[s]=t.request.defaults(V)}return r}function bd(t,e,r,n,i){const s=t.request.defaults(n);function c(...v){let w=s.endpoint.merge(...v);if(i.mapToData)return w=Object.assign({},w,{data:w[i.mapToData],[i.mapToData]:void 0}),s(w);if(i.renamed){const[T,D]=i.renamed;t.log.warn(`octokit.${e}.${r}() has been renamed to octokit.${T}.${D}()`)}if(i.deprecated&&t.log.warn(i.deprecated),i.renamedParameters){const T=s.endpoint.merge(...v);for(const[D,H]of Object.entries(i.renamedParameters))D in T&&(t.log.warn(`"${D}" parameter is deprecated for "octokit.${e}.${r}()". Use "${H}" instead`),H in T||(T[H]=T[D]),delete T[D]);return s(T)}return s(...v)}return Object.assign(c,s)}function Io(t){return wd(t,vd)}Io.VERSION=yd;const kd="18.2.0",_d=xs.plugin(So,Io,Po).defaults({userAgent:`octokit-rest.js/${kd}`});/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Ls=function(t,e){return Ls=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i])},Ls(t,e)};function _r(t,e){Ls(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var he=function(){return he=Object.assign||function(e){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(e[s]=r[s])}return e},he.apply(this,arguments)};function Do(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]]);return r}function av(t,e,r,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,r):n,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,r,n);else for(var v=t.length-1;v>=0;v--)(c=t[v])&&(s=(i<3?c(s):i>3?c(e,r,s):c(e,r))||s);return i>3&&s&&Object.defineProperty(e,r,s),s}function ov(t,e){return function(r,n){e(r,n,t)}}function uv(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function Vr(t,e,r,n){function i(s){return s instanceof r?s:new r(function(c){c(s)})}return new(r||(r=Promise))(function(s,c){function v(D){try{T(n.next(D))}catch(H){c(H)}}function w(D){try{T(n.throw(D))}catch(H){c(H)}}function T(D){D.done?s(D.value):i(D.value).then(v,w)}T((n=n.apply(t,e||[])).next())})}function Br(t,e){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,c;return c={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function v(T){return function(D){return w([T,D])}}function w(T){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(s=T[0]&2?i.return:T[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,T[1])).done)return s;switch(i=0,s&&(T=[T[0]&2,s.value]),T[0]){case 0:case 1:s=T;break;case 4:return r.label++,{value:T[1],done:!1};case 5:r.label++,i=T[1],T=[0];continue;case 7:T=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(T[0]===6||T[0]===2)){r=0;continue}if(T[0]===3&&(!s||T[1]>s[0]&&T[1]<s[3])){r.label=T[1];break}if(T[0]===6&&r.label<s[1]){r.label=s[1],s=T;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(T);break}s[2]&&r.ops.pop(),r.trys.pop();continue}T=e.call(t,r)}catch(D){T=[6,D],i=0}finally{n=s=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}}function lv(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}function cv(t,e){for(var r in t)r!=="default"&&!e.hasOwnProperty(r)&&(e[r]=t[r])}function Ao(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ed(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],c;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(v){c={error:v}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(c)throw c.error}}return s}function dv(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Ed(arguments[e]));return t}function qs(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;for(var n=Array(t),i=0,e=0;e<r;e++)for(var s=arguments[e],c=0,v=s.length;c<v;c++,i++)n[i]=s[c];return n}function Fi(t){return this instanceof Fi?(this.v=t,this):new Fi(t)}function hv(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,s=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(V){n[V]&&(i[V]=function(W){return new Promise(function(Z,ee){s.push([V,W,Z,ee])>1||v(V,W)})})}function v(V,W){try{w(n[V](W))}catch(Z){H(s[0][3],Z)}}function w(V){V.value instanceof Fi?Promise.resolve(V.value.v).then(T,D):H(s[0][2],V)}function T(V){v("next",V)}function D(V){v("throw",V)}function H(V,W){V(W),s.shift(),s.length&&v(s[0][0],s[0][1])}}function mv(t){var e,r;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=t[i]?function(c){return(r=!r)?{value:Fi(t[i](c)),done:i==="return"}:s?s(c):c}:s}}function pv(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof Ao=="function"?Ao(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=t[s]&&function(c){return new Promise(function(v,w){c=t[s](c),i(v,w,c.done,c.value)})}}function i(s,c,v,w){Promise.resolve(w).then(function(T){s({value:T,done:v})},c)}}function fv(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function gv(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function vv(t){return t&&t.__esModule?t:{default:t}}function yv(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function wv(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}var Er=Re(285),Us="Invariant Violation",Fo=Object.setPrototypeOf,Rd=Fo===void 0?function(t,e){return t.__proto__=e,t}:Fo,_t=function(t){_r(e,t);function e(r){r===void 0&&(r=Us);var n=t.call(this,typeof r=="number"?Us+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return n.framesToPop=1,n.name=Us,Rd(n,e.prototype),n}return e}(Error);function Me(t,e){if(!t)throw new _t(e)}function Oo(t){return function(){return console[t].apply(console,arguments)}}(function(t){t.warn=Oo("warn"),t.error=Oo("error")})(Me||(Me={}));var xo={env:{}};if(typeof process=="object")xo=process;else try{Function("stub","process = stub")(xo)}catch(t){}var bv=null;const kv=null;var Cd=Re(5035),Sd=Re.n(Cd),Mo=Object.prototype,Lo=Mo.toString,Td=Mo.hasOwnProperty,$s=new Map;function Jt(t,e){try{return Hs(t,e)}finally{$s.clear()}}function Hs(t,e){if(t===e)return!0;var r=Lo.call(t),n=Lo.call(e);if(r!==n)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(qo(t,e))return!0;var i=Object.keys(t),s=Object.keys(e),c=i.length;if(c!==s.length)return!1;for(var v=0;v<c;++v)if(!Td.call(e,i[v]))return!1;for(var v=0;v<c;++v){var w=i[v];if(!Hs(t[w],e[w]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==""+e;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(qo(t,e))return!0;for(var T=t.entries(),D=r==="[object Map]";;){var H=T.next();if(H.done)break;var V=H.value,W=V[0],Z=V[1];if(!e.has(W)||D&&!Hs(Z,e.get(W)))return!1}return!0}}return!1}function qo(t,e){var r=$s.get(t);if(r){if(r.has(e))return!0}else $s.set(t,r=new Set);return r.add(e),!1}const _v=null;function Ev(t){return["StringValue","BooleanValue","EnumValue"].indexOf(t.kind)>-1}function Rv(t){return["IntValue","FloatValue"].indexOf(t.kind)>-1}function Nd(t){return t.kind==="StringValue"}function Pd(t){return t.kind==="BooleanValue"}function Id(t){return t.kind==="IntValue"}function Dd(t){return t.kind==="FloatValue"}function Ad(t){return t.kind==="Variable"}function Fd(t){return t.kind==="ObjectValue"}function Od(t){return t.kind==="ListValue"}function xd(t){return t.kind==="EnumValue"}function Md(t){return t.kind==="NullValue"}function Pn(t,e,r,n){if(Id(r)||Dd(r))t[e.value]=Number(r.value);else if(Pd(r)||Nd(r))t[e.value]=r.value;else if(Fd(r)){var i={};r.fields.map(function(c){return Pn(i,c.name,c.value,n)}),t[e.value]=i}else if(Ad(r)){var s=(n||{})[r.name.value];t[e.value]=s}else if(Od(r))t[e.value]=r.values.map(function(c){var v={};return Pn(v,e,c,n),v[e.value]});else if(xd(r))t[e.value]=r.value;else if(Md(r))t[e.value]=null;else throw new _t(17)}function Ld(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(i){r[i.name.value]={},i.arguments&&i.arguments.forEach(function(s){var c=s.name,v=s.value;return Pn(r[i.name.value],c,v,e)})}));var n=null;return t.arguments&&t.arguments.length&&(n={},t.arguments.forEach(function(i){var s=i.name,c=i.value;return Pn(n,s,c,e)})),Uo(t.name.value,n,r)}var qd=["connection","include","skip","client","rest","export"];function Uo(t,e,r){if(r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var n=r.connection.filter?r.connection.filter:[];n.sort();var i=e,s={};return n.forEach(function(w){s[w]=i[w]}),r.connection.key+"("+JSON.stringify(s)+")"}else return r.connection.key;var c=t;if(e){var v=Sd()(e);c+="("+v+")"}return r&&Object.keys(r).forEach(function(w){qd.indexOf(w)===-1&&(r[w]&&Object.keys(r[w]).length?c+="@"+w+"("+JSON.stringify(r[w])+")":c+="@"+w)}),c}function Gs(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(n){var i=n.name,s=n.value;return Pn(r,i,s,e)}),r}return null}function ii(t){return t.alias?t.alias.value:t.name.value}function jr(t){return t.kind==="Field"}function Oi(t){return t.kind==="InlineFragment"}function xi(t){return t&&t.type==="id"&&typeof t.generated=="boolean"}function Mi(t,e){return e===void 0&&(e=!1),he({type:"id",generated:e},typeof t=="string"?{id:t,typename:void 0}:t)}function Ud(t){return t!=null&&typeof t=="object"&&t.type==="json"}function $d(t){throw new InvariantError(18)}function $o(t,e){switch(e===void 0&&(e=$d),t.kind){case"Variable":return e(t);case"NullValue":return null;case"IntValue":return parseInt(t.value,10);case"FloatValue":return parseFloat(t.value);case"ListValue":return t.values.map(function(c){return $o(c,e)});case"ObjectValue":{for(var r={},n=0,i=t.fields;n<i.length;n++){var s=i[n];r[s.name.value]=$o(s.value,e)}return r}default:return t.value}}function Hd(t,e){if(t.directives&&t.directives.length){var r={};return t.directives.forEach(function(n){r[n.name.value]=Gs(n,e)}),r}return null}function Vs(t,e){return e===void 0&&(e={}),jd(t.directives).every(function(r){var n=r.directive,i=r.ifArgument,s=!1;return i.value.kind==="Variable"?(s=e[i.value.name.value],Me(s!==void 0,13)):s=i.value.value,n.name.value==="skip"?!s:s})}function Gd(t){var e=[];return(0,Er.visit)(t,{Directive:function(r){e.push(r.name.value)}}),e}function Li(t,e){return Gd(e).some(function(r){return t.indexOf(r)>-1})}function Vd(t){return t&&Li(["client"],t)&&Li(["export"],t)}function Bd(t){var e=t.name.value;return e==="skip"||e==="include"}function jd(t){return t?t.filter(Bd).map(function(e){var r=e.arguments,n=e.name.value;Me(r&&r.length===1,14);var i=r[0];Me(i.name&&i.name.value==="if",15);var s=i.value;return Me(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),16),{directive:e,ifArgument:i}}):[]}function Ho(t,e){var r=e,n=[];t.definitions.forEach(function(s){if(s.kind==="OperationDefinition")throw new _t(11);s.kind==="FragmentDefinition"&&n.push(s)}),typeof r=="undefined"&&(Me(n.length===1,12),r=n[0].name.value);var i=he(he({},t),{definitions:qs([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return i}function Bs(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return e.forEach(function(n){typeof n=="undefined"||n===null||Object.keys(n).forEach(function(i){t[i]=n[i]})}),t}function Cv(t){hn(t);var e=t.definitions.filter(function(r){return r.kind==="OperationDefinition"&&r.operation==="mutation"})[0];return invariant(e,1),e}function hn(t){Me(t&&t.kind==="Document",2);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new _t(3);return r});return Me(e.length<=1,4),t}function In(t){return hn(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function Sv(t){var e=In(t);return invariant(e,5),e}function js(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function qi(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function zd(t){var e=In(t);return Me(e&&e.operation==="query",6),e}function Qd(t){Me(t.kind==="Document",7),Me(t.definitions.length<=1,8);var e=t.definitions[0];return Me(e.kind==="FragmentDefinition",9),e}function zs(t){hn(t);for(var e,r=0,n=t.definitions;r<n.length;r++){var i=n[r];if(i.kind==="OperationDefinition"){var s=i.operation;if(s==="query"||s==="mutation"||s==="subscription")return i}i.kind==="FragmentDefinition"&&!e&&(e=i)}if(e)return e;throw new _t(10)}function Ui(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function Qs(t){if(t&&t.variableDefinitions&&t.variableDefinitions.length){var e=t.variableDefinitions.filter(function(r){var n=r.defaultValue;return n}).map(function(r){var n=r.variable,i=r.defaultValue,s={};return Pn(s,n.name,i),s});return Bs.apply(void 0,qs([{}],e))}return{}}function Tv(t){var e=new Set;if(t.variableDefinitions)for(var r=0,n=t.variableDefinitions;r<n.length;r++){var i=n[r];e.add(i.variable.name.value)}return e}function Go(t,e,r){var n=0;return t.forEach(function(i,s){e.call(this,i,s,t)&&(t[n++]=i)},r),t.length=n,t}var Wd={kind:"Field",name:{kind:"Name",value:"__typename"}};function Vo(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&Vo(e[r.name.value],e)})}function $i(t){return Vo(In(t)||Qd(t),Ui(qi(t)))?null:t}function Ws(t){return function(r){return t.some(function(n){return n.name&&n.name===r.name.value||n.test&&n.test(r)})}}function Bo(t,e){var r=Object.create(null),n=[],i=Object.create(null),s=[],c=$i((0,Er.visit)(e,{Variable:{enter:function(v,w,T){T.kind!=="VariableDefinition"&&(r[v.name.value]=!0)}},Field:{enter:function(v){if(t&&v.directives){var w=t.some(function(T){return T.remove});if(w&&v.directives&&v.directives.some(Ws(t)))return v.arguments&&v.arguments.forEach(function(T){T.value.kind==="Variable"&&n.push({name:T.value.name.value})}),v.selectionSet&&Qo(v.selectionSet).forEach(function(T){s.push({name:T.name.value})}),null}}},FragmentSpread:{enter:function(v){i[v.name.value]=!0}},Directive:{enter:function(v){if(Ws(t)(v))return null}}}));return c&&Go(n,function(v){return!r[v.name]}).length&&(c=Zd(n,c)),c&&Go(s,function(v){return!i[v.name]}).length&&(c=eh(s,c)),c}function Kd(t){return(0,Er.visit)(hn(t),{SelectionSet:{enter:function(e,r,n){if(!(n&&n.kind==="OperationDefinition")){var i=e.selections;if(!!i){var s=i.some(function(v){return jr(v)&&(v.name.value==="__typename"||v.name.value.lastIndexOf("__",0)===0)});if(!s){var c=n;if(!(jr(c)&&c.directives&&c.directives.some(function(v){return v.name.value==="export"})))return he(he({},e),{selections:qs(i,[Wd])})}}}}}})}var Yd={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function Xd(t){return Bo([Yd],hn(t))}function jo(t,e,r){return r===void 0&&(r=!0),e&&e.selections&&e.selections.some(function(n){return zo(t,n,r)})}function zo(t,e,r){return r===void 0&&(r=!0),jr(e)?e.directives?e.directives.some(Ws(t))||r&&jo(t,e.selectionSet,r):!1:!0}function Nv(t,e){hn(e);var r;return $i(visit(e,{SelectionSet:{enter:function(n,i,s,c){var v=c.join("-");if(!r||v===r||!v.startsWith(r))if(n.selections){var w=n.selections.filter(function(T){return zo(t,T)});return jo(t,n,!1)&&(r=v),__assign(__assign({},n),{selections:w})}else return null}}}))}function Jd(t){return function(r){return t.some(function(n){return r.value&&r.value.kind==="Variable"&&r.value.name&&(n.name===r.value.name.value||n.test&&n.test(r))})}}function Zd(t,e){var r=Jd(t);return $i((0,Er.visit)(e,{OperationDefinition:{enter:function(n){return he(he({},n),{variableDefinitions:n.variableDefinitions.filter(function(i){return!t.some(function(s){return s.name===i.variable.name.value})})})}},Field:{enter:function(n){var i=t.some(function(c){return c.remove});if(i){var s=0;if(n.arguments.forEach(function(c){r(c)&&(s+=1)}),s===1)return null}}},Argument:{enter:function(n){if(r(n))return null}}}))}function eh(t,e){function r(n){if(t.some(function(i){return i.name===n.name.value}))return null}return $i((0,Er.visit)(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function Qo(t){var e=[];return t.selections.forEach(function(r){(jr(r)||Oi(r))&&r.selectionSet?Qo(r.selectionSet).forEach(function(n){return e.push(n)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function th(t){var e=zs(t),r=e.operation;if(r==="query")return t;var n=(0,Er.visit)(t,{OperationDefinition:{enter:function(i){return he(he({},i),{operation:"query"})}}});return n}function rh(t){hn(t);var e=Bo([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=(0,Er.visit)(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var n=r.selectionSet.selections.every(function(i){return jr(i)&&i.name.value==="__typename"});if(n)return null}}}})),e}var Ks=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative"),nh=Object.prototype.toString;function ih(t){return Ys(t,new Map)}function Ys(t,e){switch(nh.call(t)){case"[object Array]":{if(e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(i,s){r[s]=Ys(i,e)}),r}case"[object Object]":{if(e.has(t))return e.get(t);var n=Object.create(Object.getPrototypeOf(t));return e.set(t,n),Object.keys(t).forEach(function(i){n[i]=Ys(t[i],e)}),n}default:return t}}function sh(){return typeof process!="undefined"?"production":"development"}function Xs(t){return sh()===t}function Wo(){return Xs("production")===!0}function ah(){return Xs("development")===!0}function Js(){return Xs("test")===!0}function Zs(t){try{return t()}catch(e){console.error&&console.error(e)}}function mn(t){return t.errors&&t.errors.length}function Ko(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){t[e]!==null&&(typeof t[e]=="object"||typeof t[e]=="function")&&!Object.isFrozen(t[e])&&Ko(t[e])}),t}function Pv(t){if(ah()||Js()){var e=typeof Symbol=="function"&&typeof Symbol("")=="string";if(!e)return Ko(t)}return t}var oh=Object.prototype.hasOwnProperty;function Yo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ea(t)}function ea(t){var e=t[0]||{},r=t.length;if(r>1){var n=[];e=ta(e,n);for(var i=1;i<r;++i)e=Jo(e,t[i],n)}return e}function Xo(t){return t!==null&&typeof t=="object"}function Jo(t,e,r){return Xo(e)&&Xo(t)?(Object.isExtensible&&!Object.isExtensible(t)&&(t=ta(t,r)),Object.keys(e).forEach(function(n){var i=e[n];if(oh.call(t,n)){var s=t[n];i!==s&&(t[n]=Jo(ta(s,r),i,r))}else t[n]=i}),t):e}function ta(t,e){return t!==null&&typeof t=="object"&&e.indexOf(t)<0&&(Array.isArray(t)?t=t.slice(0):t=he({__proto__:Object.getPrototypeOf(t)},t),e.push(t)),t}var Zo=Object.create({});function Iv(t,e){e===void 0&&(e="warn"),!Wo()&&!Zo[t]&&(Js()||(Zo[t]=!0),e==="error"?console.error(t):console.warn(t))}function Dv(t){return JSON.parse(JSON.stringify(t))}var uh=Re(9329),lh=Re.n(uh),ch=lh();const Ft=ch;function dh(t){for(var e=["query","operationName","variables","extensions","context"],r=0,n=Object.keys(t);r<n.length;r++){var i=n[r];if(e.indexOf(i)<0)throw new _t(2)}return t}var Av=function(t){_r(e,t);function e(r,n){var i=t.call(this,r)||this;return i.link=n,i}return e}(Error);function Hi(t){return t.request.length<=1}function Fv(t){var e=!1;return new Promise(function(r,n){t.subscribe({next:function(i){e||(e=!0,r(i))},error:n})})}var Ov=null;function xv(t){return new Observable(function(e){t.then(function(r){e.next(r),e.complete()}).catch(e.error.bind(e))})}function eu(t){return new Ft(function(e){e.error(t)})}function hh(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?js(e.query):""),e}function mh(t,e){var r=he({},t),n=function(s){typeof s=="function"?r=he({},r,s(r)):r=he({},r,s)},i=function(){return he({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:n}),Object.defineProperty(e,"getContext",{enumerable:!1,value:i}),Object.defineProperty(e,"toKey",{enumerable:!1,value:function(){return ph(e)}}),e}function ph(t){var e=t.query,r=t.variables,n=t.operationName;return JSON.stringify([n,e,r])}function tu(t,e){return e?e(t):Ft.of()}function si(t){return typeof t=="function"?new Zt(t):t}function ru(){return new Zt(function(){return Ft.of()})}function fh(t){return t.length===0?ru():t.map(si).reduce(function(e,r){return e.concat(r)})}function nu(t,e,r){var n=si(e),i=si(r||new Zt(tu));return Hi(n)&&Hi(i)?new Zt(function(s){return t(s)?n.request(s)||Ft.of():i.request(s)||Ft.of()}):new Zt(function(s,c){return t(s)?n.request(s,c)||Ft.of():i.request(s,c)||Ft.of()})}var gh=function(t,e){var r=si(t);if(Hi(r))return r;var n=si(e);return Hi(n)?new Zt(function(i){return r.request(i,function(s){return n.request(s)||Ft.of()})||Ft.of()}):new Zt(function(i,s){return r.request(i,function(c){return n.request(c,s)||Ft.of()})||Ft.of()})},Zt=function(){function t(e){e&&(this.request=e)}return t.prototype.split=function(e,r,n){return this.concat(nu(e,r,n||new t(tu)))},t.prototype.concat=function(e){return gh(this,e)},t.prototype.request=function(e,r){throw new _t(1)},t.empty=ru,t.from=fh,t.split=nu,t.execute=Gi,t}();function Gi(t,e){return t.request(mh(e.context,hh(dh(e))))||Ft.of()}var vh=Re(7121),nt;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(nt||(nt={}));function iu(t){return t<7}var ai=function(t){_r(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype[vh.Z]=function(){return this},e.prototype["@@observable"]=function(){return this},e}(Ft);function Dn(t){return Array.isArray(t)&&t.length>0}function yh(t){return t.hasOwnProperty("graphQLErrors")}var wh=function(t){var e="";return Dn(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var n=r?r.message:"Error message not found.";e+="GraphQL error: "+n+`
`}),t.networkError&&(e+="Network error: "+t.networkError.message+`
`),e=e.replace(/\n$/,""),e},zr=function(t){_r(e,t);function e(r){var n=r.graphQLErrors,i=r.networkError,s=r.errorMessage,c=r.extraInfo,v=t.call(this,s)||this;return v.graphQLErrors=n||[],v.networkError=i||null,s?v.message=s:v.message=wh(v),v.extraInfo=c,v.__proto__=e.prototype,v}return e}(Error),pn;(function(t){t[t.normal=1]="normal",t[t.refetch=2]="refetch",t[t.poll=3]="poll"})(pn||(pn={}));var bh=function(t,e){return e===void 0&&(e="none"),t&&(t.networkError||e==="none"&&Dn(t.graphQLErrors))},kh=function(t){_r(e,t);function e(r){var n=r.queryManager,i=r.options,s=r.shouldSubscribe,c=s===void 0?!0:s,v=t.call(this,function(T){return v.onSubscribe(T)})||this;v.observers=new Set,v.subscriptions=new Set,v.isTornDown=!1,v.options=i,v.variables=i.variables||{},v.queryId=n.generateQueryId(),v.shouldSubscribe=c;var w=In(i.query);return v.queryName=w&&w.name&&w.name.value,v.queryManager=n,v}return e.prototype.result=function(){var r=this;return new Promise(function(n,i){var s={next:function(v){n(v),r.observers.delete(s),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){c.unsubscribe()},0)},error:i},c=r.subscribe(s)})},e.prototype.currentResult=function(){var r=this.getCurrentResult();return r.data===void 0&&(r.data={}),r},e.prototype.getCurrentResult=function(){if(this.isTornDown){var r=this.lastResult;return{data:!this.lastError&&r&&r.data||void 0,error:this.lastError,loading:!1,networkStatus:nt.error}}var n=this.queryManager.getCurrentQueryResult(this),i=n.data,s=n.partial,c=this.queryManager.queryStore.get(this.queryId),v,w=this.options.fetchPolicy,T=w==="network-only"||w==="no-cache";if(c){var D=c.networkStatus;if(bh(c,this.options.errorPolicy))return{data:void 0,loading:!1,networkStatus:D,error:new zr({graphQLErrors:c.graphQLErrors,networkError:c.networkError})};c.variables&&(this.options.variables=he(he({},this.options.variables),c.variables),this.variables=this.options.variables),v={data:i,loading:iu(D),networkStatus:D},c.graphQLErrors&&this.options.errorPolicy==="all"&&(v.errors=c.graphQLErrors)}else{var H=T||s&&w!=="cache-only";v={data:i,loading:H,networkStatus:H?nt.loading:nt.ready}}return s||this.updateLastResult(he(he({},v),{stale:!1})),he(he({},v),{partial:s})},e.prototype.isDifferentFromLastResult=function(r){var n=this.lastResultSnapshot;return!(n&&r&&n.networkStatus===r.networkStatus&&n.stale===r.stale&&Jt(n.data,r.data))},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){var r=this.queryManager.queryStore.get(this.queryId);r&&(r.networkError=null,r.graphQLErrors=[])},e.prototype.refetch=function(r){var n=this.options.fetchPolicy;return n==="cache-only"?Promise.reject(new _t(1)):(n!=="no-cache"&&n!=="cache-and-network"&&(n="network-only"),Jt(this.variables,r)||(this.variables=he(he({},this.variables),r)),Jt(this.options.variables,this.variables)||(this.options.variables=he(he({},this.options.variables),this.variables)),this.queryManager.fetchQuery(this.queryId,he(he({},this.options),{fetchPolicy:n}),pn.refetch))},e.prototype.fetchMore=function(r){var n=this;Me(r.updateQuery,2);var i=he(he({},r.query?r:he(he(he({},this.options),r),{variables:he(he({},this.variables),r.variables)})),{fetchPolicy:"network-only"}),s=this.queryManager.generateQueryId();return this.queryManager.fetchQuery(s,i,pn.normal,this.queryId).then(function(c){return n.updateQuery(function(v){return r.updateQuery(v,{fetchMoreResult:c.data,variables:i.variables})}),n.queryManager.stopQuery(s),c},function(c){throw n.queryManager.stopQuery(s),c})},e.prototype.subscribeToMore=function(r){var n=this,i=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables}).subscribe({next:function(s){var c=r.updateQuery;c&&n.updateQuery(function(v,w){var T=w.variables;return c(v,{subscriptionData:s,variables:T})})},error:function(s){if(r.onError){r.onError(s);return}}});return this.subscriptions.add(i),function(){n.subscriptions.delete(i)&&i.unsubscribe()}},e.prototype.setOptions=function(r){var n=this.options.fetchPolicy;this.options=he(he({},this.options),r),r.pollInterval?this.startPolling(r.pollInterval):r.pollInterval===0&&this.stopPolling();var i=r.fetchPolicy;return this.setVariables(this.options.variables,n!==i&&(n==="cache-only"||n==="standby"||i==="network-only"),r.fetchResults)},e.prototype.setVariables=function(r,n,i){return n===void 0&&(n=!1),i===void 0&&(i=!0),this.isTornDown=!1,r=r||this.variables,!n&&Jt(r,this.variables)?this.observers.size&&i?this.result():Promise.resolve():(this.variables=this.options.variables=r,this.observers.size?this.queryManager.fetchQuery(this.queryId,this.options):Promise.resolve())},e.prototype.updateQuery=function(r){var n=this.queryManager,i=n.getQueryWithPreviousResult(this.queryId),s=i.previousResult,c=i.variables,v=i.document,w=Zs(function(){return r(s,{variables:c})});w&&(n.dataStore.markUpdateQueryResult(v,c,w),n.broadcastQueries())},e.prototype.stopPolling=function(){this.queryManager.stopPollingQuery(this.queryId),this.options.pollInterval=void 0},e.prototype.startPolling=function(r){su(this),this.options.pollInterval=r,this.queryManager.startPollingQuery(this.options,this.queryId)},e.prototype.updateLastResult=function(r){var n=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:ih(r),n},e.prototype.onSubscribe=function(r){var n=this;try{var i=r._subscription._observer;i&&!i.error&&(i.error=_h)}catch(c){}var s=!this.observers.size;return this.observers.add(r),r.next&&this.lastResult&&r.next(this.lastResult),r.error&&this.lastError&&r.error(this.lastError),s&&this.setUpQuery(),function(){n.observers.delete(r)&&!n.observers.size&&n.tearDownQuery()}},e.prototype.setUpQuery=function(){var r=this,n=this,i=n.queryManager,s=n.queryId;this.shouldSubscribe&&i.addObservableQuery(s,this),this.options.pollInterval&&(su(this),i.startPollingQuery(this.options,s));var c=function(v){r.updateLastResult(he(he({},r.lastResult),{errors:v.graphQLErrors,networkStatus:nt.error,loading:!1})),ra(r.observers,"error",r.lastError=v)};i.observeQuery(s,this.options,{next:function(v){if(r.lastError||r.isDifferentFromLastResult(v)){var w=r.updateLastResult(v),T=r.options,D=T.query,H=T.variables,V=T.fetchPolicy;i.transform(D).hasClientExports?i.getLocalState().addExportedVariables(D,H).then(function(W){var Z=r.variables;r.variables=r.options.variables=W,!v.loading&&w&&V!=="cache-only"&&i.transform(D).serverQuery&&!Jt(Z,W)?r.refetch():ra(r.observers,"next",v)}):ra(r.observers,"next",v)}},error:c}).catch(c)},e.prototype.tearDownQuery=function(){var r=this.queryManager;this.isTornDown=!0,r.stopPollingQuery(this.queryId),this.subscriptions.forEach(function(n){return n.unsubscribe()}),this.subscriptions.clear(),r.removeObservableQuery(this.queryId),r.stopQuery(this.queryId),this.observers.clear()},e}(ai);function _h(t){}function ra(t,e,r){var n=[];t.forEach(function(i){return i[e]&&n.push(i)}),n.forEach(function(i){return i[e](r)})}function su(t){var e=t.options.fetchPolicy;Me(e!=="cache-first"&&e!=="cache-only",3)}var Eh=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initMutation=function(e,r,n){this.store[e]={mutation:r,variables:n||{},loading:!0,error:null}},t.prototype.markMutationError=function(e,r){var n=this.store[e];n&&(n.loading=!1,n.error=r)},t.prototype.markMutationResult=function(e){var r=this.store[e];r&&(r.loading=!1,r.error=null)},t.prototype.reset=function(){this.store={}},t}(),Rh=function(){function t(){this.store={}}return t.prototype.getStore=function(){return this.store},t.prototype.get=function(e){return this.store[e]},t.prototype.initQuery=function(e){var r=this.store[e.queryId];Me(!r||r.document===e.document||Jt(r.document,e.document),19);var n=!1,i=null;e.storePreviousVariables&&r&&r.networkStatus!==nt.loading&&(Jt(r.variables,e.variables)||(n=!0,i=r.variables));var s;n?s=nt.setVariables:e.isPoll?s=nt.poll:e.isRefetch?s=nt.refetch:s=nt.loading;var c=[];r&&r.graphQLErrors&&(c=r.graphQLErrors),this.store[e.queryId]={document:e.document,variables:e.variables,previousVariables:i,networkError:null,graphQLErrors:c,networkStatus:s,metadata:e.metadata},typeof e.fetchMoreForQueryId=="string"&&this.store[e.fetchMoreForQueryId]&&(this.store[e.fetchMoreForQueryId].networkStatus=nt.fetchMore)},t.prototype.markQueryResult=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=null,this.store[e].graphQLErrors=Dn(r.errors)?r.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=nt.ready,typeof n=="string"&&this.store[n]&&(this.store[n].networkStatus=nt.ready))},t.prototype.markQueryError=function(e,r,n){!this.store||!this.store[e]||(this.store[e].networkError=r,this.store[e].networkStatus=nt.error,typeof n=="string"&&this.markQueryResultClient(n,!0))},t.prototype.markQueryResultClient=function(e,r){var n=this.store&&this.store[e];n&&(n.networkError=null,n.previousVariables=null,r&&(n.networkStatus=nt.ready))},t.prototype.stopQuery=function(e){delete this.store[e]},t.prototype.reset=function(e){var r=this;Object.keys(this.store).forEach(function(n){e.indexOf(n)<0?r.stopQuery(n):r.store[n].networkStatus=nt.loading})},t}();function Ch(t){return t.charAt(0).toUpperCase()+t.slice(1)}var au=function(){function t(e){var r=e.cache,n=e.client,i=e.resolvers,s=e.fragmentMatcher;this.cache=r,n&&(this.client=n),i&&this.addResolvers(i),s&&this.setFragmentMatcher(s)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(n){r.resolvers=Yo(r.resolvers,n)}):this.resolvers=Yo(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,n=e.remoteResult,i=e.context,s=e.variables,c=e.onlyRunForcedResolvers,v=c===void 0?!1:c;return Vr(this,void 0,void 0,function(){return Br(this,function(w){return r?[2,this.resolveDocument(r,n.data,i,s,this.fragmentMatcher,v).then(function(T){return he(he({},n),{data:T.result})})]:[2,n]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return Li(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return this.resolvers?rh(e):e},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.cache,n=he(he({},e),{cache:r,getCacheKey:function(i){if(r.config)return r.config.dataIdFromObject(i);Me(!1,6)}});return n},t.prototype.addExportedVariables=function(e,r,n){return r===void 0&&(r={}),n===void 0&&(n={}),Vr(this,void 0,void 0,function(){return Br(this,function(i){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(n),r).then(function(s){return he(he({},r),s.exportedVariables)})]:[2,he({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return(0,Er.visit)(e,{Directive:{enter:function(n){if(n.name.value==="client"&&n.arguments&&(r=n.arguments.some(function(i){return i.name.value==="always"&&i.value.kind==="BooleanValue"&&i.value.value===!0}),r))return Er.BREAK}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:th(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,n,i,s,c){return n===void 0&&(n={}),i===void 0&&(i={}),s===void 0&&(s=function(){return!0}),c===void 0&&(c=!1),Vr(this,void 0,void 0,function(){var v,w,T,D,H,V,W,Z,ee;return Br(this,function(te){return v=zs(e),w=qi(e),T=Ui(w),D=v.operation,H=D?Ch(D):"Query",V=this,W=V.cache,Z=V.client,ee={fragmentMap:T,context:he(he({},n),{cache:W,client:Z}),variables:i,fragmentMatcher:s,defaultOperationType:H,exportedVariables:{},onlyRunForcedResolvers:c},[2,this.resolveSelectionSet(v.selectionSet,r,ee).then(function(ae){return{result:ae,exportedVariables:ee.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,n){return Vr(this,void 0,void 0,function(){var i,s,c,v,w,T=this;return Br(this,function(D){return i=n.fragmentMap,s=n.context,c=n.variables,v=[r],w=function(H){return Vr(T,void 0,void 0,function(){var V,W;return Br(this,function(Z){return Vs(H,c)?jr(H)?[2,this.resolveField(H,r,n).then(function(ee){var te;typeof ee!="undefined"&&v.push((te={},te[ii(H)]=ee,te))})]:(Oi(H)?V=H:(V=i[H.name.value],Me(V,7)),V&&V.typeCondition&&(W=V.typeCondition.name.value,n.fragmentMatcher(r,W,s))?[2,this.resolveSelectionSet(V.selectionSet,r,n).then(function(ee){v.push(ee)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(w)).then(function(){return ea(v)})]})})},t.prototype.resolveField=function(e,r,n){return Vr(this,void 0,void 0,function(){var i,s,c,v,w,T,D,H,V,W=this;return Br(this,function(Z){return i=n.variables,s=e.name.value,c=ii(e),v=s!==c,w=r[c]||r[s],T=Promise.resolve(w),(!n.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(D=r.__typename||n.defaultOperationType,H=this.resolvers&&this.resolvers[D],H&&(V=H[v?s:c],V&&(T=Promise.resolve(V(r,Gs(e,i),n.context,{field:e,fragmentMap:n.fragmentMap}))))),[2,T.then(function(ee){if(ee===void 0&&(ee=w),e.directives&&e.directives.forEach(function(te){te.name.value==="export"&&te.arguments&&te.arguments.forEach(function(ae){ae.name.value==="as"&&ae.value.kind==="StringValue"&&(n.exportedVariables[ae.value.value]=ee)})}),!e.selectionSet||ee==null)return ee;if(Array.isArray(ee))return W.resolveSubSelectedArray(e,ee,n);if(e.selectionSet)return W.resolveSelectionSet(e.selectionSet,ee,n)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,n){var i=this;return Promise.all(r.map(function(s){if(s===null)return null;if(Array.isArray(s))return i.resolveSubSelectedArray(e,s,n);if(e.selectionSet)return i.resolveSelectionSet(e.selectionSet,s,n)}))},t}();function ou(t){var e=new Set,r=null;return new ai(function(n){return e.add(n),r=r||t.subscribe({next:function(i){e.forEach(function(s){return s.next&&s.next(i)})},error:function(i){e.forEach(function(s){return s.error&&s.error(i)})},complete:function(){e.forEach(function(i){return i.complete&&i.complete()})}}),function(){e.delete(n)&&!e.size&&r&&(r.unsubscribe(),r=null)}})}function Sh(t,e){return new ai(function(r){var n=r.next,i=r.error,s=r.complete,c=0,v=!1,w={next:function(D){++c,new Promise(function(H){H(e(D))}).then(function(H){--c,n&&n.call(r,H),v&&w.complete()},function(H){--c,i&&i.call(r,H)})},error:function(D){i&&i.call(r,D)},complete:function(){v=!0,c||s&&s.call(r)}},T=t.subscribe(w);return function(){return T.unsubscribe()}})}var Th=Object.prototype.hasOwnProperty,Nh=function(){function t(e){var r=e.link,n=e.queryDeduplication,i=n===void 0?!1:n,s=e.store,c=e.onBroadcast,v=c===void 0?function(){}:c,w=e.ssrMode,T=w===void 0?!1:w,D=e.clientAwareness,H=D===void 0?{}:D,V=e.localState,W=e.assumeImmutableResults;this.mutationStore=new Eh,this.queryStore=new Rh,this.clientAwareness={},this.idCounter=1,this.queries=new Map,this.fetchQueryRejectFns=new Map,this.transformCache=new(Ks?WeakMap:Map),this.inFlightLinkObservables=new Map,this.pollingInfoByQueryId=new Map,this.link=r,this.queryDeduplication=i,this.dataStore=s,this.onBroadcast=v,this.clientAwareness=H,this.localState=V||new au({cache:s.getCache()}),this.ssrMode=T,this.assumeImmutableResults=!!W}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,n){e.stopQueryNoBroadcast(n)}),this.fetchQueryRejectFns.forEach(function(r){r(new _t(8))})},t.prototype.mutate=function(e){var r=e.mutation,n=e.variables,i=e.optimisticResponse,s=e.updateQueries,c=e.refetchQueries,v=c===void 0?[]:c,w=e.awaitRefetchQueries,T=w===void 0?!1:w,D=e.update,H=e.errorPolicy,V=H===void 0?"none":H,W=e.fetchPolicy,Z=e.context,ee=Z===void 0?{}:Z;return Vr(this,void 0,void 0,function(){var te,ae,me,fe=this;return Br(this,function(ce){switch(ce.label){case 0:return Me(r,9),Me(!W||W==="no-cache",10),te=this.generateQueryId(),r=this.transform(r).document,this.setQuery(te,function(){return{document:r}}),n=this.getVariables(r,n),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,n,ee)]:[3,2];case 1:n=ce.sent(),ce.label=2;case 2:return ae=function(){var ke={};return s&&fe.queries.forEach(function(Ke,Ye){var ct=Ke.observableQuery;if(ct){var Ve=ct.queryName;Ve&&Th.call(s,Ve)&&(ke[Ye]={updater:s[Ve],query:fe.queryStore.get(Ye)})}}),ke},this.mutationStore.initMutation(te,r,n),this.dataStore.markMutationInit({mutationId:te,document:r,variables:n,updateQueries:ae(),update:D,optimisticResponse:i}),this.broadcastQueries(),me=this,[2,new Promise(function(ke,Ke){var Ye,ct;me.getObservableFromLink(r,he(he({},ee),{optimisticResponse:i}),n,!1).subscribe({next:function(Ve){if(mn(Ve)&&V==="none"){ct=new zr({graphQLErrors:Ve.errors});return}me.mutationStore.markMutationResult(te),W!=="no-cache"&&me.dataStore.markMutationResult({mutationId:te,result:Ve,document:r,variables:n,updateQueries:ae(),update:D}),Ye=Ve},error:function(Ve){me.mutationStore.markMutationError(te,Ve),me.dataStore.markMutationComplete({mutationId:te,optimisticResponse:i}),me.broadcastQueries(),me.setQuery(te,function(){return{document:null}}),Ke(new zr({networkError:Ve}))},complete:function(){if(ct&&me.mutationStore.markMutationError(te,ct),me.dataStore.markMutationComplete({mutationId:te,optimisticResponse:i}),me.broadcastQueries(),ct){Ke(ct);return}typeof v=="function"&&(v=v(Ye));var Ve=[];Dn(v)&&v.forEach(function(Jr){if(typeof Jr=="string")me.queries.forEach(function(ar){var It=ar.observableQuery;It&&It.queryName===Jr&&Ve.push(It.refetch())});else{var Ti={query:Jr.query,variables:Jr.variables,fetchPolicy:"network-only"};Jr.context&&(Ti.context=Jr.context),Ve.push(me.query(Ti))}}),Promise.all(T?Ve:[]).then(function(){me.setQuery(te,function(){return{document:null}}),V==="ignore"&&Ye&&mn(Ye)&&delete Ye.errors,ke(Ye)})}})})]}})})},t.prototype.fetchQuery=function(e,r,n,i){return Vr(this,void 0,void 0,function(){var s,c,v,w,T,D,H,V,W,Z,ee,te,ae,me,fe,ce,ke,Ke,Ye=this;return Br(this,function(ct){switch(ct.label){case 0:return s=r.metadata,c=s===void 0?null:s,v=r.fetchPolicy,w=v===void 0?"cache-first":v,T=r.context,D=T===void 0?{}:T,H=this.transform(r.query).document,V=this.getVariables(H,r.variables),this.transform(H).hasClientExports?[4,this.localState.addExportedVariables(H,V,D)]:[3,2];case 1:V=ct.sent(),ct.label=2;case 2:if(r=he(he({},r),{variables:V}),Z=w==="network-only"||w==="no-cache",ee=Z,Z||(te=this.dataStore.getCache().diff({query:H,variables:V,returnPartialData:!0,optimistic:!1}),ae=te.complete,me=te.result,ee=!ae||w==="cache-and-network",W=me),fe=ee&&w!=="cache-only"&&w!=="standby",Li(["live"],H)&&(fe=!0),ce=this.idCounter++,ke=w!=="no-cache"?this.updateQueryWatch(e,H,r):void 0,this.setQuery(e,function(){return{document:H,lastRequestId:ce,invalidated:!0,cancel:ke}}),this.invalidate(i),this.queryStore.initQuery({queryId:e,document:H,storePreviousVariables:fe,variables:V,isPoll:n===pn.poll,isRefetch:n===pn.refetch,metadata:c,fetchMoreForQueryId:i}),this.broadcastQueries(),fe){if(Ke=this.fetchRequest({requestId:ce,queryId:e,document:H,options:r,fetchMoreForQueryId:i}).catch(function(Ve){throw yh(Ve)?Ve:(ce>=Ye.getQuery(e).lastRequestId&&(Ye.queryStore.markQueryError(e,Ve,i),Ye.invalidate(e),Ye.invalidate(i),Ye.broadcastQueries()),new zr({networkError:Ve}))}),w!=="cache-and-network")return[2,Ke];Ke.catch(function(){})}return this.queryStore.markQueryResultClient(e,!fe),this.invalidate(e),this.invalidate(i),this.transform(H).hasForcedResolvers?[2,this.localState.runResolvers({document:H,remoteResult:{data:W},context:D,variables:V,onlyRunForcedResolvers:!0}).then(function(Ve){return Ye.markQueryResult(e,Ve,r,i),Ye.broadcastQueries(),Ve})]:(this.broadcastQueries(),[2,{data:W}])}})})},t.prototype.markQueryResult=function(e,r,n,i){var s=n.fetchPolicy,c=n.variables,v=n.errorPolicy;s==="no-cache"?this.setQuery(e,function(){return{newData:{result:r.data,complete:!0}}}):this.dataStore.markQueryResult(r,this.getQuery(e).document,c,i,v==="ignore"||v==="all")},t.prototype.queryListenerForObserver=function(e,r,n){var i=this;function s(c,v){if(n[c])try{n[c](v)}catch(w){}}return function(c,v){if(i.invalidate(e,!1),!!c){var w=i.getQuery(e),T=w.observableQuery,D=w.document,H=T?T.options.fetchPolicy:r.fetchPolicy;if(H!=="standby"){var V=iu(c.networkStatus),W=T&&T.getLastResult(),Z=!!(W&&W.networkStatus!==c.networkStatus),ee=r.returnPartialData||!v&&c.previousVariables||Z&&r.notifyOnNetworkStatusChange||H==="cache-only"||H==="cache-and-network";if(!(V&&!ee)){var te=Dn(c.graphQLErrors),ae=T&&T.options.errorPolicy||r.errorPolicy||"none";if(ae==="none"&&te||c.networkError)return s("error",new zr({graphQLErrors:c.graphQLErrors,networkError:c.networkError}));try{var me=void 0,fe=void 0;if(v)H!=="no-cache"&&H!=="network-only"&&i.setQuery(e,function(){return{newData:null}}),me=v.result,fe=!v.complete;else{var ce=T&&T.getLastError(),ke=ae!=="none"&&(ce&&ce.graphQLErrors)!==c.graphQLErrors;if(W&&W.data&&!ke)me=W.data,fe=!1;else{var Ke=i.dataStore.getCache().diff({query:D,variables:c.previousVariables||c.variables,returnPartialData:!0,optimistic:!0});me=Ke.result,fe=!Ke.complete}}var Ye=fe&&!(r.returnPartialData||H==="cache-only"),ct={data:Ye?W&&W.data:me,loading:V,networkStatus:c.networkStatus,stale:Ye};ae==="all"&&te&&(ct.errors=c.graphQLErrors),s("next",ct)}catch(Ve){s("error",new zr({networkError:Ve}))}}}}}},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var n=this.dataStore.getCache(),i=n.transformDocument(e),s=Xd(n.transformForLink(i)),c=this.localState.clientQuery(i),v=this.localState.serverQuery(s),w={document:i,hasClientExports:Vd(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:c,serverQuery:v,defaultVars:Qs(In(i))},T=function(D){D&&!r.has(D)&&r.set(D,w)};T(e),T(i),T(c),T(v)}return r.get(e)},t.prototype.getVariables=function(e,r){return he(he({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e,r){r===void 0&&(r=!0),Me(e.fetchPolicy!=="standby",11),e.variables=this.getVariables(e.query,e.variables),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var n=he({},e);return new kh({queryManager:this,options:n,shouldSubscribe:r})},t.prototype.query=function(e){var r=this;return Me(e.query,12),Me(e.query.kind==="Document",13),Me(!e.returnPartialData,14),Me(!e.pollInterval,15),new Promise(function(n,i){var s=r.watchQuery(e,!1);r.fetchQueryRejectFns.set("query:"+s.queryId,i),s.result().then(n,i).then(function(){return r.fetchQueryRejectFns.delete("query:"+s.queryId)})})},t.prototype.generateQueryId=function(){return String(this.idCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){this.stopPollingQuery(e),this.queryStore.stopQuery(e),this.invalidate(e)},t.prototype.addQueryListener=function(e,r){this.setQuery(e,function(n){var i=n.listeners;return i.add(r),{invalidated:!1}})},t.prototype.updateQueryWatch=function(e,r,n){var i=this,s=this.getQuery(e).cancel;s&&s();var c=function(){var v=null,w=i.getQuery(e).observableQuery;if(w){var T=w.getLastResult();T&&(v=T.data)}return v};return this.dataStore.getCache().watch({query:r,variables:n.variables,optimistic:!0,previousResult:c,callback:function(v){i.setQuery(e,function(){return{invalidated:!0,newData:v}})}})},t.prototype.addObservableQuery=function(e,r){this.setQuery(e,function(){return{observableQuery:r}})},t.prototype.removeObservableQuery=function(e){var r=this.getQuery(e).cancel;this.setQuery(e,function(){return{observableQuery:null}}),r&&r()},t.prototype.clearStore=function(){this.fetchQueryRejectFns.forEach(function(r){r(new _t(16))});var e=[];return this.queries.forEach(function(r,n){var i=r.observableQuery;i&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset(),this.dataStore.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var n=[];return this.queries.forEach(function(i,s){var c=i.observableQuery;if(c){var v=c.options.fetchPolicy;c.resetLastResults(),v!=="cache-only"&&(e||v!=="standby")&&n.push(c.refetch()),r.setQuery(s,function(){return{newData:null}}),r.invalidate(s)}}),this.broadcastQueries(),Promise.all(n)},t.prototype.observeQuery=function(e,r,n){return this.addQueryListener(e,this.queryListenerForObserver(e,r,n)),this.fetchQuery(e,r)},t.prototype.startQuery=function(e,r,n){return this.addQueryListener(e,n),this.fetchQuery(e,r).catch(function(){}),e},t.prototype.startGraphQLSubscription=function(e){var r=this,n=e.query,i=e.fetchPolicy,s=e.variables;n=this.transform(n).document,s=this.getVariables(n,s);var c=function(w){return r.getObservableFromLink(n,{},w,!1).map(function(T){if((!i||i!=="no-cache")&&(r.dataStore.markSubscriptionResult(T,n,w),r.broadcastQueries()),mn(T))throw new zr({graphQLErrors:T.errors});return T})};if(this.transform(n).hasClientExports){var v=this.localState.addExportedVariables(n,s).then(c);return new ai(function(w){var T=null;return v.then(function(D){return T=D.subscribe(w)},w.error),function(){return T&&T.unsubscribe()}})}return c(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchQueryRejectFns.delete("query:"+e),this.fetchQueryRejectFns.delete("fetchRequest:"+e),this.getQuery(e).subscriptions.forEach(function(r){return r.unsubscribe()}),this.queries.delete(e)},t.prototype.getCurrentQueryResult=function(e,r){r===void 0&&(r=!0);var n=e.options,i=n.variables,s=n.query,c=n.fetchPolicy,v=n.returnPartialData,w=e.getLastResult(),T=this.getQuery(e.queryId).newData;if(T&&T.complete)return{data:T.result,partial:!1};if(c==="no-cache"||c==="network-only")return{data:void 0,partial:!1};var D=this.dataStore.getCache().diff({query:s,variables:i,previousResult:w?w.data:void 0,returnPartialData:!0,optimistic:r}),H=D.result,V=D.complete;return{data:V||v?H:void 0,partial:!V}},t.prototype.getQueryWithPreviousResult=function(e){var r;if(typeof e=="string"){var n=this.getQuery(e).observableQuery;Me(n,17),r=n}else r=e;var i=r.options,s=i.variables,c=i.query;return{previousResult:this.getCurrentQueryResult(r,!1).data,variables:s,document:c}},t.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(r,n){r.invalidated&&r.listeners.forEach(function(i){i&&i(e.queryStore.get(n),r.newData)})})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,n,i){var s=this;i===void 0&&(i=this.queryDeduplication);var c,v=this.transform(e).serverQuery;if(v){var w=this,T=w.inFlightLinkObservables,D=w.link,H={query:v,variables:n,operationName:js(v)||void 0,context:this.prepareContext(he(he({},r),{forceFetch:!i}))};if(r=H.context,i){var V=T.get(v)||new Map;T.set(v,V);var W=JSON.stringify(n);if(c=V.get(W),!c){V.set(W,c=ou(Gi(D,H)));var Z=function(){V.delete(W),V.size||T.delete(v),ee.unsubscribe()},ee=c.subscribe({next:Z,error:Z,complete:Z})}}else c=ou(Gi(D,H))}else c=ai.of({data:{}}),r=this.prepareContext(r);var te=this.transform(e).clientQuery;return te&&(c=Sh(c,function(ae){return s.localState.runResolvers({document:te,remoteResult:ae,context:r,variables:n})})),c},t.prototype.fetchRequest=function(e){var r=this,n=e.requestId,i=e.queryId,s=e.document,c=e.options,v=e.fetchMoreForQueryId,w=c.variables,T=c.errorPolicy,D=T===void 0?"none":T,H=c.fetchPolicy,V,W;return new Promise(function(Z,ee){var te=r.getObservableFromLink(s,c.context,w),ae="fetchRequest:"+i;r.fetchQueryRejectFns.set(ae,ee);var me=function(){r.fetchQueryRejectFns.delete(ae),r.setQuery(i,function(ce){var ke=ce.subscriptions;ke.delete(fe)})},fe=te.map(function(ce){if(n>=r.getQuery(i).lastRequestId&&(r.markQueryResult(i,ce,c,v),r.queryStore.markQueryResult(i,ce,v),r.invalidate(i),r.invalidate(v),r.broadcastQueries()),D==="none"&&Dn(ce.errors))return ee(new zr({graphQLErrors:ce.errors}));if(D==="all"&&(W=ce.errors),v||H==="no-cache")V=ce.data;else{var ke=r.dataStore.getCache().diff({variables:w,query:s,optimistic:!1,returnPartialData:!0}),Ke=ke.result,Ye=ke.complete;(Ye||c.returnPartialData)&&(V=Ke)}}).subscribe({error:function(ce){me(),ee(ce)},complete:function(){me(),Z({data:V,errors:W,loading:!1,networkStatus:nt.ready,stale:!1})}});r.setQuery(i,function(ce){var ke=ce.subscriptions;ke.add(fe)})})},t.prototype.getQuery=function(e){return this.queries.get(e)||{listeners:new Set,invalidated:!1,document:null,newData:null,lastRequestId:1,observableQuery:null,subscriptions:new Set}},t.prototype.setQuery=function(e,r){var n=this.getQuery(e),i=he(he({},n),r(n));this.queries.set(e,i)},t.prototype.invalidate=function(e,r){r===void 0&&(r=!0),e&&this.setQuery(e,function(){return{invalidated:r}})},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return he(he({},r),{clientAwareness:this.clientAwareness})},t.prototype.checkInFlight=function(e){var r=this.queryStore.get(e);return r&&r.networkStatus!==nt.ready&&r.networkStatus!==nt.error},t.prototype.startPollingQuery=function(e,r,n){var i=this,s=e.pollInterval;if(Me(s,18),!this.ssrMode){var c=this.pollingInfoByQueryId.get(r);c||this.pollingInfoByQueryId.set(r,c={}),c.interval=s,c.options=he(he({},e),{fetchPolicy:"network-only"});var v=function(){var T=i.pollingInfoByQueryId.get(r);T&&(i.checkInFlight(r)?w():i.fetchQuery(r,T.options,pn.poll).then(w,w))},w=function(){var T=i.pollingInfoByQueryId.get(r);T&&(clearTimeout(T.timeout),T.timeout=setTimeout(v,T.interval))};n&&this.addQueryListener(r,n),w()}return r},t.prototype.stopPollingQuery=function(e){this.pollingInfoByQueryId.delete(e)},t}(),Ph=function(){function t(e){this.cache=e}return t.prototype.getCache=function(){return this.cache},t.prototype.markQueryResult=function(e,r,n,i,s){s===void 0&&(s=!1);var c=!mn(e);s&&mn(e)&&e.data&&(c=!0),!i&&c&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:r,variables:n})},t.prototype.markSubscriptionResult=function(e,r,n){mn(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:r,variables:n})},t.prototype.markMutationInit=function(e){var r=this;if(e.optimisticResponse){var n;typeof e.optimisticResponse=="function"?n=e.optimisticResponse(e.variables):n=e.optimisticResponse,this.cache.recordOptimisticTransaction(function(i){var s=r.cache;r.cache=i;try{r.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{r.cache=s}},e.mutationId)}},t.prototype.markMutationResult=function(e){var r=this;if(!mn(e.result)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],i=e.updateQueries;i&&Object.keys(i).forEach(function(s){var c=i[s],v=c.query,w=c.updater,T=r.cache.diff({query:v.document,variables:v.variables,returnPartialData:!0,optimistic:!1}),D=T.result,H=T.complete;if(H){var V=Zs(function(){return w(D,{mutationResult:e.result,queryName:js(v.document)||void 0,queryVariables:v.variables})});V&&n.push({result:V,dataId:"ROOT_QUERY",query:v.document,variables:v.variables})}}),this.cache.performTransaction(function(s){n.forEach(function(v){return s.write(v)});var c=e.update;c&&Zs(function(){return c(s,e.result)})})}},t.prototype.markMutationComplete=function(e){var r=e.mutationId,n=e.optimisticResponse;n&&this.cache.removeOptimistic(r)},t.prototype.markUpdateQueryResult=function(e,r,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:r,query:e})},t.prototype.reset=function(){return this.cache.reset()},t}(),Ih="2.6.10",Dh=!1,Ah=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var n=e.cache,i=e.ssrMode,s=i===void 0?!1:i,c=e.ssrForceFetchDelay,v=c===void 0?0:c,w=e.connectToDevTools,T=e.queryDeduplication,D=T===void 0?!0:T,H=e.defaultOptions,V=e.assumeImmutableResults,W=V===void 0?!1:V,Z=e.resolvers,ee=e.typeDefs,te=e.fragmentMatcher,ae=e.name,me=e.version,fe=e.link;if(!fe&&Z&&(fe=Zt.empty()),!fe||!n)throw new _t(4);this.link=fe,this.cache=n,this.store=new Ph(n),this.disableNetworkFetches=s||v>0,this.queryDeduplication=D,this.defaultOptions=H||{},this.typeDefs=ee,v&&setTimeout(function(){return r.disableNetworkFetches=!1},v),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var ce=!1;(typeof w=="undefined"?ce:w&&typeof window!="undefined")&&(window.__APOLLO_CLIENT__=this),this.version=Ih,this.localState=new au({cache:n,client:this,resolvers:Z,fragmentMatcher:te}),this.queryManager=new Nh({link:this.link,store:this.store,queryDeduplication:D,ssrMode:s,clientAwareness:{name:ae,version:me},localState:this.localState,assumeImmutableResults:W,onBroadcast:function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.queryStore.getStore(),mutations:r.queryManager.mutationStore.getStore()},dataWithOptimisticResults:r.cache.extract(!0)})}})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=he(he({},this.defaultOptions.watchQuery),e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=he(he({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=he(he({},this.defaultOptions.query),e)),Me(e.fetchPolicy!=="cache-and-network",5),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=he(he({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=he(he({},this.defaultOptions.mutate),e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){var r=this.cache.writeQuery(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeFragment=function(e){var r=this.cache.writeFragment(e);return this.queryManager.broadcastQueries(),r},t.prototype.writeData=function(e){var r=this.cache.writeData(e);return this.queryManager.broadcastQueries(),r},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Gi(this.link,e)},t.prototype.initQueryManager=function(){return this.queryManager},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(n){return n!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t}();const Mv=null;function Fh(t){var e={kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Vi(t)},r={kind:"Document",definitions:[e]};return r}function Oh(t,e){var r={kind:"FragmentDefinition",typeCondition:{kind:"NamedType",name:{kind:"Name",value:e||"__FakeType"}},name:{kind:"Name",value:"GeneratedClientQuery"},selectionSet:Vi(t)},n={kind:"Document",definitions:[r]};return n}function Vi(t){if(typeof t=="number"||typeof t=="boolean"||typeof t=="string"||typeof t=="undefined"||t===null)return null;if(Array.isArray(t))return Vi(t[0]);var e=[];Object.keys(t).forEach(function(n){var i=Vi(t[n]),s={kind:"Field",name:{kind:"Name",value:n},selectionSet:i||void 0};e.push(s)});var r={kind:"SelectionSet",selections:e};return r}var xh={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:null,variableDefinitions:null,directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:null,name:{kind:"Name",value:"__typename"},arguments:[],directives:[],selectionSet:null}]}}]},Mh=function(){function t(){}return t.prototype.transformDocument=function(e){return e},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.read({query:e.query,variables:e.variables,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.read({query:Ho(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:r})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Ho(e.fragment,e.fragmentName)})},t.prototype.writeData=function(e){var r=e.id,n=e.data;if(typeof r!="undefined"){var i=null;try{i=this.read({rootId:r,optimistic:!1,query:xh})}catch(v){}var s=i&&i.__typename||"__ClientData",c=Object.assign({__typename:s},n);this.writeFragment({id:r,fragment:Oh(c,s),data:c})}else this.writeQuery({query:Fh(n),data:n})},t}(),uu;(function(t){})(uu||(uu={}));var Et=null,lu={},Lh=1,qh=function(){return function(){function t(){this.id=["slot",Lh++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=Et;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===lu)break;return e!==Et&&(Et.slots[this.id]=r),!0}return Et&&(Et.slots[this.id]=lu),!1},t.prototype.getValue=function(){if(this.hasValue())return Et.slots[this.id]},t.prototype.withValue=function(e,r,n,i){var s,c=(s={__proto__:null},s[this.id]=e,s),v=Et;Et={parent:v,slots:c};try{return r.apply(i,n)}finally{Et=v}},t.bind=function(e){var r=Et;return function(){var n=Et;try{return Et=r,e.apply(this,arguments)}finally{Et=n}}},t.noContext=function(e,r,n){if(Et){var i=Et;try{return Et=null,e.apply(n,r)}finally{Et=i}}else return e.apply(n,r)},t}()},na="@wry/context:Slot",ia=Array,sa=ia[na]||function(){var t=qh();try{Object.defineProperty(ia,na,{value:ia[na]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),aa=sa.bind,Uh=sa.noContext;function Lv(t,e){return setTimeout(aa(t),e)}function qv(t){return function(){var e=t.apply(this,arguments),r=aa(e.next),n=aa(e.throw);return new Promise(function(i,s){function c(T,D){try{var H=T.call(e,D)}catch(W){return s(W)}var V=H.done?i:v;$h(H.value)?H.value.then(V,H.done?s:w):V(H.value)}var v=function(T){return c(r,T)},w=function(T){return c(n,T)};v()})}}function $h(t){return t&&typeof t.then=="function"}var cu=null;function Uv(t){if(cu.indexOf(t)<0){var e=function(r,n){var i=r[n];r[n]=function(){return Uh(i,arguments,this)}};e(t,"yield"),e(t.prototype,"run"),e(t.prototype,"throwInto"),cu.push(t)}return t}function Hh(){}var Gh=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=Hh),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var n=r.older,i=r.newer;i&&(i.older=n),n&&(n.newer=i),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=i)}return r},t.prototype.set=function(e,r){var n=this.getEntry(e);return n?n.value=r:(n={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=n),this.newest=n,this.oldest=this.oldest||n,this.map.set(e,n),n.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),Bi=new sa,Vh=[],oa=[],Bh=100;function An(t,e){if(!t)throw new Error(e||"assertion failure")}function jh(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function du(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function zh(t){return t.slice(0)}var Qh=function(){function t(e,r){this.fn=e,this.args=r,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],++t.count}return t.prototype.recompute=function(){if(An(!this.recomputing,"already recomputing"),!(!Wh(this)&&ua(this)))return Fn(this)?Kh(this):du(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,hu(this),la(this))},t.prototype.dispose=function(){var e=this;vu(this).forEach(ua),la(this),this.parents.forEach(function(r){r.setDirty(),yu(r,e)})},t.count=0,t}();function Wh(t){var e=Bi.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Fn(t)?pu(e,t):fu(e,t),e}function Kh(t){var e=vu(t);return Bi.withValue(t,Yh,[t]),Jh(t)&&Xh(t),e.forEach(ua),du(t.value)}function Yh(t){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,t.args)}catch(e){t.value[1]=e}t.recomputing=!1}function Fn(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function Xh(t){t.dirty=!1,!Fn(t)&&mu(t)}function hu(t){t.parents.forEach(function(e){return pu(e,t)})}function mu(t){t.parents.forEach(function(e){return fu(e,t)})}function pu(t,e){if(An(t.childValues.has(e)),An(Fn(e)),!t.dirtyChildren)t.dirtyChildren=oa.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),hu(t)}function fu(t,e){An(t.childValues.has(e)),An(!Fn(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,zh(e.value)):jh(r,e.value)||t.setDirty(),gu(t,e),!Fn(t)&&mu(t)}function gu(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(oa.length<Bh&&oa.push(r),t.dirtyChildren=null))}function ua(t){return t.parents.size===0&&typeof t.reportOrphan=="function"&&t.reportOrphan()===!0}function vu(t){var e=Vh;return t.childValues.size>0&&(e=[],t.childValues.forEach(function(r,n){yu(t,n),e.push(n)})),An(t.dirtyChildren===null),e}function yu(t,e){e.parents.delete(t),t.childValues.delete(e),gu(t,e)}function Jh(t){if(typeof t.subscribe=="function")try{la(t),t.unsubscribe=t.subscribe.apply(null,t.args)}catch(e){return t.setDirty(),!1}return!0}function la(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var ca=function(){function t(e){this.weakness=e}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return e.forEach(function(n){return r=r.getChildTrie(n)}),r.data||(r.data=Object.create(null))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Zh(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),n=r.get(e);return n||r.set(e,n=new t(this.weakness)),n},t}();function Zh(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var em=new ca(typeof WeakMap=="function");function tm(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return em.lookupArray(t)}var da=new Set;function oi(t,e){e===void 0&&(e=Object.create(null));var r=new Gh(e.max||Math.pow(2,16),function(c){return c.dispose()}),n=!!e.disposable,i=e.makeCacheKey||tm;function s(){if(!(n&&!Bi.hasValue())){var c=i.apply(null,arguments);if(c===void 0)return t.apply(null,arguments);var v=Array.prototype.slice.call(arguments),w=r.get(c);w?w.args=v:(w=new Qh(t,v),r.set(c,w),w.subscribe=e.subscribe,n&&(w.reportOrphan=function(){return r.delete(c)}));var T=w.recompute();return r.set(c,w),da.add(r),Bi.hasValue()||(da.forEach(function(D){return D.clean()}),da.clear()),n?void 0:T}}return s.dirty=function(){var c=i.apply(null,arguments),v=c!==void 0&&r.get(c);v&&v.setDirty()},s}var wu=!1;function bu(){var t=!wu;return Js()||(wu=!0),t}var rm=function(){function t(){}return t.prototype.ensureReady=function(){return Promise.resolve()},t.prototype.canBypassInit=function(){return!0},t.prototype.match=function(e,r,n){var i=n.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var c=i.__typename,v=c===void 0?s&&"Query":c;return v&&v===r?!0:(bu(),"heuristic")},t}(),$v=function(){function t(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return t.prototype.match=function(e,r,n){Me(this.isReady,1);var i=n.store.get(e.id),s=e.id==="ROOT_QUERY";if(!i)return s;var c=i.__typename,v=c===void 0?s&&"Query":c;if(Me(v,2),v===r)return!0;var w=this.possibleTypesMap[r];return!!(v&&w&&w.indexOf(v)>-1)},t.prototype.parseIntrospectionResult=function(e){var r={};return e.__schema.types.forEach(function(n){(n.kind==="UNION"||n.kind==="INTERFACE")&&(r[n.name]=n.possibleTypes.map(function(i){return i.name}))}),r},t}(),ku=Object.prototype.hasOwnProperty,On=function(){function t(e){var r=this;e===void 0&&(e=Object.create(null)),this.data=e,this.depend=oi(function(n){return r.data[n]},{disposable:!0,makeCacheKey:function(n){return n}})}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.depend(e),this.data[e]},t.prototype.set=function(e,r){var n=this.data[e];r!==n&&(this.data[e]=r,this.depend.dirty(e))},t.prototype.delete=function(e){ku.call(this.data,e)&&(delete this.data[e],this.depend.dirty(e))},t.prototype.clear=function(){this.replace(null)},t.prototype.replace=function(e){var r=this;e?(Object.keys(e).forEach(function(n){r.set(n,e[n])}),Object.keys(this.data).forEach(function(n){ku.call(e,n)||r.delete(n)})):Object.keys(this.data).forEach(function(n){r.delete(n)})},t}();function _u(t){return new On(t)}var nm=function(){function t(e){var r=this,n=e===void 0?{}:e,i=n.cacheKeyRoot,s=i===void 0?new ca(Ks):i,c=n.freezeResults,v=c===void 0?!1:c,w=this,T=w.executeStoreQuery,D=w.executeSelectionSet,H=w.executeSubSelectedArray;this.freezeResults=v,this.executeStoreQuery=oi(function(V){return T.call(r,V)},{makeCacheKey:function(V){var W=V.query,Z=V.rootValue,ee=V.contextValue,te=V.variableValues,ae=V.fragmentMatcher;if(ee.store instanceof On)return s.lookup(ee.store,W,ae,JSON.stringify(te),Z.id)}}),this.executeSelectionSet=oi(function(V){return D.call(r,V)},{makeCacheKey:function(V){var W=V.selectionSet,Z=V.rootValue,ee=V.execContext;if(ee.contextValue.store instanceof On)return s.lookup(ee.contextValue.store,W,ee.fragmentMatcher,JSON.stringify(ee.variableValues),Z.id)}}),this.executeSubSelectedArray=oi(function(V){return H.call(r,V)},{makeCacheKey:function(V){var W=V.field,Z=V.array,ee=V.execContext;if(ee.contextValue.store instanceof On)return s.lookup(ee.contextValue.store,W,Z,JSON.stringify(ee.variableValues))}})}return t.prototype.readQueryFromStore=function(e){return this.diffQueryAgainstStore(he(he({},e),{returnPartialData:!1})).result},t.prototype.diffQueryAgainstStore=function(e){var r=e.store,n=e.query,i=e.variables,s=e.previousResult,c=e.returnPartialData,v=c===void 0?!0:c,w=e.rootId,T=w===void 0?"ROOT_QUERY":w,D=e.fragmentMatcherFunction,H=e.config,V=zd(n);i=Bs({},Qs(V),i);var W={store:r,dataIdFromObject:H&&H.dataIdFromObject,cacheRedirects:H&&H.cacheRedirects||{}},Z=this.executeStoreQuery({query:n,rootValue:{type:"id",id:T,generated:!0,typename:"Query"},contextValue:W,variableValues:i,fragmentMatcher:D}),ee=Z.missing&&Z.missing.length>0;return ee&&!v&&Z.missing.forEach(function(te){if(!te.tolerable)throw new _t(8)}),s&&Jt(s,Z.result)&&(Z.result=s),{result:Z.result,complete:!ee}},t.prototype.executeStoreQuery=function(e){var r=e.query,n=e.rootValue,i=e.contextValue,s=e.variableValues,c=e.fragmentMatcher,v=c===void 0?im:c,w=zs(r),T=qi(r),D=Ui(T),H={query:r,fragmentMap:D,contextValue:i,variableValues:s,fragmentMatcher:v};return this.executeSelectionSet({selectionSet:w.selectionSet,rootValue:n,execContext:H})},t.prototype.executeSelectionSet=function(e){var r=this,n=e.selectionSet,i=e.rootValue,s=e.execContext,c=s.fragmentMap,v=s.contextValue,w=s.variableValues,T={result:null},D=[],H=v.store.get(i.id),V=H&&H.__typename||i.id==="ROOT_QUERY"&&"Query"||void 0;function W(Z){var ee;return Z.missing&&(T.missing=T.missing||[],(ee=T.missing).push.apply(ee,Z.missing)),Z.result}return n.selections.forEach(function(Z){var ee;if(!!Vs(Z,w))if(jr(Z)){var te=W(r.executeField(H,V,Z,s));typeof te!="undefined"&&D.push((ee={},ee[ii(Z)]=te,ee))}else{var ae=void 0;if(Oi(Z))ae=Z;else if(ae=c[Z.name.value],!ae)throw new _t(9);var me=ae.typeCondition&&ae.typeCondition.name.value,fe=!me||s.fragmentMatcher(i,me,v);if(fe){var ce=r.executeSelectionSet({selectionSet:ae.selectionSet,rootValue:i,execContext:s});fe==="heuristic"&&ce.missing&&(ce=he(he({},ce),{missing:ce.missing.map(function(ke){return he(he({},ke),{tolerable:!0})})})),D.push(W(ce))}}}),T.result=ea(D),this.freezeResults,T},t.prototype.executeField=function(e,r,n,i){var s=i.variableValues,c=i.contextValue,v=n.name.value,w=Gs(n,s),T={resultKey:ii(n),directives:Hd(n,s)},D=sm(e,r,v,w,c,T);return Array.isArray(D.result)?this.combineExecResults(D,this.executeSubSelectedArray({field:n,array:D.result,execContext:i})):n.selectionSet?D.result==null?D:this.combineExecResults(D,this.executeSelectionSet({selectionSet:n.selectionSet,rootValue:D.result,execContext:i})):(Eu(n,D.result),this.freezeResults,D)},t.prototype.combineExecResults=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n;return e.forEach(function(i){i.missing&&(n=n||[],n.push.apply(n,i.missing))}),{result:e.pop().result,missing:n}},t.prototype.executeSubSelectedArray=function(e){var r=this,n=e.field,i=e.array,s=e.execContext,c;function v(w){return w.missing&&(c=c||[],c.push.apply(c,w.missing)),w.result}return i=i.map(function(w){return w===null?null:Array.isArray(w)?v(r.executeSubSelectedArray({field:n,array:w,execContext:s})):n.selectionSet?v(r.executeSelectionSet({selectionSet:n.selectionSet,rootValue:w,execContext:s})):(Eu(n,w),w)}),this.freezeResults,{result:i,missing:c}},t}();function Eu(t,e){if(!t.selectionSet&&xi(e))throw new _t(10)}function im(){return!0}function Hv(t){invariant(isIdValue(t),11)}function sm(t,e,r,n,i,s){var c=s.resultKey,v=s.directives,w=r;(n||v)&&(w=Uo(w,n,v));var T=void 0;if(t&&(T=t[w],typeof T=="undefined"&&i.cacheRedirects&&typeof e=="string")){var D=i.cacheRedirects[e];if(D){var H=D[r];H&&(T=H(t,n,{getCacheKey:function(V){var W=i.dataIdFromObject(V);return W&&Mi({id:W,typename:V.__typename})}}))}}return typeof T=="undefined"?{result:T,missing:[{object:t,fieldName:w,tolerable:!1}]}:(Ud(T)&&(T=T.json),{result:T})}var ji=function(){function t(e){e===void 0&&(e=Object.create(null)),this.data=e}return t.prototype.toObject=function(){return this.data},t.prototype.get=function(e){return this.data[e]},t.prototype.set=function(e,r){this.data[e]=r},t.prototype.delete=function(e){this.data[e]=void 0},t.prototype.clear=function(){this.data=Object.create(null)},t.prototype.replace=function(e){this.data=e||Object.create(null)},t}();function Gv(t){return new ji(t)}var am=function(t){_r(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.type="WriteError",r}return e}(Error);function om(t,e){var r=new am(`Error writing result to store for query:
 `+JSON.stringify(e));return r.message+=`
`+t.message,r.stack=t.stack,r}var um=function(){function t(){}return t.prototype.writeQueryToStore=function(e){var r=e.query,n=e.result,i=e.store,s=i===void 0?_u():i,c=e.variables,v=e.dataIdFromObject,w=e.fragmentMatcherFunction;return this.writeResultToStore({dataId:"ROOT_QUERY",result:n,document:r,store:s,variables:c,dataIdFromObject:v,fragmentMatcherFunction:w})},t.prototype.writeResultToStore=function(e){var r=e.dataId,n=e.result,i=e.document,s=e.store,c=s===void 0?_u():s,v=e.variables,w=e.dataIdFromObject,T=e.fragmentMatcherFunction,D=In(i);try{return this.writeSelectionSetToStore({result:n,dataId:r,selectionSet:D.selectionSet,context:{store:c,processedData:{},variables:Bs({},Qs(D),v),dataIdFromObject:w,fragmentMap:Ui(qi(i)),fragmentMatcherFunction:T}})}catch(H){throw om(H,i)}},t.prototype.writeSelectionSetToStore=function(e){var r=this,n=e.result,i=e.dataId,s=e.selectionSet,c=e.context,v=c.variables,w=c.store,T=c.fragmentMap;return s.selections.forEach(function(D){var H;if(!!Vs(D,v))if(jr(D)){var V=ii(D),W=n[V];if(typeof W!="undefined")r.writeFieldToStore({dataId:i,value:W,field:D,context:c});else{var Z=!1,ee=!1;D.directives&&D.directives.length&&(Z=D.directives.some(function(Ke){return Ke.name&&Ke.name.value==="defer"}),ee=D.directives.some(function(Ke){return Ke.name&&Ke.name.value==="client"})),!Z&&!ee&&c.fragmentMatcherFunction}}else{var te=void 0;Oi(D)?te=D:(te=(T||{})[D.name.value],Me(te,3));var ae=!0;if(c.fragmentMatcherFunction&&te.typeCondition){var me=i||"self",fe=Mi({id:me,typename:void 0}),ce={store:new ji((H={},H[me]=n,H)),cacheRedirects:{}},ke=c.fragmentMatcherFunction(fe,te.typeCondition.name.value,ce);!Wo()&&ke==="heuristic",ae=!!ke}ae&&r.writeSelectionSetToStore({result:n,selectionSet:te.selectionSet,dataId:i,context:c})}}),w},t.prototype.writeFieldToStore=function(e){var r,n=e.field,i=e.value,s=e.dataId,c=e.context,v=c.variables,w=c.dataIdFromObject,T=c.store,D,H,V=Ld(n,v);if(!n.selectionSet||i===null)D=i!=null&&typeof i=="object"?{type:"json",json:i}:i;else if(Array.isArray(i)){var W=s+"."+V;D=this.processArrayValue(i,W,n.selectionSet,c)}else{var Z=s+"."+V,ee=!0;if(ha(Z)||(Z="$"+Z),w){var te=w(i);Me(!te||!ha(te),4),(te||typeof te=="number"&&te===0)&&(Z=te,ee=!1)}Cu(Z,n,c.processedData)||this.writeSelectionSetToStore({dataId:Z,result:i,selectionSet:n.selectionSet,context:c});var ae=i.__typename;D=Mi({id:Z,typename:ae},ee),H=T.get(s);var me=H&&H[V];if(me!==D&&xi(me)){var fe=me.typename!==void 0,ce=ae!==void 0,ke=fe&&ce&&me.typename!==ae;Me(!ee||me.generated||ke,5),Me(!fe||ce,6),me.generated&&(ke?ee||T.delete(me.id):Ru(me.id,D.id,T))}}H=T.get(s),(!H||!Jt(D,H[V]))&&T.set(s,he(he({},H),(r={},r[V]=D,r)))},t.prototype.processArrayValue=function(e,r,n,i){var s=this;return e.map(function(c,v){if(c===null)return null;var w=r+"."+v;if(Array.isArray(c))return s.processArrayValue(c,w,n,i);var T=!0;if(i.dataIdFromObject){var D=i.dataIdFromObject(c);D&&(w=D,T=!1)}return Cu(w,n,i.processedData)||s.writeSelectionSetToStore({dataId:w,result:c,selectionSet:n,context:i}),Mi({id:w,typename:c.__typename},T)})},t}();function ha(t){return t[0]==="$"}function Ru(t,e,r){if(t===e)return!1;var n=r.get(t),i=r.get(e),s=!1;Object.keys(n).forEach(function(v){var w=n[v],T=i[v];xi(w)&&ha(w.id)&&xi(T)&&!Jt(w,T)&&Ru(w.id,T.id,r)&&(s=!0)}),r.delete(t);var c=he(he({},n),i);return Jt(c,i)?s:(r.set(e,c),!0)}function Cu(t,e,r){if(!r)return!1;if(r[t]){if(r[t].indexOf(e)>=0)return!0;r[t].push(e)}else r[t]=[e];return!1}var lm={fragmentMatcher:new rm,dataIdFromObject:cm,addTypename:!0,resultCaching:!0,freezeResults:!1};function cm(t){if(t.__typename){if(t.id!==void 0)return t.__typename+":"+t.id;if(t._id!==void 0)return t.__typename+":"+t._id}return null}var dm=Object.prototype.hasOwnProperty,Su=function(t){_r(e,t);function e(r,n,i){var s=t.call(this,Object.create(null))||this;return s.optimisticId=r,s.parent=n,s.transaction=i,s}return e.prototype.toObject=function(){return he(he({},this.parent.toObject()),this.data)},e.prototype.get=function(r){return dm.call(this.data,r)?this.data[r]:this.parent.get(r)},e}(ji),hm=function(t){_r(e,t);function e(r){r===void 0&&(r={});var n=t.call(this)||this;n.watches=new Set,n.typenameDocumentCache=new Map,n.cacheKeyRoot=new ca(Ks),n.silenceBroadcast=!1,n.config=he(he({},lm),r),n.config.customResolvers&&(n.config.cacheRedirects=n.config.customResolvers),n.config.cacheResolvers&&(n.config.cacheRedirects=n.config.cacheResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.resultCaching?new On:new ji,n.optimisticData=n.data,n.storeWriter=new um,n.storeReader=new nm({cacheKeyRoot:n.cacheKeyRoot,freezeResults:r.freezeResults});var i=n,s=i.maybeBroadcastWatch;return n.maybeBroadcastWatch=oi(function(c){return s.call(n,c)},{makeCacheKey:function(c){if(!c.optimistic&&!c.previousResult&&i.data instanceof On)return i.cacheKeyRoot.lookup(c.query,JSON.stringify(c.variables))}}),n}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).toObject()},e.prototype.read=function(r){if(typeof r.rootId=="string"&&typeof this.data.get(r.rootId)=="undefined")return null;var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.readQueryFromStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,rootId:r.rootId,fragmentMatcherFunction:i,previousResult:r.previousResult,config:this.config})||null},e.prototype.write=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;this.storeWriter.writeResultToStore({dataId:r.dataId,result:r.result,variables:r.variables,document:this.transformDocument(r.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:i}),this.broadcastWatches()},e.prototype.diff=function(r){var n=this.config.fragmentMatcher,i=n&&n.match;return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:this.transformDocument(r.query),variables:r.variables,returnPartialData:r.returnPartialData,previousResult:r.previousResult,fragmentMatcherFunction:i,config:this.config})},e.prototype.watch=function(r){var n=this;return this.watches.add(r),function(){n.watches.delete(r)}},e.prototype.evict=function(r){throw new _t(7)},e.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){for(var n=[],i=0,s=this.optimisticData;s instanceof Su;)s.optimisticId===r?++i:n.push(s),s=s.parent;if(i>0){for(this.optimisticData=s;n.length>0;){var c=n.pop();this.performTransaction(c.transaction,c.optimisticId)}this.broadcastWatches()}},e.prototype.performTransaction=function(r,n){var i=this,s=i.data,c=i.silenceBroadcast;this.silenceBroadcast=!0,typeof n=="string"&&(this.data=this.optimisticData=new Su(n,this.optimisticData,r));try{r(this)}finally{this.silenceBroadcast=c,this.data=s}this.broadcastWatches()},e.prototype.recordOptimisticTransaction=function(r,n){return this.performTransaction(r,n)},e.prototype.transformDocument=function(r){if(this.addTypename){var n=this.typenameDocumentCache.get(r);return n||(n=Kd(r),this.typenameDocumentCache.set(r,n),this.typenameDocumentCache.set(n,n)),n}return r},e.prototype.broadcastWatches=function(){var r=this;this.silenceBroadcast||this.watches.forEach(function(n){return r.maybeBroadcastWatch(n)})},e.prototype.maybeBroadcastWatch=function(r){r.callback(this.diff({query:r.query,variables:r.variables,previousResult:r.previousResult&&r.previousResult(),optimistic:r.optimistic}))},e}(Mh);function mm(t){return new Zt(function(e,r){var n=Do(e,[]);return new Ft(function(i){var s;return Promise.resolve(n).then(function(c){return t(c,e.getContext())}).then(e.setContext).then(function(){s=r(e).subscribe({next:i.next.bind(i),error:i.error.bind(i),complete:i.complete.bind(i)})}).catch(i.error.bind(i)),function(){s&&s.unsubscribe()}})})}var pm=Re(3033),fm={includeQuery:!0,includeExtensions:!1},gm={accept:"*/*","content-type":"application/json"},vm={method:"POST"},ym={http:fm,headers:gm,options:vm},Tu=function(t,e,r){var n=new Error(r);throw n.name="ServerError",n.response=t,n.statusCode=t.status,n.result=e,n},wm=function(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(i){var n=i;return n.name="ServerParseError",n.response=e,n.statusCode=e.status,n.bodyText=r,Promise.reject(n)}}).then(function(r){return e.status>=300&&Tu(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!r.hasOwnProperty("data")&&!r.hasOwnProperty("errors")&&Tu(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(n){return n.operationName}):t.operationName)+"'."),r})}},bm=function(t){if(!t&&typeof fetch=="undefined"){var e="unfetch";throw typeof window=="undefined"&&(e="node-fetch"),new _t(1)}},km=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}},_m=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=he({},e.options,{headers:e.headers,credentials:e.credentials}),s=e.http;r.forEach(function(H){i=he({},i,H.options,{headers:he({},i.headers,H.headers)}),H.credentials&&(i.credentials=H.credentials),s=he({},s,H.http)});var c=t.operationName,v=t.extensions,w=t.variables,T=t.query,D={operationName:c,variables:w};return s.includeExtensions&&(D.extensions=v),s.includeQuery&&(D.query=(0,pm.S)(T)),{options:i,body:D}},ma=function(t,e){var r;try{r=JSON.stringify(t)}catch(i){var n=new _t(2);throw n.parseError=i,n}return r},Em=function(t,e){var r=t.getContext(),n=r.uri;return n||(typeof e=="function"?e(t):e||"/graphql")},Nu=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,n=t.fetch,i=t.includeExtensions,s=t.useGETForQueries,c=Do(t,["uri","fetch","includeExtensions","useGETForQueries"]);bm(n),n||(n=fetch);var v={http:{includeExtensions:i},options:c.fetchOptions,credentials:c.credentials,headers:c.headers};return new Zt(function(w){var T=Em(w,r),D=w.getContext(),H={};if(D.clientAwareness){var V=D.clientAwareness,W=V.name,Z=V.version;W&&(H["apollographql-client-name"]=W),Z&&(H["apollographql-client-version"]=Z)}var ee=he({},H,D.headers),te={http:D.http,options:D.fetchOptions,credentials:D.credentials,headers:ee},ae=_m(w,ym,v,te),me=ae.options,fe=ae.body,ce;if(!me.signal){var ke=km(),Ke=ke.controller,Ye=ke.signal;ce=Ke,ce&&(me.signal=Ye)}var ct=function(ar){return ar.kind==="OperationDefinition"&&ar.operation==="mutation"};if(s&&!w.query.definitions.some(ct)&&(me.method="GET"),me.method==="GET"){var Ve=Rm(T,fe),Jr=Ve.newURI,Ti=Ve.parseError;if(Ti)return eu(Ti);T=Jr}else try{me.body=ma(fe,"Payload")}catch(ar){return eu(ar)}return new Ft(function(ar){return n(T,me).then(function(It){return w.setContext({response:It}),It}).then(wm(w)).then(function(It){return ar.next(It),ar.complete(),It}).catch(function(It){It.name!=="AbortError"&&(It.result&&It.result.errors&&It.result.data&&ar.next(It.result),ar.error(It))}),function(){ce&&ce.abort()}})})};function Rm(t,e){var r=[],n=function(H,V){r.push(H+"="+encodeURIComponent(V))};if("query"in e&&n("query",e.query),e.operationName&&n("operationName",e.operationName),e.variables){var i=void 0;try{i=ma(e.variables,"Variables map")}catch(H){return{parseError:H}}n("variables",i)}if(e.extensions){var s=void 0;try{s=ma(e.extensions,"Extensions map")}catch(H){return{parseError:H}}n("extensions",s)}var c="",v=t,w=t.indexOf("#");w!==-1&&(c=t.substr(w),v=t.substr(0,w));var T=v.indexOf("?")===-1?"?":"&",D=v+T+r.join("&")+c;return{newURI:D}}var Vv=function(t){_r(e,t);function e(r){return t.call(this,Nu(r).request)||this}return e}(Zt),Cm=Re(5175),zi=Re(1669),Sm=Re(6030);class Qi extends Error{constructor(e,r){super(e);Error.captureStackTrace(this,this.constructor),this.type=r}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}}class Rr extends Qi{constructor(e,r,n){super(e,r);n&&(this.code=this.errno=n.code,this.erroredSysCall=n.syscall)}}const Wi=Symbol.toStringTag,Pu=t=>typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&typeof t.sort=="function"&&t[Wi]==="URLSearchParams",Qr=t=>typeof t=="object"&&typeof t.arrayBuffer=="function"&&typeof t.type=="string"&&typeof t.stream=="function"&&typeof t.constructor=="function"&&/^(Blob|File)$/.test(t[Wi]);function pa(t){return typeof t=="object"&&typeof t.append=="function"&&typeof t.set=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.delete=="function"&&typeof t.keys=="function"&&typeof t.values=="function"&&typeof t.entries=="function"&&typeof t.constructor=="function"&&t[Wi]==="FormData"}const Tm=t=>typeof t=="object"&&t[Wi]==="AbortSignal",xn=`\r
`,fa="-".repeat(2),Nm=Buffer.byteLength(xn),Iu=t=>`${fa}${t}${fa}${xn.repeat(2)}`;function Du(t,e,r){let n="";return n+=`${fa}${t}${xn}`,n+=`Content-Disposition: form-data; name="${e}"`,Qr(r)&&(n+=`; filename="${r.name}"${xn}`,n+=`Content-Type: ${r.type||"application/octet-stream"}`),`${n}${xn.repeat(2)}`}const Pm=()=>(0,_s.randomBytes)(8).toString("hex");async function*Im(t,e){for(const[r,n]of t)yield Du(e,r,n),Qr(n)?yield*n.stream():yield n,yield xn;yield Iu(e)}function Dm(t,e){let r=0;for(const[n,i]of t)r+=Buffer.byteLength(Du(e,n,i)),Qr(i)?r+=i.size:r+=Buffer.byteLength(String(i)),r+=Nm;return r+=Buffer.byteLength(Iu(e)),r}const jt=Symbol("Body internals");class ga{constructor(e,{size:r=0}={}){let n=null;e===null?e=null:Pu(e)?e=Buffer.from(e.toString()):Qr(e)||Buffer.isBuffer(e)||(zi.types.isAnyArrayBuffer(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof je||(pa(e)?(n=`NodeFetchFormDataBoundary${Pm()}`,e=je.Readable.from(Im(e,n))):e=Buffer.from(String(e)))),this[jt]={body:e,boundary:n,disturbed:!1,error:null},this.size=r,e instanceof je&&e.on("error",i=>{const s=i instanceof Qi?i:new Rr(`Invalid response body while trying to fetch ${this.url}: ${i.message}`,"system",i);this[jt].error=s})}get body(){return this[jt].body}get bodyUsed(){return this[jt].disturbed}async arrayBuffer(){const{buffer:e,byteOffset:r,byteLength:n}=await Ki(this);return e.slice(r,r+n)}async blob(){const e=this.headers&&this.headers.get("content-type")||this[jt].body&&this[jt].body.type||"",r=await this.buffer();return new Sm([r],{type:e})}async json(){const e=await Ki(this);return JSON.parse(e.toString())}async text(){return(await Ki(this)).toString()}buffer(){return Ki(this)}}Object.defineProperties(ga.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});async function Ki(t){if(t[jt].disturbed)throw new TypeError(`body used already for: ${t.url}`);if(t[jt].disturbed=!0,t[jt].error)throw t[jt].error;let{body:e}=t;if(e===null)return Buffer.alloc(0);if(Qr(e)&&(e=e.stream()),Buffer.isBuffer(e))return e;if(!(e instanceof je))return Buffer.alloc(0);const r=[];let n=0;try{for await(const i of e){if(t.size>0&&n+i.length>t.size){const s=new Rr(`content size at ${t.url} over limit: ${t.size}`,"max-size");throw e.destroy(s),s}n+=i.length,r.push(i)}}catch(i){throw i instanceof Qi?i:new Rr(`Invalid response body while trying to fetch ${t.url}: ${i.message}`,"system",i)}if(e.readableEnded===!0||e._readableState.ended===!0)try{return r.every(i=>typeof i=="string")?Buffer.from(r.join("")):Buffer.concat(r,n)}catch(i){throw new Rr(`Could not create Buffer from response body for ${t.url}: ${i.message}`,"system",i)}else throw new Rr(`Premature close of server response while trying to fetch ${t.url}`)}const Au=(t,e)=>{let r,n,{body:i}=t;if(t.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof je&&typeof i.getBoundary!="function"&&(r=new je.PassThrough({highWaterMark:e}),n=new je.PassThrough({highWaterMark:e}),i.pipe(r),i.pipe(n),t[jt].body=r,i=n),i},Fu=(t,e)=>t===null?null:typeof t=="string"?"text/plain;charset=UTF-8":Pu(t)?"application/x-www-form-urlencoded;charset=UTF-8":Qr(t)?t.type||null:Buffer.isBuffer(t)||zi.types.isAnyArrayBuffer(t)||ArrayBuffer.isView(t)?null:t&&typeof t.getBoundary=="function"?`multipart/form-data;boundary=${t.getBoundary()}`:pa(t)?`multipart/form-data; boundary=${e[jt].boundary}`:t instanceof je?null:"text/plain;charset=UTF-8",Am=t=>{const{body:e}=t;return e===null?0:Qr(e)?e.size:Buffer.isBuffer(e)?e.length:e&&typeof e.getLengthSync=="function"?e.hasKnownLength&&e.hasKnownLength()?e.getLengthSync():null:pa(e)?Dm(t[jt].boundary):null},Fm=(t,{body:e})=>{e===null?t.end():Qr(e)?e.stream().pipe(t):Buffer.isBuffer(e)?(t.write(e),t.end()):e.pipe(t)},Yi=typeof cn.validateHeaderName=="function"?cn.validateHeaderName:t=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(t)){const e=new TypeError(`Header name must be a valid HTTP token [${t}]`);throw Object.defineProperty(e,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),e}},va=typeof cn.validateHeaderValue=="function"?cn.validateHeaderValue:(t,e)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(e)){const r=new TypeError(`Invalid character in header content ["${t}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}};class Wr extends URLSearchParams{constructor(e){let r=[];if(e instanceof Wr){const n=e.raw();for(const[i,s]of Object.entries(n))r.push(...s.map(c=>[i,c]))}else if(e!=null)if(typeof e=="object"&&!zi.types.isBoxedPrimitive(e)){const n=e[Symbol.iterator];if(n==null)r.push(...Object.entries(e));else{if(typeof n!="function")throw new TypeError("Header pairs must be iterable");r=[...e].map(i=>{if(typeof i!="object"||zi.types.isBoxedPrimitive(i))throw new TypeError("Each header pair must be an iterable object");return[...i]}).map(i=>{if(i.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...i]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return r=r.length>0?r.map(([n,i])=>(Yi(n),va(n,String(i)),[String(n).toLowerCase(),String(i)])):void 0,super(r),new Proxy(this,{get(n,i,s){switch(i){case"append":case"set":return(c,v)=>(Yi(c),va(c,String(v)),URLSearchParams.prototype[i].call(s,String(c).toLowerCase(),String(v)));case"delete":case"has":case"getAll":return c=>(Yi(c),URLSearchParams.prototype[i].call(s,String(c).toLowerCase()));case"keys":return()=>(n.sort(),new Set(URLSearchParams.prototype.keys.call(n)).keys());default:return Reflect.get(n,i,s)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(e){const r=this.getAll(e);if(r.length===0)return null;let n=r.join(", ");return/^content-encoding$/i.test(e)&&(n=n.toLowerCase()),n}forEach(e){for(const r of this.keys())e(this.get(r),r)}*values(){for(const e of this.keys())yield this.get(e)}*entries(){for(const e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((e,r)=>(e[r]=this.getAll(r),e),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((e,r)=>{const n=this.getAll(r);return r==="host"?e[r]=n[0]:e[r]=n.length>1?n:n[0],e},{})}}Object.defineProperties(Wr.prototype,["get","entries","forEach","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));function Om(t=[]){return new Wr(t.reduce((e,r,n,i)=>(n%2==0&&e.push(i.slice(n,n+2)),e),[]).filter(([e,r])=>{try{return Yi(e),va(e,String(r)),!0}catch{return!1}}))}const xm=new Set([301,302,303,307,308]),Ou=t=>xm.has(t),Cr=Symbol("Response internals");class lr extends ga{constructor(e=null,r={}){super(e,r);const n=r.status||200,i=new Wr(r.headers);if(e!==null&&!i.has("Content-Type")){const s=Fu(e);s&&i.append("Content-Type",s)}this[Cr]={url:r.url,status:n,statusText:r.statusText||"",headers:i,counter:r.counter,highWaterMark:r.highWaterMark}}get url(){return this[Cr].url||""}get status(){return this[Cr].status}get ok(){return this[Cr].status>=200&&this[Cr].status<300}get redirected(){return this[Cr].counter>0}get statusText(){return this[Cr].statusText}get headers(){return this[Cr].headers}get highWaterMark(){return this[Cr].highWaterMark}clone(){return new lr(Au(this,this.highWaterMark),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size})}static redirect(e,r=302){if(!Ou(r))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new lr(null,{headers:{location:new URL(e).toString()},status:r})}get[Symbol.toStringTag](){return"Response"}}Object.defineProperties(lr.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});const Mm=t=>{if(t.search)return t.search;const e=t.href.length-1,r=t.hash||(t.href[e]==="#"?"#":"");return t.href[e-r.length]==="?"?"?":""},Sr=Symbol("Request internals"),Xi=t=>typeof t=="object"&&typeof t[Sr]=="object";class ui extends ga{constructor(e,r={}){let n;Xi(e)?n=new URL(e.url):(n=new URL(e),e={});let i=r.method||e.method||"GET";if(i=i.toUpperCase(),(r.body!=null||Xi(e))&&e.body!==null&&(i==="GET"||i==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");const s=r.body?r.body:Xi(e)&&e.body!==null?Au(e):null;super(s,{size:r.size||e.size||0});const c=new Wr(r.headers||e.headers||{});if(s!==null&&!c.has("Content-Type")){const w=Fu(s,this);w&&c.append("Content-Type",w)}let v=Xi(e)?e.signal:null;if("signal"in r&&(v=r.signal),v!==null&&!Tm(v))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[Sr]={method:i,redirect:r.redirect||e.redirect||"follow",headers:c,parsedURL:n,signal:v},this.follow=r.follow===void 0?e.follow===void 0?20:e.follow:r.follow,this.compress=r.compress===void 0?e.compress===void 0?!0:e.compress:r.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent,this.highWaterMark=r.highWaterMark||e.highWaterMark||16384,this.insecureHTTPParser=r.insecureHTTPParser||e.insecureHTTPParser||!1}get method(){return this[Sr].method}get url(){return(0,Cn.format)(this[Sr].parsedURL)}get headers(){return this[Sr].headers}get redirect(){return this[Sr].redirect}get signal(){return this[Sr].signal}clone(){return new ui(this)}get[Symbol.toStringTag](){return"Request"}}Object.defineProperties(ui.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});const Lm=t=>{const{parsedURL:e}=t[Sr],r=new Wr(t[Sr].headers);r.has("Accept")||r.set("Accept","*/*");let n=null;if(t.body===null&&/^(post|put)$/i.test(t.method)&&(n="0"),t.body!==null){const v=Am(t);typeof v=="number"&&!Number.isNaN(v)&&(n=String(v))}n&&r.set("Content-Length",n),r.has("User-Agent")||r.set("User-Agent","node-fetch"),t.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate,br");let{agent:i}=t;typeof i=="function"&&(i=i(e)),!r.has("Connection")&&!i&&r.set("Connection","close");const s=Mm(e);return{path:e.pathname+s,pathname:e.pathname,hostname:e.hostname,protocol:e.protocol,port:e.port,hash:e.hash,search:e.search,query:e.query,href:e.href,method:t.method,headers:r[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:t.insecureHTTPParser,agent:i}};class qm extends Qi{constructor(e,r="aborted"){super(e,r)}}const Um=new Set(["data:","http:","https:"]);async function ya(t,e){return new Promise((r,n)=>{const i=new ui(t,e),s=Lm(i);if(!Um.has(s.protocol))throw new TypeError(`node-fetch cannot load ${t}. URL scheme "${s.protocol.replace(/:$/,"")}" is not supported.`);if(s.protocol==="data:"){const W=Cm(i.url),Z=new lr(W,{headers:{"Content-Type":W.typeFull}});r(Z);return}const c=(s.protocol==="https:"?Ii:cn).request,{signal:v}=i;let w=null;const T=()=>{const W=new qm("The operation was aborted.");n(W),i.body&&i.body instanceof je.Readable&&i.body.destroy(W),!(!w||!w.body)&&w.body.emit("error",W)};if(v&&v.aborted){T();return}const D=()=>{T(),V()},H=c(s);v&&v.addEventListener("abort",D);const V=()=>{H.abort(),v&&v.removeEventListener("abort",D)};H.on("error",W=>{n(new Rr(`request to ${i.url} failed, reason: ${W.message}`,"system",W)),V()}),H.on("response",W=>{H.setTimeout(0);const Z=Om(W.rawHeaders);if(Ou(W.statusCode)){const fe=Z.get("Location"),ce=fe===null?null:new URL(fe,i.url);switch(i.redirect){case"error":n(new Rr(`uri requested responds with a redirect, redirect mode is set to error: ${i.url}`,"no-redirect")),V();return;case"manual":if(ce!==null)try{Z.set("Location",ce)}catch(ke){n(ke)}break;case"follow":{if(ce===null)break;if(i.counter>=i.follow){n(new Rr(`maximum redirect reached at: ${i.url}`,"max-redirect")),V();return}const ke={headers:new Wr(i.headers),follow:i.follow,counter:i.counter+1,agent:i.agent,compress:i.compress,method:i.method,body:i.body,signal:i.signal,size:i.size};if(W.statusCode!==303&&i.body&&e.body instanceof je.Readable){n(new Rr("Cannot follow redirect with body being a readable stream","unsupported-redirect")),V();return}(W.statusCode===303||(W.statusCode===301||W.statusCode===302)&&i.method==="POST")&&(ke.method="GET",ke.body=void 0,ke.headers.delete("content-length")),r(ya(new ui(ce,ke))),V();return}default:}}W.once("end",()=>{v&&v.removeEventListener("abort",D)});let ee=(0,je.pipeline)(W,new je.PassThrough,fe=>{n(fe)});process.version<"v12.10"&&W.on("aborted",D);const te={url:i.url,status:W.statusCode,statusText:W.statusMessage,headers:Z,size:i.size,counter:i.counter,highWaterMark:i.highWaterMark},ae=Z.get("Content-Encoding");if(!i.compress||i.method==="HEAD"||ae===null||W.statusCode===204||W.statusCode===304){w=new lr(ee,te),r(w);return}const me={flush:Bt.Z_SYNC_FLUSH,finishFlush:Bt.Z_SYNC_FLUSH};if(ae==="gzip"||ae==="x-gzip"){ee=(0,je.pipeline)(ee,Bt.createGunzip(me),fe=>{n(fe)}),w=new lr(ee,te),r(w);return}if(ae==="deflate"||ae==="x-deflate"){(0,je.pipeline)(W,new je.PassThrough,ce=>{n(ce)}).once("data",ce=>{(ce[0]&15)==8?ee=(0,je.pipeline)(ee,Bt.createInflate(),ke=>{n(ke)}):ee=(0,je.pipeline)(ee,Bt.createInflateRaw(),ke=>{n(ke)}),w=new lr(ee,te),r(w)});return}if(ae==="br"){ee=(0,je.pipeline)(ee,Bt.createBrotliDecompress(),fe=>{n(fe)}),w=new lr(ee,te),r(w);return}w=new lr(ee,te),r(w)}),Fm(H,i)})}let li;const $m={};function Hm(t){li=t.globalState}const xu=(t,e)=>{if(!li)throw new Error("Persistent store not initialized.");return li.get(t+":"+e,$m)},Mu=(t,e,r)=>{if(!li)throw new Error("Persistent store not initialized.");return li.update(t+":"+e,r)};var Gm=Re(6149);const Lu=Vm();function Vm(t=process.env.HTTPS_PROXY){if(!t)return Ii.globalAgent;try{const{hostname:e,port:r,username:n,password:i}=new Cn.URL(t),s=n&&i&&`${n}:${i}`;return(0,Gm.httpsOverHttp)({proxy:{host:e,port:r,proxyAuth:s}})}catch(e){return u.window.showErrorMessage(`HTTPS_PROXY environment variable ignored: ${e.message}`),Ii.globalAgent}}var Bm=Object.defineProperty,fn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const qu="Try again?",jm="Cancel",Uu="Sign in",zm="Don't show again",$u="prompt for sign in",Hu="login",Gu=["read:user","user:email","repo"];var He;(function(t){t.github="github",t["github-enterprise"]="github-enterprise"})(He||(He={}));class Qm{constructor(e){this._telemetry=e,fn(this,"_githubAPI"),fn(this,"_sessionId"),fn(this,"_githubEnterpriseAPI"),fn(this,"_enterpriseSessionId"),fn(this,"_disposables"),fn(this,"_onDidInitialize",new u.EventEmitter),fn(this,"onDidInitialize",this._onDidInitialize.event),this._disposables=[],this._disposables.push(u.authentication.onDidChangeSessions(()=>{this.isAuthenticated(He.github)||this.initialize(He.github),!this.isAuthenticated(He["github-enterprise"])&&Gn()&&this.initialize(He["github-enterprise"])}))}async initialize(e,r=!1){if(e===He["github-enterprise"]&&!Gn()){a.debug("GitHub Enterprise provider selected without URI.","Authentication");return}let n;try{n=await u.authentication.getSession(e,Gu,{createIfNone:!1,forceRecreate:r})}catch(i){if(!(r&&i.message==="User did not consent to login."))throw i}if(n){e===He.github?this._sessionId=n.id:this._enterpriseSessionId=n.id;const i=await this.createHub(n.accessToken,e);e===He.github?this._githubAPI=i:this._githubEnterpriseAPI=i,await this.setCurrentUser(i),this._onDidInitialize.fire()}else a.debug(`No GitHub${wa(e)} token found.`,"Authentication")}async recreate(){await this.initialize(He.github,!0),Gn()&&await this.initialize(He["github-enterprise"],!0)}async reset(){this._githubAPI=void 0,this._githubEnterpriseAPI=void 0,await this.initialize(He.github),Gn()&&await this.initialize(He["github-enterprise"])}isAuthenticated(e){return e===He.github?!!this._githubAPI:!!this._githubEnterpriseAPI}getHub(e){return e===He.github?this._githubAPI:this._githubEnterpriseAPI}async getHubOrLogin(e){var r,n;return e===He.github?(r=this._githubAPI)!=null?r:await this.login(e):(n=this._githubEnterpriseAPI)!=null?n:await this.login(e)}async showSignInNotification(e){if(xu($u,Hu)===!1)return;if(await u.window.showInformationMessage(`In order to use the Pull Requests functionality, you must sign in to GitHub${wa(e)}`,Uu,zm)===Uu)return await this.login(e);Mu($u,Hu,!1),this._telemetry.sendTelemetryEvent("auth.cancel")}async login(e){this._telemetry.sendTelemetryEvent("auth.start");const r=`Error signing in to GitHub${wa(e)}`;let n=!0,i;for(;n;){try{const s=await this.getSessionOrLogin(e);i=await this.createHub(s,e)}catch(s){a.appendLine(`${r}: ${s}`),s instanceof Error&&s.stack&&a.appendLine(s.stack)}i?n=!1:n=await u.window.showErrorMessage(r,qu,jm)===qu}return i?(this._githubAPI=i,await this.setCurrentUser(i),this._telemetry.sendTelemetryEvent("auth.success")):this._telemetry.sendTelemetryEvent("auth.fail"),i}isCurrentUser(e){var r,n,i,s;return((n=(r=this._githubAPI)==null?void 0:r.currentUser)==null?void 0:n.login)===e||((s=(i=this._githubEnterpriseAPI)==null?void 0:i.currentUser)==null?void 0:s.login)==e}getCurrentUser(e){const r=this.getHub(e);return(r==null?void 0:r.octokit)&&(r==null?void 0:r.currentUser)}async setCurrentUser(e){const r=await e.octokit.users.getAuthenticated({});e.currentUser=r.data}async getSessionOrLogin(e){const r=await u.authentication.getSession(e,Gu,{createIfNone:!0});return e===He.github?this._sessionId=r.id:this._enterpriseSessionId=r.id,r.accessToken}async createHub(e,r){let n="https://api.github.com",i;r===He["github-enterprise"]&&(i=Ca()),i&&(n=`${i.scheme}://${i.authority}/api/v3`);const s=new _d({request:{agent:Lu},userAgent:"GitHub VSCode Pull Requests",previews:["shadow-cat-preview"],auth:`${e||""}`,baseUrl:n});i&&(n=`${i.scheme}://${i.authority}/api`);const c=new Ah({link:Wm(n,e||""),cache:new hm,defaultOptions:{query:{fetchPolicy:"no-cache"}}}),v={octokit:s,graphql:c};return await this.setCurrentUser(v),v}dispose(){this._disposables.forEach(e=>e.dispose())}}const Wm=(t,e)=>mm((r,{headers:n})=>({headers:{...n,authorization:e?`Bearer ${e}`:"",Accept:"application/vnd.github.shadow-cat-preview+json, application/vnd.github.antiope-preview+json"}})).concat(Nu({uri:`${t}/graphql`,fetch:ya}));function wa(t){return t===He.github?"":" Enterprise"}var Km=Object.defineProperty,Vu=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Km(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ji extends Error{constructor(e){super(e);this.message=e,Vu(this,"name"),Vu(this,"stack")}}class Zi{constructor(e,r,n){this.remoteName=e,this.url=r,this.gitProtocol=n}get host(){return this.gitProtocol.host}get owner(){return this.gitProtocol.owner}get repositoryName(){return this.gitProtocol.repositoryName}get normalizedHost(){const e=this.gitProtocol.normalizeUri();return`${e.scheme}://${e.authority}`}get authProviderId(){var e;return this.host===((e=Ca())==null?void 0:e.authority)?He["github-enterprise"]:He.github}equals(e){return!(this.remoteName!==e.remoteName||this.host!==e.host||this.owner!==e.owner||this.repositoryName!==e.repositoryName)}}function Bu(t,e,r){if(!e)return null;const n=new Ur(e);return r&&n.update({type:r.type}),n.host?new Zi(t,e,n):null}function Mn(t){return t.state.remotes.map(e=>Bu(e.name,e.fetchUrl||e.pushUrl)).filter(e=>!!e)}const es=new Uint8Array(256);let ts=es.length;function Ym(){return ts>es.length-16&&(Rc().randomFillSync(es),ts=0),es.slice(ts,ts+=16)}const Xm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Jm(t){return typeof t=="string"&&Xm.test(t)}const Zm=Jm,Rt=[];for(let t=0;t<256;++t)Rt.push((t+256).toString(16).substr(1));function ep(t,e=0){const r=(Rt[t[e+0]]+Rt[t[e+1]]+Rt[t[e+2]]+Rt[t[e+3]]+"-"+Rt[t[e+4]]+Rt[t[e+5]]+"-"+Rt[t[e+6]]+Rt[t[e+7]]+"-"+Rt[t[e+8]]+Rt[t[e+9]]+"-"+Rt[t[e+10]]+Rt[t[e+11]]+Rt[t[e+12]]+Rt[t[e+13]]+Rt[t[e+14]]+Rt[t[e+15]]).toLowerCase();if(!Zm(r))throw TypeError("Stringified UUID is invalid");return r}const tp=ep;function rp(t,e,r){t=t||{};const n=t.random||(t.rng||Ym)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return tp(n)}const ju=rp;var np=Object.defineProperty,mt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?np(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rs=class{constructor(t,e,r,n,i){mt(this,"commentId"),mt(this,"id"),mt(this,"parent"),mt(this,"body"),mt(this,"originalBody"),mt(this,"mode"),mt(this,"author"),mt(this,"label"),mt(this,"commentReactions"),mt(this,"contextValue"),this.parent=t,this.body=new u.MarkdownString(e),this.mode=u.CommentMode.Preview,this.author={name:n.login,iconPath:n.avatarUrl?u.Uri.parse(`${n.avatarUrl}&s=64`):void 0},this.label=r?"Pending":void 0,this.contextValue="canEdit,canDelete",this.originalBody=i?i._rawComment.body:void 0,this.commentReactions=i?i.reactions:void 0,this.id=rs.idPool++}static is(t){return t.commentId===void 0}startEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof rs&&t.id===this.id&&(t.mode=u.CommentMode.Editing),t))}cancelEdit(){this.parent.comments=this.parent.comments.map(t=>(t instanceof rs&&t.id===this.id&&(t.mode=u.CommentMode.Preview,t.body=t.originalBody||t.body),t))}};let zt=rs;mt(zt,"idPool",0);class vt{constructor(e,r){mt(this,"commentId"),mt(this,"parent"),mt(this,"body"),mt(this,"mode"),mt(this,"author"),mt(this,"label"),mt(this,"reactions"),mt(this,"_rawComment"),mt(this,"contextValue"),this._rawComment=e,this.commentId=e.id.toString(),this.body=new u.MarkdownString(e.body),this.author={name:e.user.login,iconPath:e.user&&e.user.avatarUrl?u.Uri.parse(e.user.avatarUrl):void 0},gp(this,e.reactions),this.label=e.isDraft?"Pending":void 0;const n=[];e.canEdit&&n.push("canEdit"),e.canDelete&&n.push("canDelete"),this.contextValue=n.join(","),this.parent=r}static is(e){return e.commentId!==void 0}startEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof vt&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Editing),e))}cancelEdit(){this.parent.comments=this.parent.comments.map(e=>(e instanceof vt&&e.commentId===this.commentId&&(e.mode=u.CommentMode.Preview,e.body=e._rawComment.body),e))}}var ip=Object.defineProperty,gn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ip(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function ba(){let t="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<32;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}class zu{constructor(){gn(this,"_webview"),gn(this,"_disposables",[]),gn(this,"_waitForReady"),gn(this,"_onIsReady",new u.EventEmitter),gn(this,"MESSAGE_UNHANDLED","message not handled"),this._waitForReady=new Promise(e=>{const r=this._onIsReady.event(()=>{r.dispose(),e()})})}initialize(){var e;const r=(e=this._webview)==null?void 0:e.onDidReceiveMessage(async n=>{await this._onDidReceiveMessage(n)},null,this._disposables);r&&this._disposables.push(r)}async _onDidReceiveMessage(e){switch(e.command){case"ready":this._onIsReady.fire();return;default:return this.MESSAGE_UNHANDLED}}async _postMessage(e){var r;await this._waitForReady,(r=this._webview)==null||r.postMessage({res:e})}async _replyMessage(e,r){var n;const i={seq:e.req,res:r};(n=this._webview)==null||n.postMessage(i)}async _throwError(e,r){var n;const i={seq:e.req,err:r};(n=this._webview)==null||n.postMessage(i)}dispose(){this._disposables.forEach(e=>e.dispose())}}class Qu extends zu{constructor(e){super();this._extensionUri=e,gn(this,"viewType"),gn(this,"_view")}resolveWebviewView(e,r,n){this._view=e,this._webview=e.webview,super.initialize(),e.webview.options={enableScripts:!0,localResourceRoots:[this._extensionUri]},this._disposables.push(this._view.onDidDispose(()=>{this._webview=void 0,this._view=void 0}))}show(){this._view?this._view.show():u.commands.executeCommand(`${this.viewType}.focus`)}}var sp=Object.defineProperty,Tr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?sp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const cr=class extends zu{constructor(t,e,r,n,i=cr._viewType){super();this._extensionUri=t,Tr(this,"_panel"),Tr(this,"_disposables",[]),Tr(this,"_descriptionNode"),Tr(this,"_item"),Tr(this,"_folderRepositoryManager"),Tr(this,"_scrollPosition",{x:0,y:0}),this._folderRepositoryManager=n,this._panel=u.window.createWebviewPanel(i,r,e,{enableScripts:!0,retainContextWhenHidden:!0,localResourceRoots:[u.Uri.joinPath(t,"dist")]}),this._webview=this._panel.webview,super.initialize(),this._panel.onDidDispose(()=>this.dispose(),null,this._disposables),this._folderRepositoryManager.onDidChangeActiveIssue(s=>{if(this._folderRepositoryManager&&this._item){const c=this._item.equals(this._folderRepositoryManager.activeIssue);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:c})}},null,this._disposables)}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(cr.currentPanel)cr.currentPanel._panel.reveal(i,!0);else{const s=`Issue #${r.number.toString()}`;cr.currentPanel=new cr(t,i||u.ViewColumn.Active,s,e)}await cr.currentPanel.update(e,r)}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}async refreshPanel(){this._panel&&this._panel.visible&&this.update(this._folderRepositoryManager,this._item)}async updateIssue(t){return Promise.all([this._folderRepositoryManager.resolveIssue(t.remote.owner,t.remote.repositoryName,t.number),t.getIssueTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t)]).then(e=>{const[r,n,i]=e;if(!r)throw new Error(`Fail to resolve issue #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=r,this._panel.title=`Pull Request #${t.number.toString()}`,a.debug("pr.initialize",cr.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:this._item.number,title:this._item.title,url:this._item.html_url,createdAt:this._item.createdAt,body:this._item.body,bodyHTML:this._item.bodyHTML,labels:this._item.item.labels,author:{login:this._item.author.login,name:this._item.author.name,avatarUrl:this._item.userAvatar,url:this._item.author.url},state:this._item.state,events:n,repositoryDefaultBranch:i,canEdit:!0,status:{statuses:[]},isIssue:!0}})}).catch(e=>{u.window.showErrorMessage(Q(e))})}async update(t,e){return this._folderRepositoryManager=t,this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updateIssue(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"alert":u.window.showErrorMessage(t.args);return;case"pr.close":return this.close(t);case"pr.comment":return this.createComment(t);case"scroll":this._scrollPosition=t.args;return;case"pr.edit-comment":return this.editComment(t);case"pr.delete-comment":return this.deleteComment(t);case"pr.edit-description":return this.editDescription(t);case"pr.edit-title":return this.editTitle(t);case"pr.refresh":this.refreshPanel();return;case"pr.add-labels":return this.addLabels(t);case"pr.remove-label":return this.removeLabel(t);case"pr.debug":return this.webviewDebug(t);default:return this.MESSAGE_UNHANDLED}}async addLabels(t){try{let e=[];async function r(i,s){return e=(await i.getLabels(s)).filter(v=>!s.item.labels.some(w=>w.name===v.name)),e.map(v=>({label:v.name}))}const n=await u.window.showQuickPick(r(this._folderRepositoryManager,this._item),{canPickMany:!0});if(n&&n.length){await this._item.addLabels(n.map(s=>s.label));const i=n.map(s=>e.find(c=>c.name===s.label));this._item.item.labels=this._item.item.labels.concat(...i),this._replyMessage(t,{added:i})}}catch(e){u.window.showErrorMessage(Q(e))}}async removeLabel(t){try{await this._item.removeLabel(t.args);const e=this._item.item.labels.findIndex(r=>r.name===t.args);this._item.item.labels.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(Q(e))}}webviewDebug(t){a.debug(t.args,cr.ID)}editDescription(t){this._item.edit({body:t.args.text}).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing description failed: ${Q(e)}`)})}editTitle(t){this._item.edit({title:t.args.text}).then(e=>{this._replyMessage(t,{text:e.title})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(`Editing title failed: ${Q(e)}`)})}editCommentPromise(t,e){return this._item.editIssueComment(t,e)}editComment(t){this.editCommentPromise(t.args.comment,t.args.text).then(e=>{this._replyMessage(t,{body:e.body,bodyHTML:e.bodyHTML})}).catch(e=>{this._throwError(t,e),u.window.showErrorMessage(Q(e))})}deleteCommentPromise(t){return this._item.deleteIssueComment(t.id.toString())}deleteComment(t){u.window.showWarningMessage("Are you sure you want to delete this comment?",{modal:!0},"Delete").then(e=>{e==="Delete"&&this.deleteCommentPromise(t.args).then(r=>{this._replyMessage(t,{})}).catch(r=>{this._throwError(t,r),u.window.showErrorMessage(Q(r))})})}close(t){u.commands.executeCommand("pr.close",this._item,t.args).then(e=>{e?this._replyMessage(t,{value:e}):this._throwError(t,"Close cancelled")})}createComment(t){this._item.createIssueComment(t.args).then(e=>{this._replyMessage(t,{value:e})})}set _currentPanel(t){cr.currentPanel=t}dispose(){for(this._currentPanel=void 0,this._panel.dispose(),this._webview=void 0;this._disposables.length;){const t=this._disposables.pop();t&&t.dispose()}}getHtmlForWebview(t){const e=ba(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-pr-description.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>Pull Request #${t}</title>
	</head>
	<body class="${process.platform}">
		<div id=app></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}getCurrentTitle(){return this._panel.title}};let ns=cr;Tr(ns,"ID","PullRequestOverviewPanel"),Tr(ns,"currentPanel"),Tr(ns,"_viewType","IssueOverview");var ap=Object.defineProperty,Ln=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ap(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function op(t){return!!t.id&&!!t.milestone}const dr=class extends ns{constructor(t,e,r,n){super(t,e,r,n,dr._viewType);Ln(this,"_repositoryDefaultBranch"),Ln(this,"_existingReviewers",[]),Ln(this,"_changeActivePullRequestListener"),this.registerFolderRepositoryListener(),zl(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(n.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:rt.Merged})}))}static async createOrShow(t,e,r,n=!1){const i=n?u.ViewColumn.Beside:u.window.activeTextEditor?u.window.activeTextEditor.viewColumn:u.ViewColumn.One;if(dr.currentPanel)dr.currentPanel._panel.reveal(i,!0);else{const s=`Pull Request #${r.number.toString()}`;dr.currentPanel=new dr(t,i||u.ViewColumn.Active,s,e)}await dr.currentPanel.update(e,r)}set _currentPanel(t){dr.currentPanel=t}static refresh(){this.currentPanel&&this.currentPanel.refreshPanel()}static scrollToReview(){this.currentPanel&&this.currentPanel._postMessage({command:"pr.scrollToPendingReview"})}registerFolderRepositoryListener(){this._changeActivePullRequestListener=this._folderRepositoryManager.onDidChangeActivePullRequest(t=>{if(this._folderRepositoryManager&&this._item){const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:e})}})}async updatePullRequest(t){return Promise.all([this._folderRepositoryManager.resolvePullRequest(t.remote.owner,t.remote.repositoryName,t.number),t.getTimelineEvents(),this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(t),t.getStatusChecks(),t.getReviewRequests(),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(t),this._folderRepositoryManager.getBranchNameForPullRequest(t)]).then(e=>{var r,n;const[i,s,c,v,w,T,D]=e;if(!i)throw new Error(`Fail to resolve Pull Request #${t.number} in ${t.remote.owner}/${t.remote.repositoryName}`);this._item=i,this._repositoryDefaultBranch=c,this._panel.title=`Pull Request #${t.number.toString()}`;const H=t.equals(this._folderRepositoryManager.activePullRequest),V=T.hasWritePermission,W=T.mergeMethodsAvailability,Z=V||this._item.canEdit(),ee=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),te=Wu(W,ee);this._existingReviewers=ul(w,s,i.author);const ae=this._folderRepositoryManager.getCurrentUser(this._item),fe=i.base&&i.head&&!i.base.repositoryCloneUrl.equals(i.head.repositoryCloneUrl)&&Ra();a.debug("pr.initialize",dr.ID),this._postMessage({command:"pr.initialize",pullrequest:{number:i.number,title:i.title,url:i.html_url,createdAt:i.createdAt,body:i.body,bodyHTML:i.bodyHTML,labels:i.item.labels,author:{login:i.author.login,name:i.author.name,avatarUrl:i.userAvatar,url:i.author.url},state:i.state,events:s,isCurrentlyCheckedOut:H,isRemoteBaseDeleted:i.isRemoteBaseDeleted,base:i.base.label,isRemoteHeadDeleted:i.isRemoteHeadDeleted,isLocalHeadDeleted:!D,head:(n=(r=i.head)==null?void 0:r.label)!=null?n:"",repositoryDefaultBranch:c,canEdit:Z,hasWritePermission:V,status:v||{statuses:[]},mergeable:i.item.mergeable,reviewers:this._existingReviewers,isDraft:i.isDraft,mergeMethodsAvailability:W,defaultMergeMethod:te,isIssue:!1,milestone:i.milestone,assignees:i.assignees,continueOnGitHub:fe,isAuthor:ae.login===i.author.login}})}).catch(e=>{u.window.showErrorMessage(Q(e))})}async update(t,e){return this._folderRepositoryManager!==t&&(this._folderRepositoryManager=t,this._changeActivePullRequestListener&&(this._changeActivePullRequestListener.dispose(),this._changeActivePullRequestListener=void 0,this.registerFolderRepositoryListener())),this._postMessage({command:"set-scroll",scrollPosition:this._scrollPosition}),this._panel.webview.html=this.getHtmlForWebview(e.number.toString()),this.updatePullRequest(e)}async _onDidReceiveMessage(t){if(await super._onDidReceiveMessage(t)===this.MESSAGE_UNHANDLED)switch(t.command){case"pr.checkout":return this.checkoutPullRequest(t);case"pr.merge":return this.mergePullRequest(t);case"pr.deleteBranch":return this.deleteBranch(t);case"pr.readyForReview":return this.setReadyForReview(t);case"pr.approve":return this.approvePullRequest(t);case"pr.request-changes":return this.requestChanges(t);case"pr.submit":return this.submitReview(t);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(t);case"pr.apply-patch":return this.applyPatch(t);case"pr.open-diff":return this.openDiff(t);case"pr.checkMergeability":return this._replyMessage(t,await this._item.getMergeability());case"pr.add-reviewers":return this.addReviewers(t);case"pr.remove-milestone":return this.removeMilestone(t);case"pr.add-milestone":return this.addMilestone(t);case"pr.add-assignees":return this.addAssignees(t);case"pr.remove-reviewer":return this.removeReviewer(t);case"pr.remove-assignee":return this.removeAssignee(t);case"pr.copy-prlink":return this.copyPrLink();case"pr.openOnGitHub":return wi(this._item,this._item._telemetry)}}async getReviewersQuickPickItems(t){if(!t)return[];const r=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],n=new Set([this._item.author.login,...this._existingReviewers.map(s=>s.reviewer.login)]),i=[];for(const s of t){const{login:c,name:v,isAuthor:w,isCommenter:T}=s;if(n.has(c))continue;const D=w&&T?"Recently edited and reviewed changes to these files":w?"Recently edited these files":T?"Recently reviewed changes to these files":"Suggested reviewer";i.push({label:c,description:v,detail:D,reviewer:s}),n.add(c)}for(const s of r)n.has(s.login)||i.push({label:s.login,description:s.name,reviewer:s});return i}getAssigneesQuickPickItems(t,e){var r,n;if(!e)return[];const i=new Set([...(n=(r=this._item.assignees)==null?void 0:r.map(c=>c.login))!=null?n:[]]),s=[];for(const c of e){const{login:v,name:w,isAuthor:T,isCommenter:D}=c;if(i.has(v))continue;const H=T&&D?"Recently edited and reviewed changes to these files":T?"Recently edited these files":D?"Recently reviewed changes to these files":"Suggested reviewer";s.push({label:v,description:w,detail:H,assignee:c}),i.add(v)}for(const c of t)i.has(c.login)||s.push({label:c.login,description:c.name,assignee:c});return s}async addReviewers(t){try{const e=await u.window.showQuickPick(this.getReviewersQuickPickItems(this._item.suggestedReviewers),{canPickMany:!0,matchOnDescription:!0});if(e){await this._item.requestReview(e.map(n=>n.label));const r=e.map(n=>({reviewer:n.reviewer,state:"REQUESTED"}));this._existingReviewers=this._existingReviewers.concat(r),this._replyMessage(t,{added:r})}}catch(e){u.window.showErrorMessage(Q(e))}}async addMilestone(t){try{async function e(n){const i=await n.getMilestones();return i.items.length?i.items.map(s=>({label:s.milestone.title,id:s.milestone.id,milestone:s.milestone})):[{label:"No milestones created for this repository."}]}const r=await u.window.showQuickPick(e(this._folderRepositoryManager),{canPickMany:!1});r&&op(r)&&(await this._item.updateMilestone(r.id),this._replyMessage(t,{added:r.milestone}))}catch(e){u.window.showErrorMessage(Q(e))}}async removeMilestone(t){try{await this._item.updateMilestone("null"),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(Q(e))}}async addAssignees(t){var e;try{const n=(await this._folderRepositoryManager.getAssignableUsers())[this._item.remote.remoteName],i=await u.window.showQuickPick(this.getAssigneesQuickPickItems(n,[]),{canPickMany:!0,matchOnDescription:!0});if(i){const s=i.map(c=>c.assignee);this._item.assignees=(e=this._item.assignees)==null?void 0:e.concat(s),await this._item.updateAssignees(s.map(c=>c.login)),this._replyMessage(t,{added:s})}}catch(r){u.window.showErrorMessage(Q(r))}}async removeReviewer(t){try{await this._item.deleteReviewRequest(t.args);const e=this._existingReviewers.findIndex(r=>r.reviewer.login===t.args);this._existingReviewers.splice(e,1),this._replyMessage(t,{})}catch(e){u.window.showErrorMessage(Q(e))}}async removeAssignee(t){var e,r,n;try{await this._item.deleteAssignees(t.args);const i=(r=(e=this._item.assignees)==null?void 0:e.findIndex(s=>s.login===t.args))!=null?r:-1;(n=this._item.assignees)==null||n.splice(i,1),this._replyMessage(t,{})}catch(i){u.window.showErrorMessage(Q(i))}}async applyPatch(t){try{const e=t.args.comment,n=/```diff\n([\s\S]*)\n```/g.exec(e.body),i=h.join(this._folderRepositoryManager.repository.rootUri.path,".git",`${e.id}.diff`),s=new TextEncoder,c=u.Uri.parse(i);await u.workspace.fs.writeFile(c,s.encode(n[1])),await this._folderRepositoryManager.repository.apply(i,!0),await u.workspace.fs.delete(c)}catch(e){a.appendLine(`Applying patch failed: ${e}`),u.window.showErrorMessage(`Applying patch failed: ${Q(e)}`)}}async openDiff(t){try{const e=t.args.comment;return Nr.openDiffFromComment(this._folderRepositoryManager,this._item,e)}catch(e){a.appendLine(`Open diff view failed: ${Q(e)}`,dr.ID)}}checkoutPullRequest(t){u.commands.executeCommand("pr.pick",this._item).then(()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})},()=>{const e=this._item.equals(this._folderRepositoryManager.activePullRequest);this._replyMessage(t,{isCurrentlyCheckedOut:e})})}mergePullRequest(t){const{title:e,description:r,method:n}=t.args;this._folderRepositoryManager.mergePullRequest(this._item,e,r,n).then(i=>{u.commands.executeCommand("pr.refreshList"),i.merged||u.window.showErrorMessage(`Merging PR failed: ${i.message}`),this._replyMessage(t,{state:i.merged?rt.Merged:rt.Open})}).catch(i=>{u.window.showErrorMessage(`Unable to merge pull request. ${Q(i)}`),this._throwError(t,{})})}async deleteBranch(t){const e=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),r=[];if(this._item.isResolved()){const s=this._item.head.ref;!(this._repositoryDefaultBranch===this._item.head.ref)&&!this._item.isRemoteHeadDeleted&&r.push({label:`Delete remote branch ${this._item.remote.remoteName}/${s}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(e){const s=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");r.push({label:`Delete local branch ${e.branch}`,type:"local",picked:!!s});const c=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");e.remote&&e.createdForPullRequest&&!e.remoteInUse&&r.push({label:`Delete remote ${e.remote}, which is no longer used by any other branch`,type:"remote",picked:!!c})}if(u.env.remoteName==="codespaces"&&r.push({label:"Suspend Codespace",type:"suspend"}),!r.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(t,{cancelled:!0});return}const n=await u.window.showQuickPick(r,{canPickMany:!0,ignoreFocusOut:!0}),i=[];if(n){const s=this._item.equals(this._folderRepositoryManager.activePullRequest),c=n.map(async v=>{switch(v.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),i.push(v.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(s){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;await this._folderRepositoryManager.repository.checkout(this._repositoryDefaultBranch)}return await this._folderRepositoryManager.repository.deleteBranch(e.branch,!0),i.push(v.type);case"remote":return i.push(v.type),this._folderRepositoryManager.repository.removeRemote(e.remote);case"suspend":return i.push(v.type),u.commands.executeCommand("github.codespaces.disconnectSuspend")}});await Promise.all(c),this.refreshPanel(),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:i})}else this._replyMessage(t,{cancelled:!0})}setReadyForReview(t){this._item.setReadyForReview().then(e=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(t,{isDraft:e})}).catch(e=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${Q(e)}`),this._throwError(t,{})})}async checkoutDefaultBranch(t){try{await this._folderRepositoryManager.checkoutDefaultBranch(t.args)}finally{this._replyMessage(t,{})}}updateReviewers(t){if(t){const e=this._existingReviewers.find(r=>t.user.login===r.reviewer.login);e?e.state=t.state:this._existingReviewers.push({reviewer:t.user,state:t.state})}}approvePullRequest(t){this._item.approve(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},e=>{u.window.showErrorMessage(`Approving pull request failed. ${Q(e)}`),this._throwError(t,`${Q(e)}`)})}requestChanges(t){this._item.requestChanges(t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Requesting changes failed. ${Q(e)}`),this._throwError(t,`${Q(e)}`)})}submitReview(t){this._item.submitReview(yr.Comment,t.args).then(e=>{this.updateReviewers(e),this._replyMessage(t,{review:e,reviewers:this._existingReviewers})},e=>{u.window.showErrorMessage(`Submitting review failed. ${Q(e)}`),this._throwError(t,`${Q(e)}`)})}async copyPrLink(){await u.env.clipboard.writeText(this._item.html_url),u.window.showInformationMessage(`Copied link to PR ${this._item.title}!`)}editCommentPromise(t,e){return this._item.editReviewComment(t,e)}deleteCommentPromise(t){return this._item.deleteReviewComment(t.id.toString())}dispose(){super.dispose(),this._changeActivePullRequestListener&&this._changeActivePullRequestListener.dispose()}};let Kt=dr;Ln(Kt,"ID","PullRequestOverviewPanel"),Ln(Kt,"currentPanel"),Ln(Kt,"_viewType","PullRequestOverview");function Wu(t,e){return e&&t.hasOwnProperty(e)&&t[e]?e:["merge","squash","rebase"].find(n=>t[n])}var up=Object.defineProperty,ci=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?up(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class lp{constructor(e,r,n){this.pullRequestModel=e,this._folderReposManager=r,this._commentController=n,ci(this,"_pendingCommentThreadAdds",[]),ci(this,"_commentHandlerId"),ci(this,"_commentThreadCache",{}),ci(this,"_openPREditors",[]),ci(this,"_disposables",[]),this._commentHandlerId=ju(),xt(this._commentHandlerId,this),this.initializeThreadsInOpenEditors(),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangeReviewThreads(e=>this.onDidChangeReviewThreads(e))),this._disposables.push(u.window.onDidChangeVisibleTextEditors(async e=>{this.onDidChangeOpenEditors(e)})),this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(e=>{for(const r in this._commentThreadCache)this._commentThreadCache[r].forEach(n=>{Ju(n,e)})})),this._disposables.push(u.window.onDidChangeActiveTextEditor(e=>{this.refreshContextKey(e)}))}refreshContextKey(e){if(!e)return;const r=e.document.uri;if(r.scheme!=="pr")return;const n=dt(r);!n||n.prNumber!==this.pullRequestModel.number||this.setContextKey(this.pullRequestModel.hasPendingReview)}getPREditors(e){return e.filter(r=>{if(r.document.uri.scheme!=="pr")return!1;const n=dt(r.document.uri);return!(!n||n.prNumber!==this.pullRequestModel.number)})}getCommentThreadCacheKey(e,r){return`${e}-${r?"original":"modified"}`}addThreadsForEditors(e){const r=this.pullRequestModel.reviewThreadsCache,n=B(r,i=>i.path);e.forEach(i=>{const{fileName:s,isBase:c}=dt(i.document.uri);n[s]&&(this._commentThreadCache[this.getCommentThreadCacheKey(s,c)]=n[s].filter(v=>v.diffSide===Qe.LEFT&&c||v.diffSide===Qe.RIGHT&&!c).map(v=>{const w=new u.Range(new u.Position(v.line-1,0),new u.Position(v.line-1,0));return di(i.document.uri,w,v,this._commentController)}))})}initializeThreadsInOpenEditors(){const e=this.getPREditors(u.window.visibleTextEditors);this._openPREditors=e,this.addThreadsForEditors(e)}onDidChangeOpenEditors(e){const r=this.getPREditors(e),n=this._openPREditors.filter(s=>!r.includes(s)),i=r.filter(s=>!this._openPREditors.includes(s));this._openPREditors=r,n.forEach(s=>{const{fileName:c,isBase:v}=dt(s.document.uri),w=this.getCommentThreadCacheKey(c,v);(this._commentThreadCache[w]||[]).forEach(D=>D.dispose()),delete this._commentThreadCache[w]}),i.length&&this.addThreadsForEditors(i)}onDidChangeReviewThreads(e){e.added.forEach(r=>{const n=r.path,i=this._pendingCommentThreadAdds.findIndex(v=>{const w=this.gitRelativeRootPath(v.uri.path)===r.path,T=v.range.start.line+1===r.line;return w&&T});let s;if(i>-1)s=this._pendingCommentThreadAdds[i],s.threadId=r.id,s.comments=r.comments.map(v=>new vt(v,s)),this._pendingCommentThreadAdds.splice(i,1);else{const w=this.getPREditors(u.window.visibleTextEditors).find(T=>{const D=dt(T.document.uri),H=r.diffSide===Qe.RIGHT&&!(D==null?void 0:D.isBase)||r.diffSide===Qe.LEFT&&(D==null?void 0:D.isBase);return(D==null?void 0:D.fileName)===n&&H});if(w){const T=new u.Range(new u.Position(r.line-1,0),new u.Position(r.line-1,0));s=di(w.document.uri,T,r,this._commentController)}}if(!s)return;const c=this.getCommentThreadCacheKey(r.path,r.diffSide===Qe.LEFT);this._commentThreadCache[c]?this._commentThreadCache[c].push(s):this._commentThreadCache[c]=[s]}),e.changed.forEach(r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Qe.LEFT),i=this._commentThreadCache[n].findIndex(s=>s.threadId===r.id);if(i>-1){const s=this._commentThreadCache[n][i];Xu(s,r)}}),e.removed.forEach(async r=>{const n=this.getCommentThreadCacheKey(r.path,r.diffSide===Qe.LEFT),i=this._commentThreadCache[n].findIndex(s=>s.threadId===r.id);if(i>-1){const s=this._commentThreadCache[n][i];this._commentThreadCache[n].splice(i,1),s.dispose()}})}hasCommentThread(e){if(e.uri.scheme!=="pr")return!1;const r=dt(e.uri);return!(!r||r.prNumber!==this.pullRequestModel.number)}getCommentSide(e){const r=dt(e.uri);return(r==null?void 0:r.isBase)?Qe.LEFT:Qe.RIGHT}async createOrReplyComment(e,r,n,i){const s=e.comments.length,c=n?!1:i!==void 0?i:this.pullRequestModel.hasPendingReview,v=this.optimisticallyAddComment(e,r,c);try{if(s)await this.reply(e,r,n);else{const w=this.gitRelativeRootPath(e.uri.path),T=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,w,e.range.start.line+1,T,n)}n&&await this.pullRequestModel.submitReview()}catch(w){u.window.showErrorMessage(`Creating comment failed: ${w}`),e.comments=e.comments.map(T=>(T instanceof zt&&T.id===v&&(T.mode=u.CommentMode.Editing),T))}}reply(e,r,n){const i=e.comments[0];if(i instanceof vt)return this.pullRequestModel.createCommentReply(r,i._rawComment.graphNodeId,n);throw new Error("Cannot respond to temporary comment")}optimisticallyEditComment(e,r){const n=this._folderReposManager.getCurrentUser(this.pullRequestModel),i=new zt(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(s=>s instanceof vt&&s.commentId===r.commentId?i:s),i.id}async editComment(e,r){if(r instanceof vt){const n=this.optimisticallyEditComment(e,r);try{await this.pullRequestModel.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(`Editing comment failed ${i}`),e.comments=e.comments.map(s=>s instanceof zt&&s.id===n?new vt(r._rawComment,e):s)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){r instanceof vt?await this.pullRequestModel.deleteReviewComment(r.commentId):e.comments=e.comments.filter(n=>!(n instanceof zt&&n.id===r.id)),await this.pullRequestModel.validateDraftMode()}gitRelativeRootPath(e){return h.relative(this._folderReposManager.repository.rootUri.path,e).replace(/\\/g,"/")}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n)await this.reply(e,r,!1);else{const s=this.gitRelativeRootPath(e.uri.path),c=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e),await this.pullRequestModel.createReviewThread(r,s,e.range.start.line+1,c)}this.setContextKey(!0)}catch(s){u.window.showErrorMessage(`Starting a review failed: ${s}`),e.comments=e.comments.map(c=>(c instanceof zt&&c.id===i&&(c.mode=u.CommentMode.Editing),c))}}async openReview(){await Kt.createOrShow(this._folderReposManager.context.extensionUri,this._folderReposManager,this.pullRequestModel),Kt.scrollToReview(),this._folderReposManager.telemetry.sendTelemetryEvent("pr.openDescription")}optimisticallyAddComment(e,r,n){const i=this._folderReposManager.getCurrentUser(this.pullRequestModel),s=new zt(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,r){e.comments=r,$n(e)}async createCommentOnResolve(e,r){const n=await this.pullRequestModel.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.resolveReviewThread(e.threadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this.pullRequestModel.unresolveReviewThread(e.threadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async toggleReaction(e,r){e.parent.uri.scheme==="pr"&&(e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this.pullRequestModel.addCommentReaction(e._rawComment.graphNodeId,r):await this.pullRequestModel.deleteCommentReaction(e._rawComment.graphNodeId,r))}setContextKey(e){u.commands.executeCommand("setContext","prInDraft",e)}dispose(){Object.keys(this._commentThreadCache).forEach(e=>{this._commentThreadCache[e].forEach(r=>r.dispose())}),Le(this._commentHandlerId),this._disposables.forEach(e=>e.dispose())}}var cp=Object.defineProperty,Ku=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class dp{constructor(e){this.commentsController=e,Ku(this,"_prCommentHandlers",{}),Ku(this,"_prCommentingRangeProviders",{}),this.commentsController.commentingRangeProvider=this,this.commentsController.reactionHandler=this.toggleReaction.bind(this)}async provideCommentingRanges(e,r){const n=e.uri,i=dt(n);return!i||!this._prCommentingRangeProviders[i.prNumber]?void 0:this._prCommentingRangeProviders[i.prNumber].provideCommentingRanges.bind(this._prCommentingRangeProviders[i.prNumber])(e,r)}async toggleReaction(e,r){const n=e.parent.uri,i=dt(n);return!i||!this._prCommentHandlers[i.prNumber]||!this._prCommentHandlers[i.prNumber].handler.toggleReaction?void 0:this._prCommentHandlers[i.prNumber].handler.toggleReaction.bind(this._prCommentHandlers[i.prNumber].handler)(e,r)}registerCommentController(e,r,n){if(this._prCommentHandlers[e])return this._prCommentHandlers[e].refCount+=1,this._prCommentHandlers[e];const i=new lp(r,n,this.commentsController);return this._prCommentHandlers[e]={handler:i,refCount:1,dispose:()=>{!this._prCommentHandlers[e]||(this._prCommentHandlers[e].refCount-=1,this._prCommentHandlers[e].refCount===0&&(this._prCommentHandlers[e].handler.dispose(),delete this._prCommentHandlers[e]))}},this._prCommentHandlers[e]}registerCommentingRangeProvider(e,r){return this._prCommentingRangeProviders[e]=r,{dispose:()=>{delete this._prCommentingRangeProviders[e]}}}dispose(){Object.keys(this._prCommentHandlers).forEach(e=>{this._prCommentHandlers[e].handler.dispose()}),this._prCommentingRangeProviders={},this._prCommentHandlers={}}}var hp=Re(9967),mp=Re.n(hp),pp=Object.defineProperty,er=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?pp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Yu=20,qn="GraphQL";var Lt;(function(t){t.Unknown="unknown",t.Admin="ADMIN",t.Maintain="MAINTAIN",t.Read="READ",t.Triage="TRIAGE",t.Write="WRITE"})(Lt||(Lt={}));const Oe=class{constructor(t,e,r){this.remote=t,this._credentialStore=e,this._telemetry=r,er(this,"_initialized",!1),er(this,"_hub"),er(this,"_metadata"),er(this,"_toDispose",[]),er(this,"commentsController"),er(this,"commentsHandler"),er(this,"_pullRequestModels",new Map),er(this,"isGitHubDotCom"),er(this,"query",async n=>{var i;const s=this.hub&&this.hub.graphql;if(!s)return a.debug(`Not available for query: ${n}`,qn),{data:null,loading:!1,networkStatus:nt.error,stale:!1};a.debug(`Request: ${JSON.stringify(n,null,2)}`,qn);let c;try{c=await s.query(n)}catch(v){if((i=v.message)==null?void 0:i.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))await this._credentialStore.recreate(),c=await s.query(n);else throw v}return a.debug(`Response: ${JSON.stringify(c,null,2)}`,qn),c}),er(this,"mutate",async n=>{const i=this.hub&&this.hub.graphql;if(!i)return a.debug(`Not available for query: ${n}`,qn),{data:null,loading:!1,networkStatus:nt.error,stale:!1};a.debug(`Request: ${JSON.stringify(n,null,2)}`,qn);const s=await i.mutate(n);return a.debug(`Response: ${JSON.stringify(s,null,2)}`,qn),s}),this.isGitHubDotCom=t.host.toLowerCase()==="github.com"}get hub(){if(!this._hub)throw this._initialized?new Ji("Not authenticated."):new Error("Call ensure() before accessing this property.");return this._hub}equals(t){return this.remote.equals(t.remote)}async ensureCommentsController(){try{if(this.commentsController)return;await this.ensure(),this.commentsController=u.comments.createCommentController(`github-browse-${this.remote.normalizedHost}`,`GitHub Pull Request for ${this.remote.normalizedHost}`),this.commentsHandler=new dp(this.commentsController),this._toDispose.push(this.commentsHandler),this._toDispose.push(this.commentsController)}catch(t){console.log(t)}}dispose(){this._toDispose.forEach(t=>t.dispose())}get octokit(){return this.hub&&this.hub.octokit}get schema(){return mp()}async getMetadata(){var t;if(a.debug("Fetch metadata - enter",Oe.ID),this._metadata)return a.debug(`Fetch metadata ${(t=this._metadata.owner)==null?void 0:t.login}/${this._metadata.name} - done`,Oe.ID),this._metadata;const{octokit:e,remote:r}=await this.ensure(),n=await e.repos.get({owner:r.owner,repo:r.repositoryName});return a.debug(`Fetch metadata ${r.owner}/${r.repositoryName} - done`,Oe.ID),this._metadata={...n.data,currentUser:e.currentUser},this._metadata}async resolveRemote(){try{const{clone_url:t}=await this.getMetadata();this.remote=Bu(this.remote.remoteName,t,this.remote.gitProtocol)}catch(t){a.appendLine(`Unable to resolve remote: ${t}`)}}async ensure(){return this._initialized=!0,this._credentialStore.isAuthenticated(this.remote.authProviderId)?this._hub=this._credentialStore.getHub(this.remote.authProviderId):this._hub=await this._credentialStore.showSignInNotification(this.remote.authProviderId),this}async getDefaultBranch(){try{a.debug("Fetch default branch - enter",Oe.ID);const{octokit:t,remote:e}=await this.ensure(),{data:r}=await t.repos.get({owner:e.owner,repo:e.repositoryName});return a.debug("Fetch default branch - done",Oe.ID),r.default_branch}catch(t){a.appendLine(`GitHubRepository> Fetching default branch failed: ${t}`)}return"master"}async getRepoAccessAndMergeMethods(){var t,e,r,n,i;try{a.debug("Fetch repo permissions and available merge methods - enter",Oe.ID);const{octokit:s,remote:c}=await this.ensure(),{data:v}=await s.repos.get({owner:c.owner,repo:c.repositoryName});return a.debug("Fetch repo permissions and available merge methods - done",Oe.ID),{hasWritePermission:(e=(t=v.permissions)==null?void 0:t.push)!=null?e:!1,mergeMethodsAvailability:{merge:(r=v.allow_merge_commit)!=null?r:!1,squash:(n=v.allow_squash_merge)!=null?n:!1,rebase:(i=v.allow_rebase_merge)!=null?i:!1}}}catch(s){a.appendLine(`GitHubRepository> Fetching repo permissions and available merge methods failed: ${s}`)}return{hasWritePermission:!0,mergeMethodsAvailability:{merge:!0,squash:!0,rebase:!0}}}async getAllPullRequests(t){try{a.debug("Fetch all pull requests - enter",Oe.ID);const{octokit:e,remote:r}=await this.ensure(),n=await e.pulls.list({owner:r.owner,repo:r.repositoryName,per_page:Yu,page:t||1}),i=!!n.headers.link&&n.headers.link.indexOf('rel="next"')>-1;if(!n.data)return a.appendLine(`Warning: no result data for ${r.owner}/${r.repositoryName} Status: ${n.status}`),{items:[],hasMorePages:!1};const s=n.data.map(c=>c.head.repo?this.createOrUpdatePullRequestModel(vn(c,this)):(a.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(c=>c!==null);return a.debug("Fetch all pull requests - done",Oe.ID),{items:s,hasMorePages:i}}catch(e){if(a.appendLine(`Fetching all pull requests failed: ${e}`,Oe.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}async getPullRequestForBranch(t){try{a.debug("Fetch pull requests for branch - enter",Oe.ID);const{octokit:e,remote:r}=await this.ensure(),i=(await e.pulls.list({owner:r.owner,repo:r.repositoryName,head:`${r.owner}:${t}`})).data.map(s=>this.createOrUpdatePullRequestModel(vn(s,this))).filter(s=>s!==null);return a.debug("Fetch pull requests for branch - done",Oe.ID),i}catch(e){if(a.appendLine(`Fetching pull requests for branch failed: ${e}`,Oe.ID),e.code===404)u.window.showWarningMessage(`Fetching pull requests for remote '${this.remote.remoteName}' failed, please check if the url ${this.remote.url} is valid.`);else throw e}}getRepoForIssue(t,e){if(e.repositoryName&&e.repositoryUrl&&(t.remote.owner!==e.repositoryOwner||t.remote.repositoryName!==e.repositoryName)){const r=new Zi(e.repositoryName,e.repositoryUrl,new Ur(e.repositoryUrl));t=new Oe(r,this._credentialStore,this._telemetry)}return t}async getIssuesForUserByMilestone(t){var e;try{a.debug("Fetch all issues - enter",Oe.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:s}=await r({query:i.GetMilestones,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});a.debug("Fetch all issues - done",Oe.ID);const c=[];let v=this;return s&&s.repository.milestones&&s.repository.milestones.nodes&&s.repository.milestones.nodes.forEach(w=>{const T=ka(w);if(T){const D=[];w.issues.edges.forEach(H=>{const V=Ea(H.node,this);v=this.getRepoForIssue(v,V),D.push(new Ct(v,v.remote,V))}),c.push({milestone:T,issues:D})}}),{items:c,hasMorePages:s.repository.milestones.pageInfo.hasNextPage}}catch(r){a.appendLine(`GithubRepository> Unable to fetch issues: ${r}`);return}}async getIssuesWithoutMilestone(t){var e;try{a.debug("Fetch issues without milestone- enter",Oe.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:s}=await r({query:i.IssuesWithoutMilestone,variables:{owner:n.owner,name:n.repositoryName,assignee:(e=this._credentialStore.getCurrentUser(n.authProviderId))==null?void 0:e.login}});a.debug("Fetch issues without milestone - done",Oe.ID);const c=[];let v=this;return s&&s.repository.issues.edges&&s.repository.issues.edges.forEach(w=>{if(w.node.id){const T=Ea(w.node,this);v=this.getRepoForIssue(v,T),c.push(new Ct(v,v.remote,T))}}),{items:c,hasMorePages:s.repository.issues.pageInfo.hasNextPage}}catch(r){a.appendLine(`GithubRepository> Unable to fetch issues without milestone: ${r}`);return}}async getIssues(t,e){try{a.debug("Fetch issues with query - enter",Oe.ID);const{query:r,schema:n}=await this.ensure(),{data:i}=await r({query:n.Issues,variables:{query:`${e} type:issue`}});a.debug("Fetch issues with query - done",Oe.ID);const s=[];let c=this;return i&&i.search.edges&&i.search.edges.forEach(v=>{if(v.node.id){const w=Ea(v.node,this);c=this.getRepoForIssue(c,w),s.push(new Ct(c,c.remote,w))}}),{items:s,hasMorePages:i.search.pageInfo.hasNextPage}}catch(r){a.appendLine(`GithubRepository> Unable to fetch issues with query: ${r}`);return}}async getMaxIssue(){try{a.debug("Fetch max issue - enter",Oe.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.MaxIssue,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch max issue - done",Oe.ID),n&&n.repository.issues.edges.length===1?n.repository.issues.edges[0].node.number:void 0}catch(t){a.appendLine(`GithubRepository> Unable to fetch issues with query: ${t}`);return}}async getViewerPermission(){try{a.debug("Fetch viewer permission - enter",Oe.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetViewerPermission,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch viewer permission - done",Oe.ID),Cp(n)}catch(t){return a.appendLine(`GithubRepository> Unable to fetch viewer permission: ${t}`),Lt.Unknown}}async fork(){try{a.debug("Fork repository",Oe.ID);const{octokit:t,remote:e}=await this.ensure();return(await t.repos.createFork({owner:e.owner,repo:e.repositoryName})).data.clone_url}catch(t){a.appendLine(`GitHubRepository> Forking repository failed: ${t}`);return}}async getRepositoryForkDetails(){try{a.debug("Fetch repository fork details - enter",Oe.ID);const{query:t,remote:e,schema:r}=await this.ensure(),{data:n}=await t({query:r.GetRepositoryForkDetails,variables:{owner:e.owner,name:e.repositoryName}});return a.debug("Fetch repository fork details - done",Oe.ID),n.repository}catch(t){a.appendLine(`GithubRepository> Unable to fetch repository fork details: ${t}`);return}}async getAuthenticatedUser(){const{octokit:t}=await this.ensure();return(await t.users.getAuthenticated({})).data.login}async getPullRequestsForCategory(t,e){try{a.debug(`Fetch pull request category ${t} - enter`,Oe.ID);const{octokit:r,remote:n}=await this.ensure(),i=await r.users.getAuthenticated({}),s=await r.repos.get({owner:this.remote.owner,repo:this.remote.repositoryName}),{data:c,headers:v}=await r.search.issuesAndPullRequests({q:Sp(s.data.full_name,i.data.login,t),per_page:Yu,page:e||1}),w=[];c.items.forEach(V=>{w.push(new Promise(async(W,Z)=>{const ee=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:V.number});W(ee)}))});const T=!!v.link&&v.link.indexOf('rel="next"')>-1,H=(await Promise.all(w)).map(V=>V.data.head.repo?this.createOrUpdatePullRequestModel(vn(V.data,this)):(a.appendLine("GitHubRepository> The remote branch for this PR was already deleted."),null)).filter(V=>V!==null);return a.debug(`Fetch pull request category ${t} - done`,Oe.ID),{items:H,hasMorePages:T}}catch(r){if(a.appendLine(`GitHubRepository> Fetching all pull requests failed: ${r}`),r.code===404)u.window.showWarningMessage(`Fetching pull requests for remote ${this.remote.remoteName}, please check if the url ${this.remote.url} is valid.`);else throw r}}createOrUpdatePullRequestModel(t){let e=this._pullRequestModels.get(t.number);return e?e.update(t):(e=new Nr(this._telemetry,this,this.remote,t),this._pullRequestModels.set(t.number,e)),e}async createPullRequest(t){const{octokit:e}=await this.ensure(),{data:r}=await e.pulls.create(t);return this.createOrUpdatePullRequestModel(vn(r,this))}async getPullRequest(t){try{a.debug(`Fetch pull request ${t} - enter`,Oe.ID);const{query:e,remote:r,schema:n}=await this.ensure(),{data:i}=await e({query:n.PullRequest,variables:{owner:r.owner,name:r.repositoryName,number:t}});return a.debug(`Fetch pull request ${t} - done`,Oe.ID),this.createOrUpdatePullRequestModel(nl(i,this))}catch(e){a.appendLine(`GithubRepository> Unable to fetch PR: ${e}`);return}}async getIssue(t,e=!1){try{a.debug(`Fetch issue ${t} - enter`,Oe.ID);const{query:r,remote:n,schema:i}=await this.ensure(),{data:s}=await r({query:e?i.IssueWithComments:i.Issue,variables:{owner:n.owner,name:n.repositoryName,number:t}});return a.debug(`Fetch issue ${t} - done`,Oe.ID),new Ct(this,n,nl(s,this))}catch(r){a.appendLine(`GithubRepository> Unable to fetch PR: ${r}`);return}}async listBranches(t,e){const{octokit:r}=await this.ensure();a.debug(`List branches for ${t}/${e} - enter`,Oe.ID);try{let n=[];const i=new Date().getTime();for await(const s of r.paginate.iterator("GET /repos/:owner/:repo/branches",{owner:t,repo:e,per_page:100}))if(n.push(...s.data.map(c=>c.name)),new Date().getTime()-i>5e3)break;return a.debug(`List branches for ${t}/${e} - done`,Oe.ID),n}catch(n){throw a.debug(`List branches for ${t}/${e} failed`,Oe.ID),n}}async deleteBranch(t){const{octokit:e}=await this.ensure();if(!!t.validatePullRequestModel("Unable to delete branch"))try{await e.git.deleteRef({owner:t.head.repositoryCloneUrl.owner,repo:t.head.repositoryCloneUrl.repositoryName,ref:`heads/${t.head.ref}`})}catch(r){a.appendLine(`GithubRepository> Unable to delete branch: ${r}`);return}}async getMentionableUsers(){a.debug("Fetch mentionable users - enter",Oe.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const s=[];do try{const c=await t({query:r.GetMentionableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});s.push(...c.data.repository.mentionableUsers.nodes.map(v=>({login:v.login,avatarUrl:v.avatarUrl,name:v.name,url:v.url,email:v.email}))),i=c.data.repository.mentionableUsers.pageInfo.hasNextPage,n=c.data.repository.mentionableUsers.pageInfo.endCursor}catch(c){return a.debug(`Unable to fetch mentionable users: ${c}`,Oe.ID),s}while(i);return s}async getAssignableUsers(){a.debug("Fetch assignable users - enter",Oe.ID);const{query:t,remote:e,schema:r}=await this.ensure();let n=null,i=!1;const s=[];do try{const c=await t({query:r.GetAssignableUsers,variables:{owner:e.owner,name:e.repositoryName,first:100,after:n}});s.push(...c.data.repository.assignableUsers.nodes.map(v=>({login:v.login,avatarUrl:v.avatarUrl,name:v.name,url:v.url,email:v.email}))),i=c.data.repository.assignableUsers.pageInfo.hasNextPage,n=c.data.repository.assignableUsers.pageInfo.endCursor}catch(c){return a.debug(`Unable to fetch assignable users: ${c}`,Oe.ID),c.graphQLErrors&&c.graphQLErrors.length>0&&c.graphQLErrors[0].type==="INSUFFICIENT_SCOPES"&&u.window.showWarningMessage(`GitHub user features will not work. ${c.graphQLErrors[0].message}`),s}while(i);return s}async compareCommits(t,e){const{remote:r,octokit:n}=await this.ensure(),{data:i}=await n.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:t,head:e});return i}isCurrentUser(t){return this._credentialStore.isCurrentUser(t)}};let Un=Oe;er(Un,"ID","GitHubRepository");function di(t,e,r,n){const i=n.createCommentThread(t,e,[]);return i.threadId=r.id,i.comments=r.comments.map(s=>new vt(s,i)),i.isResolved=r.isResolved,r.viewerCanResolve&&!r.isResolved?i.contextValue="canResolve":r.viewerCanUnresolve&&r.isResolved&&(i.contextValue="canUnresolve"),$n(i),i.collapsibleState=r.isResolved?u.CommentThreadCollapsibleState.Collapsed:u.CommentThreadCollapsibleState.Expanded,i}function Xu(t,e){e.viewerCanResolve&&!e.isResolved?t.contextValue="canResolve":e.viewerCanUnresolve&&e.isResolved&&(t.contextValue="canUnresolve"),t.isResolved!==e.isResolved&&(t.isResolved=e.isResolved,t.collapsibleState=e.isResolved?u.CommentThreadCollapsibleState.Collapsed:u.CommentThreadCollapsibleState.Expanded),t.comments=e.comments.map(r=>new vt(r,t)),$n(t)}function $n(t){if(t.isResolved){t.label="This thread has been marked as resolved";return}if(t.comments.length){const e=O(t.comments,r=>r.author.name).map(r=>`@${r.author.name}`).join(", ");t.label=`Participants: ${e}`}else t.label="Start discussion"}function fp(t){return as().map(e=>{if(!t)return{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""};const r=t.find(n=>n.label===e.label);return r?{label:r.label,authorHasReacted:r.viewerHasReacted,count:r.count,iconPath:e.icon||""}:{label:e.label,authorHasReacted:!1,count:0,iconPath:e.icon||""}})}function gp(t,e){t.reactions=fp(e)}function Ju(t,e){e||(t.comments=t.comments.map(r=>(r instanceof vt&&(r._rawComment.isDraft=!1),r.label=void 0,r)))}function Kr(t,e){var r;return{login:t.login,url:t.html_url,avatarUrl:Sa(t.avatar_url,(r=t.gravatar_id)!=null?r:void 0,e.remote.authProviderId)}}function Zu(t){return{label:t.label,ref:t.ref,sha:t.sha,repo:{cloneUrl:t.repo.clone_url}}}function vn(t,e){const{number:r,body:n,title:i,html_url:s,user:c,state:v,assignees:w,created_at:T,updated_at:D,head:H,base:V,labels:W,node_id:Z,id:ee,draft:te}=t;return{id:ee,graphNodeId:Z,number:r,body:n!=null?n:"",title:i,url:s,user:Kr(c,e),state:v,merged:t.merged||!1,assignees:w?w.map(me=>Kr(me,e)):void 0,createdAt:T,updatedAt:D,head:Zu(H),base:Zu(V),mergeable:t.mergeable?$r.Mergeable:$r.NotMergeable,labels:W.map(me=>({name:"",color:"",...me})),isDraft:te,suggestedReviewers:[]}}function vp(t,e){const{number:r,body:n,title:i,html_url:s,user:c,state:v,assignees:w,created_at:T,updated_at:D,labels:H,node_id:V,id:W}=t;return{id:W,graphNodeId:V,number:r,body:n!=null?n:"",title:i,url:s,user:Kr(c,e),state:v,assignees:w?w.map(ee=>Kr(ee,e)):void 0,createdAt:T,updatedAt:D,labels:H.map(ee=>{var te,ae;return typeof ee=="string"?{name:ee,color:""}:{name:(te=ee.name)!=null?te:"",color:(ae=ee.color)!=null?ae:""}}),suggestedReviewers:[]}}function yp(t,e){return{event:gt.Reviewed,comments:[],submittedAt:t.submitted_at,body:t.body,bodyHTML:t.body,htmlUrl:t.html_url,user:Kr(t.user,e),authorAssociation:t.user.type,state:t.state,id:t.id}}function el(t){const e=[],r=kt(t.diffHunk);let n=r.next();for(;!n.done;){const i=n.value;e.push(i),n=r.next()}return e}function Bv(t,e){var r;const n={url:t.url,id:t.id,pullRequestReviewId:(r=t.pull_request_review_id)!=null?r:void 0,diffHunk:t.diff_hunk,path:t.path,position:t.position,commitId:t.commit_id,originalPosition:t.original_position,originalCommitId:t.original_commit_id,user:Kr(t.user,e),body:t.body,createdAt:t.created_at,htmlUrl:t.html_url,inReplyToId:t.in_reply_to_id,graphNodeId:t.node_id},i=el(n);return n.diffHunks=i,n}function wp(t){switch(t){case"PullRequestCommit":return gt.Committed;case"LabeledEvent":return gt.Labeled;case"MilestonedEvent":return gt.Milestoned;case"AssignedEvent":return gt.Assigned;case"HeadRefDeletedEvent":return gt.HeadRefDeleted;case"IssueComment":return gt.Commented;case"PullRequestReview":return gt.Reviewed;case"MergedEvent":return gt.Merged;default:return gt.Other}}function is(t){return{id:t.id,isResolved:t.isResolved,viewerCanResolve:t.viewerCanResolve,viewerCanUnresolve:t.viewerCanUnresolve,path:t.path,line:t.line,originalLine:t.originalLine,diffSide:t.diffSide,isOutdated:t.isOutdated,comments:t.comments.nodes.map(e=>Hn(e,t.isResolved))}}function Hn(t,e){const r={id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,path:t.path,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,pullRequestReviewId:t.pullRequestReview&&t.pullRequestReview.databaseId,diffHunk:t.diffHunk,position:t.position,commitId:t.commit.oid,originalPosition:t.originalPosition,originalCommitId:t.originalCommit&&t.originalCommit.oid,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,isDraft:t.state==="PENDING",inReplyToId:t.replyTo&&t.replyTo.databaseId,reactions:rl(t.reactionGroups),isResolved:e},n=el(r);return r.diffHunks=n,r}function tl(t){return{id:t.databaseId,url:t.url,body:t.body,bodyHTML:t.bodyHTML,canEdit:t.viewerCanDelete,canDelete:t.viewerCanDelete,user:t.author,createdAt:t.createdAt,htmlUrl:t.url,graphNodeId:t.id,diffHunk:""}}function rl(t){const e=as().reduce((n,i)=>(n[i.title]=i,n),{});return t.filter(n=>n.users.totalCount>0).map(n=>({label:e[n.content].label,count:n.users.totalCount,icon:e[n.content].icon,viewerHasReacted:n.viewerHasReacted}))}function ss(t,e,r){if(!!r)return{label:`${r.owner.login}:${t}`,ref:t,sha:e,repo:{cloneUrl:r.url}}}function tr(t,e){return t?{login:t.login,url:t.url,avatarUrl:Sa(t.avatarUrl,void 0,e.remote.authProviderId),email:t.email}:{login:"",url:""}}function ka(t){if(!!t)return{title:t.title,dueOn:t.dueOn,createdAt:t.createdAt,id:t.id}}function _a(t){switch(t){case"UNKNOWN":return $r.Unknown;case"MERGEABLE":return $r.Mergeable;case"CONFLICTING":return $r.NotMergeable}}function nl(t,e){var r,n,i,s,c,v;const w=t.repository.pullRequest;return{id:w.databaseId,graphNodeId:w.id,url:w.url,number:w.number,state:w.state,body:w.body,bodyHTML:w.bodyHTML,title:w.title,createdAt:w.createdAt,updatedAt:w.updatedAt,isRemoteHeadDeleted:!w.headRef,head:ss((n=(r=w.headRef)==null?void 0:r.name)!=null?n:w.headRefName,w.headRefOid,w.headRepository),isRemoteBaseDeleted:!w.baseRef,base:ss((s=(i=w.baseRef)==null?void 0:i.name)!=null?s:w.baseRefName,w.baseRefOid,w.baseRepository),user:tr(w.author,e),merged:w.merged,mergeable:_a(w.mergeable),labels:w.labels.nodes,isDraft:w.isDraft,suggestedReviewers:il(w.suggestedReviewers),comments:bp((c=w.comments)==null?void 0:c.nodes,e),milestone:ka(w.milestone),assignees:(v=w.assignees)==null?void 0:v.nodes.map(T=>tr(T,e))}}function bp(t,e){if(!t)return;const r=[];for(const n of t)r.push({author:tr(n.author,e),body:n.body,databaseId:n.databaseId});return r}function Ea(t,e){var r,n,i,s;return{id:t.databaseId,graphNodeId:t.id,url:t.url,number:t.number,state:t.state,body:t.body,bodyHTML:t.bodyHTML,title:t.title,createdAt:t.createdAt,updatedAt:t.updatedAt,assignees:(r=t.assignees)==null?void 0:r.nodes.map(c=>tr(c,e)),user:tr(t.author,e),labels:t.labels.nodes,repositoryName:(n=t.repository)==null?void 0:n.name,repositoryOwner:(i=t.repository)==null?void 0:i.owner.login,repositoryUrl:(s=t.repository)==null?void 0:s.url}}function jv(t,e){var r,n,i,s;const c=t;return{id:c.databaseId,graphNodeId:c.id,url:c.url,number:c.number,state:c.state,body:c.body,bodyHTML:c.bodyHTML,title:c.title,createdAt:c.createdAt,updatedAt:c.updatedAt,isRemoteHeadDeleted:!c.headRef,head:ss((n=(r=c.headRef)==null?void 0:r.name)!=null?n:c.headRefName,c.headRefOid,c.headRepository),isRemoteBaseDeleted:!c.baseRef,base:ss((s=(i=c.baseRef)==null?void 0:i.name)!=null?s:c.baseRefName,c.baseRefOid,c.baseRepository),user:tr(c.author,e),merged:c.merged,mergeable:_a(c.mergeable),labels:c.labels.nodes,isDraft:c.isDraft,suggestedReviewers:il(c.suggestedReviewers),milestone:ka(c.milestone)}}function il(t){return t?t.map(r=>({login:r.reviewer.login,avatarUrl:r.reviewer.avatarUrl,name:r.reviewer.name,url:r.reviewer.url,isAuthor:r.isAuthor,isCommenter:r.isCommenter})).sort(sl):[]}function sl(t,e){return t.login.localeCompare(e.login,"en",{sensitivity:"accent"})}function kp(t,e){return{event:gt.Reviewed,comments:t.comments.nodes.map(r=>Hn(r,!1)).filter(r=>!r.inReplyToId),submittedAt:t.submittedAt,body:t.body,bodyHTML:t.bodyHTML,htmlUrl:t.url,user:tr(t.author,e),authorAssociation:t.authorAssociation,state:t.state,id:t.databaseId}}function al(t,e){const r=[];return t.forEach(n=>{const i=wp(n.__typename);switch(i){case gt.Commented:const s=n;r.push({htmlUrl:s.url,body:s.body,bodyHTML:s.bodyHTML,user:tr(s.author,e),event:i,canEdit:s.viewerCanUpdate,canDelete:s.viewerCanDelete,id:s.databaseId,graphNodeId:s.id,createdAt:s.createdAt});return;case gt.Reviewed:const c=n;r.push({event:i,comments:[],submittedAt:c.submittedAt,body:c.body,bodyHTML:c.bodyHTML,htmlUrl:c.url,user:tr(c.author,e),authorAssociation:c.authorAssociation,state:c.state,id:c.databaseId});return;case gt.Committed:const v=n;r.push({id:v.databaseId,event:i,sha:v.commit.oid,author:v.commit.author.user?tr(v.commit.author.user,e):{login:v.commit.committer.name},htmlUrl:v.url,message:v.commit.message,authoredDate:new Date(v.commit.authoredDate)});return;case gt.Merged:const w=n;r.push({id:w.databaseId,event:i,user:tr(w.actor,e),createdAt:w.createdAt,mergeRef:w.mergeRef.name,sha:w.commit.oid,commitUrl:w.commit.commitUrl,url:w.url,graphNodeId:w.id});return;case gt.Assigned:const T=n;r.push({id:T.databaseId,event:i,user:T.user,actor:T.actor});return;case gt.HeadRefDeleted:const D=n;r.push({id:D.id,event:i,actor:D.actor,createdAt:D.createdAt,headRef:D.headRefName});return;default:break}}),r}function _p(t,e){return{login:t.user.login,name:t.user.name,avatarUrl:t.user.avatarUrl?Sa(t.user.avatarUrl,void 0,e.remote.authProviderId):void 0,url:t.user.url,bio:t.user.bio,company:t.user.company,location:t.user.location,commitContributions:Ep(t.user.contributionsCollection)}}function Ep(t){const e=[];return t.commitContributionsByRepository.forEach(r=>{r.contributions.nodes.forEach(n=>{e.push({createdAt:new Date(n.occurredAt),repoNameWithOwner:r.repository.nameWithOwner})})}),e}function as(){return[{title:"THUMBS_UP",label:"\u{1F44D}",icon:or.icons.reactions.THUMBS_UP},{title:"THUMBS_DOWN",label:"\u{1F44E}",icon:or.icons.reactions.THUMBS_DOWN},{title:"LAUGH",label:"\u{1F604}",icon:or.icons.reactions.LAUGH},{title:"HOORAY",label:"\u{1F389}",icon:or.icons.reactions.HOORAY},{title:"CONFUSED",label:"\u{1F615}",icon:or.icons.reactions.CONFUSED},{title:"HEART",label:"\u2764\uFE0F",icon:or.icons.reactions.HEART},{title:"ROCKET",label:"\u{1F680}",icon:or.icons.reactions.ROCKET},{title:"EYES",label:"\u{1F440}",icon:or.icons.reactions.EYES}]}function Rp(t){const e=[];return t.forEach(r=>{var n,i;kc(r)&&e.push({login:r.author.login,name:r.author.name||""}),ks(r)&&e.push({login:r.user.login,name:(n=r.user.name)!=null?n:r.user.login}),_c(r)&&e.push({login:r.user.login,name:(i=r.user.name)!=null?i:r.user.login})}),e}function Cp(t){return t&&t.repository.viewerPermission&&Object.values(Lt).includes(t.repository.viewerPermission)?t.repository.viewerPermission:Lt.Unknown}function ol(t,e){for(const r of t.repositories)if(e.path.toLowerCase()===r.rootUri.path.toLowerCase()||e.path.toLowerCase().startsWith(r.rootUri.path.toLowerCase())&&e.path.substring(r.rootUri.path.length).startsWith("/"))return r}function ul(t,e,r){const n=e.filter(ks).filter(c=>c.state!=="PENDING");let i=[];const s=new Map;s.set(r.login,!0);for(let c=n.length-1;c>=0;c--){const v=n[c].user;s.get(v.login)||(s.set(v.login,!0),i.push({reviewer:v,state:n[c].state}))}return t.forEach(c=>{if(!s.get(c.login))i.push({reviewer:c,state:"REQUESTED"});else{const v=i.find(w=>w.reviewer.login===c.login);v.state="REQUESTED"}}),i=i.sort((c,v)=>c.state==="REQUESTED"&&v.state!=="REQUESTED"?1:v.state==="REQUESTED"&&c.state!=="REQUESTED"||c.reviewer.login.toLowerCase()<v.reviewer.login.toLowerCase()?-1:1),i}function Sp(t,e,r){return`is:pull-request ${r.replace(/\$\{user\}/g,e)} type:pr repo:${t}`}function Ra(){return u.env.remoteName==="codespaces"&&u.env.uiKind===u.UIKind.Web}function Ca(){const t=u.workspace.getConfiguration("github-enterprise").get("uri","");if(t)return u.Uri.parse(t,!0)}function Gn(){return!!Ca()}function Tp(t,e=200){return t?`https://www.gravatar.com/avatar/${t}?s=${e}&d=retro`:void 0}function Sa(t,e,r){var n;return r===He.github?t:e?Tp(_s.createHash("md5").update((n=e==null?void 0:e.trim())==null?void 0:n.toLowerCase()).digest("hex")):void 0}var Np=Object.defineProperty,Nt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Np(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const os=class{constructor(t,e,r,n=!1){Nt(this,"id"),Nt(this,"graphNodeId"),Nt(this,"number"),Nt(this,"title"),Nt(this,"html_url"),Nt(this,"state",rt.Open),Nt(this,"author"),Nt(this,"assignees"),Nt(this,"createdAt"),Nt(this,"updatedAt"),Nt(this,"milestone"),Nt(this,"githubRepository"),Nt(this,"remote"),Nt(this,"item"),Nt(this,"bodyHTML"),this.githubRepository=t,this.remote=e,this.item=r,n||this.update(r)}get isOpen(){return this.state===rt.Open}get userAvatar(){if(this.item)return this.item.user.avatarUrl}get userAvatarUri(){if(this.item){const t=this.userAvatar;if(t){const e=u.Uri.parse(`${t}&s=${64}`),r=e.toString;return e.toString=function(n){return r.call(e,!0)},e}}}get body(){return this.item?this.item.body:""}updateState(t){t.toLowerCase()==="open"?this.state=rt.Open:this.state=rt.Closed}update(t){this.id=t.id,this.graphNodeId=t.graphNodeId,this.number=t.number,this.title=t.title,this.bodyHTML=t.bodyHTML,this.html_url=t.url,this.author=t.user,this.milestone=t.milestone,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.updateState(t.state),t.assignees&&(this.assignees=t.assignees),this.item=t}equals(t){return!(!t||this.number!==t.number||this.html_url!==t.html_url)}async edit(t){try{const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.graphNodeId,body:t.body,title:t.title}}});return n.updatePullRequest.pullRequest}catch(e){throw new Error(Q(e))}}canEdit(){const t=this.author&&this.author.login;return this.githubRepository.isCurrentUser(t)}async getIssueComments(){a.debug(`Fetch issue comments of PR #${this.number} - enter`,os.ID);const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.issues.listComments({owner:e.owner,repo:e.repositoryName,issue_number:this.number,per_page:100});return a.debug(`Fetch issue comments of PR #${this.number} - done`,os.ID),r.data}async createIssueComment(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.AddIssueComment,variables:{input:{subjectId:this.graphNodeId,body:t}}});return tl(n.addComment.commentEdge.node)}async editIssueComment(t,e){try{const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditIssueComment,variables:{input:{id:t.graphNodeId,body:e}}});return tl(i.updateIssueComment.issueComment)}catch(r){throw new Error(Q(r))}}async deleteIssueComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.deleteComment({owner:r.owner,repo:r.repositoryName,comment_id:Number(t)})}catch(e){throw new Error(Q(e))}}async addLabels(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addLabels({owner:r.owner,repo:r.repositoryName,issue_number:this.number,labels:t})}async removeLabel(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeLabel({owner:r.owner,repo:r.repositoryName,issue_number:this.number,name:t})}async getIssueTimelineEvents(){a.debug(`Fetch timeline events of issue #${this.number} - enter`,os.ID);const t=this.githubRepository,{query:e,remote:r,schema:n}=await t.ensure();try{const{data:i}=await e({query:n.IssueTimelineEvents,variables:{owner:r.owner,name:r.repositoryName,number:this.number}}),s=i.repository.pullRequest.timelineItems.nodes;return al(s,t)}catch(i){return console.log(i),[]}}};let Ct=os;Nt(Ct,"ID","IssueModel");var Pp=Object.defineProperty,ot=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Pp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const rr=class extends Ct{constructor(t,e,r,n,i){super(e,r,n,!0);ot(this,"isDraft"),ot(this,"localBranchName"),ot(this,"mergeBase"),ot(this,"suggestedReviewers"),ot(this,"_hasPendingReview",!1),ot(this,"_onDidChangePendingReviewState",new u.EventEmitter),ot(this,"onDidChangePendingReviewState",this._onDidChangePendingReviewState.event),ot(this,"_reviewThreadsCache",[]),ot(this,"_reviewThreadsCacheInitialized",!1),ot(this,"_onDidChangeReviewThreads",new u.EventEmitter),ot(this,"onDidChangeReviewThreads",this._onDidChangeReviewThreads.event),ot(this,"fileChangeViewedState",{}),ot(this,"_onDidChangeFileViewedState",new u.EventEmitter),ot(this,"onDidChangeFileViewedState",this._onDidChangeFileViewedState.event),ot(this,"isActive"),ot(this,"_telemetry"),ot(this,"isRemoteHeadDeleted"),ot(this,"head"),ot(this,"isRemoteBaseDeleted"),ot(this,"base"),this._telemetry=t,this.isActive=!!i,this.update(n)}async initializeReviewThreadCache(){await this.getReviewThreads(),this._reviewThreadsCacheInitialized=!0}get reviewThreadsCache(){if(this._reviewThreadsCacheInitialized)return this._reviewThreadsCache;throw new Error("Cache has not been initialized yet")}get isMerged(){return this.state===rt.Merged}get hasPendingReview(){return this._hasPendingReview}set hasPendingReview(t){this._hasPendingReview!==t&&(this._hasPendingReview=t,this._onDidChangePendingReviewState.fire(this._hasPendingReview))}updateState(t){t.toLowerCase()==="open"?this.state=rt.Open:this.state=this.item.merged?rt.Merged:rt.Closed}update(t){super.update(t),this.isDraft=t.isDraft,this.suggestedReviewers=t.suggestedReviewers,t.isRemoteHeadDeleted!=null&&(this.isRemoteHeadDeleted=t.isRemoteHeadDeleted),t.head&&(this.head=new io(t.head.ref,t.head.label,t.head.sha,t.head.repo.cloneUrl)),t.isRemoteBaseDeleted!=null&&(this.isRemoteBaseDeleted=t.isRemoteBaseDeleted),t.base&&(this.base=new io(t.base.ref,t.base.label,t.base.sha,t.base.repo.cloneUrl))}isResolved(){return!!this.head}validatePullRequestModel(t){if(this.head)return!0;const e=`There is no upstream branch for Pull Request #${this.number}. View it on GitHub for more details`;return t?t+=`: ${e}`:t=e,u.window.showWarningMessage(t,"Open on GitHub").then(r=>{r&&r==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(this.html_url))}),!1}async approve(t){return(await this.getPendingReviewId()?this.submitReview(yr.Approve,t):this.createReview(yr.Approve,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.approve"),r))}async requestChanges(t){return(await this.getPendingReviewId()?this.submitReview(yr.RequestChanges,t):this.createReview(yr.RequestChanges,t)).then(r=>(this._telemetry.sendTelemetryEvent("pr.requestChanges"),r))}async close(){const{octokit:t,remote:e}=await this.githubRepository.ensure(),r=await t.pulls.update({owner:e.owner,repo:e.repositoryName,pull_number:this.number,state:"closed"});return this._telemetry.sendTelemetryEvent("pr.close"),vn(r.data,this.githubRepository)}async createReview(t,e){const{octokit:r,remote:n}=await this.githubRepository.ensure(),{data:i}=await r.pulls.createReview({owner:n.owner,repo:n.repositoryName,pull_number:this.number,event:t,body:e});return yp(i,this.githubRepository)}async submitReview(t,e){const r=await this.getPendingReviewId(),{mutate:n,schema:i}=await this.githubRepository.ensure();if(r){const{data:s}=await n({mutation:i.SubmitReview,variables:{id:r,event:t||yr.Comment,body:e}});this.hasPendingReview=!1,await this.updateDraftModeContext();const c=kp(s.submitPullRequestReview.pullRequestReview,this.githubRepository),v=this._reviewThreadsCache.find(w=>w.comments.length?w.comments[0].pullRequestReviewId===c.id:void 0);return v&&(v.comments=c.comments,this._onDidChangeReviewThreads.fire({added:[],changed:[v],removed:[]})),c}else throw new Error(`Submitting review failed, no pending review for current pull request: ${this.number}.`)}async updateMilestone(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),n=t==="null"?null:t;try{await e({mutation:r.UpdatePullRequest,variables:{input:{pullRequestId:this.item.graphNodeId,milestoneId:n}}})}catch(i){a.appendLine(i)}}async updateAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.addAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:t})}async getPendingReviewId(){const{query:t,schema:e}=await this.githubRepository.ensure(),r=await this.githubRepository.getAuthenticatedUser();try{const{data:n}=await t({query:e.GetPendingReviewId,variables:{pullRequestId:this.item.graphNodeId,author:r}});return n.node.reviews.nodes.length>0?n.node.reviews.nodes[0].id:void 0}catch(n){return}}async deleteReview(){const t=await this.getPendingReviewId(),{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.DeleteReview,variables:{input:{pullRequestReviewId:t}}}),{comments:i,databaseId:s}=n.deletePullRequestReview.pullRequestReview;return this.hasPendingReview=!1,await this.updateDraftModeContext(),this.getReviewThreads(),{deletedReviewId:s,deletedReviewComments:i.nodes.map(c=>Hn(c,!1))}}async startReview(t){var e;const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.StartReview,variables:{input:{body:"",pullRequestId:this.item.graphNodeId,commitOID:t||((e=this.head)==null?void 0:e.sha)}}});if(!i)throw new Error("Failed to start review");return i.addPullRequestReview.pullRequestReview.id}async createReviewThread(t,e,r,n,i){if(!this.validatePullRequestModel("Creating comment failed"))return;const s=await this.getPendingReviewId(),{mutate:c,schema:v}=await this.githubRepository.ensure(),{data:w}=await c({mutation:v.AddReviewThread,variables:{input:{path:e,body:t,pullRequestId:this.graphNodeId,pullRequestReviewId:s,line:r,side:n}}});if(!w)throw new Error("Creating review thread failed.");i||(this.hasPendingReview=!0,await this.updateDraftModeContext());const T=w.addPullRequestReviewThread.thread,D=is(T);return this._reviewThreadsCache.push(D),this._onDidChangeReviewThreads.fire({added:[D],changed:[],removed:[]}),D}async createCommentReply(t,e,r,n){var i;if(!this.validatePullRequestModel("Creating comment failed"))return;let s=await this.getPendingReviewId();s||(s=await this.startReview(n));const{mutate:c,schema:v}=await this.githubRepository.ensure(),{data:w}=await c({mutation:v.AddComment,variables:{input:{pullRequestReviewId:s,body:t,inReplyTo:e,commitOID:n||((i=this.head)==null?void 0:i.sha)}}});if(!w)throw new Error("Creating comment reply failed.");const{comment:T}=w.addPullRequestReviewComment,D=Hn(T,!1);r&&(D.isDraft=!1);const H=this._reviewThreadsCache.find(V=>V.comments.some(W=>W.graphNodeId===e));return H&&(H.comments.push(D),this._onDidChangeReviewThreads.fire({added:[],changed:[H],removed:[]})),D}async validateDraftMode(){const t=!!await this.getPendingReviewId();return t!==this.hasPendingReview&&(this.hasPendingReview=t),await this.updateDraftModeContext(),t}async updateDraftModeContext(){this.isActive&&await u.commands.executeCommand("setContext","reviewInDraftMode",this.hasPendingReview)}async editReviewComment(t,e){const{mutate:r,schema:n}=await this.githubRepository.ensure(),{data:i}=await r({mutation:n.EditComment,variables:{input:{pullRequestReviewCommentId:t.graphNodeId,body:e}}});if(!i)throw new Error("Editing review comment failed.");const s=Hn(i.updatePullRequestReviewComment.pullRequestReviewComment,!!t.isResolved),c=this._reviewThreadsCache.find(v=>v.comments.some(w=>w.graphNodeId===t.graphNodeId));if(c){const v=c.comments.findIndex(w=>w.graphNodeId===t.graphNodeId);c.comments.splice(v,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[c],removed:[]})}return s}async deleteReviewComment(t){try{const{octokit:e,remote:r}=await this.githubRepository.ensure(),n=Number(t),i=this._reviewThreadsCache.findIndex(s=>s.comments.some(c=>c.id===n));if(i===-1)this.deleteIssueComment(t);else if(await e.pulls.deleteReviewComment({owner:r.owner,repo:r.repositoryName,comment_id:n}),i>-1){const s=this._reviewThreadsCache[i],c=s.comments.findIndex(v=>v.id===n);s.comments.splice(c,1),s.comments.length===0?(this._reviewThreadsCache.splice(i,1),this._onDidChangeReviewThreads.fire({added:[],changed:[],removed:[s]})):this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}catch(e){throw new Error(Q(e))}}async getReviewRequests(){const t=this.githubRepository,{remote:e,octokit:r}=await t.ensure();return(await r.pulls.listRequestedReviewers({owner:e.owner,repo:e.repositoryName,pull_number:this.number})).data.users.map(i=>Kr(i,t))}async requestReview(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.requestReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:t})}async deleteReviewRequest(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.pulls.removeRequestedReviewers({owner:r.owner,repo:r.repositoryName,pull_number:this.number,reviewers:[t]})}async deleteAssignees(t){const{octokit:e,remote:r}=await this.githubRepository.ensure();await e.issues.removeAssignees({owner:r.owner,repo:r.repositoryName,issue_number:this.number,assignees:[t]})}diffThreads(t){const e=[],r=[],n=[];t.forEach(i=>{const s=this._reviewThreadsCache.find(c=>c.id===i.id);s?tn()(i,s)||r.push(i):e.push(i)}),this._reviewThreadsCache.forEach(i=>{t.find(s=>s.id===i.id)||n.push(i)}),this._onDidChangeReviewThreads.fire({added:e,changed:r,removed:n})}async getReviewThreads(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}}),i=n.repository.pullRequest.reviewThreads.nodes.map(s=>is(s));return this.diffThreads(i),this._reviewThreadsCache=i,i}catch(n){return a.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getReviewComments(){const{remote:t,query:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await e({query:r.PullRequestComments,variables:{owner:t.owner,name:t.repositoryName,number:this.number}});return n.repository.pullRequest.reviewThreads.nodes.map(s=>s.comments.nodes.map(c=>Hn(c,s.isResolved),t)).reduce((s,c)=>s.concat(c),[]).sort((s,c)=>s.createdAt>c.createdAt?1:-1)}catch(n){return a.appendLine(`Failed to get pull request review comments: ${n}`),[]}}async getCommits(){try{a.debug(`Fetch commits of PR #${this.number} - enter`,rr.ID);const{remote:t,octokit:e}=await this.githubRepository.ensure(),r=await e.pulls.listCommits({pull_number:this.number,owner:t.owner,repo:t.repositoryName});return a.debug(`Fetch commits of PR #${this.number} - done`,rr.ID),r.data}catch(t){return u.window.showErrorMessage(`Fetching commits failed: ${Q(t)}`),[]}}async getCommitChangedFiles(t){var e,r;try{a.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - enter`,rr.ID);const{octokit:n,remote:i}=await this.githubRepository.ensure(),s=await n.repos.getCommit({owner:i.owner,repo:i.repositoryName,ref:t.sha});return a.debug(`Fetch file changes of commit ${t.sha} in PR #${this.number} - done`,rr.ID),(r=(e=s.data.files)==null?void 0:e.filter(c=>!!c.patch))!=null?r:[]}catch(n){return u.window.showErrorMessage(`Fetching commit file changes failed: ${Q(n)}`),[]}}async getFile(t,e){var r;const{octokit:n,remote:i}=await this.githubRepository.ensure(),s=await n.repos.getContent({owner:i.owner,repo:i.repositoryName,path:t,ref:e});if(Array.isArray(s.data))throw new Error(`Unexpected array response when getting file ${t}`);const c=(r=s.data.content)!=null?r:"";return Se.Buffer.from(c,s.data.encoding).toString()}async getTimelineEvents(){a.debug(`Fetch timeline events of PR #${this.number} - enter`,rr.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure();try{const{data:n}=await t({query:r.TimelineEvents,variables:{owner:e.owner,name:e.repositoryName,number:this.number}}),i=n.repository.pullRequest.timelineItems.nodes,s=al(i,this.githubRepository);return await this.addReviewTimelineEventComments(s),s}catch(n){return console.log(n),[]}}async addReviewTimelineEventComments(t){const e=t.filter(ks),n=(await this.getReviewThreads()).reduce((T,D)=>T.concat(D.comments),[]),i=e.reduce((T,D)=>(T[D.id]=D,D.comments=[],T),{}),s=n.reduce((T,D)=>(T[D.id]=D,T),{}),c=[];let v=n.length;for(;v-- >0;){const T=n[v];if(!T.inReplyToId){c.unshift(T);continue}const D=s[T.inReplyToId];D.childComments=D.childComments||[],D.childComments=[T,...T.childComments||[],...D.childComments]}c.forEach(T=>{const D=i[T.pullRequestReviewId];D&&(D.comments=D.comments.concat(T).concat(T.childComments||[]))});const w=e.filter(T=>T.state.toLowerCase()==="pending")[0];w&&(w.comments=n.filter(T=>T.isDraft))}async getStatusChecks(){var t;const{query:e,remote:r,schema:n}=await this.githubRepository.ensure();let i;try{i=await e({query:n.GetChecks,variables:{owner:r.owner,name:r.repositoryName,number:this.number}})}catch(c){if((t=c.message)==null?void 0:t.startsWith("GraphQL error: Resource protected by organization SAML enforcement."))return{state:"pending",statuses:[]}}const s=i.data.repository.pullRequest.commits.nodes[0].commit.statusCheckRollup;return s?{state:s.state.toLowerCase(),statuses:s.contexts.nodes.map(c=>{var v,w,T,D;return Ec(c)?{id:c.id,url:(v=c.checkSuite.app)==null?void 0:v.url,avatar_url:(w=c.checkSuite.app)==null?void 0:w.logoUrl,state:((T=c.conclusion)==null?void 0:T.toLowerCase())||"pending",description:c.title,context:c.name,target_url:c.detailsUrl}:{id:c.id,url:c.targetUrl,avatar_url:c.avatarUrl,state:(D=c.state)==null?void 0:D.toLowerCase(),description:c.description,context:c.context,target_url:c.targetUrl}})}:{state:"pending",statuses:[]}}static async openDiffFromComment(t,e,r){const n=await e.getFileChangesInfo(),i=e.mergeBase||e.base.sha,c=(await b(n,t.repository,i)).find(D=>D.fileName===r.path||D.previousFileName===r.path);if(!c)throw new Error("Can't find matching file");let v,w;if(e.equals(t.activePullRequest)){const D=u.Uri.file(h.resolve(t.repository.rootUri.fsPath,c.fileName));v=c.status===Ce.DELETE?St(D,void 0,void 0,"",!1,{base:!1},t.repository.rootUri):D,w=St(D,c.status===Ce.RENAME?c.previousFileName:c.fileName,void 0,c.status===Ce.ADD?"":i,!1,{base:!0},t.repository.rootUri)}else{const D=e.head.sha,H=c.status===Ce.RENAME?c.previousFileName:c.fileName;v=st(u.Uri.file(Tt(t.repository.rootUri,c.fileName)),e,c.baseCommit,D,c.fileName,!1,c.status),w=st(u.Uri.file(Tt(t.repository.rootUri,H)),e,c.baseCommit,D,c.fileName,!0,c.status)}const T=r.path.split("/");u.commands.executeCommand("vscode.diff",w,v,`${T[T.length-1]} (Pull Request)`,{})}async getFileChangesInfo(){a.debug(`Fetch file changes, base, head and merge base of PR #${this.number} - enter`,rr.ID);const t=this.githubRepository,{octokit:e,remote:r}=await t.ensure();if(!this.base){const c=await e.pulls.get({owner:r.owner,repo:r.repositoryName,pull_number:this.number});this.update(vn(c.data,t))}if(this.item.merged){const c=await e.pulls.listFiles({repo:r.repositoryName,owner:r.owner,pull_number:this.number});return this.mergeBase=this.base.sha,c.data}const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.base.repositoryCloneUrl.owner}:${this.base.ref}`,head:`${this.head.repositoryCloneUrl.owner}:${this.head.ref}`});this.mergeBase=n.merge_base_commit.sha;const i=300;let s=[];return n.files.length>=i?(a.debug(`More than ${i} files changed, fetching all file changes of PR #${this.number}`,rr.ID),s=await e.paginate("GET /repos/:owner/:repo/pulls/:pull_number/files",{owner:this.base.repositoryCloneUrl.owner,pull_number:this.number,repo:r.repositoryName,per_page:100})):s=n.files,a.debug(`Fetch file changes and merge base of PR #${this.number} - done, total files ${s.length} `,rr.ID),s}async getMergeability(){try{a.debug(`Fetch pull request mergeability ${this.number} - enter`,rr.ID);const{query:t,remote:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await t({query:r.PullRequestMergeability,variables:{owner:e.owner,name:e.repositoryName,number:this.number}});return a.debug(`Fetch pull request mergeability ${this.number} - done`,rr.ID),_a(n.repository.pullRequest.mergeable)}catch(t){return a.appendLine(`PullRequestModel> Unable to fetch PR Mergeability: ${t}`),$r.Unknown}}async setReadyForReview(){try{const{mutate:t,schema:e}=await this.githubRepository.ensure(),{data:r}=await t({mutation:e.ReadyForReview,variables:{input:{pullRequestId:this.graphNodeId}}});return this._telemetry.sendTelemetryEvent("pr.readyForReview.success"),r.markPullRequestReadyForReview.pullRequest.isDraft}catch(t){throw this._telemetry.sendTelemetryErrorEvent("pr.readyForReview.failure"),t}}updateCommentReactions(t,e){const r=this._reviewThreadsCache.find(n=>n.comments.some(i=>i.graphNodeId===t));if(r){const n=r.comments.find(i=>i.graphNodeId===t);n&&(n.reactions=rl(e),this._onDidChangeReviewThreads.fire({added:[],changed:[r],removed:[]}))}}async addCommentReaction(t,e){const r=as().reduce((v,w)=>(v[w.label]=w.title,v),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:s}=await n({mutation:i.AddReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!s)throw new Error("Add comment reaction failed.");const c=s.addReaction.subject.reactionGroups;return this.updateCommentReactions(t,c),s}async deleteCommentReaction(t,e){const r=as().reduce((v,w)=>(v[w.label]=w.title,v),{}),{mutate:n,schema:i}=await this.githubRepository.ensure(),{data:s}=await n({mutation:i.DeleteReaction,variables:{input:{subjectId:t,content:r[e.label]}}});if(!s)throw new Error("Delete comment reaction failed.");const c=s.removeReaction.subject.reactionGroups;return this.updateCommentReactions(t,c),s}async resolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.ResolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Resolve review thread failed.");const i=this._reviewThreadsCache.findIndex(s=>s.id===t);if(i>-1){const s=is(n.resolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}async unresolveReviewThread(t){const{mutate:e,schema:r}=await this.githubRepository.ensure(),{data:n}=await e({mutation:r.UnresolveReviewThread,variables:{input:{threadId:t}}});if(!n)throw new Error("Unresolve review thread failed.");const i=this._reviewThreadsCache.findIndex(s=>s.id===t);if(i>-1){const s=is(n.unresolveReviewThread.thread);this._reviewThreadsCache.splice(i,1,s),this._onDidChangeReviewThreads.fire({added:[],changed:[s],removed:[]})}}async getPullRequestFileViewState(){const{query:t,schema:e,remote:r}=await this.githubRepository.ensure(),n=[];let i=null,s=!1;do{const{data:c}=await t({query:e.PullRequestFiles,variables:{owner:r.owner,name:r.repositoryName,number:this.number,after:i}});c.repository.pullRequest.files.nodes.forEach(v=>{this.fileChangeViewedState[v.path]!==v.viewerViewedState&&n.push({fileName:v.path,viewed:v.viewerViewedState}),this.fileChangeViewedState[v.path]=v.viewerViewedState}),s=c.repository.pullRequest.files.pageInfo.hasNextPage,i=c.repository.pullRequest.files.pageInfo.endCursor}while(s);return n.length&&this._onDidChangeFileViewedState.fire({changed:n}),this.fileChangeViewedState}async markFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.MarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=ft.VIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:ft.VIEWED}]})}async unmarkFileAsViewed(t){const{mutate:e,schema:r}=await this.githubRepository.ensure();await e({mutation:r.UnmarkFileAsViewed,variables:{input:{path:t,pullRequestId:this.graphNodeId}}}),this.fileChangeViewedState[t]=ft.UNVIEWED,this._onDidChangeFileViewedState.fire({changed:[{fileName:t,viewed:ft.UNVIEWED}]})}};let Nr=rr;ot(Nr,"ID","PullRequestModel");const Ta="github.pullRequest.pullNotification.show";function Ip(t){t.globalState.setKeysForSync([Ta])}var Dp=Object.defineProperty,ll=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Dp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ap extends Qu{constructor(e,r,n){super(e);this._folderRepositoryManager=r,this._item=n,ll(this,"viewType","github:activePullRequest"),ll(this,"_existingReviewers",[]),this.registerFolderRepositoryListener(),zl(i=>{i&&this._item.update(i),this._postMessage({command:"update-state",state:this._item.state})},null,this._disposables),this._disposables.push(this._folderRepositoryManager.onDidMergePullRequest(i=>{this._postMessage({command:"update-state",state:rt.Merged})}))}registerFolderRepositoryListener(){this._disposables.push(this._folderRepositoryManager.onDidChangeActivePullRequest(e=>{if(this._folderRepositoryManager&&this._item){const r=this._item.equals(this._folderRepositoryManager.activePullRequest);this._postMessage({command:"pr.update-checkout-status",isCurrentlyCheckedOut:r})}}))}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this.updatePullRequest(this._item)}async _onDidReceiveMessage(e){if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"alert":u.window.showErrorMessage(e.args);return;case"pr.close":return this.close(e);case"pr.comment":return this.createComment(e);case"pr.merge":return this.mergePullRequest(e);case"pr.deleteBranch":return this.deleteBranch(e);case"pr.readyForReview":return this.setReadyForReview(e);case"pr.approve":return this.approvePullRequest(e);case"pr.request-changes":return this.requestChanges(e);case"pr.submit":return this.submitReview(e);case"pr.openOnGitHub":return wi(this._item,this._item._telemetry);case"pr.checkout-default-branch":return this.checkoutDefaultBranch(e)}}async checkoutDefaultBranch(e){try{const r=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.checkoutDefaultBranch(r)}finally{this._replyMessage(e,{})}}async refresh(){await this.updatePullRequest(this._item)}async updatePullRequest(e){return Promise.all([this._folderRepositoryManager.resolvePullRequest(e.remote.owner,e.remote.repositoryName,e.number),this._folderRepositoryManager.getPullRequestRepositoryAccessAndMergeMethods(e),e.getTimelineEvents(),e.getReviewRequests(),this._folderRepositoryManager.getBranchNameForPullRequest(e)]).then(r=>{var n,i;const[s,c,v,w,T]=r;if(!s)throw new Error(`Fail to resolve Pull Request #${e.number} in ${e.remote.owner}/${e.remote.repositoryName}`);if(!this._view)return;this._item=s,this._view.title=`${s.title} #${e.number.toString()}`;const D=e.equals(this._folderRepositoryManager.activePullRequest),H=c.hasWritePermission,V=c.mergeMethodsAvailability,W=H||this._item.canEdit(),Z=u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),ee=Wu(V,Z),te=this._folderRepositoryManager.getCurrentUser(this._item);this._existingReviewers=ul(w!=null?w:[],v!=null?v:[],s.author);const me=s.base&&s.head&&!s.base.repositoryCloneUrl.equals(s.head.repositoryCloneUrl)&&Ra();this._postMessage({command:"pr.initialize",pullrequest:{number:s.number,title:s.title,url:s.html_url,createdAt:s.createdAt,body:s.body,bodyHTML:s.bodyHTML,labels:s.item.labels,author:{login:s.author.login,name:s.author.name,avatarUrl:s.userAvatar,url:s.author.url},state:s.state,isCurrentlyCheckedOut:D,isRemoteBaseDeleted:s.isRemoteBaseDeleted,base:s.base.label,isRemoteHeadDeleted:s.isRemoteHeadDeleted,isLocalHeadDeleted:!T,head:(i=(n=s.head)==null?void 0:n.label)!=null?i:"",canEdit:W,hasWritePermission:H,mergeable:s.item.mergeable,isDraft:s.isDraft,status:{statuses:[]},events:[],mergeMethodsAvailability:V,defaultMergeMethod:ee,isIssue:!1,isAuthor:te.login===s.author.login,reviewers:this._existingReviewers,continueOnGitHub:me}})}).catch(r=>{u.window.showErrorMessage(Q(r))})}close(e){u.commands.executeCommand("pr.close",this._item,e.args).then(r=>{r&&this._replyMessage(e,{value:r})})}createComment(e){this._item.createIssueComment(e.args).then(r=>{this._replyMessage(e,{value:r})})}updateReviewers(e){if(e){const r=this._existingReviewers.find(n=>e.user.login===n.reviewer.login);r?r.state=e.state:this._existingReviewers.push({reviewer:e.user,state:e.state})}}approvePullRequest(e){this._item.approve(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers}),u.commands.executeCommand("pr.refreshList")},r=>{u.window.showErrorMessage(`Approving pull request failed. ${Q(r)}`),this._throwError(e,`${Q(r)}`)})}requestChanges(e){this._item.requestChanges(e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Requesting changes failed. ${Q(r)}`),this._throwError(e,`${Q(r)}`)})}submitReview(e){this._item.submitReview(yr.Comment,e.args).then(r=>{this.updateReviewers(r),this._replyMessage(e,{review:r,reviewers:this._existingReviewers})},r=>{u.window.showErrorMessage(`Submitting review failed. ${Q(r)}`),this._throwError(e,`${Q(r)}`)})}async deleteBranch(e){const r=await this._folderRepositoryManager.getBranchNameForPullRequest(this._item),n=[];if(this._item.isResolved()){const c=this._item.head.ref;await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item)===this._item.head.ref||n.push({label:`Delete remote branch ${this._item.remote.remoteName}/${c}`,description:`${this._item.remote.normalizedHost}/${this._item.remote.owner}/${this._item.remote.repositoryName}`,type:"upstream",picked:!0})}if(r){const c=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectLocalBranch");n.push({label:`Delete local branch ${r.branch}`,type:"local",picked:!!c});const v=u.workspace.getConfiguration("githubPullRequests").get("defaultDeletionMethod.selectRemote");r.remote&&r.createdForPullRequest&&!r.remoteInUse&&n.push({label:`Delete remote ${r.remote}, which is no longer used by any other branch`,type:"remote",picked:!!v})}if(u.env.remoteName==="codespaces"&&n.push({label:"Suspend Codespace",type:"suspend"}),!n.length){u.window.showWarningMessage(`There is no longer an upstream or local branch for Pull Request #${this._item.number}`),this._replyMessage(e,{cancelled:!0});return}const i=await u.window.showQuickPick(n,{canPickMany:!0,ignoreFocusOut:!0}),s=[];if(i){const c=this._item.equals(this._folderRepositoryManager.activePullRequest),v=i.map(async w=>{switch(w.type){case"upstream":return await this._folderRepositoryManager.deleteBranch(this._item),s.push(w.type),this._folderRepositoryManager.repository.fetch({prune:!0});case"local":if(c){if(this._folderRepositoryManager.repository.state.workingTreeChanges.length)if(await u.window.showWarningMessage("Your local changes will be lost, do you want to continue?",{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.cleanAll");else return;const T=await this._folderRepositoryManager.getPullRequestRepositoryDefaultBranch(this._item);await this._folderRepositoryManager.repository.checkout(T)}return await this._folderRepositoryManager.repository.deleteBranch(r.branch,!0),s.push(w.type);case"remote":return await this._folderRepositoryManager.repository.removeRemote(r.remote),s.push(w.type);case"suspend":return await u.commands.executeCommand("github.codespaces.disconnectSuspend"),s.push(w.type)}});await Promise.all(v),u.commands.executeCommand("pr.refreshList"),this._postMessage({command:"pr.deleteBranch",branchTypes:s})}else this._replyMessage(e,{cancelled:!0})}setReadyForReview(e){this._item.setReadyForReview().then(r=>{u.commands.executeCommand("pr.refreshList"),this._replyMessage(e,{isDraft:r})}).catch(r=>{u.window.showErrorMessage(`Unable to set PR ready for review. ${Q(r)}`),this._throwError(e,{})})}async mergePullRequest(e){const{title:r,description:n,method:i}=e.args;if(await u.window.showInformationMessage("Merge this pull request?",{modal:!0},"Yes")!=="Yes"){this._replyMessage(e,{state:rt.Open});return}this._folderRepositoryManager.mergePullRequest(this._item,r,n,i).then(c=>{u.commands.executeCommand("pr.refreshList"),c.merged||u.window.showErrorMessage(`Merging PR failed: ${c.message}`),this._replyMessage(e,{state:c.merged?rt.Merged:rt.Open})}).catch(c=>{u.window.showErrorMessage(`Unable to merge pull request. ${Q(c)}`),this._throwError(e,{})})}_getHtmlForWebview(){const e=ba(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-open-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Active Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}class Fp{constructor(e,r){this.reviewManager=e,this.folderRepositoryManager=r}provideTerminalLinks(e,r){var n;const i=e.line.indexOf("https://github.com");if(i===-1)return[];const s=e.line.substring(i),c=new RegExp(/https:\/\/github\.com\/(.*)\/(.*)\/pull\/new\/(.*)/),v=s.match(c);if(v&&v.length===4){const w=v[1],T=v[2],D=v[3];if(this.folderRepositoryManager.gitHubRepositories.findIndex(V=>V.remote.owner===w&&V.remote.repositoryName===T)>-1&&((n=this.reviewManager.repository.state.HEAD)==null?void 0:n.name)===D)return[{startIndex:i,length:e.line.length-i,tooltip:"Create a Pull Request",url:s}]}return[]}handleTerminalLink(e){const r=u.workspace.getConfiguration("githubPullRequests").get("terminalLinksHandler");if(r==="github"){u.env.openExternal(u.Uri.parse(e.url));return}if(r==="vscode"){this.reviewManager.createPullRequest();return}u.window.showInformationMessage("Do you want to create a pull request using the GitHub Pull Requests and Issues extension?","Yes","No, continue to github.com").then(n=>{n==="Yes"?this.reviewManager.createPullRequest():u.env.openExternal(u.Uri.parse(e.url))})}}let cl=!1;const dl=class{static async getApiHost(t){const e=process.env.GITHUB_TEST_SERVER;if(e){if(cl)return u.Uri.parse(e);if(await u.window.showInformationMessage(`The 'GITHUB_TEST_SERVER' environment variable is set to '${e}'. Use this as the GitHub API endpoint?`,{modal:!0},"Yes")==="Yes")return cl=!0,u.Uri.parse(e)}const r=t instanceof u.Uri?t:u.Uri.parse(t.host);return r.authority==="github.com"?u.Uri.parse("https://api.github.com"):u.Uri.parse(`${r.scheme}://${r.authority}`)}static getApiPath(t,e){return(t instanceof u.Uri?t:u.Uri.parse(t.host)).authority==="github.com"?e:`/api/v3${e}`}};var Op=Object.defineProperty,xp=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Op(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Na{constructor(){xp(this,"_servers",new Map().set("github.com",!0))}async isGitHub(e){if(e===null||e.path.endsWith(".wiki"))return!1;if(this._servers.has(e.authority))return!!this._servers.get(e.authority);const[r,n]=await Na.getOptions(e,"HEAD","/rate_limit");let i=!1;try{const c=(await ya(r.toString(),n)).headers.get("x-github-request-id");return i=c!=null,i}catch(s){return a.appendLine(`No response from host ${e}: ${s.message}`,"GitHubServer"),i}finally{a.debug(`Host ${e} is associated with GitHub: ${i}`,"GitHubServer"),this._servers.set(e.authority,i)}}static async getOptions(e,r="GET",n,i){const s={"user-agent":"GitHub VSCode Pull Requests"};i&&(s.authorization=`token ${i}`);const c=u.Uri.joinPath(await dl.getApiHost(e),dl.getApiPath(e,n));return[c,{hostname:c.authority,port:443,method:r,headers:s,agent:Lu}]}}var Mp=Re(9593),Lp=Re.n(Mp),us=Re(7228);const hl=/http(s)?\:\/\/github\.com\/([^\/]+)\/([^\/]+)\/blob\/([0-9a-fA-F]{40})\/([^#]+)#L(\d+)(-L(\d+))?/;function ml(t){return t.match(hl)}function qp(t){return!!ml(t.body)}async function pl(t,e,r=!0){const n=t[2],i=t[3],s=t[5],c=Number(t[6])-1,v=t[8]?Number(t[8])-1:c;let w;for(const D of e.folderManagers){const H=D.getGitHubRemotes();for(const V of H)if(n.toLowerCase()===V.owner.toLowerCase()&&i.toLowerCase()===V.repositoryName.toLowerCase()){w=D;break}if(w)break}if(!w)return;const T=u.Uri.joinPath(w.repository.rootUri,s);try{await u.workspace.fs.stat(T)}catch(D){return}return{file:T,start:c,end:v}}async function Up(t,e){const r=ml(t.body);if(!r){u.window.showInformationMessage("Issue has no link.");return}const n=await pl(r,e,!1);if(!n)return u.env.openExternal(u.Uri.parse(r[0]));const i=await u.workspace.openTextDocument(n==null?void 0:n.file),s=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),c=new u.Range(n.start,0,n.end,s.text.length);return u.window.showTextDocument(n.file,{selection:c})}var $p=Object.defineProperty,fl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?$p(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const zv=/(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,hi=/(https?:\/\/github\.com\/(([^\s]+)\/([^\s]+))\/([^\s]+\/)?(issues|pull)\/([0-9]+)(#issuecomment\-([0-9]+))?)|(([^\s]+)\/([^\s]+))?(#|GH-)([1-9][0-9]*)($|\b)/,Pa=/\@([^\s]+)/,Hp=150,pt="githubIssues",Vn="queries",Gp="default",gl="workingIssueBranch",Ia="issueBranchTitle",vl="useBranchForIssues",Vp="workingIssueFormatScm";function Da(t){if(!t)return;const e={owner:void 0,name:void 0,issueNumber:0};return t.length===7?(e.owner=t[2],e.name=t[3],e.issueNumber=parseInt(t[5]),e):t.length===16?(e.owner=t[3]||t[11],e.name=t[4]||t[12],e.issueNumber=parseInt(t[7]||t[14]),e.commentNumber=t[9]!==void 0?parseInt(t[9]):void 0,e):void 0}async function Bp(t,e,r,n){var i;const s=(i=t.resolvedIssues.get(e.repository.rootUri.path))==null?void 0:i.get(r);if(s)return s;{let c,v,w;const T=e.getGitHubRemotes();for(const D of T){if(n)c=n.owner?n.owner:D.owner,v=n.name?n.name:D.repositoryName,w=n.issueNumber;else{const H=Da(r.match(hi));H&&(!H.name||!H.owner)&&(c=D.owner,v=D.repositoryName)}if(c&&v&&w!==void 0){let H=await e.resolveIssue(c,v,w,!!n.commentNumber);if(H||(H=await e.resolvePullRequest(c,v,w)),H){let V;return t.resolvedIssues.has(e.repository.rootUri.path)?V=t.resolvedIssues.get(e.repository.rootUri.path):t.resolvedIssues.set(e.repository.rootUri.path,V=new(Lp())(50)),V.set(r,H),H}}}}}function jp(t,e){let r;return t.commitContributions.forEach(n=>{e.toLowerCase()===n.repoNameWithOwner.toLowerCase()&&(r=n.createdAt.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"}))}),r}class zp extends u.CompletionItem{constructor(){super(...arguments);fl(this,"login"),fl(this,"uri")}}function Aa(t,e){const r=new u.MarkdownString(void 0,!0);r.appendMarkdown(`![Avatar](${e.avatarUrl}|height=50,width=50) **${e.name}** [${e.login}](${e.url})`),e.bio&&r.appendText(`  \r
`+e.bio.replace(/\r\n/g," "));const n=jp(e,t.owner+"/"+t.repo);return(e.location||n)&&r.appendMarkdown(`  \r
\r
---`),e.location&&r.appendMarkdown(`  \r
$(location) ${e.location}`),n&&r.appendMarkdown(`  \r
$(git-commit) Committed to this repository on ${n}`),e.company&&r.appendMarkdown(`  \r
$(jersey) Member of ${e.company}`),r}function Qp(t){const e=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:void 0}function Wp(t,e){const r=Qp(t);let n="ffffff";return r&&(.299*r.r+.587*r.g+.114*r.b)/255>.5&&(n="000000"),`<span style="color:#${n};background-color:#${t};">&nbsp;&nbsp;${e}&nbsp;&nbsp;</span>`}async function yl(t,e,r){let n=t.search(e),i=0;for(;n>=0&&n<t.length;){let s;if(n===0||t.charAt(n-1)!=="&"){const v=t.substring(n).match(e);if(v){const w=await r(v);w&&(s=t.slice(0,n)+w,t=s+t.slice(n+v[0].length))}}i=s?s.length:n+1;const c=t.substring(i).search(e);n=c>0?i+c:c}return t}function wl(t,e){return yl(t,hi,async r=>{const n=Da(r);if(n){const i=_l(n);return(!n.owner||!n.name)&&(n.owner=e.remote.owner,n.name=e.remote.repositoryName),`[${i}](https://github.com/${n.owner}/${n.name}/issues/${n.issueNumber})`}})}async function Kp(t,e){return yl(t,hl,async r=>{const n=await pl(r,e);if(n){const i=await u.workspace.openTextDocument(n==null?void 0:n.file),s=i.lineAt(n.end<i.lineCount?n.end:i.lineCount-1),c=[n.file,{selection:{start:{line:n.start,character:0},end:{line:n.end,character:s.text.length}}}],v=u.Uri.parse(`command:vscode.open?${encodeURIComponent(JSON.stringify(c))}`);return`[${r[0]}](${v} "Open ${n.file.fsPath}")`}})}const ls=200;async function Fa(t,e,r,n){const i=new u.MarkdownString(void 0,!0);i.isTrusted=!0;const s=new Date(t.createdAt),c=`${t.remote.owner}/${t.remote.repositoryName}`;i.appendMarkdown(`[${c}](https://github.com/${c}) on ${s.toLocaleString("default",{day:"numeric",month:"short",year:"numeric"})}  
`);const v=us.parse(t.title,{renderer:new Ma}).trim();i.appendMarkdown(`${Xp(t)} **${v}** [#${t.number}](${t.html_url})  
`);let w=us.parse(t.body,{renderer:new Ma});if(i.appendMarkdown(`  
`),w=w.length>ls?w.substr(0,ls)+"...":w,w=await wl(w,t),w=await Kp(w,r),i.appendMarkdown(w+`  
`),i.appendMarkdown(`&nbsp;  
`),t.item.labels.length>0&&t.item.labels.forEach(T=>{i.appendMarkdown(`[${Wp(T.color,T.name)}](https://github.com/${c}/labels/${encodeURIComponent(T.name)}) `)}),t.item.comments&&n){for(const T of t.item.comments)if(T.databaseId===n){i.appendMarkdown(`  \r
\r
---\r
`),i.appendMarkdown(`&nbsp;  
`),i.appendMarkdown(`![Avatar](${T.author.avatarUrl}|height=15,width=15) &nbsp;&nbsp;**${T.author.login}** commented`),i.appendMarkdown(`&nbsp;  
`);let D=us.parse(T.body.length>ls?T.body.substr(0,ls)+"...":T.body,{renderer:new Ma});D=await wl(D,t),i.appendMarkdown(D)}}return i}function Yp(t){switch(t.state){case rt.Open:return t instanceof Nr?"$(git-pull-request)":"$(issues)";case rt.Closed:return t instanceof Nr?"$(git-pull-request)":"$(issue-closed)";case rt.Merged:return"$(git-merge)"}}function Xp(t){if(t instanceof Nr)return Yp(t);switch(t.state){case rt.Open:return'<span style="color:#22863a;">$(issues)</span>';case rt.Closed:return'<span style="color:#cb2431;">$(issue-closed)</span>'}}const bl="HEAD",Jp=1,Zp=2,ef=3,kl=4,cs=new Map([["upstream",Jp],["ups",Zp],["origin",ef]]);async function tf(t,e){var r,n,i;const s=((r=t.state.HEAD)==null?void 0:r.upstream)&&!cs.has(t.state.HEAD.upstream.remote)?t.state.HEAD.upstream.remote:void 0;let c;const v=t.state.remotes.map(H=>({name:H.name,remote:H})).filter(H=>(H.name===s&&(c=H.remote),cs.has(H.name))).sort((H,V)=>{var W,Z;const ee=(W=cs.get(H.name))!=null?W:kl,te=(Z=cs.get(V.name))!=null?Z:kl;return ee-te});s&&v.push({name:s,remote:c});const w=[bl];((n=t.state.HEAD)==null?void 0:n.name)&&t.state.HEAD.name!==bl&&w.unshift((i=t.state.HEAD)==null?void 0:i.name);let T,D;for(let H=0;H<w.length&&!T;H++)for(let V=0;V<v.length&&!T;V++){const W=(await t.getBranches({contains:e.hash,remote:!0,pattern:`remotes/${v[V].name}/${w[H]}`,count:1})).filter(Z=>Z.remote&&Z.name);W&&W.length>0&&(T=W[0],D=v[V].remote)}return D}async function Oa(t,e,r){var n;let i,s;if(r)i=r;else if(!e&&u.window.activeTextEditor)i=u.window.activeTextEditor.document.uri,s=u.window.activeTextEditor.selection;else if(e)i=e.document.uri,s=e.range;else return{permalink:void 0,error:"No active text editor position to create permalink from.",originalFile:void 0};const c=ol(t,i);if(!c)return{permalink:void 0,error:"The current file isn't part of repository.",originalFile:i};let v,w;try{const W=await c.log({maxEntries:1,path:i.fsPath});if(W.length===0)return{permalink:void 0,error:"No branch on a remote contains the most recent commit for the file.",originalFile:i};v=W[0],w=W[0].hash}catch(W){w=(n=c.state.HEAD)==null?void 0:n.commit}const T=new Promise(W=>{var Z;if((Z=c.state.HEAD)==null?void 0:Z.upstream)for(const ee of c.state.remotes)c.state.HEAD.upstream.remote===ee.name&&W(ee);W(void 0)});let D=v?await Promise.race([tf(c,v),new Promise(W=>{setTimeout(()=>{W(T)},2e3)})]):await T;if((!D||!D.fetchUrl)&&(D=await T,!D||!D.fetchUrl))return{permalink:void 0,error:"There is no suitable remote.",originalFile:i};const H=i.path.substring(c.rootUri.path.length),V=s?`#L${s.start.line+1}-L${s.end.line+1}`:"";return{permalink:`https://github.com/${new Ur(D.fetchUrl).nameWithOwner}/blob/${w}${H}${V}`,error:void 0,originalFile:i}}function rf(t){const e=/[~^:;'".,~#?%*[\]@\\{}]|\/\//g;return t.replace(e,"").trim().replace(/\s+/g,"-")}const nf=/\$\{(.*?)\}/g;async function ds(t,e,r,n){return t.replace(nf,(i,s)=>{switch(s){case"user":return n||i;case"issueNumber":return e?`${e.number}`:i;case"issueNumberLabel":return e?`${Bn(e,r)}`:i;case"issueTitle":return e?e.title:i;case"repository":return r?r.repo:i;case"owner":return r?r.owner:i;case"sanitizedIssueTitle":return e?rf(e.title):i;default:return i}})}function Bn(t,e){const r={issueNumber:t.number,owner:void 0,name:void 0};return e&&(e.owner.toLowerCase()!==t.remote.owner.toLowerCase()||e.repo.toLowerCase()!==t.remote.repositoryName.toLowerCase())&&(r.owner=t.remote.owner,r.name=t.remote.repositoryName),_l(r)}function _l(t){return!t.owner||!t.name?`#${t.issueNumber}`:`${t.owner}/${t.name}#${t.issueNumber}`}async function El(t,e,r){var n;const i=await((n=e.currentIssue(t.repository.rootUri))==null?void 0:n.getCommitMessage());if(i)return t.repository.commit(i,{all:r})}const Rl="Commit Staged",Cl="Commit All";async function sf(t,e,r){var n,i;if(t.repository.state.workingTreeChanges.length>0||t.repository.state.indexChanges.length>0){const s=[];switch(t.repository.state.indexChanges&&s.push(Rl),t.repository.state.workingTreeChanges&&s.push(Cl),await u.window.showInformationMessage("There are uncommitted changes. Do you want to commit them with the default commit message?",{modal:!0},...s)){case Rl:{await El(t,r,!1);break}case Cl:{await El(t,r,!0);break}default:return!1}}if((n=t.repository.state.HEAD)==null?void 0:n.upstream)return await t.repository.push(),await e.createPullRequest(void 0),!0;{let s;return t.repository.state.remotes.length===1?s=t.repository.state.remotes[0].name:t.repository.state.remotes.length>1&&(s=await u.window.showQuickPick(t.repository.state.remotes.map(c=>c.name),{placeHolder:"Remote to push to"})),s?(await t.repository.push(s,(i=t.repository.state.HEAD)==null?void 0:i.name,!0),await e.createPullRequest(void 0),!0):(u.window.showWarningMessage("The current repository has no remotes to push to. Please set up a remote and try again."),!1)}}async function xa(t,e){return!(t.languageId!=="markdown"&&t.languageId!=="plaintext"&&(await u.languages.getTokenInformationAtPosition(t,e)).type!==u.StandardTokenType.Comment)}async function Sl(t,e){return t.lineAt(e.line).range.end.character>1e4?!1:xa(t,e)}function Tl(t){const e=new Cn.URLSearchParams(t.query).get("rootUri");return e?u.Uri.parse(e):void 0}class Ma extends us.Renderer{code(e){return e}blockquote(e){return e}html(e){return""}heading(e,r,n,i){return e+" "}hr(){return""}list(e,r,n){return e}listitem(e){return" "+e}checkbox(e){return""}paragraph(e){return e.replace(/\</g,"\\<").replace(/\>/g,"\\>")+" "}table(e,r){return e+" "+r}tablerow(e){return e}tablecell(e,r){return e}strong(e){return e}em(e){return e}codespan(e){return`\\\`${e}\\\``}br(){return" "}del(e){return e}image(e,r,n){return""}text(e){return e}link(e,r,n){return n+" "}}var af=Object.defineProperty,of=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Nl="github-pr-remote",Pl="github-pr-owner-number",Il=/branch\.(.+)\.github-pr-owner-number/,uf=/branch\.(.+)\.remote/,Je=class{static async checkoutFromFork(t,e,r){const n=await Je.calculateUniqueBranchNameForPR(t,e);r||(a.appendLine(`Branch ${n} is from a fork. Create a remote first.`,Je.ID),r=await Je.createRemote(t,e.remote,e.head.repositoryCloneUrl));const i=`${e.head.ref}:${n}`;a.debug(`Fetch ${r}/${e.head.ref}:${n} - start`,Je.ID),await t.fetch(r,i,1),a.debug(`Fetch ${r}/${e.head.ref}:${n} - done`,Je.ID),await t.checkout(n),await t.setBranchUpstream(n,`refs/remotes/${r}/${e.head.ref}`),await this.unshallow(t),Je.associateBranchWithPullRequest(t,e,n)}static async fetchAndCheckout(t,e,r){var n;if(!r.validatePullRequestModel("Checkout pull request failed"))return;const i=Je.getHeadRemoteForPullRequest(e,r),s=r.head.repositoryCloneUrl.owner!==r.base.repositoryCloneUrl.owner;if(!i||s)return Je.checkoutFromFork(t,r,i&&i.remoteName);const c=r.head.ref,v=i.remoteName;let w;try{if(w=await t.getBranch(c),((n=t.state.HEAD)==null?void 0:n.name)===w.name){a.appendLine(`Tried to checkout ${c}, but branch is already checked out.`,Je.ID);return}if(a.debug(`Checkout ${c}`,Je.ID),await t.checkout(c),!w.upstream){const T=`refs/remotes/${v}/${c}`;await t.setBranchUpstream(c,T)}w.behind!==void 0&&w.behind>0&&w.ahead===0&&(a.debug("Pull from upstream",Je.ID),await t.pull())}catch(T){a.appendLine(`Branch ${v}/${c} doesn't exist on local disk yet.`,Je.ID);const D=`refs/remotes/${v}/${c}`;a.appendLine(`Fetch tracked branch ${D}`,Je.ID),await t.fetch(v,c,1);const H=await t.getBranch(D);await t.createBranch(c,!0,H.commit),await t.setBranchUpstream(c,D),await this.unshallow(t)}await Je.associateBranchWithPullRequest(t,r,c)}static async unshallow(t){try{await t.pull(!0)}catch(e){a.appendLine(`Unshallowing failed: ${e}. Falling back to git pull`),await t.pull()}}static async checkoutExistingPullRequestBranch(t,e){const r=Je.buildPullRequestMetadata(e),n=await t.getConfigs(),i=c=>n.filter(({key:v})=>c===v).map(({value:v})=>v)[0],s=n.map(c=>{const v=Il.exec(c.key);return{branch:v&&v.length?v[1]:null,value:c.value}}).filter(c=>c.branch&&c.value===r);if(s&&s.length){const c=s[0].branch;await t.checkout(c);const v=i(`branch.${c}.remote`),w=i(`branch.${c}.merge`);await t.fetch(v,w);const T=await t.getBranch(s[0].branch);return T.behind!==void 0&&T.behind>0&&T.ahead===0&&(a.debug("Pull from upstream",Je.ID),await t.pull()),!0}else return!1}static async getBranchNRemoteForPullRequest(t,e){const r=Je.buildPullRequestMetadata(e),n=await t.getConfigs(),i=n.map(s=>{const c=Il.exec(s.key);return{branch:c&&c.length?c[1]:null,value:s.value}}).find(s=>!!s.branch&&s.value===r);if(i){const s=i.branch;try{const c=`branch.${s}.remote`,v=n.filter(H=>H.key===c).map(H=>H.value);let w;v.length&&(w=v[0]);let T=!1;if(w){const H=`remote.${w}.github-pr-remote`;n.filter(W=>W.key===H&&W.value).length&&(T=!0)}let D;return T&&(D=n.some(H=>!!(uf.exec(H.key)&&H.key!==`branch.${s}.remote`&&H.value===w))),{branch:s,remote:w,createdForPullRequest:T,remoteInUse:D}}catch(c){return{branch:s}}}return null}static buildPullRequestMetadata(t){return`${t.base.repositoryCloneUrl.owner}#${t.base.repositoryCloneUrl.repositoryName}#${t.number}`}static parsePullRequestMetadata(t){if(t){const e=/(.*)#(.*)#(.*)/g.exec(t);if(e&&e.length===4){const[,r,n,i]=e;return{owner:r,repositoryName:n,prNumber:Number(i)}}}}static getMetadataKeyForBranch(t){return`branch.${t}.${Pl}`}static async getMatchingPullRequestMetadataForBranch(t,e){try{const r=this.getMetadataKeyForBranch(e),n=await t.getConfig(r);return Je.parsePullRequestMetadata(n)}catch(r){return}}static async createRemote(t,e,r){a.appendLine(`create remote for ${r}.`,Je.ID);const n=Mn(t);for(const s of n)if(new Ur(s.url).equals(r))return s.remoteName;const i=Je.getUniqueRemoteName(t,r.owner);return r.update({type:e.gitProtocol.type}),await t.addRemote(i,r.toString()),await t.setConfig(`remote.${i}.${Nl}`,"true"),i}static async isRemoteCreatedForPullRequest(t,e){try{a.debug(`Check if remote '${e}' is created for pull request - start`,Je.ID);const r=await t.getConfig(`remote.${e}.${Nl}`);return a.debug(`Check if remote '${e}' is created for pull request - end`,Je.ID),r==="true"}catch(r){return!1}}static async calculateUniqueBranchNameForPR(t,e){const r=`pr/${e.author.login}/${e.number}`;let n=r,i=1;for(;;)try{await t.getBranch(n),n=`${r}-${i++}`}catch(s){break}return n}static getUniqueRemoteName(t,e){let r=e,n=1;const i=Mn(t);for(;i.find(s=>s.remoteName===r);)r=`${e}${n++}`;return r}static getHeadRemoteForPullRequest(t,e){return t.find(r=>r.gitProtocol&&r.gitProtocol.equals(e.head.repositoryCloneUrl))}static async associateBranchWithPullRequest(t,e,r){a.appendLine(`associate ${r} with Pull Request #${e.number}`,Je.ID);const n=`branch.${r}.${Pl}`;await t.setConfig(n,Je.buildPullRequestMetadata(e))}};let nr=Je;of(nr,"ID","PullRequestGitHelper");var lf=Object.defineProperty,Xe=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?lf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class cf extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Dl extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class df extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const ir="githubPullRequests",mi="remotes",Al="ReposManagerStateContext";var Yt;(function(t){t.Initializing="Initializing",t.NeedsAuthentication="NeedsAuthentication",t.RepositoriesLoaded="RepositoriesLoaded"})(Yt||(Yt={}));const Fl="No Milestone";var Ol;(function(t){t[t.PullRequest=0]="PullRequest",t[t.Milestones=1]="Milestones",t[t.IssuesWithoutMilestone=2]="IssuesWithoutMilestone",t[t.IssueSearch=3]="IssueSearch"})(Ol||(Ol={}));const sr=class{constructor(t,e,r,n,i){this.context=t,this._repository=e,this.telemetry=r,this._git=n,this._credentialStore=i,Xe(this,"_subs"),Xe(this,"_activePullRequest"),Xe(this,"_activeIssue"),Xe(this,"_githubRepositories"),Xe(this,"_allGitHubRemotes",[]),Xe(this,"_mentionableUsers"),Xe(this,"_fetchMentionableUsersPromise"),Xe(this,"_assignableUsers"),Xe(this,"_fetchAssignableUsersPromise"),Xe(this,"_gitBlameCache",{}),Xe(this,"_githubManager"),Xe(this,"_repositoryPageInformation",new Map),Xe(this,"_onDidMergePullRequest",new u.EventEmitter),Xe(this,"onDidMergePullRequest",this._onDidMergePullRequest.event),Xe(this,"_onDidChangeActivePullRequest",new u.EventEmitter),Xe(this,"onDidChangeActivePullRequest",this._onDidChangeActivePullRequest.event),Xe(this,"_onDidChangeActiveIssue",new u.EventEmitter),Xe(this,"onDidChangeActiveIssue",this._onDidChangeActiveIssue.event),Xe(this,"_onDidLoadRepositories",new u.EventEmitter),Xe(this,"onDidLoadRepositories",this._onDidLoadRepositories.event),Xe(this,"_onDidChangeRepositories",new u.EventEmitter),Xe(this,"onDidChangeRepositories",this._onDidChangeRepositories.event),Xe(this,"_onDidChangeAssignableUsers",new u.EventEmitter),Xe(this,"onDidChangeAssignableUsers",this._onDidChangeAssignableUsers.event),Xe(this,"totalFetchedPages",new Map),this._subs=[],this._githubRepositories=[],this._githubManager=new Na,this._subs.push(u.workspace.onDidChangeConfiguration(async s=>{s.affectsConfiguration(`${ir}.${mi}`)&&await this.updateRepositories()})),this.setUpCompletionItemProvider()}get gitHubRepositories(){return this._githubRepositories}computeAllGitHubRemotes(){const e=Mn(this.repository).filter(r=>r.host);return Promise.all(e.map(r=>this._githubManager.isGitHub(r.gitProtocol.normalizeUri()))).then(r=>e.filter((n,i,s)=>r[i])).catch(r=>(a.appendLine(`Resolving GitHub remotes failed: ${r}`),u.window.showErrorMessage(`Resolving GitHub remotes failed: ${Q(r)}`),[]))}async getActiveGitHubRemotes(t){const e=u.workspace.getConfiguration(ir).get(mi);return e?(e.forEach(r=>{t.some(n=>n.remoteName===r)||a.appendLine(`No remote with name '${r}' found.`)}),a.debug(`Displaying configured remotes: ${e.join(", ")}`,sr.ID),e.map(r=>t.find(n=>n.remoteName===r)).filter(r=>!!r)):(a.appendLine("Unable to read remotes setting"),Promise.resolve([]))}setUpCompletionItemProvider(){let t,e=[],r=[];u.languages.registerCompletionItemProvider({scheme:"comment"},{provideCompletionItems:async(n,i,s)=>{try{const c=JSON.parse(n.uri.query);if(se(c.extensionId,tt)!==0)return;const v=n.getWordRangeAtPosition(i,/@([a-z\d](?:[a-z\d]|-(?=[a-z\d])){0,38})?/i);if(!v||v.isEmpty)return;let w=[];const T={};let D={},H,V;const W=u.window.visibleTextEditors;if(W.length){const fe=W.find(ce=>ce.document.uri.scheme==="pr");if(fe){const ce=dt(fe.document.uri);H=ce.prNumber,V=ce.remoteName}else this._activePullRequest&&(H=this._activePullRequest.number,V=this._activePullRequest.remote.remoteName);if(t&&H&&H===t.number)return r}const Z=new Promise(async fe=>{if(H&&V){if(a.debug("get Timeline Events and parse users",sr.ID),t&&t.number===H)return e;const ce=this._githubRepositories.find(ke=>ke.remote.remoteName===V);ce&&(t=await ce.getPullRequest(H),e=await t.getTimelineEvents()),w=Rp(e),fe()}fe()}),ee=new Promise(async fe=>{if(W.length)try{a.debug("git blame and parse users",sr.ID);const ce=h.resolve(W[0].document.uri.fsPath);let ke;this._gitBlameCache[ce]?ke=this._gitBlameCache[ce]:(ke=await this.repository.blame(ce),this._gitBlameCache[ce]=ke);const Ke=ke.split(`
`);for(const Ye of Ke){const ct=/^\w{11} \S*\s*\((.*)\s*\d{4}\-/.exec(Ye);if(ct&&ct.length===2){const Ve=ct[1].trim();T[Ve]=!0}}}catch(ce){a.debug(ce,sr.ID)}fe()}),te=new Promise(async fe=>{a.debug("get mentionable users",sr.ID),D=await this.getMentionableUsers(),fe()});await Promise.all([Z,ee,te]),r=[];const ae={};a.debug("prepare user suggestions",sr.ID),w.forEach(fe=>{ae[fe.login]||(ae[fe.login]=fe)});const me={};for(const fe in D)for(const ce of D[fe])if(!ae[ce.login]&&!me[ce.login]){me[ce.login]=!0;let ke=2;(T[ce.login]||ce.name&&T[ce.name])&&(ke=1),ae[ce.login]&&(ke=0),r.push({label:ce.login,insertText:ce.login,filterText:`${ce.login}`+(ce.name&&ce.name!==ce.login?`_${ce.name.toLowerCase().replace(" ","_")}`:""),sortText:`${ke}_${ce.login}`,detail:ce.name,kind:u.CompletionItemKind.User,login:ce.login,uri:this.repository.rootUri})}for(const fe in ae)me[fe]||r.push({label:ae[fe].login,insertText:`${ae[fe].login}`,filterText:`${ae[fe].login}`+(ae[fe].name&&ae[fe].name!==ae[fe].login?`_${ae[fe].name.toLowerCase().replace(" ","_")}`:""),sortText:`0_${ae[fe].login}`,detail:ae[fe].name,kind:u.CompletionItemKind.User,login:ae[fe].login,uri:this.repository.rootUri});return a.debug("done",sr.ID),r}catch(c){return[]}},resolveCompletionItem:async(n,i)=>{try{const s=await this.getPullRequestDefaults(),c=await this.resolveUser(s.owner,s.repo,typeof n.label=="string"?n.label:n.label.label);c&&(n.documentation=Aa(s,c))}catch(s){}return n}},"@")}get activeIssue(){return this._activeIssue}set activeIssue(t){this._activeIssue=t,this._onDidChangeActiveIssue.fire()}get activePullRequest(){return this._activePullRequest}set activePullRequest(t){this._activePullRequest&&(this._activePullRequest.isActive=!1),t&&(t.isActive=!0),this._activePullRequest=t,this._onDidChangeActivePullRequest.fire()}get repository(){return this._repository}set repository(t){this._repository=t}get credentialStore(){return this._credentialStore}async getActiveRemotes(){this._allGitHubRemotes=await this.computeAllGitHubRemotes();const t=await this.getActiveGitHubRemotes(this._allGitHubRemotes);return t.length?(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!0),a.appendLine("Found GitHub remote")):(await u.commands.executeCommand("setContext","github:hasGitHubRemotes",!1),a.appendLine("No GitHub remotes found")),t}async updateRepositories(t=!1){if(this._git.state==="uninitialized"){a.appendLine("Cannot updates repositories as git is uninitialized");return}const e=await this.getActiveRemotes(),r=this._credentialStore.isAuthenticated(He.github)||this._credentialStore.isAuthenticated(He["github-enterprise"]);u.commands.executeCommand("setContext","github:authenticated",r);const n=[],i=[];return e.filter(c=>this._credentialStore.isAuthenticated(c.authProviderId)).forEach(c=>{const v=this.createGitHubRepository(c,this._credentialStore);i.push(v.resolveRemote()),n.push(v)}),Promise.all(i).then(async c=>{const v=this._githubRepositories;this._githubRepositories=n,v.forEach(T=>T.dispose());const w=v.length!==this._githubRepositories.length||!v.every(T=>this._githubRepositories.some(D=>D.remote.equals(T.remote)));if(this._githubRepositories.length&&w&&await this.checkIfMissingUpstream()){this.updateRepositories(t);return}this.activePullRequest&&this.getMentionableUsers(w),this.getAssignableUsers(w),this._onDidLoadRepositories.fire(r||!e.length?Yt.RepositoriesLoaded:Yt.NeedsAuthentication),t||this._onDidChangeRepositories.fire()})}async checkIfMissingUpstream(){var t;try{const r=await(await this.getOrigin()).getMetadata();if(r.fork&&r.parent){const n=new Ur(r.parent.git_url);if(!this._githubRepositories.some(s=>s.remote.owner===n.owner&&s.remote.repositoryName===n.repositoryName)){const c=!this.repository.state.remotes.some(v=>v.name==="upstream")?"upstream":(t=r.parent.owner)==null?void 0:t.login;if(c)return await this.repository.addRemote(c,r.parent.clone_url),!0}}}catch(e){a.appendLine(`Missing upstream check failed: ${e}`)}return!1}getAllAssignableUsers(){if(this._assignableUsers){const t=[];return Object.keys(this._assignableUsers).forEach(e=>{t.push(...this._assignableUsers[e])}),t}}async getMentionableUsers(t){if(t&&delete this._mentionableUsers,this._mentionableUsers)return this._mentionableUsers;if(!this._fetchMentionableUsersPromise){const e={};return this._fetchMentionableUsersPromise=new Promise(r=>{const n=this._githubRepositories.map(async i=>{const s=await i.getMentionableUsers();e[i.remote.remoteName]=s});Promise.all(n).then(()=>{this._mentionableUsers=e,this._fetchMentionableUsersPromise=void 0,r(e)})})}return this._fetchMentionableUsersPromise}async getAssignableUsers(t){if(t&&delete this._assignableUsers,this._assignableUsers)return this._assignableUsers;if(!this._fetchAssignableUsersPromise){const e={},r=[];return this._fetchAssignableUsersPromise=new Promise(n=>{const i=this._githubRepositories.map(async s=>{const c=await s.getAssignableUsers();e[s.remote.remoteName]=c.sort(sl),r.push(...c)});Promise.all(i).then(()=>{this._assignableUsers=e,this._fetchAssignableUsersPromise=void 0,n(e),this._onDidChangeAssignableUsers.fire(r)})})}return this._fetchAssignableUsersPromise}getGitHubRemotes(){const t=this._githubRepositories;return!t||!t.length?[]:t.map(e=>e.remote)}async getAllGitHubRemotes(){return await this.computeAllGitHubRemotes()}async getLocalPullRequests(){const t=this._githubRepositories;if(!t||!t.length)return[];const r=this.repository.state.refs.filter(n=>n.type===Pe.Head&&n.name!==void 0).map(n=>n.name).map(async n=>{const i=await nr.getMatchingPullRequestMetadataForBranch(this.repository,n);if(i){const{owner:s,prNumber:c}=i,v=t.find(w=>w.remote.owner.toLocaleLowerCase()===s.toLocaleLowerCase());if(v){const w=await v.getPullRequest(c);if(w)return w.localBranchName=n,w}}return Promise.resolve(null)});return Promise.all(r).then(n=>n.filter(i=>i!==null))}async getLabels(t,e){const r=t?t.githubRepository:this._githubRepositories.find(w=>w.remote.owner===(e==null?void 0:e.owner)&&w.remote.repositoryName===(e==null?void 0:e.repo));if(!r)throw new Error("No matching repository found for getting labels.");const{remote:n,octokit:i}=await r.ensure();let s=!1,c=1,v=[];do{const w=await i.issues.listLabelsForRepo({owner:n.owner,repo:n.repositoryName,per_page:100,page:c});v=v.concat(w.data.map(T=>({name:T.name,color:T.color}))),v=v.sort((T,D)=>T.name.localeCompare(D.name)),s=!!w.headers.link&&w.headers.link.indexOf('rel="next"')>-1,c+=1}while(s);return v}async listBranches(t,e){if(this._githubRepositories.length)return this._githubRepositories[0].listBranches(t,e);throw new Error("No GitHub repositories found")}async deleteLocalPullRequest(t,e){if(!t.localBranchName)return;await this.repository.deleteBranch(t.localBranchName,e);let r;try{r=await this.repository.getConfig(`branch.${t.localBranchName}.remote`)}catch(i){}if(!r)return;await nr.isRemoteCreatedForPullRequest(this.repository,r)&&((await this.repository.getConfigs()).some(({key:c,value:v})=>/^branch.*\.remote$/.test(c)&&v===r)||await this.repository.removeRemote(r)),this.telemetry.sendTelemetryEvent("branch.delete")}async fetchPagedData(t={fetchNextPage:!1},e,r=0,n=wt.All,i){if(!this._githubRepositories||!this._githubRepositories.length)return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1};const s=()=>this.totalFetchedPages.get(e)||0,c=H=>this.totalFetchedPages.set(e,H);for(const H of this._githubRepositories){const V=H.remote.url.toString()+e;this._repositoryPageInformation.get(V)||this._repositoryPageInformation.set(V,{pullRequestPage:0,hasMorePages:null})}let v=0;const w={hasMorePages:!1,items:[]},T=H=>{v++,H&&(w.items=w.items.concat(H.items),w.hasMorePages=H.hasMorePages)},D=this._githubRepositories.filter(H=>{const V=this._repositoryPageInformation.get(H.remote.url.toString()+e);return V&&(t.fetchNextPage===!1||V.hasMorePages!==!1)});for(let H=0;H<D.length;H++){const V=D[H],W=V.remote.url.toString()+e,Z=this._repositoryPageInformation.get(W),ee=async te=>{switch(r){case 0:return n===wt.All?V.getAllPullRequests(te):V.getPullRequestsForCategory(i||"",te);case 1:return V.getIssuesForUserByMilestone(Z.pullRequestPage);case 2:return V.getIssuesWithoutMilestone(Z.pullRequestPage);case 3:return V.getIssues(Z.pullRequestPage,i)}};if(t.fetchNextPage?(Z.pullRequestPage++,T(await ee(Z.pullRequestPage)),c(s()+1)):(Z.pullRequestPage===0&&(Z.pullRequestPage=1),(await Promise.all(Array.from({length:Z.pullRequestPage}).map((ae,me)=>ee(me+1)))).forEach(ae=>T(ae))),Z.hasMorePages=w.hasMorePages,w.items.length&&(t.fetchNextPage===!0||t.fetchNextPage===!1&&v>=s()))return s()===0&&c(v),{items:w.items,hasMorePages:Z.hasMorePages,hasUnsearchedRepositories:H<D.length-1}}return{items:[],hasMorePages:!1,hasUnsearchedRepositories:!1}}async getPullRequests(t,e={fetchNextPage:!1},r){const n=t.toString()+(r||"");return this.fetchPagedData(e,n,0,t,r)}async getMilestones(t={fetchNextPage:!1},e=!1,r){const n=await this.fetchPagedData(t,"issuesKey",1,wt.All,r);if(e){const i=await this.fetchPagedData(t,"issuesKey",2,wt.All,r);n.items.push({milestone:{createdAt:new Date(0).toDateString(),id:"",title:Fl},issues:i.items})}return n}async getIssues(t={fetchNextPage:!1},e){return this.fetchPagedData(t,"issuesKey",3,wt.All,e)}async getMaxIssue(){const t=await Promise.all(this._githubRepositories.map(r=>r.getMaxIssue()));let e=0;for(const r of t)r!==void 0&&(e=Math.max(e,r));return e}async getPullRequestTemplates(){const t=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),e=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{docs,.github}/{pull_request_template,PULL_REQUEST_TEMPLATE}.md")),r=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"PULL_REQUEST_TEMPLATE/*.md")),n=await u.workspace.findFiles(new u.RelativePattern(this._repository.rootUri.path,"{docs,.github}/PULL_REQUEST_TEMPLATE/*.md"));return[...t,...e,...r,...n]}async getPullRequestDefaults(t){var e;if(!t&&!this.repository.state.HEAD)throw new Dl(this.repository);const r=await this.getOrigin(t),n=await r.getMetadata(),i=(e=u.workspace.getConfiguration(ir).inspect(mi))==null?void 0:e.defaultValue,s=u.workspace.getConfiguration(ir).get(mi),c=n.fork&&n.parent&&i===s?n.parent:await(this.findRepo(zn("upstream"))||r).getMetadata();return{owner:c.owner.login,repo:c.name,base:c.default_branch}}async getMetadata(t){const e=this.findRepo(zn(t));return e&&e.getMetadata()}async getHeadCommitMessage(){const{repository:t}=this;if(t.state.HEAD&&t.state.HEAD.commit){const{message:e}=await t.getCommit(t.state.HEAD.commit);return e}return""}async getTipCommitMessage(t){const{repository:e}=this,{commit:r}=await e.getBranch(t);if(r){const{message:n}=await e.getCommit(r);return n}return""}async getOrigin(t){if(!this._githubRepositories.length)throw new cf(this.repository);const e=t?t.upstream:this.upstreamRef;if(e){const i=this.findRepo(zn(e.remote));if(!i){const s=(await this.getAllGitHubRemotes()).find(c=>c.remoteName===e.remote);if(s)return new Un(s,this._credentialStore,this.telemetry);throw a.appendLine(`The remote '${e.remote}' is not a GitHub repository.`),new df(this.repository.state.HEAD.name,e,"is not a GitHub repo")}return i}const[r,...n]=this._githubRepositories;return n.length&&(this.findRepo(zn("origin"))||this.findRepo(hf))||r}findRepo(t){return this._githubRepositories.filter(t)[0]}get upstreamRef(){const{HEAD:t}=this.repository.state;return t&&t.upstream}async createPullRequest(t){var e,r;const n=this._githubRepositories.find(i=>i.remote.owner===t.owner&&i.remote.repositoryName===t.repo);if(!n)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);try{const i=await n.createPullRequest(t),s=t.head.indexOf(":"),c=t.head.slice(s+1);return await nr.associateBranchWithPullRequest(this._repository,i,c),this.telemetry.sendTelemetryEvent("pr.create.success",{isDraft:(t.draft||"").toString()}),i}catch(i){if(i.message.indexOf("No commits between ")>-1){if((e=this._repository.state.HEAD)==null?void 0:e.ahead)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to push your local commits and create the pull request?`,{modal:!0},"Push commits")==="Push commits"?(await this._repository.push(),this.createPullRequest(t)):void 0;if(this._repository.state.workingTreeChanges.length||this._repository.state.indexChanges.length)return await u.window.showInformationMessage(`There are no commits between '${t.base}' and '${t.head}'.

Do you want to commit your changes and create the pull request?`,{modal:!0},"Commit changes")==="Commit changes"?(await u.commands.executeCommand("git.commit"),await this._repository.push(),this.createPullRequest(t)):void 0}if(!((r=this._repository.state.HEAD)==null?void 0:r.upstream))return await u.window.showInformationMessage(`There is no upstream branch for '${t.base}'.

Do you want to publish it and create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"?(await this._repository.push(n.remote.remoteName,t.base,!0),this.createPullRequest(t)):void 0;throw a.appendLine(`GitHubRepository> Creating pull requests failed: ${i}`),this.telemetry.sendTelemetryErrorEvent("pr.create.failure",{isDraft:(t.draft||"").toString()}),new Error(Q(i))}}async createIssue(t){try{const e=this._githubRepositories.find(s=>s.remote.owner===t.owner&&s.remote.repositoryName===t.repo);if(!e)throw new Error(`No matching repository ${t.repo} found for ${t.owner}`);await e.ensure();const{data:r}=await e.octokit.issues.create(t),n=vp(r,e),i=new Ct(e,e.remote,n);return this.telemetry.sendTelemetryEvent("issue.create.success"),i}catch(e){a.appendLine(`GitHubRepository> Creating issue failed: ${e}`),this.telemetry.sendTelemetryErrorEvent("issue.create.failure"),u.window.showWarningMessage(`Creating issue failed: ${Q(e)}`)}}async assignIssue(t,e){try{const r=this._githubRepositories.find(i=>i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName);if(!r)throw new Error(`No matching repository ${t.remote.repositoryName} found for ${t.remote.owner}`);await r.ensure();const n={assignees:[e],owner:t.remote.owner,repo:t.remote.repositoryName,issue_number:t.number};await r.octokit.issues.addAssignees(n),this.telemetry.sendTelemetryEvent("issue.assign.success")}catch(r){a.appendLine(`GitHubRepository> Assigning issue failed: ${r}`),this.telemetry.sendTelemetryErrorEvent("issue.assign.failure"),u.window.showWarningMessage(`Assigning issue failed: ${Q(r)}`)}}getCurrentUser(t){return Kr(this._credentialStore.getCurrentUser(t.githubRepository.remote.authProviderId),t.githubRepository)}async mergePullRequest(t,e,r,n){const{octokit:i,remote:s}=await t.githubRepository.ensure(),c=this.activePullRequest&&this.activePullRequest.head&&this.activePullRequest.head.sha,v=this.repository.state.HEAD&&this.repository.state.HEAD.commit,w=t.head&&t.head.sha,T=this.repository.state.workingTreeChanges.length>0;if(c===w){if(v!==w){const{ahead:D}=this.repository.state.HEAD;if(D&&await u.window.showWarningMessage(`You have ${D} unpushed ${D>1?"commits":"commit"} on this PR branch.

Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"unpushed changes"}}if(T&&await u.window.showWarningMessage(`You have uncommitted changes on this PR branch.

 Would you like to proceed anyway?`,{modal:!0},"Yes")===void 0)return{merged:!1,message:"uncommitted changes"}}return await i.pulls.merge({commit_message:r,commit_title:e,merge_method:n||u.workspace.getConfiguration("githubPullRequests").get("defaultMergeMethod"),owner:s.owner,repo:s.repositoryName,pull_number:t.number}).then(D=>(this.telemetry.sendTelemetryEvent("pr.merge.success"),this._onDidMergePullRequest.fire(),D.data)).catch(D=>{throw this.telemetry.sendTelemetryErrorEvent("pr.merge.failure"),D})}async deleteBranch(t){await t.githubRepository.deleteBranch(t)}async getBranchDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(i=>{const s=i.key,c=/^branch\.(.*)\.(.*)$/.exec(s);if(c&&c.length===3){const v=c[1];e.has(v)||e.set(v,{});const w=e.get(v);if(c[2]==="remote"&&(w.remote=i.value),c[2]==="github-pr-owner-number"){const T=nr.parsePullRequestMetadata(i.value);w.metadata=T}e.set(v,w)}});const r=[];e.forEach((i,s)=>{if(i.metadata){const c=this.activePullRequest&&this.activePullRequest.base.repositoryCloneUrl;(c?c.owner===i.metadata.owner&&c.repositoryName===i.metadata.repositoryName&&this.activePullRequest&&this.activePullRequest.number===i.metadata.prNumber:!1)||r.push({label:`${s}`,description:`${i.metadata.repositoryName}/${i.metadata.owner} #${i.metadata.prNumber}`,picked:!1,metadata:i.metadata})}});const n=await Promise.all(r.map(async i=>{const s=i.metadata,c=this._githubRepositories.find(D=>D.remote.owner.toLowerCase()===s.owner.toLowerCase()&&D.remote.repositoryName.toLowerCase()===s.repositoryName.toLowerCase());if(!c)return i;const{remote:v,query:w,schema:T}=await c.ensure();try{const{data:D}=await w({query:T.PullRequestState,variables:{owner:v.owner,name:v.repositoryName,number:s.prNumber}});i.legacy=D.repository.pullRequest.state!=="OPEN"}catch{}return i}));return n.forEach(i=>{i.legacy?i.picked=!0:i.description=`${i.description} is still Open`}),n}async getRemoteDeletionItems(){const t=await this.repository.getConfigs(),e=new Map;t.forEach(n=>{const i=n.key;let s=/^branch\.(.*)\.(.*)$/.exec(i);if(s&&s.length===3){const c=s[1];if(s[2]==="remote"){const v=n.value;e.has(v)||e.set(v,{branches:new Set}),e.get(v).branches.add(c)}}if(s=/^remote\.(.*)\.(.*)$/.exec(i),s&&s.length===3){const c=s[1];e.has(c)||e.set(c,{branches:new Set});const v=e.get(c);s[2]==="github-pr-remote"&&(v.createdForPullRequest=n.value==="true"),s[2]==="url"&&(v.url=n.value)}});const r=[];return e.forEach((n,i)=>{if(n.branches.size===0){let s=n.createdForPullRequest?"":"Not created by GitHub Pull Request extension";n.url&&(s=s?s+" "+n.url:n.url),r.push({label:i,description:s,picked:n.createdForPullRequest,remote:i})}}),r}async deleteLocalBranchesNRemotes(){return new Promise(async t=>{const e=u.window.createQuickPick();e.canSelectMany=!0,e.ignoreFocusOut=!0,e.placeholder="Choose local branches you want to delete permanently",e.show(),e.busy=!0;const r=await this.getBranchDeletionItems();e.items=r,e.selectedItems=r.filter(i=>i.picked),e.busy=!1;let n=!0;e.onDidAccept(async()=>{if(n){const i=e.selectedItems;if(i.length){e.busy=!0;try{await Promise.all(i.map(async c=>{await this.repository.deleteBranch(c.label,!0)})),e.busy=!1}catch(c){e.hide(),u.window.showErrorMessage(`Deleting branches failed: ${c}`)}}n=!1,e.busy=!0;const s=await this.getRemoteDeletionItems();s?(e.placeholder="Choose remotes you want to delete permanently",e.busy=!1,e.items=s,e.selectedItems=s.filter(c=>c.picked)):e.hide()}else{const i=e.selectedItems;i.length&&(e.busy=!0,await Promise.all(i.map(async s=>{await this.repository.removeRemote(s.label)})),e.busy=!1),e.hide()}}),e.onDidHide(()=>{t()})})}async getPullRequestRepositoryDefaultBranch(t){return await t.githubRepository.getDefaultBranch()}async getPullRequestRepositoryAccessAndMergeMethods(t){return await t.githubRepository.getRepoAccessAndMergeMethods()}async fulfillPullRequestMissingInfo(t){try{if(!t.isResolved())return;a.debug("Fulfill pull request missing info - start",sr.ID);const e=t.githubRepository,{octokit:r,remote:n}=await e.ensure();if(!t.base){const{data:i}=await r.pulls.get({owner:n.owner,repo:n.repositoryName,pull_number:t.number});t.update(vn(i,e))}if(!t.mergeBase){const{data:i}=await r.repos.compareCommits({repo:n.repositoryName,owner:n.owner,base:`${t.base.repositoryCloneUrl.owner}:${t.base.ref}`,head:`${t.head.repositoryCloneUrl.owner}:${t.head.ref}`});t.mergeBase=i.merge_base_commit.sha}}catch(e){u.window.showErrorMessage(`Fetching Pull Request merge base failed: ${Q(e)}`)}a.debug("Fulfill pull request missing info - done",sr.ID)}async resolveItem(t,e){let r=this._githubRepositories.find(n=>n.remote.owner.toLowerCase()===t.toLowerCase()&&n.remote.repositoryName.toLowerCase()===e.toLowerCase());return r||(r=this.createGitHubRepositoryFromOwnerName(t,e)),r}async resolvePullRequest(t,e,r){const n=await this.resolveItem(t,e);if(n)return n.getPullRequest(r)}async resolveIssue(t,e,r,n=!1){const i=await this.resolveItem(t,e);if(i)return i.getIssue(r,n)}async resolveUser(t,e,r){a.debug(`Fetch user ${r}`,sr.ID);const n=this.createGitHubRepositoryFromOwnerName(t,e),{query:i,schema:s}=await n.ensure();try{const{data:c}=await i({query:s.GetUser,variables:{login:r}});return _p(c,n)}catch(c){console.log(c)}}async getMatchingPullRequestMetadataForBranch(){return!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name?null:await nr.getMatchingPullRequestMetadataForBranch(this.repository,this.repository.state.HEAD.name)}async getMatchingPullRequestMetadataFromGitHub(){if(!this.repository||!this.repository.state.HEAD||!this.repository.state.HEAD.name||!this.repository.state.HEAD.upstream)return null;for(const t of this.gitHubRepositories)if(t.remote.remoteName===this.repository.state.HEAD.upstream.remote){const e=await t.getPullRequestForBranch(this.repository.state.HEAD.upstream.name);if(e&&e.length>0)return{owner:t.remote.owner,repositoryName:t.remote.repositoryName,prNumber:e[0].number,model:e[0]};break}return null}async checkoutExistingPullRequestBranch(t){return await nr.checkoutExistingPullRequestBranch(this.repository,t)}async getBranchNameForPullRequest(t){return await nr.getBranchNRemoteForPullRequest(this.repository,t)}async fetchAndCheckout(t){await nr.fetchAndCheckout(this.repository,this._allGitHubRemotes,t)}async checkout(t){return this.repository.checkout(t)}async checkoutDefaultBranch(t){var e;try{const r=await this.repository.getBranch(t);if(((e=this.repository.state.HEAD)==null?void 0:e.name)===r.name){u.window.showInformationMessage("The default branch is already checked out.");return}r.upstream&&t===r.upstream.name?await this.repository.checkout(t):await u.commands.executeCommand("git.checkout")}catch(r){if(r.gitErrorCode&&r.gitErrorCode===et.DirtyWorkTree){u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}u.window.showErrorMessage(`Exiting failed: ${r}`)}}createGitHubRepository(t,e){return new Un(t,e,this.telemetry)}createGitHubRepositoryFromOwnerName(t,e){const r=`https://github.com/${t}/${e}`;return new Un(new Zi(e,r,new Ur(r)),this._credentialStore,this.telemetry)}async findUpstreamForItem(t){let e,r;for(const i of this.gitHubRepositories){if(!e&&i.remote.owner===t.remote.owner&&i.remote.repositoryName===t.remote.repositoryName){e=i;continue}const s=await i.getRepositoryForkDetails();if(s&&s.isFork&&s.parent.owner.login===t.remote.owner&&s.parent.name===t.remote.repositoryName){const c=await i.getViewerPermission();if(c===Lt.Admin||c===Lt.Maintain||c===Lt.Write){r=i.remote;break}}}let n=!1;if(e&&!r){const i=await t.githubRepository.getViewerPermission();(i===Lt.Read||i===Lt.Triage||i===Lt.Unknown)&&(n=!0)}return{needsFork:n,upstream:e,remote:r}}async forkWithProgress(t,e,r,n){t.report({message:`Forking ${r}...`});const i=await e.fork();if(t.report({increment:50}),!i){u.window.showErrorMessage(`Unable to create a fork of ${r}. Check that your GitHub credentials are correct.`);return}const s=n.state.remotes.length>1?"origin":n.state.remotes[0].name;return t.report({message:"Adding remotes. This may take a few moments."}),await n.renameRemote(s,"upstream"),await n.addRemote(s,i),await new Promise(c=>{if(this.gitHubRepositories.length===0){const v=this.onDidChangeRepositories(()=>{this.gitHubRepositories.length>0&&(v.dispose(),c())})}else c()}),t.report({increment:50}),s}async doFork(t,e,r){return u.window.withProgress({location:u.ProgressLocation.Notification,title:"Creating Fork"},async n=>{try{return this.forkWithProgress(n,t,e,r)}catch(i){u.window.showErrorMessage(`Creating fork failed: ${i}`)}})}async tryOfferToFork(t){const e=`${t.remote.owner}/${t.remote.repositoryName}`,r="Fork",n="Don't Fork";switch(await u.window.showInformationMessage(`You don't have permission to push to ${e}. Do you want to fork ${e}? This will modify your git remotes to set \`origin\` to the fork, and \`upstream\` to ${e}.`,{modal:!0},r,n)){case r:return this.doFork(t,e,this.repository);case n:return!1;default:return}}dispose(){this._subs.forEach(t=>t.dispose())}};let jn=sr;Xe(jn,"ID","FolderRepositoryManager");function Qv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}const hf=t=>{const{currentUser:e=null}=t.octokit;return e&&t.remote.owner===e.login},zn=t=>({remote:{remoteName:e}})=>e===t,xl=t=>{const e=t.indexOf(`
`);return{title:e===-1?t:t.substr(0,e),body:e===-1?"":t.slice(e+1).trim()}};var mf=Object.defineProperty,qt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class pf extends Qu{constructor(e,r,n,i){super(e);this._folderRepositoryManager=r,this._pullRequestDefaults=n,qt(this,"viewType","github:createPullRequest"),qt(this,"_onDone",new u.EventEmitter),qt(this,"onDone",this._onDone.event),qt(this,"_onDidChangeBaseRemote",new u.EventEmitter),qt(this,"onDidChangeBaseRemote",this._onDidChangeBaseRemote.event),qt(this,"_onDidChangeBaseBranch",new u.EventEmitter),qt(this,"onDidChangeBaseBranch",this._onDidChangeBaseBranch.event),qt(this,"_onDidChangeCompareRemote",new u.EventEmitter),qt(this,"onDidChangeCompareRemote",this._onDidChangeCompareRemote.event),qt(this,"_onDidChangeCompareBranch",new u.EventEmitter),qt(this,"onDidChangeCompareBranch",this._onDidChangeCompareBranch.event),qt(this,"_firstLoad",!0),qt(this,"_compareBranch"),qt(this,"_compareRemote"),this._compareBranch=i}resolveWebviewView(e,r,n){super.resolveWebviewView(e,r,n),e.webview.html=this._getHtmlForWebview(),this._firstLoad?(this._firstLoad=!1,this.initializeParams(!0)):this.initializeParams()}get compareBranch(){return this._compareBranch}set compareBranch(e){var r,n;e&&((e==null?void 0:e.name)!==this._compareBranch.name||((r=e==null?void 0:e.upstream)==null?void 0:r.remote)!==((n=this._compareBranch.upstream)==null?void 0:n.remote))&&(this._compareBranch=e,this.initializeParams(),this._onDidChangeCompareBranch.fire(this._compareBranch.name))}get compareRemote(){return this._compareRemote}set compareRemote(e){var r,n;e&&(e.owner!==((r=this._compareRemote)==null?void 0:r.owner)||e.repositoryName!==((n=this._compareRemote)==null?void 0:n.repositoryName))&&(this._compareRemote=e,this.initializeParams(),this._onDidChangeCompareRemote.fire(this._compareRemote))}show(e){e&&(this.compareBranch=e),super.show()}async getTitle(){var e,r,n,i,s;const c=await this._folderRepositoryManager.getOrigin(this.compareBranch);let v=!1;if((e=this.compareBranch)==null?void 0:e.upstream){const w=this._folderRepositoryManager.findRepo(zn(this.compareBranch.upstream.remote));if(w){const T=`${w.remote.owner}:${(r=this.compareBranch.name)!=null?r:""}`;try{(await c.compareCommits(`${this._pullRequestDefaults.owner}:${this._pullRequestDefaults.base}`,T)).total_commits>1&&(v=await c.getDefaultBranch()!==this.compareBranch.name)}catch(D){}}}return v?(i=(n=this.compareBranch)==null?void 0:n.name)!=null?i:"":((s=this.compareBranch)==null?void 0:s.name)?xl(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).title:""}async getPullRequestTemplate(){const e=await this._folderRepositoryManager.getPullRequestTemplates();if(e[0])try{return(await u.workspace.fs.readFile(e[0])).toString()}catch(r){a.appendLine(`Reading pull request template failed: ${r}`);return}}async getDescription(){var e;const r=await this.getPullRequestTemplate();return r||(((e=this.compareBranch)==null?void 0:e.name)?xl(await this._folderRepositoryManager.getTipCommitMessage(this.compareBranch.name)).body:"")}async initializeParams(e=!1){var r,n;if(!this.compareBranch)throw new Dl(this._folderRepositoryManager.repository);const i={owner:this._pullRequestDefaults.owner,repositoryName:this._pullRequestDefaults.repo},s=await this._folderRepositoryManager.getOrigin(this.compareBranch),c={owner:s.remote.owner,repositoryName:s.remote.repositoryName},[v,w,T,D]=await Promise.all([this._folderRepositoryManager.getGitHubRemotes(),this._folderRepositoryManager.listBranches(this._pullRequestDefaults.owner,this._pullRequestDefaults.repo),this.getTitle(),this.getDescription()]),H=v.map(W=>({owner:W.owner,repositoryName:W.repositoryName}));let V=w;c.owner!==i.owner&&(V=await this._folderRepositoryManager.listBranches(c.owner,c.repositoryName)),this.compareBranch.name&&!V.includes(this.compareBranch.name)&&(V.push(this.compareBranch.name),V.sort()),this._postMessage({command:e?"reset":"pr.initialize",params:{availableRemotes:H,defaultBaseRemote:i,defaultBaseBranch:this._pullRequestDefaults.base,defaultCompareRemote:c,defaultCompareBranch:(r=this.compareBranch.name)!=null?r:"",branchesForRemote:w,branchesForCompare:V,defaultTitle:T,defaultDescription:D,compareBranch:(n=this.compareBranch.name)!=null?n:"",isDraft:!1}})}async changeRemote(e,r){var n;const{owner:i,repositoryName:s}=e.args,c=this._folderRepositoryManager.findRepo(T=>i===T.remote.owner&&s===T.remote.repositoryName);if(!c)throw new Error("No matching GitHub repository found.");const v=await c.getDefaultBranch(),w=await this._folderRepositoryManager.listBranches(i,s);if(!r&&((n=this.compareBranch)==null?void 0:n.name)&&!w.includes(this.compareBranch.name)&&(w.push(this.compareBranch.name),w.sort()),r)this._onDidChangeBaseRemote.fire({owner:i,repositoryName:s}),this._onDidChangeBaseBranch.fire(v);else{const T=this.compareRemote;this.compareRemote={owner:i,repositoryName:s},T&&(this.compareRemote.repositoryName!==T.repositoryName||this.compareRemote.owner!==T.owner)&&(this.compareBranch=await this._folderRepositoryManager.repository.getBranch(v))}return this._replyMessage(e,{branches:w,defaultBranch:r?v:this.compareBranch})}async create(e){var r,n;try{let i,s;if(!((r=this.compareBranch)==null?void 0:r.name)){this._throwError(e,"Please create a branch.");return}if(this.compareBranch.type===Pe.RemoteHead){const T=this.compareBranch.name.indexOf("/");i=this.compareBranch.name.substring(T+1),s=this.compareBranch.name.substring(0,T)}else i=this.compareBranch.name,s=(n=this.compareBranch.upstream)==null?void 0:n.remote;if(!s)if(await u.window.showInformationMessage(`There is no upstream branch for '${i}'.

Do you want to publish it and then create the pull request?`,{modal:!0},"Publish branch")==="Publish branch"){let D;this._folderRepositoryManager.repository.state.remotes.length===1?D=this._folderRepositoryManager.repository.state.remotes[0].name:this._folderRepositoryManager.repository.state.remotes.length>1&&(D=await u.window.showQuickPick(this._folderRepositoryManager.repository.state.remotes.map(H=>H.name),{placeHolder:"Remote to push to"})),D?await this._folderRepositoryManager.repository.push(D,i,!0):this._throwError(e,"The current repository has no remotes to push to. Please set up a remote and try again."),this._folderRepositoryManager.repository.state.HEAD&&(s=D)}else{this._throwError(e,"No upstream for the compare branch.");return}const c=this._folderRepositoryManager.findRepo(zn(s));if(!c)throw new Error(`Unable to find GitHub repository matching '${s}'.`);const v=`${c.remote.owner}:${i}`,w=await this._folderRepositoryManager.createPullRequest({...e.args,head:v});w?(await this._replyMessage(e,{}),await nr.associateBranchWithPullRequest(this._folderRepositoryManager.repository,w,i),this._onDone.fire(w)):this._throwError(e,"There must be a difference in commits to create a pull request.")}catch(i){this._throwError(e,i.message)}}async _onDidReceiveMessage(e){var r;if(await super._onDidReceiveMessage(e)===this.MESSAGE_UNHANDLED)switch(e.command){case"pr.cancelCreate":return u.commands.executeCommand("setContext","github:createPullRequest",!1),this._onDone.fire(void 0),this._replyMessage(e,void 0);case"pr.create":return this.create(e);case"pr.changeBaseRemote":return this.changeRemote(e,!0);case"pr.changeBaseBranch":return this._onDidChangeBaseBranch.fire(e.args),this._replyMessage(e,void 0);case"pr.changeCompareRemote":return this.changeRemote(e,!1);case"pr.changeCompareBranch":return this.compareBranch=await this._folderRepositoryManager.repository.getBranch((r=e.args.name)!=null?r:e.args),this._replyMessage(e,void 0);default:u.window.showErrorMessage("Unsupported webview message")}}_getHtmlForWebview(){const e=ba(),r=u.Uri.joinPath(this._extensionUri,"dist","webview-create-pr-view.js");return`<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src vscode-resource: https:; script-src 'nonce-${e}'; style-src vscode-resource: 'unsafe-inline' http: https: data:;">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

		<title>Create Pull Request</title>
	</head>
	<body>
		<div id="app"></div>
		<script nonce="${e}" src="${this._webview.asWebviewUri(r).toString()}"></script>
	</body>
</html>`}}var ff=Object.defineProperty,La=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ff(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class gf{constructor(){La(this,"fileViewedState",new Map),La(this,"_onDidChangeFileDecorations",new u.EventEmitter),La(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileViewedState(e,r,n,i){this.fileViewedState.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e)}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Pr)return;const n=it(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileViewedState.get(i)===ft.VIEWED)return{propagate:!1,badge:"\u2713",tooltip:"Viewed"}}}}const qa=new gf;var vf=Object.defineProperty,Ua=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class yf{constructor(){Ua(this,"fileHasComments",new Map),Ua(this,"_onDidChangeFileDecorations",new u.EventEmitter),Ua(this,"onDidChangeFileDecorations",this._onDidChangeFileDecorations.event)}updateFileComments(e,r,n,i){const s=`${r}:${n}`;this.fileHasComments.get(s)!==i&&(this.fileHasComments.set(`${r}:${n}`,i),this._onDidChangeFileDecorations.fire(e))}provideFileDecoration(e,r){const n=it(e);if(n){const i=`${n.prNumber}:${n.fileName}`;if(this.fileHasComments.get(i))return{propagate:!1,tooltip:"Commented",badge:"\u{1F4AC}"}}}}const Ml=new yf;var wf=Object.defineProperty,hs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?wf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ot{constructor(){hs(this,"childrenDisposables"),hs(this,"parent"),hs(this,"label"),hs(this,"accessibilityInformation")}getParent(){if(this.parent instanceof Ot)return this.parent}async reveal(e,r){return this.parent.reveal(e||this,r)}refresh(e){return this.parent.refresh(e)}async getChildren(){return[]}dispose(){this.childrenDisposables&&(this.childrenDisposables.forEach(e=>e.dispose()),this.childrenDisposables=[])}}var bf=Object.defineProperty,ut=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);function Ll(t){const e=u.window.activeTextEditor,r={preserveFocus:!0,viewColumn:u.ViewColumn.Active};return e&&e.document.uri.path===t.path&&(r.selection=e.selection),{command:"vscode.open",arguments:[t,r],title:"Open File"}}async function $a(t,e,r,n,i){let s=await fr(e,t.repository)||e,c=await fr(r,t.repository)||r;(s.scheme==="data"||c.scheme==="data")&&(i===Ce.ADD&&(s=Ar),i===Ce.DELETE&&(c=Ar));const v=r.path.split("/");return{command:"vscode.diff",arguments:[s,c,`${v[v.length-1]} (Pull Request)`,n],title:"Open Changed File in PR"}}class pi extends Ot{constructor(e,r,n,i,s,c,v,w){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.previousFileName=s,this.blobUrl=c,this.filePath=v,this.parentFilePath=w,ut(this,"description"),ut(this,"iconPath"),ut(this,"command"),ut(this,"resourceUri"),ut(this,"contextValue"),ut(this,"childrenDisposables",[]),ut(this,"_viewed");var T;const D=(T=this.pullRequest.fileChangeViewedState[i])!=null?T:ft.UNVIEWED;this.contextValue=`filechange:${Ce[n]}:${D===ft.VIEWED?"viewed":"unviewed"}`,this.label=h.basename(i),this.description=u.workspace.asRelativePath(h.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.resourceUri=Fr(u.Uri.parse(this.blobUrl),r.number,i,n),this.updateViewed(D),this.command={command:"pr.openFileOnGitHub",title:"Open File on GitHub",arguments:[this]},this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(H=>{const V=H.changed.find(W=>W.fileName===this.fileName);V&&(this.updateViewed(V.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Ce[this.status]}:${e===ft.VIEWED?"viewed":"unviewed"}`,qa.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}getTreeItem(){return this}}class ql extends Ot{constructor(e,r,n,i,s,c,v,w,T,D){super();this.parent=e,this.pullRequest=r,this.status=n,this.fileName=i,this.blobUrl=s,this.filePath=c,this.parentFilePath=v,this.diffHunks=w,this.comments=T,this.sha=D,ut(this,"description"),ut(this,"iconPath"),ut(this,"resourceUri"),ut(this,"parentSha"),ut(this,"contextValue"),ut(this,"command"),ut(this,"opts"),ut(this,"childrenDisposables",[]),ut(this,"_viewed");var H;const V=(H=this.pullRequest.fileChangeViewedState[i])!=null?H:ft.UNVIEWED;this.contextValue=`filechange:${Ce[n]}:${V===ft.VIEWED?"viewed":"unviewed"}`,this.label=h.basename(i),this.description=u.workspace.asRelativePath(h.dirname(i),!1),this.description==="."&&(this.description=""),this.iconPath=u.ThemeIcon.File,this.opts={preserveFocus:!0},this.updateShowOptions(),this.resourceUri=Fr(u.Uri.file(this.fileName),this.pullRequest.number,this.fileName,this.status),this.updateViewed(V),this.childrenDisposables.push(this.pullRequest.onDidChangeReviewThreads(W=>{[...W.added,...W.removed].some(Z=>Z.path===this.fileName)&&this.updateShowOptions()})),this.childrenDisposables.push(this.pullRequest.onDidChangeFileViewedState(W=>{const Z=W.changed.find(ee=>ee.fileName===this.fileName);Z&&(this.updateViewed(Z.viewed),this.refresh(this))})),this.accessibilityInformation={label:`View diffs and comments for file ${this.label}`,role:"link"}}updateViewed(e){this._viewed!==e&&(this._viewed=e,this.contextValue=`filechange:${Ce[this.status]}:${e===ft.VIEWED?"viewed":"unviewed"}`,qa.updateFileViewedState(this.resourceUri,this.pullRequest.number,this.fileName,e))}updateShowOptions(){const e=this.pullRequest.reviewThreadsCache,n=(B(e,i=>i.path)[this.fileName]||[]).filter(i=>!i.isOutdated);Ml.updateFileComments(this.resourceUri,this.pullRequest.number,this.fileName,n.length>0),n.length?(n.sort((i,s)=>i.line-s.line),this.opts.selection=new u.Range(n[0].line,0,n[0].line,0)):delete this.opts.selection}getTreeItem(){return this}openFileCommand(){return Ll(this.filePath)}async openDiff(e){var r;const n=await $a(e,this.parentFilePath,this.filePath,this.opts,this.status);u.commands.executeCommand(n.command,...(r=n.arguments)!=null?r:[])}}class ms extends ql{constructor(e,r,n,i,s,c,v,w,T,D,H,V,W,Z){super(r,n,i,s,v,w,T,V,W,Z);this.folderRepositoryManager=e,this.parent=r,this.pullRequest=n,this.status=i,this.fileName=s,this.previousFileName=c,this.blobUrl=v,this.filePath=w,this.parentFilePath=T,this.isPartial=D,this.patch=H,this.diffHunks=V,this.comments=W,this.sha=Z}getTreeItem(){return this}async resolve(){this.command=await $a(this.folderRepositoryManager,this.parentFilePath,this.filePath,void 0,this.status)}}class Qn extends ql{constructor(e,r,n,i,s,c,v,w,T,D=[],H,V){super(e,n,i,s,c,v,w,T,D,H);this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.status=i,this.fileName=s,this.blobUrl=c,this.filePath=v,this.parentFilePath=w,this.diffHunks=T,this.comments=D,this.sha=H,this.isCurrent=V,ut(this,"_useViewChangesCommand",!1)}useViewChangesCommand(){this._useViewChangesCommand=!0}async alternateCommand(){if(this.status===Ce.DELETE||this.status===Ce.ADD){const W=this.parentFilePath.with({query:JSON.stringify({path:null,commit:null})});return{command:"vscode.diff",arguments:this.status===Ce.DELETE?[this.parentFilePath,W,`${this.fileName}`,{preserveFocus:!0}]:[W,this.parentFilePath,`${this.fileName}`,{preserveFocus:!0}],title:"Open Diff"}}const{path:e,ref:r,commit:n,rootPath:i}=Wt(this.filePath.query),s=`${n}^`,c={path:e,ref:r,commit:s,base:!0,isOutdated:!0,rootPath:i},v=this.filePath.with({query:JSON.stringify(c)});let w=this.filePath;this.isCurrent&&(w=u.Uri.file(h.posix.join(c.rootPath,c.path)));const T={preserveFocus:!0},D=this.pullRequest.reviewThreadsCache,V=(B(D,W=>W.path)[this.fileName]||[]).filter(W=>W.isOutdated).sort((W,Z)=>W.line-Z.line);return V.length&&(T.selection=new u.Range(V[0].originalLine,0,V[0].originalLine,0)),{command:"vscode.diff",arguments:[v,w,`${this.fileName} from ${(n||"").substr(0,8)}`,T],title:"View Changes"}}async resolve(){this._useViewChangesCommand?this.command=await this.alternateCommand():u.workspace.getConfiguration().get("git.openDiffOnClick",!0)?this.command=await $a(this.pullRequestManager,this.parentFilePath,this.filePath,this.opts,this.status):this.command=this.openFileCommand()}}class kf extends Ot{constructor(e,r,n,i,s,c){super();this.parent=e,this.fileName=r,this.previousFileName=n,this.status=i,this.baseBranch=s,this.headBranch=c,ut(this,"description"),ut(this,"iconPath"),ut(this,"resourceUri"),ut(this,"command"),this.label=r,this.iconPath=u.ThemeIcon.File,this.resourceUri=u.Uri.file(r).with({scheme:Pr,query:JSON.stringify({status:i,fileName:r})});let v=u.Uri.file(r).with({scheme:Pr,query:JSON.stringify({fileName:r,branch:s})}),w=u.Uri.file(r).with({scheme:Pr,query:JSON.stringify({fileName:r,branch:c})});switch(i){case Ce.ADD:v=u.Uri.file(r).with({scheme:Pr,query:JSON.stringify({fileName:r,branch:s,isEmpty:!0})});break;case Ce.RENAME:v=u.Uri.file(n).with({scheme:Pr,query:JSON.stringify({fileName:n,branch:s,isEmpty:!0})});break;case Ce.DELETE:w=u.Uri.file(r).with({scheme:Pr,query:JSON.stringify({fileName:r,branch:c,isEmpty:!0})});break}this.command={title:"Open Diff",command:"vscode.diff",arguments:[v,w,`${r} (Pull Request Preview)`]}}getTreeItem(){return this}}function Ha(t){return t.filter(e=>e instanceof Qn)}var _f=Object.defineProperty,Wn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?_f(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Pr="githubpr";class Ef{constructor(e,r,n,i,s,c,v){this.repository=e,this.baseOwner=r,this.baseBranchName=n,this._compareOwner=i,this.compareBranchName=s,this.compareHasUpstream=c,this.folderRepoManager=v,Wn(this,"_view"),Wn(this,"_onDidChangeTreeData",new u.EventEmitter),Wn(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Wn(this,"_contentProvider"),Wn(this,"_disposables",[]),Wn(this,"_gitHubRepository"),this._view=u.window.createTreeView("github:compareChanges",{treeDataProvider:this}),this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(w=>w.remote.owner===this._compareOwner),this._disposables.push(this._view)}get view(){return this._view}updateBaseBranch(e){this.baseBranchName=e,this._onDidChangeTreeData.fire()}updateBaseOwner(e){this.baseOwner=e,this._onDidChangeTreeData.fire()}async reveal(e,r){return this._view.reveal(e,r)}refresh(){this._onDidChangeTreeData.fire()}async updateHasUpstream(e){var r;if(((r=this.repository.state.HEAD)==null?void 0:r.name)===e){const n=await this.repository.getBranch(e);this.compareHasUpstream=!!n.upstream}else this.compareHasUpstream=!0}async updateCompareBranch(e){await this.updateHasUpstream(e),this.compareBranchName=e,this._onDidChangeTreeData.fire()}get compareOwner(){return this._compareOwner}set compareOwner(e){this._gitHubRepository=this.folderRepoManager.gitHubRepositories.find(r=>r.remote.owner===e),this._contentProvider&&this._gitHubRepository&&(this._contentProvider.gitHubRepository=this._gitHubRepository),this._compareOwner=e,this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async getChildren(){if(this.compareHasUpstream)u.commands.executeCommand("setContext","github:noUpstream",!1);else return u.commands.executeCommand("setContext","github:noUpstream",!0),this._view.message=void 0,[];if(!this._gitHubRepository)return[];this._contentProvider||(this._contentProvider=new Rf(this._gitHubRepository),this._disposables.push(u.workspace.registerTextDocumentContentProvider(Pr,this._contentProvider)));const{octokit:e,remote:r}=await this._gitHubRepository.ensure();try{const{data:n}=await e.repos.compareCommits({repo:r.repositoryName,owner:r.owner,base:`${this.baseOwner}:${this.baseBranchName}`,head:`${this.compareOwner}:${this.compareBranchName}`});return n.files.length?this._view.message=void 0:this._view.message=`There are no commits between the base '${this.baseBranchName}' branch and the comparing '${this.compareBranchName}' branch`,n.files.map(i=>new kf(this,i.filename,i.previous_filename,vr(i.status),n.merge_base_commit.sha,this.compareBranchName))}catch(n){return a.appendLine(`Comparing changes failed: ${n}`),[]}}dispose(){this._disposables.forEach(e=>e.dispose()),this._contentProvider=void 0}}class Rf{constructor(e){this.gitHubRepository=e}async provideTextDocumentContent(e,r){var n;const i=Zr(e);if(!i||i.isEmpty)return"";const{octokit:s,remote:c}=await this.gitHubRepository.ensure(),v=await s.repos.getContent({owner:c.owner,repo:c.repositoryName,path:i.fileName,ref:i.branch}),w=(n=v.data.content)!=null?n:"";return Se.Buffer.from(w,v.data.encoding).toString()}}var Cf=Object.defineProperty,fi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Cf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Sf{constructor(e){this.repository=e,fi(this,"_disposables",[]),fi(this,"_createPRViewProvider"),fi(this,"_treeView"),fi(this,"_onDidCreate",new u.EventEmitter),fi(this,"onDidCreate",this._onDidCreate.event)}registerListeners(e){this._disposables.push(this._createPRViewProvider.onDone(async r=>{var n,i;u.commands.executeCommand("setContext","github:createPullRequest",!1),(n=this._createPRViewProvider)==null||n.dispose(),this._createPRViewProvider=void 0,(i=this._treeView)==null||i.dispose(),this._treeView=void 0,this._disposables.forEach(s=>s.dispose()),r&&this._onDidCreate.fire(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareBranch(r=>{var n;(n=this._treeView)==null||n.updateCompareBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeCompareRemote(r=>{this._treeView&&(this._treeView.compareOwner=r.owner)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseBranch(r=>{var n;(n=this._treeView)==null||n.updateBaseBranch(r)})),this._disposables.push(this._createPRViewProvider.onDidChangeBaseRemote(r=>{var n;(n=this._treeView)==null||n.updateBaseOwner(r.owner)})),e&&this._disposables.push(this.repository.state.onDidChange(r=>{this._createPRViewProvider&&this.repository.state.HEAD&&(this._createPRViewProvider.compareBranch=this.repository.state.HEAD)}))}get isCreatingPullRequest(){return!!this._createPRViewProvider}async ensureDefaultsAreLocal(e,r){if(e.gitHubRepositories.some(n=>n.remote.owner===r.owner&&n.remote.repositoryName===r.repo))return r;{const n=await e.getOrigin(),i=await e.getMetadata(n.remote.remoteName);return{owner:i.owner.login,repo:i.name,base:i.default_branch}}}async create(e,r,n){var i;u.commands.executeCommand("setContext","github:createPullRequest",!0);const s=(i=n?await r.repository.getBranch(n):void 0)!=null?i:r.repository.state.HEAD;if(!this._createPRViewProvider){const c=await this.ensureDefaultsAreLocal(r,await r.getPullRequestDefaults(s));this._createPRViewProvider=new pf(e,r,c,s);const v=await r.getOrigin(s);this._treeView=new Ef(this.repository,c.owner,c.base,v.remote.owner,s.name,!!s.upstream,r),this.registerListeners(!n),this._disposables.push(u.window.registerWebviewViewProvider(this._createPRViewProvider.viewType,this._createPRViewProvider))}this._createPRViewProvider.show(s)}}var Tf=Object.defineProperty,Ul=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Tf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $l{constructor(e,r,n,i,s=`${e}:${r}`){this.owner=e,this.name=r,this.description=n,this.remote=i,this.label=s,Ul(this,"detail"),Ul(this,"picked")}static fromRemote(e){return new this(e.owner,e.repositoryName,e.url,e)}}function gi(t){return t===void 0||t===0?0:t-1}function Wv(t,e){for(let r=0;r<t.length;r++){const n=t[r];for(let i=0;i<n.diffLines.length;i++)if(n.diffLines[i].positionInHunk===e)return n.diffLines[i]}}function Ga(t,e){const r=kt(t);let n=r.next(),i=0;for(;!n.done;){const s=n.value;if(!(s.oldLineNumber>e))if(s.oldLineNumber+s.oldLength-1<e)i+=s.newLength-s.oldLength;else return i+=s.newLength-s.oldLength,e+i;n=r.next()}return e+i}function Va(t,e){const r=kt(t);let n=r.next(),i=0;for(;!n.done;){const s=n.value;if(!(s.newLineNumber>e))if(s.newLineNumber+s.newLength-1<e)i+=s.oldLength-s.newLength;else return i+=s.oldLength-s.newLength,e+i;n=r.next()}return e+i}function Hl(t,e){const r=[];for(let n=0;n<t.length;n++){const i=t[n];let s,c;if(e){let v;for(let w=0;w<i.diffLines.length;w++){const T=i.diffLines[w];T.type===We.Delete?(s!==void 0||(s=gi(T.oldLineNumber)),v=gi(T.oldLineNumber)):s!==void 0&&v!==void 0&&(r.push(new u.Range(s,0,v,0)),s=void 0,v=void 0)}s!==void 0&&v!==void 0&&(r.push(new u.Range(s,0,v,0)),s=void 0,v=void 0)}else i.newLineNumber&&(s=gi(i.newLineNumber),c=gi(i.newLength),r.push(new u.Range(s,0,s+c,0)))}return r}var Nf=Object.defineProperty,hr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Nf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Pf{constructor(e,r,n,i){this._reviewManager=e,this._reposManager=r,this._repository=n,this._localFileChanges=i,hr(this,"_localToDispose",[]),hr(this,"_onDidChangeComments",new u.EventEmitter),hr(this,"onDidChangeComments",this._onDidChangeComments.event),hr(this,"_commentHandlerId"),hr(this,"_commentController"),hr(this,"_workspaceFileChangeCommentThreads",{}),hr(this,"_reviewSchemeFileChangeCommentThreads",{}),hr(this,"_obsoleteFileChangeCommentThreads",{}),hr(this,"_visibleNormalTextEditors",[]),hr(this,"_pendingCommentThreadAdds",[]),this._commentController=u.comments.createCommentController(`github-review-${r.activePullRequest.number}`,r.activePullRequest.title),this._commentController.commentingRangeProvider=this,this._commentController.reactionHandler=this.toggleReaction.bind(this),this._localToDispose.push(this._commentController),this._commentHandlerId=ju(),xt(this._commentHandlerId,this)}get commentController(){return this._commentController}async initialize(){this._visibleNormalTextEditors=u.window.visibleTextEditors.filter(e=>e.document.uri.scheme!=="comment"),await this._reposManager.activePullRequest.validateDraftMode(),await this.initializeCommentThreads(),await this.registerListeners()}createOutdatedCommentThread(e,r){const n=r.comments[0].originalCommitId,i=u.Uri.file(h.join(`commit~${n.substr(0,8)}`,e)),s=St(i,e,void 0,n,!0,{base:r.diffSide===Qe.LEFT},this._repository.rootUri),c=new u.Range(new u.Position(r.originalLine-1,0),new u.Position(r.originalLine-1,0));return di(s,c,r,this._commentController)}async createWorkspaceCommentThread(e,r,n){let i=n.line;const s=await this._repository.diffWithHEAD(r);s&&(i=Ga(s,n.line));const c=new u.Range(new u.Position(i-1,0),new u.Position(i-1,0));return di(e,c,n,this._commentController)}createReviewCommentThread(e,r,n){var i;if(!((i=this._reposManager.activePullRequest)==null?void 0:i.mergeBase))throw new Error("Cannot create review comment thread without an active pull request base.");const s=St(e,r,void 0,this._reposManager.activePullRequest.mergeBase,!1,{base:!0},this._repository.rootUri),c=new u.Range(new u.Position(n.line-1,0),new u.Position(n.line-1,0));return di(s,c,n,this._commentController)}async initializeCommentThreads(){if(!this._reposManager.activePullRequest||!this._reposManager.activePullRequest.isResolved())return;const e=this._reposManager.activePullRequest.reviewThreadsCache,r=B(e,n=>n.path);Object.keys(r).forEach(n=>{const i=r[n],s=i[0];if(s){const c=h.join(this._repository.rootUri.path,s.path).replace(/\\/g,"/"),v=this._repository.rootUri.with({path:c});let w=[],T=[],D=[];const H=i.map(async V=>{V.isOutdated?D.push(this.createOutdatedCommentThread(n,V)):V.diffSide===Qe.RIGHT?w.push(await this.createWorkspaceCommentThread(v,n,V)):T.push(this.createReviewCommentThread(v,n,V))});Promise.all(H),this._workspaceFileChangeCommentThreads[n]=w,this._reviewSchemeFileChangeCommentThreads[n]=T,this._obsoleteFileChangeCommentThreads[n]=D}})}async registerListeners(){this._localToDispose.push(this._reposManager.activePullRequest.onDidChangePendingReviewState(e=>{[this._workspaceFileChangeCommentThreads,this._obsoleteFileChangeCommentThreads,this._reviewSchemeFileChangeCommentThreads].forEach(r=>{for(const n in r)r[n].forEach(i=>{Ju(i,e),$n(i)})})})),this._localToDispose.push(this._reposManager.activePullRequest.onDidChangeReviewThreads(e=>{e.added.forEach(async r=>{const{path:n}=r,i=this._pendingCommentThreadAdds.findIndex(async v=>{const w=this.gitRelativeRootPath(v.uri.path);if(w!==r.path)return!1;const T=await this.getContentDiff(v.uri,w);return Va(T,v.range.start.line)+1===r.line});let s;if(i>-1)s=this._pendingCommentThreadAdds[i],s.threadId=r.id,s.comments=r.comments.map(v=>new vt(v,s)),this._pendingCommentThreadAdds.splice(i,1);else{const v=h.join(this._repository.rootUri.path,n).replace(/\\/g,"/"),w=this._repository.rootUri.with({path:v});r.isOutdated?s=this.createOutdatedCommentThread(n,r):r.diffSide===Qe.RIGHT?s=await this.createWorkspaceCommentThread(w,n,r):s=this.createReviewCommentThread(w,n,r)}const c=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Qe.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads;c[n]?c[n].push(s):c[n]=[s]}),e.changed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Qe.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(s=>s.threadId===r.id);if(i>-1){const s=n[r.path][i];Xu(s,r)}}),e.removed.forEach(r=>{const n=r.isOutdated?this._obsoleteFileChangeCommentThreads:r.diffSide===Qe.RIGHT?this._workspaceFileChangeCommentThreads:this._reviewSchemeFileChangeCommentThreads,i=n[r.path].findIndex(s=>s.threadId===r.id);if(i>-1){const s=n[r.path][i];n[r.path].splice(i,1),s.dispose()}})}))}visibleEditorsEqual(e,r){if(e=e.filter(n=>n.document.uri.scheme!=="comment"),r=r.filter(n=>n.document.uri.scheme!=="comment"),e=O(e,n=>n.document.uri.toString()),r=O(r,n=>n.document.uri.toString()),e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!r.find(s=>s.document.uri.toString()===e[n].document.uri.toString()))return!1;return!0}hasCommentThread(e){if(e.uri.scheme==="review")return!0;const r=u.workspace.getWorkspaceFolder(e.uri);return r?!!(e.uri.scheme===r.uri.scheme&&e.uri.fsPath.startsWith(this._repository.rootUri.fsPath)):!1}async provideCommentingRanges(e,r){let n=e.uri.query&&e.uri.query!==""?Wt(e.uri.query):void 0;if(n){const s=this.findMatchedFileChangeForReviewDiffView(this._localFileChanges,e.uri);if(s)return Hl(s.diffHunks,n.base)}const i=u.workspace.getWorkspaceFolder(e.uri);if(!!i&&e.uri.scheme===i.uri.scheme){if(!this._reposManager.activePullRequest.isResolved())return;const s=this.gitRelativeRootPath(e.uri.path),c=Ha(this._localFileChanges).find(w=>w.fileName===s),v=[];if(c){if(c.status===Ce.RENAME)return[];const w=await this.getContentDiff(e.uri,c.fileName),T=c.diffHunks;for(let D=0;D<T.length;D++){const H=T[D],V=Ga(w,H.newLineNumber),W=Ga(w,H.newLineNumber+H.newLength-1);V>0&&W>0&&v.push(new u.Range(V-1,0,W-1,0))}}return v}}async getContentDiff(e,r){var n;const i=u.window.visibleTextEditors.find(s=>s.document.uri.toString()===e.toString());if(!((n=this._reposManager.activePullRequest)==null?void 0:n.head))throw new Error("Cannot get content diff without an active pull request head.");if(i&&i.document.isDirty){const s=i.document.getText(),v=(await this._repository.getObjectDetails(this._reposManager.activePullRequest.head.sha,r)).object,w=await this._repository.hashObject(s);return await this._repository.diffBlobs(v,w)}else return await this._repository.diffWith(this._reposManager.activePullRequest.head.sha,r)}findMatchedFileChangeForReviewDiffView(e,r){const n=Wt(r.query),i=e.filter(s=>{if(s instanceof pi||s.fileName!==n.path)return!1;if(s.filePath.scheme!=="review"&&s.sha===n.commit)return!0;const c=s.filePath.query?JSON.parse(s.filePath.query):void 0;if(c&&c.commit===n.commit)return!0;const v=s.parentFilePath.query?JSON.parse(s.parentFilePath.query):void 0;return!!(v&&v.commit===n.commit)});if(i&&i.length)return i[0]}gitRelativeRootPath(e){return h.relative(this._repository.rootUri.path,e).replace(/\\/g,"/")}getCommentSide(e){return e.uri.scheme==="review"&&Wt(e.uri.query).base?Qe.LEFT:Qe.RIGHT}async startReview(e,r){const n=e.comments.length,i=this.optimisticallyAddComment(e,r,!0);try{if(n){const s=e.comments[0];if(s instanceof vt)await this._reposManager.activePullRequest.createCommentReply(r,s._rawComment.graphNodeId,!1);else throw new Error("Cannot reply to temporary comment")}else{const s=this.gitRelativeRootPath(e.uri.path),c=this.getCommentSide(e);this._pendingCommentThreadAdds.push(e);let v;if(c===Qe.RIGHT){const w=await this.getContentDiff(e.uri,s);v=Va(w,e.range.start.line)}else v=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,s,v+1,c)}}catch(s){u.window.showErrorMessage(`Starting review failed: ${s}`),e.comments=e.comments.map(c=>(c instanceof zt&&c.id===i&&(c.mode=u.CommentMode.Editing),c))}}async openReview(){await this._reviewManager.openDescription(),Kt.scrollToReview()}optimisticallyAddComment(e,r,n){const i=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),s=new zt(e,r,n,i);return this.updateCommentThreadComments(e,[...e.comments,s]),s.id}updateCommentThreadComments(e,r){e.comments=r,$n(e)}optimisticallyEditComment(e,r){const n=this._reposManager.getCurrentUser(this._reposManager.activePullRequest),i=new zt(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!!r.label,n,r);return e.comments=e.comments.map(s=>s instanceof vt&&s.commentId===r.commentId?i:s),i.id}async createOrReplyComment(e,r,n,i){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment without an active pull request.");const s=e.comments.length,c=n?!1:i!==void 0?i:this._reposManager.activePullRequest.hasPendingReview,v=this.optimisticallyAddComment(e,r,c);try{if(s){const w=e.comments[0];if(w instanceof vt)await this._reposManager.activePullRequest.createCommentReply(r,w._rawComment.graphNodeId,n);else throw new Error("Cannot reply to temporary comment")}else{const w=this.gitRelativeRootPath(e.uri.path);this._pendingCommentThreadAdds.push(e);const T=this.getCommentSide(e);let D;if(T===Qe.RIGHT){const H=await this.getContentDiff(e.uri,w);D=Va(H,e.range.start.line)}else D=e.range.start.line;await this._reposManager.activePullRequest.createReviewThread(r,w,D+1,T,n)}n&&await this._reposManager.activePullRequest.submitReview()}catch(w){u.window.showErrorMessage(`Creating comment failed: ${w}`),e.comments=e.comments.map(T=>(T instanceof zt&&T.id===v&&(T.mode=u.CommentMode.Editing),T))}}async createCommentOnResolve(e,r){if(!this._reposManager.activePullRequest)throw new Error("Cannot create comment on resolve without an active pull request.");const n=await this._reposManager.activePullRequest.getPendingReviewId();await this.createOrReplyComment(e,r,!n)}async resolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.resolveReviewThread(e.threadId)}catch(n){u.window.showErrorMessage(`Resolving conversation failed: ${n}`)}}async unresolveReviewThread(e,r){try{r&&await this.createCommentOnResolve(e,r),await this._reposManager.activePullRequest.unresolveReviewThread(e.threadId)}catch(n){u.window.showErrorMessage(`Unresolving conversation failed: ${n}`)}}async editComment(e,r){if(r instanceof vt){const n=this.optimisticallyEditComment(e,r);try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");await this._reposManager.activePullRequest.editReviewComment(r._rawComment,r.body instanceof u.MarkdownString?r.body.value:r.body)}catch(i){u.window.showErrorMessage(Q(i)),e.comments=e.comments.map(s=>s instanceof zt&&s.id===n?new vt(r._rawComment,e):s)}}else this.createOrReplyComment(e,r.body instanceof u.MarkdownString?r.body.value:r.body,!1)}async deleteComment(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");r instanceof vt?await this._reposManager.activePullRequest.deleteReviewComment(r.commentId):e.comments=e.comments.filter(i=>!(i instanceof zt&&i.id===r.id)),e.comments.length===0?e.dispose():$n(e);const n=await this._reposManager.activePullRequest.validateDraftMode();n!==this._reposManager.activePullRequest.hasPendingReview&&(this._reposManager.activePullRequest.hasPendingReview=n),this.update(this._localFileChanges)}catch(n){throw new Error(Q(n))}}async update(e){await this._reposManager.activePullRequest.validateDraftMode(),this._localFileChanges=e}async toggleReaction(e,r){try{if(!this._reposManager.activePullRequest)throw new Error("Unable to find active pull request");e.reactions&&!e.reactions.find(n=>n.label===r.label&&!!n.authorHasReacted)?await this._reposManager.activePullRequest.addCommentReaction(e._rawComment.graphNodeId,r):await this._reposManager.activePullRequest.deleteCommentReaction(e._rawComment.graphNodeId,r)}catch(n){throw new Error(Q(n))}}dispose(){this._commentController&&this._commentController.dispose(),Le(this._commentHandlerId),this._localToDispose.forEach(e=>e.dispose())}}var If=Object.defineProperty,lt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?If(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Gl=class{constructor(t,e,r,n,i,s){this._context=t,this._repository=e,this._folderRepoManager=r,this._telemetry=n,this.changesInPrDataProvider=i,this._showPullRequest=s,lt(this,"_localToDispose",[]),lt(this,"_disposables"),lt(this,"_comments",[]),lt(this,"_localFileChanges",[]),lt(this,"_obsoleteFileChanges",[]),lt(this,"_lastCommitSha"),lt(this,"_updateMessageShown",!1),lt(this,"_validateStatusInProgress"),lt(this,"_reviewCommentController"),lt(this,"_statusBarItem"),lt(this,"_prNumber"),lt(this,"_previousRepositoryState"),lt(this,"_webviewViewProvider"),lt(this,"_createPullRequestHelper"),lt(this,"_switchingToReviewMode"),lt(this,"justSwitchedToRevieMode",!1),lt(this,"_isFirstLoad",!0),this._switchingToReviewMode=!1,this._disposables=[],this._previousRepositoryState={HEAD:e.state.HEAD,remotes:Mn(this._repository)},this.registerListeners(),this.updateState(!0),this.pollForStatusChange()}get switchingToReviewMode(){return this._switchingToReviewMode}set switchingToReviewMode(t){this._switchingToReviewMode=t,t||this.updateState()}registerListeners(){this._disposables.push(this._repository.state.onDidChange(t=>{const e=this._previousRepositoryState.HEAD,r=this._repository.state.HEAD;if(!e&&!r)return;let n;!e||!r?n=!1:n=e.upstream?r.upstream&&e.upstream.name===r.upstream.name&&e.upstream.remote===r.upstream.remote:!r.upstream;const i=n&&e.ahead===r.ahead&&e.behind===r.behind&&e.commit===r.commit&&e.name===r.name&&e.remote===r.remote&&e.type===r.type,s=Mn(this._repository),c=this._previousRepositoryState.remotes.length===s.length&&this._previousRepositoryState.remotes.every(v=>s.some(w=>v.equals(w)));(!i||!c)&&(this._previousRepositoryState={HEAD:this._repository.state.HEAD,remotes:s},this.updateState(!!e))})),this._disposables.push(u.workspace.onDidChangeConfiguration(t=>{this.updateFocusedViewMode()})),this._disposables.push(this._folderRepoManager.onDidChangeActivePullRequest(t=>{this.updateFocusedViewMode()})),this._disposables.push(u.window.registerTerminalLinkProvider(new Fp(this,this._folderRepoManager)))}get statusBarItem(){return this._statusBarItem||(this._statusBarItem=u.window.createStatusBarItem("github.pullrequest.status",u.StatusBarAlignment.Left),this._statusBarItem.name="GitHub Active Pull Request"),this._statusBarItem}get repository(){return this._repository}get localFileChanges(){return this._localFileChanges}pollForStatusChange(){setTimeout(async()=>{this._validateStatusInProgress||await this.updateComments(),this.pollForStatusChange()},1e3*60*5)}async checkBranchUpToDate(t){var e;const r=this._repository.state.HEAD;if(r){const n=r.upstream?r.upstream.remote:null;if(n&&(await this._repository.fetch(n,(e=this._repository.state.HEAD)==null?void 0:e.name),!this._context.globalState.get(Ta,!1)&&!this._updateMessageShown&&(this._lastCommitSha&&t.head.sha!==this._lastCommitSha||r.behind!==void 0&&r.behind>0))){this._updateMessageShown=!0;const s="Pull",c="Never show again";await u.window.showInformationMessage("There are updates available for this pull request.",{},s,c)===s?(await u.commands.executeCommand("git.pull"),this._updateMessageShown=!1):c&&await this._context.globalState.update(Ta,!0)}}}async updateState(t=!1){if(!this.switchingToReviewMode)return this._validateStatusInProgress?(a.appendLine("Review> Queuing additional validate state"),this._validateStatusInProgress=this._validateStatusInProgress.then(async e=>await this.validateState(t)),this._validateStatusInProgress):(a.appendLine("Review> Validate state in progress"),this._validateStatusInProgress=this.validateState(t),this._validateStatusInProgress)}async validateState(t){if(a.appendLine("Review> Validating state..."),await this._folderRepoManager.updateRepositories(t),!this._repository.state.HEAD){this.clear(!0);return}const e=this._repository.state.HEAD;let r=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!r){a.appendLine(`Review> no matching pull request metadata found for current branch ${e.name}`);const w=await this._folderRepoManager.getMatchingPullRequestMetadataFromGitHub();w&&(nr.associateBranchWithPullRequest(this._repository,w.model,e.name),r=w)}if(!r){a.appendLine(`Review> no matching pull request metadata found on GitHub for current branch ${e.name}`),this.clear(!0);return}const n=e.commit!==this._lastCommitSha&&e.ahead===0&&e.behind===0;if(this._prNumber===r.prNumber&&!n){u.commands.executeCommand("pr.refreshList");return}if(!(e.upstream?e.upstream.remote:null)){a.appendLine(`Review> current branch ${this._repository.state.HEAD.name} hasn't setup remote yet`),this.clear(!0);return}a.appendLine(`Review> current branch ${this._repository.state.HEAD.name} is associated with pull request #${r.prNumber}`),this.clear(!1),this._prNumber=r.prNumber,this._lastCommitSha=void 0;const{owner:s,repositoryName:c}=r;a.appendLine("Review> Resolving pull request");const v=await this._folderRepoManager.resolvePullRequest(s,c,r.prNumber);if(!v||!v.isResolved()){this._prNumber=void 0,a.appendLine("Review> This PR is no longer valid");return}if(this._folderRepoManager.activePullRequest=v,this._lastCommitSha=v.head.sha,this._isFirstLoad&&(this._isFirstLoad=!1,this.checkBranchUpToDate(v)),a.appendLine("Review> Fetching pull request data"),await this.getPullRequestData(v),await this.changesInPrDataProvider.addPrToView(this._folderRepoManager,v,this._localFileChanges,this._comments,this.justSwitchedToRevieMode),this.justSwitchedToRevieMode=!1,a.appendLine("Review> register comments provider"),await this.registerCommentController(),this._webviewViewProvider)this._webviewViewProvider.updatePullRequest(v);else{this._webviewViewProvider=new Ap(this._context.extensionUri,this._folderRepoManager,v),this._context.subscriptions.push(u.window.registerWebviewViewProvider(this._webviewViewProvider.viewType,this._webviewViewProvider)),this._context.subscriptions.push(u.commands.registerCommand("pr.refreshActivePullRequest",T=>{var D;(D=this._webviewViewProvider)==null||D.refresh()}));const w=this._context.workspaceState.get(Vt);if(a.appendLine(`Review> using focus mode = ${w}.`),a.appendLine(`Review> state validation silent = ${t}.`),a.appendLine(`Review> PR show should show = ${this._showPullRequest.shouldShow}.`),(!t||this._showPullRequest.shouldShow)&&w)this._webviewViewProvider.show();else if(!this._showPullRequest.shouldShow&&w){const T=this._showPullRequest.onChangedShowValue(D=>{var H;a.appendLine(`Review> PR show value changed = ${D}.`),D&&((H=this._webviewViewProvider)==null||H.show()),T.dispose()});this._localToDispose.push(T)}}if(this.statusBarItem.text=`$(git-branch) Pull Request #${this._prNumber}`,this.statusBarItem.command={command:"pr.openDescription",title:"View Pull Request Description",arguments:[v]},a.appendLine("Review> display pull request status bar indicator and refresh pull request tree view."),this.statusBarItem.show(),u.commands.executeCommand("pr.refreshList"),!t&&this._context.workspaceState.get(Vt)&&u.env.remoteName==="codespaces"&&this.localFileChanges.length>0){let w;for(const T of this.localFileChanges)if(T.status===Ce.MODIFY){w=T;break}w=w!=null?w:this.localFileChanges[0],w.openDiff(this._folderRepoManager)}this._validateStatusInProgress=void 0}async updateComments(){const t=this._repository.state.HEAD;if(!t)return;const e=await this._folderRepoManager.getMatchingPullRequestMetadataForBranch();if(!e||!(t.upstream?t.upstream.remote:null)||this._prNumber===void 0||!this._folderRepoManager.activePullRequest)return;const n=await this._folderRepoManager.resolvePullRequest(e.owner,e.repositoryName,this._prNumber);if(!n||!n.isResolved()){a.appendLine("Review> This PR is no longer valid");return}return await this.checkBranchUpToDate(n),await this.getPullRequestData(n),await this._reviewCommentController.update(this._localFileChanges),Promise.resolve(void 0)}async getLocalChangeNodes(t,e,r){const n=[],i=t.mergeBase||t.base.sha,s=t.head.sha;for(let c=0;c<e.length;c++){const v=e[c];let w=[];if(v instanceof xr)w=v.diffHunks;else if(v.status!==Ce.RENAME)try{const Z=await this._repository.diffBetween(t.base.sha,t.head.sha,v.fileName);w=gr(Z)}catch(Z){a.appendLine(`Failed to parse patch for outdated comments: ${Z}`)}const T=h.join(this._repository.rootUri.path,v.fileName).replace(/\\/g,"/"),D=this._repository.rootUri.with({path:T}),H=v.status===Ce.DELETE?St(D,void 0,void 0,"",!1,{base:!1},this._repository.rootUri):D,V=St(D,v.status===Ce.RENAME?v.previousFileName:v.fileName,void 0,v.status===Ce.ADD?"":i,!1,{base:!0},this._repository.rootUri),W=new Qn(this.changesInPrDataProvider,this._folderRepoManager,t,v.status,v.fileName,v.blobUrl,H,V,w,r.filter(Z=>Z.path===v.fileName),s);n.push(W)}return n}async getPullRequestData(t){try{this._comments=await t.getReviewComments(),await t.initializeReviewThreadCache(),await t.getPullRequestFileViewState();const e=this._comments.filter(v=>v.position),r=this._comments.filter(v=>!v.position),n=await t.getFileChangesInfo(),i=t.mergeBase||t.base.sha,s=await b(n,this._repository,i);this._localFileChanges=await this.getLocalChangeNodes(t,s,e);const c=B(r,v=>v.originalCommitId);this._obsoleteFileChanges=[];for(const v in c){const w=c[v],T=B(w,D=>D.path);for(const D in T){let H=[];try{const ee=await this._repository.diffBetween(t.base.sha,v,D);H=gr(ee)}catch(ee){a.appendLine(`Failed to parse patch for outdated comments: ${ee}`)}const V=T[D],W=u.Uri.file(h.join(`commit~${v.substr(0,8)}`,D)),Z=new Qn(this.changesInPrDataProvider,this._folderRepoManager,t,Ce.MODIFY,D,void 0,St(W,D,void 0,V[0].originalCommitId,!0,{base:!1},this._repository.rootUri),St(W,D,void 0,V[0].originalCommitId,!0,{base:!0},this._repository.rootUri),H,V,v);this._obsoleteFileChanges.push(Z)}}return Promise.resolve(void 0)}catch(e){a.appendLine(`Review> ${e}`)}}async registerCommentController(){this._reviewCommentController=new Pf(this,this._folderRepoManager,this._repository,this._localFileChanges),await this._reviewCommentController.initialize(),this._localToDispose.push(this._reviewCommentController),this._localToDispose.push(this._reviewCommentController.onDidChangeComments(t=>{this._comments=t}))}async switch(t){a.appendLine(`Review> switch to Pull Request #${t.number} - start`),this.statusBarItem.text="$(sync~spin) Switching to Review Mode",this.statusBarItem.command=void 0,this.statusBarItem.show(),this.switchingToReviewMode=!0;try{await this._folderRepoManager.checkoutExistingPullRequestBranch(t)||await this._folderRepoManager.fetchAndCheckout(t)}catch(e){if(a.appendLine(`Review> checkout failed #${JSON.stringify(e)}`),this.switchingToReviewMode=!1,e.message==="User aborted")return;if(e.gitErrorCode&&(e.gitErrorCode===et.LocalChangesOverwritten||e.gitErrorCode===et.DirtyWorkTree)){u.window.showErrorMessage("Your local changes would be overwritten by checkout, please commit your changes or stash them before you switch branches");return}u.window.showErrorMessage(Q(e));return}try{this.statusBarItem.text=`$(sync~spin) Fetching additional data: pr/${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._folderRepoManager.fulfillPullRequestMissingInfo(t),this._telemetry.sendTelemetryEvent("pr.checkout"),a.appendLine(`Review> switch to Pull Request #${t.number} - done`,Gl.ID)}finally{this.switchingToReviewMode=!1,this.justSwitchedToRevieMode=!0,this.statusBarItem.text=`Pull Request #${t.number}`,this.statusBarItem.command=void 0,this.statusBarItem.show(),await this._repository.status()}}async publishBranch(t){const e=await this._folderRepoManager.getAllGitHubRemotes();let r=(await this.getRemote(e,`Pick a remote to publish the branch '${t.name}' to:`)).remote;if(!r||t.name===void 0)return;const n=this._folderRepoManager.createGitHubRepository(r,this._folderRepoManager.credentialStore),i=await n.getViewerPermission();if(i===Lt.Read||i===Lt.Triage||i===Lt.Unknown){const c=await this._folderRepoManager.tryOfferToFork(n);if(!c)return;r=this._folderRepoManager.getGitHubRemotes().find(v=>v.remoteName===c)}if(!r)return;const s=r;return new Promise(async c=>{const v=u.window.createInputBox();v.value=t.name,v.ignoreFocusOut=!0,v.prompt=e.length===1?`The branch '${t.name}' is not published yet, pick a name for the upstream branch`:"Pick a name for the upstream branch";const w=async function(T){try{v.busy=!0,await this._reposManager.getBranch(s,T)?v.validationMessage=`Branch ${T} already exists in ${s.owner}/${s.repositoryName}`:v.validationMessage=void 0}catch(D){v.validationMessage=void 0}v.busy=!1};await w(t.name),v.onDidChangeValue(w.bind(this)),v.onDidAccept(async()=>{v.validationMessage=void 0,v.hide();try{await this._repository.push(s.remoteName,`${t.name}:${v.value}`,!0)}catch(D){throw D.gitErrorCode===et.PushRejected&&(u.window.showWarningMessage("Can't push refs to remote, try running 'git pull' first to integrate with your change",{modal:!0}),c(void 0)),D.gitErrorCode===et.RemoteConnectionError&&(u.window.showWarningMessage(`Could not read from remote repository '${s.remoteName}'. Please make sure you have the correct access rights and the repository exists.`,{modal:!0}),c(void 0)),D}const T=await this._repository.getBranch(t.name);(!T||!T.upstream)&&c(void 0),c(T)}),v.show()})}async getRemote(t,e,r){if(!t.length){u.window.showWarningMessage("No GitHub remotes found. Add a remote and try again.");return}if(t.length===1&&!r)return $l.fromRemote(t[0]);if(t.length===1&&r&&r.owner===t[0].owner&&r.name===t[0].repositoryName)return r;let n=!1;const i=t.map(c=>{const v=$l.fromRemote(c);if(r){const{owner:w,name:T}=r;v.picked=v.owner===w&&v.name===T,v.picked&&(n=!0)}return v});!n&&r&&i.unshift(r);const s=await u.window.showQuickPick(i,{ignoreFocusOut:!0,placeHolder:e});if(!!s)return s}async createPullRequest(t){this._createPullRequestHelper||(this._createPullRequestHelper=new Sf(this.repository),this._createPullRequestHelper.onDidCreate(async e=>{await this.updateState();const r=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await za(this._context,this._telemetry,e,r,this._folderRepoManager)})),this._createPullRequestHelper.create(this._context.extensionUri,this._folderRepoManager,t)}async openDescription(){const t=this._folderRepoManager.activePullRequest;if(!t)return;const e=this.changesInPrDataProvider.getDescriptionNode(this._folderRepoManager);await za(this._context,this._telemetry,t,e,this._folderRepoManager)}get isCreatingPullRequest(){var t,e;return(e=(t=this._createPullRequestHelper)==null?void 0:t.isCreatingPullRequest)!=null?e:!1}async updateFocusedViewMode(){u.workspace.getConfiguration(ir).get("focusedMode")&&this._folderRepoManager.activePullRequest?(u.commands.executeCommand("setContext",Vt,!0),await this._context.workspaceState.update(Vt,!0)):(u.commands.executeCommand("setContext",Vt,!1),this._context.workspaceState.update(Vt,!1))}clear(t){this._updateMessageShown=!1,this._localToDispose.forEach(e=>e.dispose()),t&&(this._prNumber=void 0,this._folderRepoManager.activePullRequest=void 0,this._statusBarItem&&this._statusBarItem.hide(),this.changesInPrDataProvider&&this.changesInPrDataProvider.removePrFromView(this._folderRepoManager),this._comments=[],u.commands.executeCommand("pr.refreshList"))}async provideTextDocumentContent(t){const{path:e,commit:r}=Wt(t.query);let n=Ha(this._localFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r);if(n.length){const i=n[0],s=r===i.sha?We.Delete:We.Add;return i.diffHunks.map(v=>v.diffLines.filter(w=>w.type!==s).map(w=>w.text)).reduce((v,w)=>v.concat(...w),[]).join(`
`)}if(n=Ha(this._obsoleteFileChanges).filter(i=>i.fileName===e).filter(i=>i.sha===r||(i.parentSha?i.parentSha:`${i.sha}^`)===r),n.length){const i=n[0],s=r===i.sha?We.Delete:We.Add,c=[],v=B(i.comments,w=>String(w.originalPosition));for(const w in v){if(!v[w][0].diffHunks)continue;const T=v[w][0].diffHunks.map(D=>D.diffLines.filter(H=>H.type!==s).map(H=>H.text)).reduce((D,H)=>D.concat(...H),[]);c.push(...T)}return c.join(`
`)}}dispose(){this.clear(!0),this._disposables.forEach(t=>{t.dispose()})}static getReviewManagerForRepository(t,e){return t.find(r=>r._folderRepoManager.gitHubRepositories.some(n=>n.equals(e)))}static getReviewManagerForFolderManager(t,e){return t.find(r=>r._folderRepoManager===e)}};let yn=Gl;lt(yn,"ID","Review");class Df{constructor(){lt(this,"_shouldShow",!1),lt(this,"_onChangedShowValue",new u.EventEmitter),lt(this,"onChangedShowValue",this._onChangedShowValue.event)}get shouldShow(){return this._shouldShow}set shouldShow(e){const r=this._shouldShow;this._shouldShow=e,r!==this._shouldShow&&this._onChangedShowValue.fire(this._shouldShow)}}var Af=Object.defineProperty,Ba=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Af(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class wn extends Ot{constructor(e,r,n,i){super();this.parent=e,this.label=r,this.iconPath=n,this.pullRequestModel=i,Ba(this,"command"),Ba(this,"contextValue"),Ba(this,"tooltip"),this.command={title:"View Pull Request Description",command:"pr.openDescription",arguments:[this]},this.contextValue="description",this.tooltip=`Description of pull request #${i.number}`,this.accessibilityInformation={label:`Pull request page of pull request number ${i.number}`,role:"button"}}getTreeItem(){return this}}var Ff=Object.defineProperty,Vl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ff(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Of{constructor(){Vl(this,"_onDidChange",new u.EventEmitter),Vl(this,"_prFileChangeContentProviders",{})}get onDidChange(){return this._onDidChange.event}fireDidChange(e){this._onDidChange.fire(e)}async provideTextDocumentContent(e,r){const n=dt(e);if(n&&n.prNumber){const i=this._prFileChangeContentProviders[n.prNumber];if(i)return await i(e)}return""}registerTextDocumentContentProvider(e,r){return this._prFileChangeContentProviders[e]=r,{dispose:()=>{delete this._prFileChangeContentProviders[e]}}}}const xf=new Of;function Bl(){return xf}var Mf=Object.defineProperty,ja=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class bn extends Ot{constructor(e,r){super();this.parent=e,this.label=r,ja(this,"collapsibleState"),ja(this,"children",[]),ja(this,"pathToChild",new Map),this.collapsibleState=u.TreeItemCollapsibleState.Expanded}async getChildren(){return this.children}finalize(){this.trimTree(),this.sort()}trimTree(){if(this.children.length===0||(this.children.forEach(r=>{r instanceof bn&&r.trimTree()}),this.children.length!==1))return;const e=this.children[0];e instanceof bn&&(this.label=this.label+"/"+e.label,this.label.startsWith("/")&&(this.label=this.label.substr(1)),this.children=e.children)}sort(){if(this.children.length<=1)return;const e=[],r=[];this.children.forEach(n=>{n instanceof bn?(n.sort(),e.push(n)):r.push(n)}),e.sort((n,i)=>n.label<i.label?-1:1),r.sort((n,i)=>n.label<i.label?-1:1),this.children=[...e,...r]}addFile(e){const r=e.fileName.split("/");e.description="",this.addPathRecc(r,e)}addPathRecc(e,r){if(e.length<=0)return;if(e.length===1){this.children.push(r);return}const n=e[0],i=e.slice(1);let s=this.pathToChild.get(n);s||(s=new bn(this,n),this.pathToChild.set(n,s),this.children.push(s)),s.addPathRecc(i,r)}getTreeItem(){return this}}var Lf=Object.defineProperty,Kn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const jl=class extends Ot{constructor(t,e,r,n){super();this.parent=t,this._folderReposManager=e,this.pullRequestModel=r,this._isLocal=n,Kn(this,"_fileChanges"),Kn(this,"_commentController"),Kn(this,"_disposables",[]),Kn(this,"_inMemPRContentProvider"),Kn(this,"_command")}get command(){return this._command}set command(t){this._command=t}async getChildren(){a.debug(`Fetch children of PRNode #${this.pullRequestModel.number}`,jl.ID);try{this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(n=>n.dispose()),this.childrenDisposables=[]);const t=new wn(this,"Description",new u.ThemeIcon("git-pull-request"),this.pullRequestModel);if(!this.pullRequestModel.isResolved())return[t];await this.pullRequestModel.initializeReviewThreadCache(),await this.pullRequestModel.getPullRequestFileViewState(),this._fileChanges=await this.resolveFileChanges(),this._inMemPRContentProvider||(this._inMemPRContentProvider=Bl().registerTextDocumentContentProvider(this.pullRequestModel.number,this.provideDocumentContent.bind(this))),this._commentController||await this.resolvePRCommentController(),await this.pullRequestModel.validateDraftMode();const e=[t];if(u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"){const n=new bn(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?e.push(...n.children):e.push(n)}else e.push(...this._fileChanges);return this.childrenDisposables=e,e}catch(t){return a.appendLine(t),[]}}async resolvePRCommentController(){await this.pullRequestModel.githubRepository.ensureCommentsController(),this._commentController=this.pullRequestModel.githubRepository.commentsController,this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentingRangeProvider(this.pullRequestModel.number,this)),this._disposables.push(this.pullRequestModel.githubRepository.commentsHandler.registerCommentController(this.pullRequestModel.number,this.pullRequestModel,this._folderReposManager)),this.registerListeners()}registerListeners(){this._disposables.push(this.pullRequestModel.onDidChangePendingReviewState(async t=>{t||(await this.getFileChanges()).forEach(e=>{e instanceof ms&&e.comments.forEach(r=>r.isDraft=t)})}))}async getFileChanges(){return this._fileChanges||(this._fileChanges=await this.resolveFileChanges()),this._fileChanges}async resolveFileChanges(){if(!this.pullRequestModel.isResolved())return[];const t=await this.pullRequestModel.getReviewComments(),e=await this.pullRequestModel.getFileChangesInfo(),r=this.pullRequestModel.mergeBase;return r?(await b(e,this._folderReposManager.repository,r)).map(i=>{const s=this.pullRequestModel.head.sha,c=i.status===Ce.RENAME?i.previousFileName:i.fileName;return i instanceof Mr?new pi(this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,st(u.Uri.file(Tt(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),st(u.Uri.file(Tt(this._folderReposManager.repository.rootUri,c)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status)):(console.log(u.Uri.file(Tt(this._folderReposManager.repository.rootUri,i.fileName))),new ms(this._folderReposManager,this,this.pullRequestModel,i.status,i.fileName,i.previousFileName,i.blobUrl,st(u.Uri.file(Tt(this._folderReposManager.repository.rootUri,i.fileName)),this.pullRequestModel,i.baseCommit,s,i.fileName,!1,i.status),st(u.Uri.file(Tt(this._folderReposManager.repository.rootUri,c)),this.pullRequestModel,i.baseCommit,s,i.fileName,!0,i.status),i.isPartial,i.patch,i.diffHunks,t.filter(w=>w.path===i.fileName&&w.position!==null)))}):[]}getTreeItem(){const t=this.pullRequestModel.equals(this._folderReposManager.activePullRequest),{title:e,number:r,author:n,isDraft:i,html_url:s}=this.pullRequestModel,{login:c}=n,v=t?"\u2713 ":"",w=t?"Current Branch * ":"",T=r.toString(),D=`${v}#${T}: ${i?"[DRAFT] ":""}${e}`,H=`${w}${e} by @${c}`,V=`by @${c}`;return{label:D,id:`${this.parent instanceof Ot?this.parent.label:""}${s}`,tooltip:H,description:V,collapsibleState:1,contextValue:"pullrequest"+(this._isLocal?":local":"")+(t?":active":":nonactive"),iconPath:this.pullRequestModel.userAvatarUri?this.pullRequestModel.userAvatarUri:new u.ThemeIcon("github"),accessibilityInformation:{label:`${i?"Draft ":""}Pull request number ${T}: ${e} by ${c}`}}}async provideCommentingRanges(t,e){if(t.uri.scheme==="pr"){const r=dt(t.uri);if(!r||r.prNumber!==this.pullRequestModel.number)return;const n=(await this.getFileChanges()).find(i=>i.fileName===r.fileName);return!n||n instanceof pi?void 0:Hl(n.diffHunks,r.isBase)}}async provideDocumentContent(t){const e=dt(t);if(!e)return"";const r=(await this.getFileChanges()).find(n=>n.fileName===e.fileName);if(!r)return a.appendLine(`PR> can not find content for document ${t.toString()}`),"";if(e.isBase&&r.status===Ce.ADD||!e.isBase&&r.status===Ce.DELETE)return"";if(r instanceof pi||r.isPartial)try{return e.isBase?this.pullRequestModel.getFile(r.previousFileName||r.fileName,e.baseCommit):this.pullRequestModel.getFile(r.fileName,e.headCommit)}catch(n){return a.appendLine(`PR> Fetching file content failed: ${n}`),u.window.showWarningMessage("Opening this file locally failed. Would you like to view it on GitHub?","Open on GitHub").then(i=>{i==="Open on GitHub"&&u.commands.executeCommand("vscode.open",u.Uri.parse(r.blobUrl))}),""}if(r instanceof ms)if(r.status===Ce.ADD||r.status===Ce.DELETE)if(e.isBase){const i=[];for(let s=0;s<r.diffHunks.length;s++)for(let c=0;c<r.diffHunks[s].diffLines.length;c++){const v=r.diffHunks[s].diffLines[c];v.type===We.Add||(v.type===We.Delete?i.push(v.text):v.type===We.Control||i.push(v.text))}return i.join(`
`)}else{const i=[];for(let s=0;s<r.diffHunks.length;s++)for(let c=0;c<r.diffHunks[s].diffLines.length;c++){const v=r.diffHunks[s].diffLines[c];v.type===We.Add?i.push(v.text):v.type===We.Delete||v.type===We.Control||i.push(v.text)}return i.join(`
`)}else{const i=r.status===Ce.RENAME?r.previousFileName:r.fileName,s=u.Uri.joinPath(this._folderReposManager.repository.rootUri,i),c=await this._folderReposManager.repository.show(e.baseCommit,s.fsPath);return e.isBase?c:ln(c,r.patch)}return""}dispose(){super.dispose(),this._inMemPRContentProvider&&this._inMemPRContentProvider.dispose(),this._commentController=void 0,this._disposables.forEach(t=>t.dispose()),this._disposables=[]}};let Yn=jl;Kn(Yn,"ID","PRNode");const ps=new u.EventEmitter,zl=ps.event;function vi(t,e){if(e)return e instanceof Yn?e.pullRequestModel:e;if(!t.activePullRequest)throw u.window.showErrorMessage("Unable to find current pull request."),new Error("Unable to find current pull request.");return t.activePullRequest}async function za(t,e,r,n,i){const s=vi(i,r);n==null||n.reveal(n,{select:!0,focus:!0}),await Kt.createOrShow(t.extensionUri,i,s),e.sendTelemetryEvent("pr.openDescription")}async function yi(t,e,r){var n;if(t.length===1)return t[0];const i=t.map(s=>({label:e(s),itemValue:s}));return(n=await u.window.showQuickPick(i,r))==null?void 0:n.itemValue}async function wi(t,e){t instanceof Yn||t instanceof wn?u.commands.executeCommand("vscode.open",u.Uri.parse(t.pullRequestModel.html_url)):u.commands.executeCommand("vscode.open",u.Uri.parse(t.html_url)),e.sendTelemetryEvent("pr.openInGitHub")}function qf(t,e,r,n,i,s){t.subscriptions.push(u.commands.registerCommand("pr.openPullRequestOnGitHub",async w=>{if(w)wi(w,n);else{const T=e.folderManagers.map(D=>D.activePullRequest).filter(D=>!!D);if(T.length>=1){const D=await yi(T,H=>H.html_url);D&&wi(D,n)}}})),t.subscriptions.push(u.commands.registerCommand("review.suggestDiff",async w=>{try{const T=await yi(e.folderManagers,me=>h.basename(me.repository.rootUri.fsPath));if(!T||!T.activePullRequest)return;const{indexChanges:D,workingTreeChanges:H}=T.repository.state;if(!D.length)if(H.length)if(await u.window.showWarningMessage(`There are no staged changes to suggest.

Would you like to automatically stage all your of changes and suggest them?`,{modal:!0},"Yes")==="Yes")await u.commands.executeCommand("git.stageAll");else return;else{u.window.showInformationMessage("There are no changes to suggest.");return}const V=await T.repository.diff(!0);let W="";w&&w.inputBox&&w.inputBox.value&&(W=`${w.inputBox.value}
`,w.inputBox.value="");const Z=`${W}\`\`\`diff
${V}
\`\`\``;await T.activePullRequest.createIssueComment(Z),await u.commands.executeCommand("git.unstageAll");const ee=h.join(T.repository.rootUri.path,".git",`${T.activePullRequest.number}.diff`),te=new TextEncoder,ae=u.Uri.parse(ee);await u.workspace.fs.writeFile(ae,te.encode(V)),await T.repository.apply(ee,!0),await u.workspace.fs.delete(ae)}catch(T){a.appendLine(`Applying patch failed: ${T}`),u.window.showErrorMessage(`Applying patch failed: ${Q(T)}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.openFileOnGitHub",async w=>{if(!(w instanceof pi&&!await u.window.showInformationMessage(`${w.fileName} can't be opened locally. Do you want to open it on GitHub?`,"Open"))&&w.blobUrl)return u.commands.executeCommand("vscode.open",u.Uri.parse(w.blobUrl))})),t.subscriptions.push(u.commands.registerCommand("pr.copyCommitHash",w=>{u.env.clipboard.writeText(w.sha)})),t.subscriptions.push(u.commands.registerCommand("pr.openOriginalFile",async w=>{const T=e.getManagerForIssueModel(w.pullRequest);if(T){const D=await fr(w.parentFilePath,T.repository);u.commands.executeCommand("vscode.open",D||w.parentFilePath)}})),t.subscriptions.push(u.commands.registerCommand("pr.openModifiedFile",w=>{u.commands.executeCommand("vscode.open",w.filePath)})),t.subscriptions.push(u.commands.registerCommand("pr.openDiffView",w=>{const T=e.getManagerForIssueModel(w.pullRequest);!T||w.openDiff(T)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranch",async w=>{const T=e.getManagerForIssueModel(w.pullRequestModel);if(!T)return;const D=vi(T,w),H="delete branch (even if not merged)";let V=null;try{await T.deleteLocalPullRequest(D)}catch(W){if(W.gitErrorCode===et.BranchNotFullyMerged){if(await u.window.showErrorMessage(`The branch '${D.localBranchName}' is not fully merged, are you sure you want to delete it? `,H)!==H)return;try{await T.deleteLocalPullRequest(D,!0)}catch(ee){V=ee}}else V=W}V?(n.sendTelemetryErrorEvent("pr.deleteLocalPullRequest.failure"),await u.window.showErrorMessage(`Deleting local pull request branch failed: ${V}`)):(n.sendTelemetryEvent("pr.deleteLocalPullRequest.success"),u.commands.executeCommand("pr.refreshList"))}));function c(w){if(w){const T=u.Uri.file(w).toString();for(const D of r)if(D.repository.rootUri.toString()===T)return D}return yi(r,T=>h.basename(T.repository.rootUri.fsPath),{placeHolder:"Choose a repository to create a pull request in",ignoreFocusOut:!0})}function v(w){return!!(w==null?void 0:w.rootUri)}t.subscriptions.push(u.commands.registerCommand("pr.create",async w=>{var T,D;v(w)?(T=await c(w.rootUri.fsPath))==null||T.createPullRequest():(D=await c(w==null?void 0:w.repoPath))==null||D.createPullRequest(w==null?void 0:w.compareBranch)})),t.subscriptions.push(u.commands.registerCommand("pr.pick",async w=>{let T;w instanceof Yn||w instanceof wn?T=w.pullRequestModel:T=w;const D=w instanceof Nr;return n.sendTelemetryEvent("pr.checkout",{fromDescription:D.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:`Switching to Pull Request #${T.number}`},async()=>{var H;await((H=yn.getReviewManagerForRepository(r,T.githubRepository))==null?void 0:H.switch(T))})})),t.subscriptions.push(u.commands.registerCommand("pr.exit",async w=>{let T;w instanceof Yn||w instanceof wn?T=w.pullRequestModel:T=w;const D=w instanceof Nr;return n.sendTelemetryEvent("pr.exit",{fromDescription:D.toString()}),u.window.withProgress({location:u.ProgressLocation.SourceControl,title:"Exiting Pull Request"},async()=>{const H=await T.githubRepository.getDefaultBranch(),V=e.getManagerForIssueModel(T);V&&V.checkoutDefaultBranch(H)})})),t.subscriptions.push(u.commands.registerCommand("pr.merge",async w=>{const T=e.getManagerForIssueModel(w==null?void 0:w.pullRequestModel);if(!T)return;const D=vi(T,w);return D.base&&D.head&&!D.base.repositoryCloneUrl.equals(D.head.repositoryCloneUrl)&&Ra()?wi(D,n):u.window.showWarningMessage("Are you sure you want to merge this pull request on GitHub?",{modal:!0},"Yes").then(async W=>{let Z;if(W==="Yes")try{return Z=await T.mergePullRequest(D),Z}catch(ee){return u.window.showErrorMessage(`Unable to merge pull request. ${Q(ee)}`),Z}})})),t.subscriptions.push(u.commands.registerCommand("pr.readyForReview",async w=>{const T=e.getManagerForIssueModel(w==null?void 0:w.pullRequestModel);if(!T)return;const D=vi(T,w);return u.window.showWarningMessage("Are you sure you want to mark this pull request as ready to review on GitHub?",{modal:!0},"Yes").then(async H=>{let V;if(H==="Yes")try{return V=await D.setReadyForReview(),u.commands.executeCommand("pr.refreshList"),V}catch(W){return u.window.showErrorMessage(`Unable to mark pull request as ready to review. ${Q(W)}`),V}})})),t.subscriptions.push(u.commands.registerCommand("pr.close",async(w,T)=>{let D;if(w)D=w instanceof Nr?w:w.pullRequestModel;else{const V=e.folderManagers.map(W=>W.activePullRequest).filter(W=>!!W);D=await yi(V,W=>`${W.number}: ${W.title}`,{placeHolder:"Pull request to close"})}if(!D)return;const H=D;return u.window.showWarningMessage("Are you sure you want to close this pull request on GitHub? This will close the pull request without merging.",{modal:!0},"Yes","No").then(async V=>{if(V==="Yes")try{let W;T&&(W=await H.createIssueComment(T));const Z=await H.close();return u.commands.executeCommand("pr.refreshList"),ps.fire(Z),W}catch(W){u.window.showErrorMessage(`Unable to close pull request. ${Q(W)}`),ps.fire()}ps.fire()})})),t.subscriptions.push(u.commands.registerCommand("pr.openDescription",async w=>{let T;if(w)T=w instanceof wn?w.pullRequestModel:w;else{const V=e.folderManagers.map(W=>W.activePullRequest).filter(W=>!!W);V.length>=1&&(T=await yi(V,W=>W.title))}if(!T){a.appendLine("No pull request found.");return}const D=e.getManagerForIssueModel(T);if(!D)return;let H;if(w instanceof wn)H=w;else{const V=yn.getReviewManagerForFolderManager(r,D);if(!V)return;H=V.changesInPrDataProvider.getDescriptionNode(D)}await za(t,n,T,H,D)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshDescription",async()=>{Kt.currentPanel&&Kt.refresh()})),t.subscriptions.push(u.commands.registerCommand("pr.openDescriptionToTheSide",async w=>{const T=e.getManagerForIssueModel(w.pullRequestModel);if(!T)return;const D=w.pullRequestModel,H=vi(T,D);w.reveal(w,{select:!0,focus:!0}),Kt.createOrShow(t.extensionUri,T,H,!0),n.sendTelemetryEvent("pr.openDescriptionToTheSide")})),t.subscriptions.push(u.commands.registerCommand("pr.signin",async()=>{await e.authenticate()})),t.subscriptions.push(u.commands.registerCommand("pr.deleteLocalBranchesNRemotes",async()=>{for(const w of e.folderManagers)await w.deleteLocalBranchesNRemotes()})),t.subscriptions.push(u.commands.registerCommand("pr.signinAndRefreshList",async()=>{await e.authenticate()&&u.commands.executeCommand("pr.refreshList")})),t.subscriptions.push(u.commands.registerCommand("pr.configureRemotes",async()=>u.commands.executeCommand("workbench.action.openSettings",`@ext:${tt} remotes`))),t.subscriptions.push(u.commands.registerCommand("pr.startReview",async w=>{n.sendTelemetryEvent("pr.startReview");const T=Mt(w.thread);T&&T.startReview(w.thread,w.text)})),t.subscriptions.push(u.commands.registerCommand("pr.openReview",async w=>{n.sendTelemetryEvent("pr.openReview");const T=Mt(w.thread);T&&await T.openReview(w.thread)})),t.subscriptions.push(u.commands.registerCommand("pr.resolveReviewThread",async w=>{n.sendTelemetryEvent("pr.resolveReviewThread");const T=Mt(w.thread);T&&await T.resolveReviewThread(w.thread,w.text)})),t.subscriptions.push(u.commands.registerCommand("pr.unresolveReviewThread",async w=>{n.sendTelemetryEvent("pr.unresolveReviewThread");const T=Mt(w.thread);T&&await T.unresolveReviewThread(w.thread,w.text)})),t.subscriptions.push(u.commands.registerCommand("pr.createComment",async w=>{n.sendTelemetryEvent("pr.createComment");const T=Mt(w.thread);T&&T.createOrReplyComment(w.thread,w.text,!1)})),t.subscriptions.push(u.commands.registerCommand("pr.createSingleComment",async w=>{n.sendTelemetryEvent("pr.createSingleComment");const T=Mt(w.thread);T&&T.createOrReplyComment(w.thread,w.text,!0)})),t.subscriptions.push(u.commands.registerCommand("pr.editComment",async w=>{n.sendTelemetryEvent("pr.editComment"),w.startEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.cancelEditComment",async w=>{n.sendTelemetryEvent("pr.cancelEditComment"),w.cancelEdit()})),t.subscriptions.push(u.commands.registerCommand("pr.saveComment",async w=>{n.sendTelemetryEvent("pr.saveComment");const T=Mt(w.parent);T&&await T.editComment(w.parent,w)})),t.subscriptions.push(u.commands.registerCommand("pr.deleteComment",async w=>{if(n.sendTelemetryEvent("pr.deleteComment"),await u.window.showWarningMessage("Delete comment?",{modal:!0},"Delete")==="Delete"){const D=Mt(w.parent);D&&await D.deleteComment(w.parent,w)}})),t.subscriptions.push(u.commands.registerCommand("review.openFile",w=>{var T;const D=w instanceof Qn?w.openFileCommand():Ll(w);u.commands.executeCommand(D.command,...(T=D.arguments)!=null?T:[])})),t.subscriptions.push(u.commands.registerCommand("pr.refreshChanges",w=>{r.forEach(T=>{T.updateComments(),Kt.refresh(),T.changesInPrDataProvider.refresh()})})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsTree",w=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","tree",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.setFileListLayoutAsFlat",w=>{u.workspace.getConfiguration("githubPullRequests").update("fileListLayout","flat",!0)})),t.subscriptions.push(u.commands.registerCommand("pr.refreshPullRequest",w=>{var T;const D=e.getManagerForIssueModel(w.pullRequestModel);D&&w.pullRequestModel.equals(D==null?void 0:D.activePullRequest)&&((T=yn.getReviewManagerForFolderManager(r,D))==null||T.updateComments()),Kt.refresh(),s.refresh(w)})),t.subscriptions.push(u.commands.registerCommand("pr.markFileAsViewed",async w=>{try{await w.pullRequest.markFileAsViewed(w.fileName)}catch(T){u.window.showErrorMessage(`Marked file as viewed failed: ${T}`)}})),t.subscriptions.push(u.commands.registerCommand("pr.unmarkFileAsViewed",async w=>{try{await w.pullRequest.unmarkFileAsViewed(w.fileName)}catch(T){u.window.showErrorMessage(`Marked file as not viewed failed: ${T}`)}}))}var Xn=Re(9035),Uf=Object.defineProperty,Ql=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Uf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $f{constructor(e){this.baseReporter=e,Ql(this,"sharedProperties",{})}sendTelemetryEvent(e,r,n){this.baseReporter.sendTelemetryEvent(e,{...this.sharedProperties,...r},n)}sendTelemetryErrorEvent(e,r,n){this.baseReporter.sendTelemetryErrorEvent(e,{...this.sharedProperties,...r})}setSharedProperty(e,r){this.sharedProperties[e]=r}postEvent(e,r){const n={};for(const[i,s]of r)n[i]=s;this.sendTelemetryEvent(e,n)}dispose(){return this.baseReporter.dispose()}}function Hf(){switch(u.env.uriScheme){case"vscode":return Xn.aU.Public;case"vscode-insiders":return Xn.aU.Insiders;case"vscode-exploration":return Xn.aU.Internal;case"code-oss":return Xn.aU.Team;default:return Xn.aU.Public}}class Gf{constructor(){Ql(this,"initializePromise",Promise.resolve())}isFlightEnabled(e){return!1}isCachedFlightEnabled(e){return Promise.resolve(!1)}isFlightEnabledAsync(e){return Promise.resolve(!1)}getTreatmentVariable(e,r){}getTreatmentVariableAsync(e,r){return Promise.resolve(void 0)}}async function Vf(t,e){const r=t.extension.id,n=t.extension.packageJSON.name,i=t.extension.packageJSON.version,s=Hf();return n==="vscode-pull-request-github"?(0,Xn.X7)(r,i,s,e,t.globalState):new Gf}var Bf=Object.defineProperty,bi=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Kv extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has no GitHub remotes`}}class Yv extends Error{constructor(e){super();this.repository=e}get message(){return`${this.repository.rootUri.toString()} has a detached HEAD (create a branch first)`}}class Xv extends Error{constructor(e,r,n){super();this.branchName=e,this.upstreamRef=r,this.problem=n}get message(){const{upstreamRef:{remote:e,name:r},branchName:n,problem:i}=this;return`The upstream ref ${e}/${r} for branch ${n} ${i}.`}}const Jv="No Milestone";class Wl{constructor(e,r,n){this._folderManagers=e,this._credentialStore=r,this._telemetry=n,bi(this,"_subs"),bi(this,"_onDidChangeState",new u.EventEmitter),bi(this,"onDidChangeState",this._onDidChangeState.event),bi(this,"_state",Yt.Initializing),this._subs=[],u.commands.executeCommand("setContext",Al,this._state),this._subs.push(...e.map(i=>i.onDidLoadRepositories(s=>this.state=s)))}get folderManagers(){return this._folderManagers}insertFolderManager(e){const r=u.workspace.workspaceFolders;if(r){const n=r.findIndex(i=>i.uri.toString()===e.repository.rootUri.toString());if(n>-1){const i=this._folderManagers.slice(n,this._folderManagers.length);this._folderManagers=this._folderManagers.slice(0,n),this._folderManagers.push(e),this._folderManagers.push(...i);return}}this._folderManagers.push(e)}removeRepo(e){const r=this._folderManagers.findIndex(n=>n.repository.rootUri.toString()===e.rootUri.toString());if(r>-1){const n=this._folderManagers[r];this._folderManagers.splice(r),n.dispose()}}getManagerForIssueModel(e){if(e===void 0)return;const r=e.remote.url.substring(0,e.remote.url.length-h.extname(e.remote.url).length);for(const n of this._folderManagers)if(n.gitHubRepositories.map(i=>i.remote.url.substring(0,i.remote.url.length-h.extname(i.remote.url).length)).includes(r))return n}getManagerForFile(e){for(const r of this._folderManagers){const n=r.repository.rootUri.path,i=e.path.substring(n.length>1?n.length+1:n.length);if(se(u.Uri.joinPath(r.repository.rootUri,i).path,e.path)===0)return r}}get state(){return this._state}set state(e){const r=e!==this._state;this._state=e,r&&(u.commands.executeCommand("setContext",Al,e),this._onDidChangeState.fire())}get credentialStore(){return this._credentialStore}async clearCredentialCache(){await this._credentialStore.reset(),this.state=Yt.Initializing}async authenticate(){const e=await this._credentialStore.login(He.github);let r;return Gn()&&(r=await this._credentialStore.login(He["github-enterprise"])),!!e||!!r}createGitHubRepository(e,r){return new Un(e,r,this._telemetry)}createGitHubRepositoryFromOwnerName(e,r){const n=`https://github.com/${e}/${r}`;return new Un(new Zi(r,n,new Ur(n)),this._credentialStore,this._telemetry)}dispose(){this._subs.forEach(e=>e.dispose())}}bi(Wl,"ID","RepositoriesManager");function Zv(t){switch(t){case"committed":return EventType.Committed;case"mentioned":return EventType.Mentioned;case"subscribed":return EventType.Subscribed;case"commented":return EventType.Commented;case"reviewed":return EventType.Reviewed;default:return EventType.Other}}var jf=Object.defineProperty,mr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qa{constructor(e){mr(this,"_onDidOpenRepository",new u.EventEmitter),mr(this,"onDidOpenRepository",this._onDidOpenRepository.event),mr(this,"_onDidCloseRepository",new u.EventEmitter),mr(this,"onDidCloseRepository",this._onDidCloseRepository.event),mr(this,"_onDidChangeState",new u.EventEmitter),mr(this,"onDidChangeState",this._onDidChangeState.event),mr(this,"_onDidPublish",new u.EventEmitter),mr(this,"onDidPublish",this._onDidPublish.event),mr(this,"_gitAPI"),mr(this,"_disposables");const r=e.exports;try{this._gitAPI=r.getAPI(1)}catch(n){throw u.window.showErrorMessage("Activating the Pull Requests and Issues extension failed. Please make sure you have git installed."),n}this._disposables=[],this._disposables.push(this._gitAPI.onDidCloseRepository(n=>this._onDidCloseRepository.fire(n))),this._disposables.push(this._gitAPI.onDidOpenRepository(n=>this._onDidOpenRepository.fire(n))),this._disposables.push(this._gitAPI.onDidChangeState(n=>this._onDidChangeState.fire(n))),this._disposables.push(this._gitAPI.onDidPublish(n=>this._onDidPublish.fire(n)))}get repositories(){return this._gitAPI.repositories}get state(){return this._gitAPI.state}static async createProvider(){const e=u.extensions.getExtension("vscode.git");if(e)return await e.activate(),new Qa(e)}dispose(){this._disposables.forEach(e=>e.dispose())}}var zf=Object.defineProperty,yt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?zf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Qf{constructor(e){this._liveShareAPI=e,yt(this,"_onDidOpenRepository",new u.EventEmitter),yt(this,"onDidOpenRepository",this._onDidOpenRepository.event),yt(this,"_onDidCloseRepository",new u.EventEmitter),yt(this,"onDidCloseRepository",this._onDidCloseRepository.event),yt(this,"_openRepositories",[]),yt(this,"_sharedServiceProxy"),yt(this,"_disposables"),this._disposables=[]}get repositories(){return this._openRepositories}async initialize(){this._sharedServiceProxy=await this._liveShareAPI.getSharedService(ht)||void 0,!!this._sharedServiceProxy&&(this._sharedServiceProxy.isServiceAvailable&&await this._refreshWorkspaces(!0),this._disposables.push(this._sharedServiceProxy.onDidChangeIsServiceAvailable(async e=>{await this._refreshWorkspaces(e)})),this._disposables.push(u.workspace.onDidChangeWorkspaceFolders(this._onDidChangeWorkspaceFolders.bind(this))))}async _onDidChangeWorkspaceFolders(e){e.added.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.openVSLSRepository(r)}),e.removed.forEach(async r=>{r.uri.scheme==="vsls"&&this._sharedServiceProxy&&this._sharedServiceProxy.isServiceAvailable&&await this.closeVSLSRepository(r)})}async _refreshWorkspaces(e){u.workspace.workspaceFolders&&u.workspace.workspaceFolders.forEach(async r=>{r.uri.scheme==="vsls"&&(e?await this.openVSLSRepository(r):await this.closeVSLSRepository(r))})}async openVSLSRepository(e){if(this.getRepository(e))return;const n=new Yf(e,this._sharedServiceProxy),i=new Wf,s=new Proxy(n,i);await s.initialize(),this.openRepository(s)}async closeVSLSRepository(e){const r=this.getRepository(e);!r||this.closeRepository(r)}openRepository(e){this._openRepositories.push(e),this._onDidOpenRepository.fire(e)}closeRepository(e){this._openRepositories=this._openRepositories.filter(r=>r!==e),this._onDidCloseRepository.fire(e)}getRepository(e){return this._openRepositories.filter(r=>r.workspaceFolder===e)[0]}dispose(){this._sharedServiceProxy=void 0,this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}class Wf{constructor(){}get(e,r){return r in e?e[r]:function(...n){return e.proxy.request(Ae,[r,e.workspaceFolder.uri.toString(),...n])}}}class Kf{constructor(e){yt(this,"HEAD"),yt(this,"refs"),yt(this,"remotes"),yt(this,"submodules",[]),yt(this,"rebaseCommit"),yt(this,"mergeChanges",[]),yt(this,"indexChanges",[]),yt(this,"workingTreeChanges",[]),yt(this,"_onDidChange",new u.EventEmitter),yt(this,"onDidChange",this._onDidChange.event),this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs}update(e){this.HEAD=e.HEAD,this.remotes=e.remotes,this.refs=e.refs,this._onDidChange.fire()}}class Yf{constructor(e,r){this.workspaceFolder=e,this.proxy=r,yt(this,"rootUri"),yt(this,"state")}async initialize(){const e=await this.proxy.request(Ae,[ve,this.workspaceFolder.uri.toString()]);this.state=new Kf(e),this.rootUri=u.Uri.parse(e.rootUri),this.proxy.onNotify(Or,this._notifyHandler.bind(this))}_notifyHandler(e){var r;(r=this.state)==null||r.update(e)}}var Xf=Object.defineProperty,Kl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Xf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Jf{constructor(e,r){this._liveShareAPI=e,this._api=r,Kl(this,"_sharedService"),Kl(this,"_disposables"),this._disposables=[]}async initialize(){this._sharedService=await this._liveShareAPI.shareService(ht)||void 0,this._sharedService&&this._sharedService.onRequest(Ae,this._gitHandler.bind(this))}async _gitHandler(e){const r=e[0],n=e[1],i=u.Uri.parse(n),s=this._liveShareAPI.convertSharedUriToLocal(i),c=this._api.getGitProvider(s);if(!c)return;const v=c.repositories.filter(w=>w.rootUri.toString()===s.toString())[0];if(v){const w=e.slice(2);if(r===ve)return this._disposables.push(v.state.onDidChange(T=>{this._sharedService.notify(Or,{HEAD:v.state.HEAD,remotes:v.state.remotes,refs:v.state.refs})})),{HEAD:v.state.HEAD,remotes:v.state.remotes,refs:v.state.refs,rootUri:i.toString()};if(r==="show"){const T=w[1],D=i.with({path:T}),H=this._liveShareAPI.convertSharedUriToLocal(D);return w[1]=H.fsPath,v[r](...w)}if(v[r])return v[r](...w)}else return null}dispose(){this._disposables.forEach(e=>e.dispose()),this._sharedService=void 0,this._disposables=[]}}var Zf=Object.defineProperty,ki=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Zf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);async function eg(){const t=u.extensions.getExtension("ms-vsliveshare.vsliveshare");if(!t)return null;const e=t.isActive?t.exports:await t.activate();if(!e)return null;const r="0.3.967";return e.getApi?e.getApi(r):e.getApiAsync(r)}class tg{constructor(e){this._api=e,ki(this,"_liveShareAPI"),ki(this,"_host"),ki(this,"_guest"),ki(this,"_localDisposables"),ki(this,"_globalDisposables"),this._localDisposables=[],this._globalDisposables=[]}async initialize(){if(this._liveShareAPI||(this._liveShareAPI=await eg()),!!this._liveShareAPI)return this._globalDisposables.push(this._liveShareAPI.onDidChangeSession(e=>this._onDidChangeSession(e.session),this)),this._liveShareAPI.session&&this._onDidChangeSession(this._liveShareAPI.session),this._liveShareAPI}async _onDidChangeSession(e){if(this._localDisposables.forEach(r=>r.dispose()),e.role===1){this._host=new Jf(this._liveShareAPI,this._api),this._localDisposables.push(this._host),await this._host.initialize();return}e.role===2&&(this._guest=new Qf(this._liveShareAPI),this._localDisposables.push(this._guest),await this._guest.initialize(),this._localDisposables.push(this._api.registerGitProvider(this._guest)))}dispose(){this._liveShareAPI=void 0,this._localDisposables.forEach(e=>e.dispose()),this._globalDisposables.forEach(e=>e.dispose())}}function rg(t){return new tg(t)}async function ng(t,e){const r=await Qa.createProvider();if(r)return e.registerGitProvider(r),r}var ig=Object.defineProperty,Yl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class sg{constructor(e){this.pullRequestManager=e,Yl(this,"onNotifiedEmitter",new u.EventEmitter),Yl(this,"onNotified",this.onNotifiedEmitter.event),e.folderManagers.forEach(r=>{r.onDidChangeAssignableUsers(n=>{this.notifySuggestedAccounts(n)})})}async requestAsync(e,r,n){let i=null;switch(e){case"initialize":i={description:"Pullrequest",capabilities:{supportsDispose:!1,supportsInviteLink:!1,supportsPresence:!1,supportsContactPresenceRequest:!1,supportsPublishPresence:!1}};const s=new Map;for(const c of this.pullRequestManager.folderManagers){const v=c.getAllAssignableUsers();if(!!v)for(const w of v)s.has(w.login)||s.set(w.login,w)}s.size>0&&this.notifySuggestedAccounts(Array.from(s.values()));break;default:throw new Error(`type:${e} not supported`)}return i}async notifySuggestedAccounts(e){let r;try{r=await this.getCurrentUserLogin()}catch(n){}r&&e.findIndex(n=>n.login===r)!==-1&&this.notifySuggestedUsers(e.filter(n=>n.email).map(n=>({id:n.login,displayName:n.name?n.name:n.login,email:n.email})),!0)}async getCurrentUserLogin(){var e;if(this.pullRequestManager.folderManagers.length===0)return;const r=await((e=this.pullRequestManager.folderManagers[0])==null?void 0:e.getOrigin());if(r){const n=r.hub.currentUser;if(n)return n.login}}notify(e,r){this.onNotifiedEmitter.fire({type:e,body:r})}notifySuggestedUsers(e,r){this.notify("suggestedUsers",{contacts:e,exclusive:r})}}var ag=Object.defineProperty,Xl=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ag(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class og{constructor(){Xl(this,"_extensionsDisposable"),Xl(this,"_subscriptions",[]),this._extensionsDisposable=u.extensions.onDidChange(this.onExtensionsChanged,this),this.onExtensionsChanged()}dispose(){this._extensionsDisposable.dispose(),u.Disposable.from(...this._subscriptions).dispose()}register(e){this._subscriptions.push(e.registerActionRunner("createPullRequest",{partnerId:"ghpr",name:"GitHub Pull Requests and Issues",label:"Create Pull Request",run:function(r){r.branch.isRemote||u.commands.executeCommand("pr.create",{repoPath:r.repoPath,compareBranch:r.branch.name})}}))}async onExtensionsChanged(){var e;const r=(e=u.extensions.getExtension("eamodio.gitlens"))!=null?e:u.extensions.getExtension("eamodio.gitlens-insiders");if(r)if(this._extensionsDisposable.dispose(),r.isActive)this.register(await r.exports);else{let n=0;const i=setInterval(async()=>{r.isActive?(clearInterval(i),this.register(await r.exports)):(n++,n>60&&clearInterval(i))},1e3)}}}var ug=Object.defineProperty,kn=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Jl{constructor(e,r,n,i,s){this.issueModel=e,this.manager=r,this.stateManager=n,this.shouldPromptForBranch=s,kn(this,"repoChangeDisposable"),kn(this,"_branchName"),kn(this,"user"),kn(this,"repo"),kn(this,"_repoDefaults"),kn(this,"_onDidChangeCurrentIssueState",new u.EventEmitter),kn(this,"onDidChangeCurrentIssueState",this._onDidChangeCurrentIssueState.event),this.setRepo(i!=null?i:this.issueModel.githubRepository.remote)}setRepo(e){var r;for(let n=0;n<this.stateManager.gitAPI.repositories.length;n++){const i=this.stateManager.gitAPI.repositories[n];for(let s=0;s<i.state.remotes.length;s++){const c=i.state.remotes[s];if(c.name===(e==null?void 0:e.remoteName)&&((r=c.fetchUrl)==null?void 0:r.toLowerCase().search(`${e.owner.toLowerCase()}/${e.repositoryName.toLowerCase()}`))!==-1){this.repo=i;return}}}}get branchName(){return this._branchName}get repoDefaults(){return this._repoDefaults}get issue(){return this.issueModel}async startWorking(){var e;try{if(this._repoDefaults=await this.manager.getPullRequestDefaults(),await this.createIssueBranch()){await this.setCommitMessageAndGitEvent(),this._onDidChangeCurrentIssueState.fire();const r=this.manager.getCurrentUser(this.issueModel).login;return u.workspace.getConfiguration("githubIssues").get("assignWhenWorking")&&!((e=this.issueModel.assignees)==null?void 0:e.find(n=>n.login===r))&&(this.manager.gitHubRepositories.find(n=>n.remote.owner===this.issueModel.remote.owner&&n.remote.repositoryName===this.issueModel.remote.repositoryName)&&await this.manager.assignIssue(this.issueModel,r),await this.stateManager.refresh()),!0}}catch(r){u.window.showErrorMessage("There is no remote. Can't start working on an issue.")}return!1}dispose(){var e;(e=this.repoChangeDisposable)==null||e.dispose()}async stopWorking(){this.repo&&(this.repo.inputBox.value=""),this._repoDefaults&&await this.manager.repository.checkout(this._repoDefaults.base),this._onDidChangeCurrentIssueState.fire(),this.dispose()}getBasicBranchName(e){return`${e}/issue${this.issueModel.number}`}async branchExists(e){try{return!!await this.manager.repository.getBranch(e)}catch(r){}return!1}async createOrCheckoutBranch(e){try{return await this.branchExists(e)?await this.manager.repository.checkout(e):await this.manager.repository.createBranch(e,!0),!0}catch(r){return r.message!=="User aborted"&&u.window.showErrorMessage(`Unable to checkout branch ${e}. There may be file conflicts that prevent this branch change. Git error: ${r.error}`),!1}}async getUser(){return this.user||(this.user=await this.issueModel.githubRepository.getAuthenticatedUser()),this.user}async ensureBranchTitleConfigMigrated(){var e;const r=u.workspace.getConfiguration(pt),n=r.inspect(gl);async function i(s,c){await r.update(Ia,s,c),await r.update(gl,void 0,c)}return(n==null?void 0:n.globalValue)&&await i(n.globalValue,u.ConfigurationTarget.Global),(n==null?void 0:n.workspaceValue)&&await i(n.workspaceValue,u.ConfigurationTarget.Workspace),(n==null?void 0:n.workspaceFolderValue)&&await i(n.workspaceFolderValue,u.ConfigurationTarget.WorkspaceFolder),(e=u.workspace.getConfiguration(pt).get(Ia))!=null?e:this.getBasicBranchName(await this.getUser())}validateBranchName(e){const r=/[^ \\@\~\^\?\*\[]+/,n=e.match(r);if(n&&n.length>0&&n[0]!==e)return"Branch name cannot contain a space or the following characters: \\@~^?*["}showBranchNameError(e){const r="Edit Setting";u.window.showErrorMessage(e,r).then(n=>{n===r&&u.commands.executeCommand("workbench.action.openSettings",`${pt}.${Ia}`)})}async createIssueBranch(){const e=this.shouldPromptForBranch?"prompt":u.workspace.getConfiguration(pt).get(vl);if(e==="off")return!0;const r=this.stateManager.getSavedIssueState(this.issueModel.number);if(this._branchName=this.shouldPromptForBranch?void 0:r.branch,!this._branchName){const n=await ds(await this.ensureBranchTitleConfigMigrated(),this.issue,void 0,await this.getUser());if(e==="on"){const i=this.validateBranchName(n);if(i)return this.showBranchNameError(i),!1;this._branchName=n}else this._branchName=await u.window.showInputBox({value:n,prompt:"Enter the label for the new branch."})}return this._branchName?(r.branch=this._branchName,await this.stateManager.setSavedIssueState(this.issueModel,r),await this.createOrCheckoutBranch(this._branchName)?!0:(this._branchName=void 0,!1)):!1}async getCommitMessage(){const e=u.workspace.getConfiguration(pt).get(Vp);if(typeof e=="string")return ds(e,this.issueModel,this._repoDefaults)}async setCommitMessageAndGitEvent(){const e=await this.getCommitMessage();this.repo&&e&&(this.repo.inputBox.value=e)}}class Zl extends u.CompletionItem{constructor(e){super(`${e.number}: ${e.title}`,u.CompletionItemKind.Issue);this.issue=e}}class lg{constructor(e,r,n){this.stateManager=e,this.repositoriesManager=r,this.context=n}async provideCompletionItems(e,r,n,i){var s,c,v,w;if(e.languageId!=="scminput"&&e.uri.scheme!=="comment"&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&!e.getText(e.getWordRangeAtPosition(r)).match(/#[0-9]*$/))return[];if(r.character<=6&&e.languageId==="markdown"&&e.getText(new u.Range(r.with(void 0,0),r))===new Array(r.character+1).join("#"))return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(pt).get("ignoreCompletionTrigger",[]).find(ee=>ee===e.languageId))return[];if(e.languageId!=="scminput"&&!await xa(e,r))return[];let T=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="#"&&(T=new u.Range(r.translate(0,-1),r)),await this.stateManager.tryInitializeAndWait();const D=new Map,H=new Date;let V,W;if(e.languageId==="scminput"?W=Tl(e.uri):e.uri.scheme==="comment"?W=u.window.visibleTextEditors.length>0?(s=u.workspace.getWorkspaceFolder(u.Uri.file(u.window.visibleTextEditors[0].document.uri.fsPath)))==null?void 0:s.uri:void 0:W=(c=u.workspace.getWorkspaceFolder(e.uri))==null?void 0:c.uri,!W)return[];try{V=await((v=this.repositoriesManager.getManagerForFile(W))==null?void 0:v.getPullRequestDefaults())}catch(ee){}const Z=this.stateManager.getIssueCollection(W);for(const ee of Z){const te=(w=await ee[1])!=null?w:[];if(te.length!==0)if(te[0]instanceof Ct){let ae=0;for(const me of te)D.set(Bn(me),await this.completionItemFromIssue(V,me,H,T,e,ae++))}else for(let ae=0;ae<te.length;ae++){const me=te[ae];for(const fe of me.issues)D.set(Bn(fe),await this.completionItemFromIssue(V,fe,H,T,e,ae,me.milestone))}}return[...D.values()]}async completionItemFromIssue(e,r,n,i,s,c,v){var w;const T=new Zl(r);if(s.languageId==="markdown")T.insertText=`[${Bn(r,e)}](${r.html_url})`;else{const H=u.workspace.getConfiguration(pt).get("issueCompletionFormatScm");s.uri.path.match(/scm\/git\/scm\d\/input/)&&typeof H=="string"?T.insertText=await ds(H,r,e):T.insertText=`${Bn(r,e)}`}T.documentation=r.body,T.range=i,T.detail=v?v.title:(w=r.milestone)==null?void 0:w.title;let D=(n.getTime()-new Date(r.updatedAt).getTime()).toString();return D=new Array(20-D.length).join("0")+D,T.sortText=`${c} ${D}`,T.filterText=`${T.detail} # ${r.number} ${r.title} ${T.documentation}`,T}async resolveCompletionItem(e,r){return e instanceof Zl&&(e.documentation=await Fa(e.issue,this.context,this.repositoriesManager),e.command={command:"issues.issueCompletion",title:"Issue Completion Chose,"}),e}}var cg=Object.defineProperty,_i=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?cg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Ir="newIssue",dg="NewIssue.md",fs="Assignees:",Ei="Labels:";function Wa(t){const e=JSON.parse(t.query);if(e.origin)return u.Uri.parse(e.origin)}class hg{constructor(){_i(this,"content"),_i(this,"createTime",0),_i(this,"modifiedTime",0),_i(this,"_onDidChangeFile",new u.EventEmitter),_i(this,"onDidChangeFile",this._onDidChangeFile.event)}watch(e,r){const n=this.onDidChangeFile(i=>{i.length===0&&i[0].type===u.FileChangeType.Deleted&&n.dispose()});return n}stat(e){var r,n;return{type:u.FileType.File,ctime:this.createTime,mtime:this.modifiedTime,size:(n=(r=this.content)==null?void 0:r.length)!=null?n:0}}readDirectory(e){return[]}createDirectory(e){}readFile(e){var r;return(r=this.content)!=null?r:new Uint8Array(0)}writeFile(e,r,n={create:!1,overwrite:!1}){const i=this.content;this.content=r,i===void 0?(this.createTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Created}])):(this.modifiedTime=new Date().getTime(),this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Changed}]))}delete(e,r){this.content=void 0,this.createTime=0,this.modifiedTime=0,this._onDidChangeFile.fire([{uri:e,type:u.FileChangeType.Deleted}])}rename(e,r,n){}}class mg{constructor(e){this.manager=e}async provideCompletionItems(e,r,n,i){if(!e.lineAt(r.line).text.startsWith(Ei))return[];const s=Wa(e.uri);if(!s)return[];const c=this.manager.getManagerForFile(s);if(!c)return[];const v=await c.getPullRequestDefaults();return(await c.getLabels(void 0,v)).map(T=>{const D=new u.CompletionItem(T.name,u.CompletionItemKind.Color);return D.documentation=`#${T.color}`,D.commitCharacters=[" ",","],D})}}class pg{constructor(e,r,n,i){this.manager=e,this.stateManager=r,this.context=n,this.telemetry=i}async provideHover(e,r,n){if(!await Sl(e,r))return;let i=e.getWordRangeAtPosition(r,hi);if(i&&i.start.character>0){i=new u.Range(new u.Position(i.start.line,i.start.character-1),i.end);const c=e.getText(i).match(hi),v=Da(c),w=this.manager.getManagerForFile(e.uri);if(!w)return;if(v&&c&&v.issueNumber<=this.stateManager.maxIssueNumber(w.repository.rootUri))return this.createHover(w,c[0],v,i)}else return}async createHover(e,r,n,i){const s=await Bp(this.stateManager,e,r,n);if(!!s)return this.telemetry.sendTelemetryEvent("issues.issueHover"),new u.Hover(await Fa(s,this.context,this.manager,n.commentNumber),i)}}var fg=Object.defineProperty,ec=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class _n extends u.TreeItem{constructor(e,r,n){super(r,n);this.uri=e}get labelAsString(){var e;return typeof this.label=="string"?this.label:(e=this.label)==null?void 0:e.label}}class gg{constructor(e,r,n){this.stateManager=e,this.manager=r,this.context=n,ec(this,"_onDidChangeTreeData",new u.EventEmitter),ec(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),n.subscriptions.push(this.manager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeIssueData(()=>{this._onDidChangeTreeData.fire()})),n.subscriptions.push(this.stateManager.onDidChangeCurrentIssue(()=>{this._onDidChangeTreeData.fire()}))}getTreeItem(e){var r;let n;return e instanceof _n?n=e:e instanceof jn?n=new _n(e.repository.rootUri,h.basename(e.repository.rootUri.fsPath),u.TreeItemCollapsibleState.Expanded):e instanceof Ct?(n=new _n(void 0,`${e.number}: ${e.title}`,u.TreeItemCollapsibleState.None),n.iconPath=e.isOpen?new u.ThemeIcon("issues",new u.ThemeColor("issues.open")):new u.ThemeIcon("issue-closed",new u.ThemeColor("issues.closed")),((r=this.stateManager.currentIssue(e.uri))==null?void 0:r.issue.number)===e.number?(n.label=`\u2713 ${n.label}`,n.contextValue="currentissue"):this.stateManager.getSavedIssueState(e.number).branch?n.contextValue="continueissue":n.contextValue="issue",qp(e)&&(n.contextValue="link"+n.contextValue)):n=new _n(e.uri,e.milestone.title,e.issues.length>0?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.None),n}getChildren(e){return e===void 0&&this.manager.state!==Yt.RepositoriesLoaded?this.getStateChildren():this.getIssuesChildren(e)}async resolveTreeItem(e,r){return r instanceof Ct&&(e.tooltip=await Fa(r,this.context,this.manager)),e}getStateChildren(){return this.manager.state===Yt.NeedsAuthentication?[]:[new _n(void 0,"Loading...")]}getQueryItems(e){const r=this.stateManager.getIssueCollection(e.repository.rootUri);if(r.size===1)return Array.from(r.values())[0];const n=Array.from(r.keys()),i=n[0];return n.map(s=>{const c=new _n(e.repository.rootUri,s);return c.contextValue="query",c.collapsibleState=s===i?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,c})}getIssuesChildren(e){var r;return e===void 0?this.manager.folderManagers.length===1?this.getQueryItems(this.manager.folderManagers[0]):this.manager.folderManagers.length>1?this.manager.folderManagers:[]:e instanceof jn?this.getQueryItems(e):e instanceof _n?e.uri?(r=this.stateManager.getIssueCollection(e.uri).get(e.labelAsString))!=null?r:[]:[]:e instanceof Ct?[]:e.issues.map(n=>{const i=Object.assign(n);return i.uri=e.uri,i})}}var vg=Object.defineProperty,yg=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class wg{constructor(e){yg(this,"expression"),e.subscriptions.push(u.workspace.onDidChangeConfiguration(()=>{this.updateTriggers()})),this.updateTriggers()}updateTriggers(){const e=u.workspace.getConfiguration(pt).get("createIssueTriggers",[]);this.expression=e.length>0?new RegExp(e.join("|")):void 0}async provideCodeActions(e,r,n,i){if(this.expression===void 0||n.only&&n.only!==u.CodeActionKind.QuickFix)return[];const s=[];let c=r.start.line;do{const v=e.lineAt(c).text,w=v.substring(0,Hp);if(!w.match(hi)){const D=w.search(this.expression);if(D>=0){const H=new u.CodeAction("Create GitHub Issue",u.CodeActionKind.QuickFix),V=w.substring(D).search(/\s/),W=D+(V>0?V:w.match(this.expression)[0].length);H.command={title:"Create GitHub Issue",command:"issue.createIssueFromSelection",arguments:[{document:e,lineNumber:c,line:v,insertIndex:W,range:r}]},s.push(H);break}}c++}while(r.end.line>=c);return s}}var bg=Object.defineProperty,Qt=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const kg=["Recovery"],_g="currentIssue",Ka="issues",tc="ignoreMilestones",Ya=[{label:"My Issues",query:"default"}];class ey extends null{constructor(){super(...arguments);Qt(this,"uri")}}class Eg{constructor(e,r,n){this.gitAPI=e,this.manager=r,this.context=n,Qt(this,"resolvedIssues",new Map),Qt(this,"_singleRepoStates",new Map),Qt(this,"_onRefreshCacheNeeded",new u.EventEmitter),Qt(this,"onRefreshCacheNeeded",this._onRefreshCacheNeeded.event),Qt(this,"_onDidChangeIssueData",new u.EventEmitter),Qt(this,"onDidChangeIssueData",this._onDidChangeIssueData.event),Qt(this,"_queries",[]),Qt(this,"_onDidChangeCurrentIssue",new u.EventEmitter),Qt(this,"onDidChangeCurrentIssue",this._onDidChangeCurrentIssue.event),Qt(this,"initializePromise"),Qt(this,"statusBarItem"),Qt(this,"isSettingIssue",!1),r.folderManagers.forEach(i=>{this.context.subscriptions.push(i.onDidChangeRepositories(()=>this.refresh()))})}getIssueCollection(e){var r;let n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.issueCollection;return n||(n=new Map,n)}getOrCreateSingleRepoState(e,r){let n=this._singleRepoStates.get(e.path);return n||(r||(r=this.manager.getManagerForFile(e)),n={issueCollection:new Map,maxIssueNumber:0,folderManager:r},this._singleRepoStates.set(e.path,n),n)}async tryInitializeAndWait(){return this.initializePromise||(this.initializePromise=new Promise(e=>{if(this.manager.state===Yt.RepositoriesLoaded)this.doInitialize(),e();else{const r=this.manager.onDidChangeState(()=>{this.manager.state===Yt.RepositoriesLoaded&&(this.doInitialize(),r.dispose(),e())});this.context.subscriptions.push(r)}})),this.initializePromise}registerRepositoryChangeEvent(){this.gitAPI.repositories.forEach(e=>{this.context.subscriptions.push(e.state.onDidChange(async()=>{var r;const n=this.getOrCreateSingleRepoState(e.rootUri),i=n.lastHead,s=n.lastBranch,c=e.state.HEAD?e.state.HEAD.commit:void 0;(e.state.HEAD?e.state.HEAD.commit:void 0)!==i&&await this.setIssueData(n.folderManager);const v=(r=e.state.HEAD)==null?void 0:r.name;(i!==c||s!==v)&&(!n.currentIssue||v!==n.currentIssue.branchName)&&(v?n.folderManager&&await this.setCurrentIssueFromBranch(n,v):await this.setCurrentIssue(n,void 0)),n.lastHead=e.state.HEAD?e.state.HEAD.commit:void 0,n.lastBranch=e.state.HEAD?e.state.HEAD.name:void 0}))})}refreshCacheNeeded(){this._onRefreshCacheNeeded.fire()}async refresh(){return this.setAllIssueData()}async doInitialize(){var e;this.cleanIssueState(),this._queries=u.workspace.getConfiguration(pt).get(Vn,Ya),this._queries.length===0&&(this._queries=Ya),this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${pt}.${Vn}`)?(this._queries=u.workspace.getConfiguration(pt).get(Vn,Ya),this._onRefreshCacheNeeded.fire()):r.affectsConfiguration(`${pt}.${tc}`)&&this._onRefreshCacheNeeded.fire()})),await this.setAllIssueData(),this.registerRepositoryChangeEvent(),this.context.subscriptions.push(this.onRefreshCacheNeeded(async()=>{await this.refresh()}));for(const r of this.manager.folderManagers){const n=this.getOrCreateSingleRepoState(r.repository.rootUri,r);n.lastHead=r.repository.state.HEAD?r.repository.state.HEAD.commit:void 0,this._singleRepoStates.set(r.repository.rootUri.path,n);const i=(e=r.repository.state.HEAD)==null?void 0:e.name;!n.currentIssue&&i&&await this.setCurrentIssueFromBranch(n,i)}}cleanIssueState(){const e=this.context.workspaceState.get(Ka),r=e?JSON.parse(e):{issues:[],branches:[]},n=new Date().valueOf()-30*864e5;for(const i in r.issues)r.issues[i].stateModifiedTime<n&&(r.branches&&r.branches[i]&&delete r.branches[i],delete r.issues[i])}async getUsers(e){var r;await this.initializePromise;const n=await((r=this.manager.getManagerForFile(e))==null?void 0:r.getAssignableUsers()),i=new Map;for(const s in n)n[s].forEach(c=>{i.set(c.login,c)});return i}getUserMap(e){if(!this.initializePromise)return Promise.resolve(new Map);const r=this.getOrCreateSingleRepoState(e);return r.userMap||(r.userMap=this.getUsers(e)),r.userMap}async getCurrentUser(e){var r;return(r=this.manager.credentialStore.getCurrentUser(e))==null?void 0:r.login}async setAllIssueData(){return Promise.all(this.manager.folderManagers.map(e=>this.setIssueData(e)))}async setIssueData(e){var r,n;const i=this.getOrCreateSingleRepoState(e.repository.rootUri,e);i.issueCollection.clear();let s,c;for(const v of this._queries){let w;if(v.query===Gp)w=this.setMilestones(e);else{if(!s)try{s=await e.getPullRequestDefaults()}catch(T){}if(!c){const T=Mn(e.repository).filter(D=>D.authProviderId===He["github-enterprise"]);c=await this.getCurrentUser(T.length?He["github-enterprise"]:He.github)}w=this.setIssues(e,await ds(v.query,void 0,s,c))}i.issueCollection.set(v.label,w)}i.maxIssueNumber=await e.getMaxIssue(),i.lastHead=(r=e.repository.state.HEAD)==null?void 0:r.commit,i.lastBranch=(n=e.repository.state.HEAD)==null?void 0:n.name}setIssues(e,r){return new Promise(async n=>{const i=await e.getIssues({fetchNextPage:!1},r);this._onDidChangeIssueData.fire(),n(i.items.map(s=>{const c=s;return c.uri=e.repository.rootUri,c}))})}async setCurrentIssueFromBranch(e,r){if(u.workspace.getConfiguration(pt).get(vl)==="off")return;let i;try{i=await e.folderManager.getPullRequestDefaults()}catch(c){return}if(r===i.base){await this.setCurrentIssue(e,void 0);return}if(e.currentIssue&&e.currentIssue.branchName===r)return;const s=this.getSavedState();for(const c in s.branches)if(c===r){const v=await e.folderManager.resolveIssue(s.branches[c].owner,s.branches[c].repositoryName,s.branches[c].number);v&&await this.setCurrentIssue(e,new Jl(v,e.folderManager,this));return}}setMilestones(e){return new Promise(async r=>{const n=new Date,i=u.workspace.getConfiguration(pt).get(tc,[]),s=await e.getMilestones({fetchNextPage:!1},i.indexOf(Fl)<0);let c;const v=new Map,w=[];for(let T=0;T<s.items.length;T++){const D=s.items[T];D.uri=e.repository.rootUri;const H=s.items[T].milestone;if(D.issues&&D.issues.length<=0||i.indexOf(H.title)>=0)continue;w.push(D);let V=H.dueOn?new Date(H.dueOn):void 0;V||(V=new Date(this.removeDateExcludeStrings(H.title)),isNaN(V.getTime())&&(V=new Date(H.createdAt))),V<n&&(c===void 0||V>c)&&(c=V),v.set(H.id?H.id:H.title,V)}w.sort((T,D)=>{const H=v.get(T.milestone.id?T.milestone.id:T.milestone.title),V=v.get(D.milestone.id?D.milestone.id:D.milestone.title);return c&&H>=c&&V>=c?H<=V?-1:1:H>=V?-1:1}),this._onDidChangeIssueData.fire(),r(w)})}removeDateExcludeStrings(e){return kg.forEach(r=>e=e.replace(r,"")),e}currentIssue(e){var r;return(r=this._singleRepoStates.get(e.path))==null?void 0:r.currentIssue}currentIssues(){return Array.from(this._singleRepoStates.values()).filter(e=>e==null?void 0:e.currentIssue).map(e=>e.currentIssue)}maxIssueNumber(e){var r,n;return(n=(r=this._singleRepoStates.get(e.path))==null?void 0:r.maxIssueNumber)!=null?n:0}async setCurrentIssue(e,r){if(!(this.isSettingIssue&&r===void 0)){if(this.isSettingIssue=!0,e instanceof jn){const n=this._singleRepoStates.get(e.repository.rootUri.path);if(!n)return;e=n}try{if(e.currentIssue&&(r==null?void 0:r.issue.number)===e.currentIssue.issue.number)return;e.currentIssue&&await e.currentIssue.stopWorking(),r&&this.context.subscriptions.push(r.onDidChangeCurrentIssueState(()=>this.updateStatusBar())),this.context.workspaceState.update(_g,r==null?void 0:r.issue.number),(!r||await r.startWorking())&&(e.currentIssue=r,this.updateStatusBar()),this._onDidChangeCurrentIssue.fire()}catch(n){}finally{this.isSettingIssue=!1}}}updateStatusBar(){const e=this.currentIssues(),r=e.length>0;if(!r){this.statusBarItem&&(this.statusBarItem.hide(),this.statusBarItem.dispose(),this.statusBarItem=void 0);return}r&&!this.statusBarItem&&(this.statusBarItem=u.window.createStatusBarItem("github.issues.status",u.StatusBarAlignment.Left,0),this.statusBarItem.name="GitHub Active Issue");const n=this.statusBarItem;n.text=`$(issues) Issue ${e.map(i=>Bn(i.issue,i.repoDefaults)).join(", ")}`,n.tooltip=e.map(i=>i.issue.title).join(", "),n.command="issue.statusBar",n.show()}getSavedState(){const e=this.context.workspaceState.get(Ka);return e?JSON.parse(e):{issues:Object.create(null),branches:Object.create(null)}}getSavedIssueState(e){var r;return(r=this.getSavedState().issues[`${e}`])!=null?r:{}}async setSavedIssueState(e,r){const n=this.getSavedState();return n.issues[`${e.number}`]={...r,stateModifiedTime:new Date().valueOf()},r.branch&&(n.branches||(n.branches=Object.create(null)),n.branches[r.branch]={number:e.number,owner:e.remote.owner,repositoryName:e.remote.repositoryName}),this.context.workspaceState.update(Ka,JSON.stringify(n))}}class Rg{constructor(e,r,n){this.stateManager=e,this.manager=r}async provideCompletionItems(e,r,n,i){var s;if(e.languageId!=="scminput"&&e.uri.scheme!==Ir&&r.character>0&&i.triggerKind===u.CompletionTriggerKind.Invoke&&e.getText(new u.Range(r.with(void 0,r.character-1),r))!=="@")return[];if(i.triggerKind===u.CompletionTriggerKind.TriggerCharacter&&u.workspace.getConfiguration(pt).get("ignoreUserCompletionTrigger",[]).find(T=>T===e.languageId))return[];if(e.languageId!=="scminput"&&!await xa(e,r))return[];let c=new u.Range(r,r);r.character-1>=0&&e.getText(new u.Range(r.translate(0,-1),r))==="@"&&(c=new u.Range(r.translate(0,-1),r));const v=e.uri.scheme===Ir?(s=Wa(e.uri))!=null?s:e.uri:e.languageId==="scminput"?Tl(e.uri):e.uri;if(!v)return[];const w=[];return(await this.stateManager.getUserMap(v)).forEach(T=>{const D=new zp({label:T.login,description:T.name},u.CompletionItemKind.User);D.insertText=`@${T.login}`,D.login=T.login,D.uri=v,D.range=c,D.detail=T.name,D.filterText=`@ ${T.login} ${T.name}`,e.uri.scheme===Ir&&(D.commitCharacters=[" ",","]),w.push(D)}),w}async resolveCompletionItem(e,r){const n=this.manager.getManagerForFile(e.uri);if(!n)return e;const i=await n.getPullRequestDefaults(),s=await n.resolveUser(i.owner,i.repo,e.login);return s&&(e.documentation=Aa(i,s),e.command={command:"issues.userCompletion",title:"User Completion Chosen"}),e}}class Cg{constructor(e,r){this.manager=e,this.telemetry=r}async provideHover(e,r,n){if(!await Sl(e,r))return;let i=e.getWordRangeAtPosition(r,Pa);if(i&&i.start.character>0){i=new u.Range(new u.Position(i.start.line,i.start.character),i.end);const c=e.getText(i).match(Pa);if(c)return this.createHover(e.uri,c[1],i)}else return}async createHover(e,r,n){try{const i=this.manager.getManagerForFile(e);if(!i)return;const s=await i.getPullRequestDefaults(),c=await i.resolveUser(s.owner,s.repo,r);return c&&c.name?(this.telemetry.sendTelemetryEvent("issues.userHover"),new u.Hover(Aa(s,c),n)):void 0}catch(i){return}}}var Sg=Object.defineProperty,Xa=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Sg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const Tg="issueCompletions.enabled",Ng="userCompletions.enabled";class Pg{constructor(e,r,n,i,s){this.gitAPI=e,this.manager=r,this.reviewManagers=n,this.context=i,this.telemetry=s,Xa(this,"_stateManager"),Xa(this,"createIssueInfo"),Xa(this,"documentFilters",[{language:"php"},{language:"powershell"},{language:"jade"},{language:"python"},{language:"r"},{language:"razor"},{language:"ruby"},{language:"rust"},{language:"scss"},{language:"search-result"},{language:"shaderlab"},{language:"shellscript"},{language:"sql"},{language:"swift"},{language:"typescript"},{language:"vb"},{language:"xml"},{language:"yaml"},{language:"markdown"},{language:"bat"},{language:"clojure"},{language:"coffeescript"},{language:"jsonc"},{language:"c"},{language:"cpp"},{language:"csharp"},{language:"css"},{language:"dockerfile"},{language:"fsharp"},{language:"git-commit"},{language:"go"},{language:"groovy"},{language:"handlebars"},{language:"hlsl"},{language:"ini"},{language:"java"},{language:"javascriptreact"},{language:"javascript"},{language:"json"},{language:"less"},{language:"log"},{language:"lua"},{language:"makefile"},{language:"ignore"},{language:"properties"},{language:"objective-c"},{language:"perl"},{language:"perl6"},"*"]),this._stateManager=new Eg(e,this.manager,this.context)}async initialize(){return this.context.subscriptions.push(u.workspace.registerFileSystemProvider(Ir,new hg)),this.registerCompletionProviders(),this.context.subscriptions.push(u.languages.registerCompletionItemProvider({scheme:Ir},new mg(this.manager)," ",",")),this.context.subscriptions.push(u.window.createTreeView("issues:github",{showCollapseAll:!0,treeDataProvider:new gg(this._stateManager,this.manager,this.context)})),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromSelection",(e,r)=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromSelection"),this.createTodoIssue(e,r)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromClipboard",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromClipboard"),this.createTodoIssueClipboard()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyGithubPermalink",e=>(this.telemetry.sendTelemetryEvent("issue.copyGithubPermalink"),this.copyPermalink(e instanceof u.Uri?e:void 0)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyMarkdownGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.copyMarkdownGithubPermalink"),this.copyMarkdownPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openGithubPermalink",()=>(this.telemetry.sendTelemetryEvent("issue.openGithubPermalink"),this.openPermalink()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.openIssue",e=>(this.telemetry.sendTelemetryEvent("issue.openIssue"),this.openIssue(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorking",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.startWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.continueWorking",e=>(this.telemetry.sendTelemetryEvent("issue.continueWorking"),this.startWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.startWorkingBranchPrompt",e=>(this.telemetry.sendTelemetryEvent("issue.startWorkingBranchPrompt"),this.startWorkingBranchPrompt(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorking",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.stopWorkingBranchDescriptiveTitle",e=>(this.telemetry.sendTelemetryEvent("issue.stopWorking"),this.stopWorking(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.statusBar",()=>(this.telemetry.sendTelemetryEvent("issue.statusBar"),this.statusBar()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueNumber",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueNumber"),this.copyIssueNumber(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.copyIssueUrl",e=>(this.telemetry.sendTelemetryEvent("issue.copyIssueUrl"),this.copyIssueUrl(e)))),this.context.subscriptions.push(u.commands.registerCommand("issue.refresh",()=>(this.telemetry.sendTelemetryEvent("issue.refresh"),this.refreshView()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.suggestRefresh",()=>(this.telemetry.sendTelemetryEvent("issue.suggestRefresh"),this.suggestRefresh()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.getCurrent",()=>(this.telemetry.sendTelemetryEvent("issue.getCurrent"),this.getCurrent()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.editQuery",e=>(this.telemetry.sendTelemetryEvent("issue.editQuery"),this.editQuery(e)),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssue",()=>(this.telemetry.sendTelemetryEvent("issue.createIssue"),this.createIssue()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.createIssueFromFile",()=>(this.telemetry.sendTelemetryEvent("issue.createIssueFromFile"),this.createIssueFromFile()),this)),this.context.subscriptions.push(u.commands.registerCommand("issue.issueCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.issueCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.userCompletion",()=>{this.telemetry.sendTelemetryEvent("issue.userCompletion")})),this.context.subscriptions.push(u.commands.registerCommand("issue.signinAndRefreshList",async()=>this.manager.authenticate())),this.context.subscriptions.push(u.commands.registerCommand("issue.goToLinkedCode",async e=>Up(e,this.manager))),this._stateManager.tryInitializeAndWait().then(()=>{this.context.subscriptions.push(u.languages.registerHoverProvider("*",new pg(this.manager,this._stateManager,this.context,this.telemetry))),this.context.subscriptions.push(u.languages.registerHoverProvider("*",new Cg(this.manager,this.telemetry))),this.context.subscriptions.push(u.languages.registerCodeActionsProvider("*",new wg(this.context)))})}dispose(){}registerCompletionProviders(){const e=[{provider:lg,trigger:"#",disposable:void 0,configuration:Tg},{provider:Rg,trigger:"@",disposable:void 0,configuration:Ng}];for(const r of e)u.workspace.getConfiguration(pt).get(r.configuration,!0)&&this.context.subscriptions.push(r.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new r.provider(this._stateManager,this.manager,this.context),r.trigger));this.context.subscriptions.push(u.workspace.onDidChangeConfiguration(r=>{for(const n of e)if(r.affectsConfiguration(`${pt}.${n.configuration}`)){const i=u.workspace.getConfiguration(pt).get(n.configuration,!0);!i&&n.disposable?(n.disposable.dispose(),n.disposable=void 0):i&&!n.disposable&&this.context.subscriptions.push(n.disposable=u.languages.registerCompletionItemProvider(this.documentFilters,new n.provider(this._stateManager,this.manager,this.context),n.trigger));break}}))}async createIssue(){var e,r;let n=(e=u.window.activeTextEditor)==null?void 0:e.document.uri;if(n||(n=(r=await this.chooseRepo("Select the repo to create the issue in."))==null?void 0:r.repository.rootUri),n)return this.makeNewIssueFile(n)}async createIssueFromFile(){var e,r,n,i;let s;if(!u.window.activeTextEditor||u.window.activeTextEditor.document.uri.scheme!==Ir)return;s=u.window.activeTextEditor.document.getText();const c=s.indexOf(`\r
\r
`),v=s.indexOf(`

`);let w;if(c<0&&v<0)return;c<0?w=v:v<0?w=c:w=Math.min(c,v);const T=s.substring(0,w);let D;if(s=s.substring(w+2).trim(),s.startsWith(fs)){const Z=s.split(/\r\n|\n/,1);Z.length===1&&(D=Z[0].substring(fs.length).split(",").map(ee=>(ee=ee.trim(),ee.startsWith("@")&&(ee=ee.substring(1)),ee)),s=s.substring(Z[0].length).trim())}let H;if(s.startsWith(Ei)){const Z=s.split(/\r\n|\n/,1);Z.length===1&&(H=Z[0].substring(Ei.length).split(",").map(ee=>ee.trim()).filter(ee=>ee),s=s.substring(Z[0].length).trim())}const V=s;if(!T||!V)return;const W=await this.doCreateIssue((e=this.createIssueInfo)==null?void 0:e.document,(r=this.createIssueInfo)==null?void 0:r.newIssue,T,V,D,H,(n=this.createIssueInfo)==null?void 0:n.lineNumber,(i=this.createIssueInfo)==null?void 0:i.insertIndex,Wa(u.window.activeTextEditor.document.uri));this.createIssueInfo=void 0,W&&await u.commands.executeCommand("workbench.action.closeActiveEditor")}async editQuery(e){const r=u.workspace.getConfiguration(pt),n=r.inspect(Vn);let i;if(n==null?void 0:n.workspaceValue)i="workbench.action.openWorkspaceSettingsFile";else{const c=r.get(Vn);(n==null?void 0:n.defaultValue)&&JSON.stringify(n==null?void 0:n.defaultValue)===JSON.stringify(c)&&r.update(Vn,n.defaultValue,u.ConfigurationTarget.Global),i="workbench.action.openSettingsJson"}await u.commands.executeCommand(i);const s=u.window.activeTextEditor;if(s){const v=s.document.getText().search(e.labelAsString);if(v>=0){const w=s.document.positionAt(v);s.revealRange(new u.Range(w,w)),s.selection=new u.Selection(w,w)}}}getCurrent(){const e=this._stateManager.currentIssues();if(e.length>0)return{owner:e[0].issue.remote.owner,repo:e[0].issue.remote.repositoryName,number:e[0].issue.number}}refreshView(){this._stateManager.refreshCacheNeeded()}async suggestRefresh(){return await u.commands.executeCommand("hideSuggestWidget"),await this._stateManager.refresh(),u.commands.executeCommand("editor.action.triggerSuggest")}openIssue(e){if(e instanceof Ct)return u.env.openExternal(u.Uri.parse(e.html_url))}async doStartWorking(e,r,n){let i=e,s=r.githubRepository,c=r.remote;if(!i){if(i=await this.chooseRepo("Choose which repository you want to work on this isssue in."),!i)return;s=await i.getOrigin(),c=s.remote}const v=await i.findUpstreamForItem({githubRepository:s,remote:c});v.needsFork&&await i.tryOfferToFork(s)===void 0||await this._stateManager.setCurrentIssue(i,new Jl(r,i,this._stateManager,v.remote,n))}async startWorking(e){e instanceof Ct&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e)}async startWorkingBranchPrompt(e){e instanceof Ct&&this.doStartWorking(this.manager.getManagerForIssueModel(e),e,!0)}async stopWorking(e){var r;let n=this.manager.getManagerForIssueModel(e);!n&&(n=await this.chooseRepo("Choose which repository you want to stop working on this issue in."),!n)||e instanceof Ct&&((r=this._stateManager.currentIssue(n.repository.rootUri))==null?void 0:r.issue.number)===e.number&&await this._stateManager.setCurrentIssue(n,void 0)}async statusBarActions(e){const r=`$(globe) Open #${e.issue.number} ${e.issue.title}`,n=`$(git-pull-request) Create pull request for #${e.issue.number} (pushes branch)`;let i;try{i=await e.manager.getPullRequestDefaults()}catch(w){}const s=`$(primitive-square) Stop working on #${e.issue.number}`,c=e.branchName&&i?[r,n,s]:[r,n,s];switch(await u.window.showQuickPick(c,{placeHolder:"Current issue options"})){case r:return this.openIssue(e.issue);case n:{const w=yn.getReviewManagerForFolderManager(this.reviewManagers,e.manager);if(w)return sf(e.manager,w,this._stateManager);break}case s:return this._stateManager.setCurrentIssue(e.manager,void 0)}}async statusBar(){const e=this._stateManager.currentIssues();if(e.length===1)return this.statusBarActions(e[0]);{const r=e.map(i=>({label:`#${i.issue.number} from ${i.issue.githubRepository.remote.owner}/${i.issue.githubRepository.remote.repositoryName}`,currentIssue:i})),n=await u.window.showQuickPick(r);if(n)return this.statusBarActions(n.currentIssue)}}stringToUint8Array(e){return new TextEncoder().encode(e)}copyIssueNumber(e){if(e instanceof Ct)return u.env.clipboard.writeText(e.number.toString())}copyIssueUrl(e){if(e instanceof Ct)return u.env.clipboard.writeText(e.html_url)}async createTodoIssueClipboard(){return this.createTodoIssue(void 0,await u.env.clipboard.readText())}async createTodoIssue(e,r){let n,i,s,c,v,w;if(!e&&u.window.activeTextEditor)n=u.window.activeTextEditor.document,w=n.getText(u.window.activeTextEditor.selection);else if(e)n=e.document,s=e.insertIndex,c=e.lineNumber,i=e.line.substring(s,e.line.length).trim(),w=n.getText(e.range.isEmpty?n.lineAt(e.range.start.line).range:e.range);else return;const T=w.match(Pa);T&&T.length===2&&(await this._stateManager.getUserMap(n.uri)).has(T[1])&&(v=[T[1]]);let D;const H=r||(e==null?void 0:e.document.isUntitled)?r:(await Oa(this.gitAPI,e)).permalink,V=u.window.createInputBox();V.value=i!=null?i:"",V.prompt="Set the issue title. Confirm to create the issue now or use the edit button to edit the issue title and description.",V.title="Create Issue",V.buttons=[{iconPath:new u.ThemeIcon("edit"),tooltip:"Edit Description"}],V.onDidAccept(async()=>{D=V.value,D&&(V.busy=!0,await this.doCreateIssue(n,e,D,H,v,void 0,c,s),V.busy=!1),V.hide()}),V.onDidTriggerButton(async()=>{D=V.value,V.busy=!0,this.createIssueInfo={document:n,newIssue:e,lineNumber:c,insertIndex:s},this.makeNewIssueFile(n.uri,D,H,v),V.busy=!1,V.hide()}),V.show()}async makeNewIssueFile(e,r,n,i){const s=`?{"origin":"${e.toString()}"}`,c=u.Uri.parse(`${Ir}:/${dg}${s}`);if(u.window.visibleTextEditors.filter(ee=>ee.document.uri.scheme===Ir).length>0)return;await u.workspace.fs.delete(c);const v=`${fs} ${i&&i.length>0?i.map(ee=>"@"+ee).join(", ")+" ":""}`,w=`${Ei} `,T=`${r!=null?r:"Issue Title"}

${v}
${w}

${n!=null?n:""}

<!-- Edit the body of your new issue then click the \u2713 "Create Issue" button in the top right of the editor. The first line will be the issue title. Assignees and Labels follow after a blank line. Leave an empty line before beginning the body of the issue. -->`;await u.workspace.fs.writeFile(c,this.stringToUint8Array(T));const D=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated usernames, either @username or just username.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),H=u.window.createTextEditorDecorationType({after:{contentText:" Comma-separated labels.",fontStyle:"italic",color:new u.ThemeColor("issues.newIssueDecoration")}}),V=u.window.onDidChangeActiveTextEditor(ee=>{if((ee==null?void 0:ee.document.uri.scheme)===Ir){const te=ee.document.lineAt(2);te.text.startsWith(fs)&&ee.setDecorations(D,[new u.Range(new u.Position(2,0),new u.Position(2,te.text.length))]);const ae=ee.document.lineAt(3);ae.text.startsWith(Ei)&&ee.setDecorations(H,[new u.Range(new u.Position(3,0),new u.Position(3,ae.text.length))])}}),W=await u.window.showTextDocument(c),Z=u.workspace.onDidCloseTextDocument(ee=>{ee===W.document&&(V.dispose(),Z.dispose())})}async verifyLabels(e,r){var n;if(!r.labels)return!0;const i=(await e.getLabels(void 0,r)).map(v=>v.name),s=[],c=[];if((n=r.labels)==null||n.forEach(v=>{let w=typeof v=="string"?v:v.name;!w||(i.includes(w)?c.push(w):s.push(w))}),s.length>0){const v="Yes",w="No";switch(await u.window.showInformationMessage(`The following labels don't exist in this repository: ${s.join(", ")}. 
Do you want to create these labels?`,{modal:!0},v,w)){case v:return!0;case w:return r.labels=c,!0;default:return!1}}return!0}async chooseRepo(e){const r=[];for(const i of this.manager.folderManagers)try{const s=await i.getPullRequestDefaults();r.push({label:`${s.owner}/${s.repo}`,repo:i})}catch(s){}if(r.length===0)return;if(r.length===1)return r[0].repo;const n=await u.window.showQuickPick(r,{placeHolder:e});return n==null?void 0:n.repo}async doCreateIssue(e,r,n,i,s,c,v,w,T){let D,H;if(e?H=this.manager.getManagerForFile(e.uri):T&&(H=this.manager.getManagerForFile(T)),H||(H=await this.chooseRepo("Choose where to create the issue.")),!H)return!1;try{D=await H.getPullRequestDefaults()}catch(ee){return u.window.showErrorMessage("There is no remote. Can't create an issue."),!1}const V=i||(r==null?void 0:r.document.isUntitled)?i:(await Oa(this.gitAPI,r)).permalink,W={owner:D.owner,repo:D.repo,title:n,body:V,assignees:s,labels:c};if(!await this.verifyLabels(H,W))return!1;const Z=await H.createIssue(W);if(Z){if(e!==void 0&&w!==void 0&&v!==void 0){const ee=new u.WorkspaceEdit,te=u.workspace.getConfiguration(pt).get("createInsertFormat","number")==="number"?`#${Z.number}`:Z.html_url;ee.insert(e.uri,new u.Position(v,w),` ${te}`),await u.workspace.applyEdit(ee)}else{const ee="Copy URL",te="Open Issue";u.window.showInformationMessage("Issue created",ee,te).then(async ae=>{switch(ae){case ee:await u.env.clipboard.writeText(Z.html_url);break;case te:await u.env.openExternal(u.Uri.parse(Z.html_url));break}})}return this._stateManager.refreshCacheNeeded(),!0}return!1}async getPermalinkWithError(e){const r=await Oa(this.gitAPI,void 0,e);return r.error&&u.window.showWarningMessage(`Unable to create a GitHub permalink for the selection. ${r.error}`),r}async getContextualizedPermalink(e,r){let n;try{n=await u.env.asExternalUri(e)}catch(v){return r}const i=n.scheme==="https"&&/^(vscode|github)\./.test(n.authority)?n.authority:void 0;if(!i)return r;const s=u.Uri.parse(r),c=/^(github)\./.test(n.authority)?s.path:`/github${s.path}`;return s.with({authority:i,path:c}).toString()}async copyPermalink(e){const r=await this.getPermalinkWithError(e);if(r.permalink)return u.env.clipboard.writeText(r.originalFile?await this.getContextualizedPermalink(r.originalFile,r.permalink):r.permalink)}getMarkdownLinkText(){if(!u.window.activeTextEditor)return;let e=u.window.activeTextEditor.selection;e.start.line!==e.end.line&&(e=new u.Range(e.start,new u.Position(e.start.line+1,0)));const r=u.window.activeTextEditor.document.getText(e);if(r)return r;if(e=u.window.activeTextEditor.document.getWordRangeAtPosition(e.start),e)return u.window.activeTextEditor.document.getText(e)}async copyMarkdownPermalink(){const e=await this.getPermalinkWithError(),r=this.getMarkdownLinkText();if(e.permalink&&r)return u.env.clipboard.writeText(`[${r.trim()}](${e.permalink})`)}async openPermalink(){const e=await this.getPermalinkWithError();if(e.permalink)return u.env.openExternal(u.Uri.parse(e.originalFile?await this.getContextualizedPermalink(e.originalFile,e.permalink):e.permalink))}}var Ig=Object.defineProperty,Dg=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ig(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Ag{constructor(){Dg(this,"_disposables"),this._disposables=[],this._disposables.push(u.window.registerFileDecorationProvider(this))}provideFileDecoration(e,r){if(e.scheme!=="filechange"&&e.scheme!==Pr)return;const n=it(e);if(n&&n.status!==void 0)return{propagate:!1,badge:this.letter(n.status)};const i=dt(e);if(i&&i.status!==void 0)return{propagate:!1,badge:this.letter(i.status)}}letter(e){switch(e){case Ce.MODIFY:return"M";case Ce.ADD:return"A";case Ce.DELETE:return"D";case Ce.RENAME:return"R";case Ce.UNKNOWN:return"U";case Ce.UNMERGED:return"C"}return""}dispose(){this._disposables.forEach(e=>e.dispose())}}var Fg=Object.defineProperty,gs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Fg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Og extends Ot{constructor(e,r,n,i,s,c){super();this.parent=e,this.pullRequestManager=r,this.pullRequest=n,this.commit=i,this.comments=s,this.isCurrent=c,gs(this,"sha"),gs(this,"collapsibleState"),gs(this,"iconPath"),gs(this,"contextValue"),this.label=i.commit.message,this.sha=i.sha,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed;let v;try{i.author&&i.author.avatar_url&&(v=u.Uri.parse(`${i.author.avatar_url}&s=${64}`))}catch(w){}this.iconPath=v,this.contextValue="commit"}getTreeItem(){return this}async getChildren(){var e;const n=((e=await this.pullRequest.getCommitChangedFiles(this.commit))!=null?e:[]).map(i=>{const s=this.comments.filter(T=>T.path===i.filename&&T.originalCommitId===this.commit.sha),c=i.filename,v=u.Uri.parse(h.posix.join(`commit~${this.commit.sha.substr(0,8)}`,c)),w=new Qn(this,this.pullRequestManager,this.pullRequest,vr(i.status),c,void 0,St(v,c,void 0,this.commit.sha,!0,{base:!1},this.pullRequestManager.repository.rootUri),St(v,c,void 0,this.commit.sha,!0,{base:!0},this.pullRequestManager.repository.rootUri),[],s,this.commit.sha,this.isCurrent);return w.useViewChangesCommand(),w});return Promise.resolve(n)}}var xg=Object.defineProperty,Ri=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?xg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class Mg extends Ot{constructor(e,r,n,i){super();Ri(this,"label","Commits"),Ri(this,"collapsibleState"),Ri(this,"_folderRepoManager"),Ri(this,"_pr"),Ri(this,"_comments"),this.parent=e,this._pr=n,this._folderRepoManager=r,this._comments=i,this.collapsibleState=u.TreeItemCollapsibleState.Collapsed}getTreeItem(){return this}async getChildren(){try{const e=await this._pr.getCommits(),r=e.map((n,i)=>new Og(this,this._folderRepoManager,this._pr,n,this._comments,i===e.length-1));return Promise.resolve(r)}catch(e){return Promise.resolve([])}}}var Lg=Object.defineProperty,Ja=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Lg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class qg extends Ot{constructor(e,r){super();this.parent=e,this._fileChanges=r,Ja(this,"label","Files"),Ja(this,"collapsibleState"),Ja(this,"directories",[]),this.collapsibleState=u.TreeItemCollapsibleState.Expanded;const n=new bn(this,"");this._fileChanges.forEach(i=>n.addFile(i)),n.finalize(),n.label===""?this.directories=n.children:this.directories=[n]}getTreeItem(){return this}async getChildren(){let e;return u.workspace.getConfiguration("githubPullRequests").get("fileListLayout")==="tree"?e=this.directories:e=this._fileChanges,Promise.resolve(e)}}var Ug=Object.defineProperty,vs=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Ug(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class $g extends wn{constructor(e,r,n,i,s){super(e,r.title,r.userAvatarUri,r);this.parent=e,this._pullRequest=r,this._pullRequestManager=n,this._comments=i,this._localFileChanges=s,vs(this,"_filesCategoryNode"),vs(this,"_commitsCategoryNode"),vs(this,"collapsibleState",u.TreeItemCollapsibleState.Expanded),vs(this,"_disposables",[]),this.label=this._pullRequest.title,this._disposables.push(u.window.onDidChangeActiveTextEditor(c=>{const v=c==null?void 0:c.document.uri.toString();this.revealActiveEditorInTree(v)})),this._disposables.push(this.parent.view.onDidChangeVisibility(c=>{var v;const w=(v=u.window.activeTextEditor)==null?void 0:v.document.uri.toString();this.revealActiveEditorInTree(w)}))}revealActiveEditorInTree(e){if(this.parent.view.visible&&e){const r=this._localFileChanges.find(n=>n.filePath.toString()===e);r&&this.reveal(r,{select:!0})}}async getChildren(){return(!this._filesCategoryNode||!this._commitsCategoryNode)&&(this._filesCategoryNode=new qg(this.parent,this._localFileChanges),this._commitsCategoryNode=new Mg(this.parent,this._pullRequestManager,this._pullRequest,this._comments)),[this._filesCategoryNode,this._commitsCategoryNode]}getTreeItem(){return this}dispose(){this._disposables.forEach(e=>e.dispose()),this._disposables=[]}}var Hg=Object.defineProperty,Ci=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Hg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class rc extends u.Disposable{constructor(e){super(()=>this.dispose());this._context=e,Ci(this,"_onDidChangeTreeData",new u.EventEmitter),Ci(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Ci(this,"_disposables",[]),Ci(this,"_pullRequestManagerMap",new Map),Ci(this,"_view"),this._view=u.window.createTreeView("prStatus:github",{treeDataProvider:this,showCollapseAll:!0}),this._context.subscriptions.push(this._view),this._disposables.push(u.workspace.onDidChangeConfiguration(async r=>{if(r.affectsConfiguration(`${ir}.fileListLayout`)){this._onDidChangeTreeData.fire();const n=u.workspace.getConfiguration(`${ir}`).get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",n==="flat")}else r.affectsConfiguration("git.openDiffOnClick")&&this._onDidChangeTreeData.fire()}))}get view(){return this._view}refresh(){this._onDidChangeTreeData.fire()}updateViewTitle(){let e;if(this._pullRequestManagerMap.size===1){const r=this._pullRequestManagerMap.values().next();r.done||(e=r.value.pullRequestModel.number)}this._view.title=e?`Changes in Pull Request #${e}`:"Changes in Pull Request"}async addPrToView(e,r,n,i,s){const c=new $g(this,r,e,i,n);this._pullRequestManagerMap.set(e,c),this.updateViewTitle(),await u.commands.executeCommand("setContext","github:inReviewMode",!0),this._onDidChangeTreeData.fire(),s&&this._view.reveal(c)}async removePrFromView(e){this._pullRequestManagerMap.delete(e),this.updateViewTitle(),this._pullRequestManagerMap.size===0&&this.hide(),this._onDidChangeTreeData.fire()}async hide(){await u.commands.executeCommand("setContext","github:inReviewMode",!1)}getTreeItem(e){return e.getTreeItem()}getParent(e){return e.getParent()}async reveal(e,r){this._view.reveal(e,r)}async getChildren(e){if(e)return await e.getChildren();{const r=[];if(this._pullRequestManagerMap.size>=1)for(const n of this._pullRequestManagerMap.values())r.push(n);return r}}getDescriptionNode(e){return this._pullRequestManagerMap.get(e)}async resolveTreeItem(e,r){return r instanceof Qn&&await r.resolve(),r}dispose(){this._disposables.forEach(e=>e.dispose())}}var Gg=Object.defineProperty,Yr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Gg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r),Dr;(function(t){t[t.Empty=0]="Empty",t[t.More=1]="More",t[t.TryOtherRemotes=2]="TryOtherRemotes",t[t.Login=3]="Login",t[t.NoRemotes=4]="NoRemotes",t[t.NoGitRepositories=5]="NoGitRepositories",t[t.NoOpenFolder=6]="NoOpenFolder",t[t.NoMatchingRemotes=7]="NoMatchingRemotes",t[t.ConfigureRemotes=8]="ConfigureRemotes",t[t.Initializing=9]="Initializing"})(Dr||(Dr={}));class pr extends Ot{constructor(e,r,n){super();switch(Yr(this,"collapsibleState"),Yr(this,"iconPath"),Yr(this,"type"),Yr(this,"command"),this.parent=e,this.type=r,this.collapsibleState=u.TreeItemCollapsibleState.None,r){case 0:this.label="0 pull requests in this category";break;case 1:this.label="Load more",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 2:this.label="Continue fetching from other remotes",this.command={title:"Load more",command:"pr.loadMore",arguments:[n]};break;case 3:this.label="Sign in",this.command={title:"Sign in",command:"pr.signinAndRefreshList",arguments:[]};break;case 4:this.label="No GitHub repositories found.";break;case 5:this.label="No git repositories found.";break;case 6:this.label="You have not yet opened a folder.";break;case 7:this.label="No remotes match the current setting.";break;case 8:this.label="Configure remotes...",this.command={title:"Configure remotes",command:"pr.configureRemotes",arguments:[]};break;case 9:this.label="Loading...";break;default:break}}getTreeItem(){return this}}class Za extends Ot{constructor(e,r,n,i,s,c){super();switch(this.parent=e,this._folderRepoManager=r,this._telemetry=n,this._type=i,this._categoryQuery=c,Yr(this,"collapsibleState"),Yr(this,"prs"),Yr(this,"fetchNextPage",!1),Yr(this,"repositoryPageInformation",new Map),this.prs=[],this.collapsibleState=this._type===wt.All?u.TreeItemCollapsibleState.Expanded:u.TreeItemCollapsibleState.Collapsed,i){case wt.All:this.label="All Open";break;case wt.Query:this.label=s;break;case wt.LocalPullRequest:this.label="Local Pull Request Branches";break;default:break}}async getChildren(){this.childrenDisposables&&this.childrenDisposables.length&&(this.childrenDisposables.forEach(i=>i.dispose()),this.childrenDisposables=[]);let e=!1,r=!1,n=!1;if(this._type===wt.LocalPullRequest)try{this.prs=await this._folderRepoManager.getLocalPullRequests(),this._telemetry.sendTelemetryEvent("pr.expand.local")}catch(i){u.window.showErrorMessage(`Fetching local pull requests failed: ${Q(i)}`),n=i instanceof Ji}else if(this.fetchNextPage){try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!0},this._categoryQuery);this.prs=this.prs.concat(i.items),e=i.hasMorePages,r=i.hasUnsearchedRepositories}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${Q(i)}`),n=i instanceof Ji}this.fetchNextPage=!1}else try{const i=await this._folderRepoManager.getPullRequests(this._type,{fetchNextPage:!1},this._categoryQuery);switch(this.prs=i.items,e=i.hasMorePages,r=i.hasUnsearchedRepositories,this._type){case wt.All:this._telemetry.sendTelemetryEvent("pr.expand.all");break;case wt.Query:this._telemetry.sendTelemetryEvent("pr.expand.query");break}}catch(i){u.window.showErrorMessage(`Fetching pull requests failed: ${Q(i)}`),n=i instanceof Ji}if(this.prs&&this.prs.length){const i=this.prs.map(s=>new Yn(this,this._folderRepoManager,s,this._type===wt.LocalPullRequest));return e?i.push(new pr(this,1,this)):r&&i.push(new pr(this,2,this)),this.childrenDisposables=i,i}else{const i=n?3:0,s=[new pr(this,i)];return this.childrenDisposables=s,s}}getTreeItem(){return this}}var Vg=Object.defineProperty,nc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Vg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);const ic="queries";class Si extends Ot{constructor(e,r,n,i){super();this.folderManager=n,this.telemetry=i,nc(this,"collapsibleState"),nc(this,"iconPath"),this.parent=e,this.collapsibleState=u.TreeItemCollapsibleState.Expanded,this.label=h.basename(r.fsPath)}static getQueries(e){return u.workspace.getConfiguration(ir,e.repository.rootUri).get(ic)||[]}getTreeItem(){return this}async getChildren(){return Si.getCategoryTreeNodes(this.folderManager,this.telemetry,this)}static getCategoryTreeNodes(e,r,n){const i=Si.getQueries(e).map(s=>new Za(n,e,r,wt.Query,s.label,s.query));return[new Za(n,e,r,wt.LocalPullRequest),...i,new Za(n,e,r,wt.All)]}}var Bg=Object.defineProperty,Xr=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Bg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class sc{constructor(e){this._telemetry=e,Xr(this,"_onDidChangeTreeData",new u.EventEmitter),Xr(this,"onDidChangeTreeData",this._onDidChangeTreeData.event),Xr(this,"_onDidChange",new u.EventEmitter),Xr(this,"_disposables"),Xr(this,"_childrenDisposables"),Xr(this,"_view"),Xr(this,"_reposManager"),Xr(this,"_initialized",!1),this._disposables=[],this._disposables.push(u.workspace.registerTextDocumentContentProvider("pr",Bl())),this._disposables.push(u.window.registerFileDecorationProvider(Ml)),this._disposables.push(u.window.registerFileDecorationProvider(qa)),this._disposables.push(u.commands.registerCommand("pr.refreshList",r=>{this._onDidChangeTreeData.fire()})),this._disposables.push(u.commands.registerCommand("pr.loadMore",r=>{r.fetchNextPage=!0,this._onDidChangeTreeData.fire(r)})),this._view=u.window.createTreeView("pr:github",{treeDataProvider:this,showCollapseAll:!0}),this._disposables.push(this._view),this._childrenDisposables=[],this._disposables.push(u.commands.registerCommand("pr.configurePRViewlet",async()=>{switch(await u.window.showQuickPick(["Configure Remotes...","Configure Queries..."])){case"Configure Queries...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${tt} queries`);case"Configure Remotes...":return u.commands.executeCommand("workbench.action.openSettings",`@ext:${tt} remotes`);default:return}})),this._disposables.push(u.workspace.onDidChangeConfiguration(r=>{r.affectsConfiguration(`${ir}.fileListLayout`)&&this._onDidChangeTreeData.fire()}))}get onDidChange(){return this._onDidChange.event}get view(){return this._view}async reveal(e,r){return this._view.reveal(e,r)}initialize(e){if(this._initialized)throw new Error("Tree has already been initialized!");this._initialized=!0,this._reposManager=e,this._disposables.push(this._reposManager.onDidChangeState(()=>{this._onDidChangeTreeData.fire()})),this._disposables.push(...this._reposManager.folderManagers.map(r=>r.onDidChangeRepositories(()=>{this._onDidChangeTreeData.fire()}))),this.initializeCategories(),this.refresh()}async initializeCategories(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{e.affectsConfiguration(`${ir}.${ic}`)&&this.refresh()}))}refresh(e){return e?this._onDidChangeTreeData.fire(e):this._onDidChangeTreeData.fire()}getTreeItem(e){return e.getTreeItem()}async resolveTreeItem(e,r){return r instanceof ms&&await r.resolve(),r}needsRemotes(){var e;return((e=this._reposManager)==null?void 0:e.state)===Yt.NeedsAuthentication?Promise.resolve([]):u.workspace.getConfiguration(ir).get(mi)?Promise.resolve([new pr(this,Dr.NoMatchingRemotes),new pr(this,Dr.ConfigureRemotes)]):Promise.resolve([new pr(this,Dr.NoRemotes)])}async getChildren(e){if(!this._reposManager)return u.workspace.workspaceFolders?Promise.resolve([new pr(this,Dr.NoGitRepositories)]):Promise.resolve([new pr(this,Dr.NoOpenFolder)]);if(this._reposManager.state===Yt.Initializing)return Promise.resolve([new pr(this,Dr.Initializing)]);if(this._reposManager.folderManagers.filter(r=>r.getGitHubRemotes().length>0).length===0)return this.needsRemotes();if(!e){this._childrenDisposables&&this._childrenDisposables.length&&this._childrenDisposables.forEach(n=>n.dispose());let r;return this._reposManager.folderManagers.length===1?r=Si.getCategoryTreeNodes(this._reposManager.folderManagers[0],this._telemetry,this):r=this._reposManager.folderManagers.map(n=>new Si(this,n.repository.rootUri,n,this._telemetry)),this._childrenDisposables=r,Promise.resolve(r)}return this._reposManager.folderManagers.filter(r=>r.repository.state.remotes.length>0).length===0?Promise.resolve([new pr(this,Dr.Empty)]):e.getChildren()}async getParent(e){return e.getParent()}dispose(){this._disposables.forEach(e=>e.dispose())}}var jg=Object.defineProperty,ac=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?jg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class zg{constructor(e){this.gitAPI=e,ac(this,"_onDidChange",new u.EventEmitter),ac(this,"_fallback")}get onDidChange(){return this._onDidChange.event}async provideTextDocumentContent(e,r){if(!this._fallback)return"";const{path:n,commit:i,rootPath:s}=Wt(e.query);if(!n||!i)return"";const c=ol(this.gitAPI,u.Uri.file(s));if(!c)return u.window.showErrorMessage(`We couldn't find an open repository for ${i} locally.`),"";const v=h.join(c.rootUri.fsPath,n).replace(/\\/g,"/");let w;try{if(w=await c.show(i,v),!w)throw new Error}catch(T){if(w=await this._fallback(e),!w)try{await c.getCommit(i)}catch(D){u.window.showErrorMessage(`We couldn't find commit ${i} locally. You may want to sync the branch with remote. Sometimes commits can disappear after a force-push`)}}return w||""}registerTextDocumentContentFallback(e){this._fallback=e}}var Qg=Object.defineProperty,oc=(t,e,r)=>(typeof e!="symbol"&&(e+=""),e in t?Qg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r);class uc{constructor(e,r,n,i,s,c,v){this._context=e,this._reposManager=r,this._reviewManagers=n,this._prsTreeDataProvider=i,this._prFileChangesProvider=s,this._telemetry=c,oc(this,"_disposables"),this._disposables=[];const w=new zg(v);w.registerTextDocumentContentFallback(this.provideTextDocumentContent.bind(this)),this._disposables.push(u.workspace.registerTextDocumentContentProvider("review",w)),this.registerListeners(),this._disposables.push(this._prsTreeDataProvider)}registerListeners(){this._disposables.push(u.workspace.onDidChangeConfiguration(async e=>{if(e.affectsConfiguration("githubPullRequests.showInSCM")){if(this._prFileChangesProvider){this._prFileChangesProvider.dispose(),this._prFileChangesProvider=new rc(this._context);for(const r of this._reviewManagers)r.updateState(!0)}this._prsTreeDataProvider.dispose(),this._prsTreeDataProvider=new sc(this._telemetry),this._prsTreeDataProvider.initialize(this._reposManager),this._disposables.push(this._prsTreeDataProvider)}}))}async provideTextDocumentContent(e){for(const r of this._reviewManagers)if(e.fsPath.startsWith(r.repository.rootUri.fsPath))return r.provideTextDocumentContent(e);return""}dispose(){this._disposables.forEach(e=>{e.dispose()})}}oc(uc,"ID","Reviews");const Wg="AIF-d9b70cd4-b9f9-4d70-929b-a071c400b217";let Pt;const lc="prompts",cc="createPROnPublish";async function dc(t,e,r,n,i,s,c){t.subscriptions.push(a),a.appendLine("Git repository found, initializing review manager and pr tree view."),u.authentication.onDidChangeSessions(async te=>{te.provider.id==="github"&&(await T.clearCredentialCache(),H&&H.forEach(ae=>ae.updateState(!0)))}),t.subscriptions.push(e.onDidPublish(async te=>{if(!te.branch||xu(lc,cc)===!1)return;const ae=H.find(ke=>ke.repository.rootUri.toString()===te.repository.rootUri.toString());if(ae==null?void 0:ae.isCreatingPullRequest)return;const me="Create Pull Request...",fe="Don't Show Again",ce=await u.window.showInformationMessage(`Would you like to create a Pull Request for branch '${te.branch}'?`,me,fe);ce===me?u.commands.executeCommand("pr.create"):ce===fe&&Mu(lc,cc,!1)})),t.subscriptions.push(u.window.registerUriHandler(Gt)),t.subscriptions.push(new Ag);const v=u.workspace.workspaceFolders;v&&(n=n.sort((te,ae)=>{let me=v.length,fe=v.length;for(let ce=0;ce<v.length&&(v[ce].uri.toString()===te.rootUri.toString()?me=ce:v[ce].uri.toString()===ae.rootUri.toString()&&(fe=ce),!(me!==v.length&&fe!==v.length));ce++);return me-fe}));const w=n.map(te=>new jn(t,te,Pt,e,r));t.subscriptions.push(...w);const T=new Wl(w,r,Pt);t.subscriptions.push(T),s.then(te=>{te&&te.registerContactServiceProvider("github-pr",new sg(T))});const D=new rc(t);t.subscriptions.push(D);const H=w.map(te=>new yn(t,te.repository,te,Pt,D,c)),V=new uc(t,T,H,i,D,Pt,e);t.subscriptions.push(V),e.onDidChangeState(()=>{a.appendLine(`Git initialization state changed: state=${e.state}`),H.forEach(te=>te.updateState(!0))}),e.onDidOpenRepository(te=>{const ae=te.state.onDidChange(()=>{if(a.appendLine(`Repo state for ${te.rootUri} changed.`),T.getManagerForFile(te.rootUri)){a.appendLine(`Repo ${te.rootUri} has already been setup.`);return}const fe=new jn(t,te,Pt,e,r);T.insertFolderManager(fe);const ce=new yn(t,fe.repository,fe,Pt,D,c);H.push(ce),i.refresh(),ae.dispose()})}),e.onDidCloseRepository(te=>{T.removeRepo(te);const ae=H.findIndex(me=>me.repository.rootUri.toString()===te.rootUri.toString());if(ae){const me=H[ae];H.splice(ae),me.dispose()}i.refresh()}),i.initialize(T),Ip(t),qf(t,T,H,Pt,r,i);const W=u.workspace.getConfiguration("githubPullRequests").get("fileListLayout");await u.commands.executeCommand("setContext","fileListLayout:flat",W==="flat");const Z=new Pg(e,T,H,t,Pt);t.subscriptions.push(Z),await Z.initialize(),t.subscriptions.push(new og),await u.commands.executeCommand("setContext","github:initialized",!0);const ee=await Vf(t,Pt);await ee.initializePromise,await ee.isCachedFlightEnabled("githubaa"),Pt.sendTelemetryEvent("startup")}async function Kg(t){if(tt==="GitHub.vscode-pull-request-github-insiders"&&u.extensions.getExtension("github.vscode-pull-request-github")!==void 0)throw new Error("GitHub Pull Requests and Issues Nightly cannot be used while GitHub Pull Requests and Issues is also installed. Please ensure that only one version of the extension is installed.");const e=new Df;u.commands.registerCommand("github.api.preloadPullRequest",async i=>{await u.commands.executeCommand("setContext",Vt,!0),await u.commands.executeCommand("github:activePullRequest:welcome.focus"),e.shouldShow=i}),or.initialize(t);const r=new Ut,n=u.extensions.getExtension(tt).packageJSON.version;return Pt=new $f(new R.Z(tt,n,Wg)),t.subscriptions.push(Pt),Yg(t,r,e),r}async function Yg(t,e,r){Hm(t);const n=new Qm(Pt);t.subscriptions.push(n),await n.initialize(He.github),Gn()&&await n.initialize(He["github-enterprise"]);const i=await ng(n,e);i&&t.subscriptions.push(i);const s=rg(e);t.subscriptions.push(s);const c=s.initialize();t.subscriptions.push(e);const v=new sc(Pt);t.subscriptions.push(v),a.appendLine("Looking for git repository");const w=e.repositories;a.appendLine(`Found ${w.length} repositories during activation`),w.length>0?await dc(t,e,n,w,v,c,r):(a.appendLine("Waiting for git repository"),q(e.onDidOpenRepository)(async T=>{a.appendLine(`Repository ${T.rootUri} opened`),await dc(t,e,n,[T],v,c,r)}))}async function Xg(){Pt&&Pt.dispose()}})(),module.exports=ys})();
